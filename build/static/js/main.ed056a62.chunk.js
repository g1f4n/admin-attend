/*! For license information please see main.ed056a62.chunk.js.LICENSE.txt */
(this["webpackJsonpargon-dashboard-react"]=this["webpackJsonpargon-dashboard-react"]||[]).push([[0],{1154:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAANbY1E9YMgAABPNJREFUWMO1lwtMm1UUx29pWYUCC21nVhzvxyaP8iqUMh6jDygwSikC5SlvRFgmgmOgA1Y2trn5ntscTKZxGh9TMVt0WUQzpqjRqclMJJnJ3Ey2+VhMjBI24Hjut6RA+1XZnTb55cv9er9z//fcc8+5lwAA4cPS8ysp7r1OTF2XSFbtaZJS/DKJNQwJg+Nr1N6y0F6BQDBCCDlKn96ykG2BMaWp8ca9ohTLKNlQ8wExdf7IfU/tuBqDQv5NQGHXZaJv+oTEaPvjJT5+p0Qi91mZXzyEJtbDuvUdEKpqANkaFeD7OYmPYjwqs0etazjDCf9PBFiQqIyt9+NsZwKiLGBs+xasg/NQtRvslO+Yh7xN30GQ0ooWyey61Ida7d/fiYDS/hmSkPtEnUBAQG0Zhao9ABVDAFbbPJRtn13ANse9p/+nlr4Gbm5uoNQNttHvmQWYu6+QzOoTKhz8hqb4KFTvBRxsbunATsxBDfZLs75JPTGfZn0r3dx9lU1ATus54quIPeWPbq/es5zBF6h+HACDFXzkERPZLV+ImATEZu9Od3MTQm77N1CxE5Y9OKUc+xd0TIFQ6A7RWdtymARIFfGP+SqUnDHH2RuaP8VdUAseEhn3pG3HpaAxsSpATb1gYxKAv+EgZRkX5Y4zpIOKRCI7tO3YhwZkmKqeGhphFTAaltTIGXI0Tme+WABt8wm4F/MEtcMkAKP/UEC05Y48EBJfDQJCDjMJuDsoo2ulPByTzhy3z283BmjsSBWxILsn8VEmAaqNzydgnp8xNJ2ByqHb2wU0AI1tX4JA4DafYNyXxiRA33QWvZD+KgKVu3iynyvQW3TZ/CKMOHvVmB7rApOAIsxg6NpQobv4ulJnW3Yyov0wfWM6Fv2ha/gosqj7Gmst+I2UYS7XFL+kx0ieTsx/hndHOAae2nKERv7NJNPBgtKBG5wdZgGcCDSiNg8Xo1HYUHOCd1dQ6DIZmidw3QXUA3WlA7cKEXsx2nLFTkn/NIlIaR8QS+Rg6bmK5XepCCvmurKBv8BbGgrBsVX7qeiinl9I0dafOZgEFDx80Y6p8xIpfOQnoY987WRwXKWTF2g7WtsHYg/fH/I2nV9Z0HmRbOy4YIdJgPHBr5eQv3mKJJuHtXQpctvO2QuUdRDQK9dAtMITYrQD9XTAHOy/GCYB2vpxJwwtn2GJjjsZGLNQI+gzLnsXiD2lU/rGs2JD8yR3hFsMcx5wJKf1K5KY97RBKBJD4ZbLt2LBNgte0mAIS2rppJ7SN044wSQgo2LMmcr38Pmu+wqx94Vk82Go2YeR3zKJdV80nV45Fmho+dxp9sweWF/2Bi+ZVSfJ6hDtczTT1T4F9MABXr5BE9q6cTyOv88LkwB10Yu8aO47RtZqNud6eK3CGLiJhw4NrIk096ZXvENSS47xwiQAI54XddERkpD3pMJdLPlT1/AxeHqvhqjM3rTUklcIvZTwwSQgRrfdBTai1A8SD4n8+8iMbrhLIvtdlf+sLIV6yDzCC5sAbb9LYg07iY8s5EO5fzKuf8D55MIXSJLpEHKQFyYBYUnNLsG0THzk4a+vEEvw0Bl+WqnfQaKz+lzyvwjAO8MBmhW9pcHH8ehF8FrmEiYBSaYDLqGB5R9Z2EcFKMIM+/E65nLXUJgEuNpSlPTyt0l48gM1VADegNrTKo4TDe4CV/yTgL8Bg0AIlCA8gh8AAAAASUVORK5CYII="},1155:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAANbY1E9YMgAABHxJREFUWIWtl3ls1EUUx9+8mW5rty6llW53W+i2225Lr92eC/Sk0XiLsanxQLQGY4yYKJcKUlASRcshoRICjUgwGkKqrUpC09A/ROIVz0KiiUgEbyMSj5Aq8nzz21hKf7+fwOAf30xmfzvvfWbmvTczQETgJBiZAXCI9V49iJcrADeWAD6SL2VHIC5D3mUKsVeBeEEJbvO8K+QN/lm4okCJ9cUgXiwHeLc+MZ7tuPmw/JwXQH8UcGGoSmVfMqg86pSs8JG8JUB4Ty7hrQGSsUmkPEl/8/dhfCAvLvoqrXH/D8ChmYALpt3Jsx2V12SRGKom+KaJ4HgLwc8tiZb7YriG8EY/KcBTOD/3vrHxFwXwZQNgV7iTjRIvbcLZD80ERxsJvhon3de//9JKYvN04u0hXBq6X483B/goDmJHeS3P/E98lp3/2mp3PFH6O/9PbC3llRCnuW2Cj+NmAGJvNciySwfltVOsmf2n44k60UrYkU0q7N0v9sSUEQA+mt+kpCSxr4bg++YLA/iumcSBOlJJkvDBvCuNAFS57zFZ5mNjTbalF/0xkjcHSE1Otlrdt0H82EyyJp1UQdoTZgCA2yRHtRV4E4xbzpUak+7bAHgc3hbUWdFrCADbcW6Q998OoGc+HkD3HQHunUrajiGA3CKvy0rkuukKdAT0Cmw1ApAzJi+W4TSCrw1i4GgiEHUMqUrfcrMseLKoWqEc5TJsBdQFZQEXJTFYzQVJnsaugkazOvBqFGQ8/SUWwU8McOw8nevZ87bJ2Rmkor4B8UrUsBJyBYOBWFgly+O4JMTFxR4LrkVoZZhjA38TuytLjSshHOSz4EgDiI3Fl3NZPYmrC89dEfk78pnB//8L1xRdr8drO+YA/0J0R9rZKImdFY5ZYYm3SbwWI74fkFgZ7rScj1zMafhh/IwOzwLszFmlMjzEBgm+bTrb+THuH+H0DKWSvMnfYzn/lJ1/kpBZEL5Tf0b6cvF+XKpC79uy3W9fBZ3zi0Kk0j2HYbhmknUbOlA3JjOAweqz9WYtYHekzdqKoXEHlL6cjMwklao0xN3irTrbWDOA3ZV2vRHTR/QeOWdchdSzX17ARcnzOadushiIWle48TID6LcbEnurAB8vvEIlK4IP4olY4LyXeamEdwQXWTPmvJ8oM4Dny+zabrVJKs3zBa6NEPw+m8TrHPlKnuTf8/QKOYGbAWyZ7qwdZSAbMjbJtkyC0TbChzj4pqbuF7sqQOwsd5QRAK6LOGtTCcj5uVery1ISy1+bTvKqKctEbykI/uYkM4DuiLPWFQOuCgeU1/OH6IuSykohfgs0Ws70o8RBZgCLQ+5aEgKVmfIZvxdIZSSfEKsLM8X6CIi1zjIDWBhy18P5wM+zfbKKX0S5qQfxmSLAp1lrnGUGMDfors4c4MvKLt4GkgVpQ7g0HzgYXWUGcHvQXXcxQKlvs34xyWnePmzPBpzjd5VZGj5V5K4NxcCR38UXTpItmT3iOQ5AzhA3mQH0lLiLUw7n5czTAPwCWiC2uafgudLwHy3o6Qne/mPvAAAAAElFTkSuQmCC"},1156:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAANbY1E9YMgAABPxJREFUWIWll3lMVEccxwfecsmuspwix3IZBASEBZd7hYJcRdhdLiuWu9aIUQQscmkwxquIXMYighQrRWuF3sRo0tjG0KYNrZq0SS2p9rBtSu0Vo7X++vstZoPLPo/xj29e5r03M5/5ze+YYQDATOlSRje7ktnDPkk9wIZjt7IO5QusPihPyFPEqRRSlwYzM7M+xtgxhk+F1Lk5y10V07S0UHIgvIIdj61lE6lt+v40jtgcJNEPeoCMGYDRhCZWHZAT5mIjH7cQJHeD5V5Q4JUAlX5pUOilhlB7H7CQSP5zmSc/X+WfpTod36DvR/2fDgBXcCXzEKvyf7YYV3s73S0CzibthB9yBmFaN2zQj5pBOP/MLsj2iMIR2d0Kv9T1lzJ6nt4CU6v6WEvw6lI0M7SFl8N07jD8rD0O17IH4LvsfoOoTe9v5r4OPZHrwdzcHOoCdRu+xf7cAJ+nd7DB6OoIZsbutCsr4c+8kzhR/wMTG4u+03+vqKoA+93rVVXFT+I4XADvJ7ayQDvP8Qy3SPgdV/awiY31R+4IoLOCj8z1wjsrtku4ALYF5ccLaMpzuLc3tENPBPCT5lX4OGUfSAQBNi/JTuUCCLJTNKEF9IMZm35U3QT5XvEgt5bpn9Q2hvgFfULp4EdWaOUCwD08Ql5NXm48OE0qkUgMorbxP7Rtq73VFBV9fACMDazxTjS5/7Ty2QDUNv6HImbd4nQaaIDXAocz3SO5LUAAueiICNDLBaBy8q/1me8K3+ccmxP3j/KBa/cdkXwIs2YjF8Cu0LXhmO9vYxpGh3rtiaKAktJ4Yitg/3vNwYVxXABnEhrZckf/EypHf/gVAa7nDDzW5GQt2rbEhSEQIvceo7rABTCZ1snG1E2+VoLFdG2gVp9mHweA/sP0DYK58NepuPrAyfROPoDLWEyoFhxUViajI93aGVr0yIxI37Eck+P9u3tZcdbUqqP6cTgBuvWiQfaHleowKmAopgZ+050wOTlt05i6mfadLFA6db8Q8RejtA6DrmYdYaW+KTvkVjLAAfXld/bk1zFSprKPgpfUBbQeMd0E/WVGF/sifUZcABdXvmzQBB4uPk1rF3xlrhe1njFzrEBOtyVAAwssba9i7VgwgX2wFhjEBfABVsPZ+jB5D9sXVpaE+6s/lNzQzBQoOpyQVWwkVlAToCn7CCc07ssFcDKufo7eVrdgkfJ8N9tdZbACrb4xqADsrKRfv5nQaDWqbsYQbnpA3HnAWO8l7mA7QtakWAoW8FnaQfQFrJSYHzxtnaDIO7GGVktxbywugP6oTXM0ELWZnhZSS5tv9oeXwd/5pwCtAoIg3OpXbVK8hRYyXj23BQ4v32BSg9FbWIxzYFcSZro7BWegekkOeEidLozEvsSGomtMigsAD6Em1RWxjpX7rUx3tJ6vT7sRDoshdVF4Q59qo/6bKXEBoIlNqk1ZwbaHPOc6z8L6nzfit4GzjR1s9M+Ko4noUmJKXAC1ARpR1QVomb217Cu8LwA+b7aGFjm0KctFobkA8CYkqq1BOqaQuZwLs/cFN1vHy3vDStieZcVst4i4APA4JqoS3xSGh80R3Abwli08WxeoZXj6FRUnwApRlfgm053hEGVFT6nzaZ0iluEBVlRcAGLmJLWjI6YtUrYQQILL0m68jolGDYkLoDviRVFRyK31SXqeAPDgWdWL7U6MAjE9DOB/ACYAniv5fpoAAAAASUVORK5CYII="},1157:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAANbY1E9YMgAABQNJREFUWMOtl3lMm2Ucxx/6trScBUtBjjCuArMD2gJtgUIHLZSOs9ByjbuwgTgEOWa4jzExRoluWeaGO7K4aJYZp5mGqNOMOeIVjFEjyZboJNF5TBOjc+P4+TxvtsrgrbJH//ikefq+7/P7Pr/ndzwPAgDERW/xz2iv5RfUWfAtqt3+NirVnkLZiklGFVmvkfrI+hiGN40QOsFjXKal4qjB+LCK1Fzl03yL5gSq0c+gzvxr7PdkHmc2COjfBSwiu/EyyoobUfp6hcwIhaLlEGkSJEbZIW1rFyRFNUOovxpchaIV/PyCXt6vacy6yAr/XwQQMuR9dS4MurVtixVaTZ/BSPkqTFSCg1E8bsv9EhLCq8CFh5ZTYztb737/nwQMWG+jXNVUA3Y3YNfCRBXAeAXAsG0VhmzLDoZtK+z/+/FzW+pLwDAMGOIn2sj31AK6C79HOzPeSOLxXG6XaE/CEzsBG1u5x/BGVtj3ynVniCdWy3Vn07uLrtMJaMmZR0ES5Yw8tBT2b8r43xARyog6kPrEzO7K/ohPJSBH8WQ6X8CHh3M/hbEK2LRxwmg5wKN5CyBwFUJm3LCJSkCwn2ogSKJgJ1u/ervhMl5hPXi4SdhfMl6/FSQmtgSkgL9v7BiVAB6DjiaEV7KBt36FxCifz3dAxuvfId8lyZoAZ880lQDkgo6rZbs4BZCVrxVAxlwCdLhOkHmoBDB83uG4MCub57QeUEXWAfbkESoBEQ/qu/H+wUjZCpvn9xsDYzh2gv0UECJN7qcSkJ90SMXwmVt2w0U2oO4nC0jWtJo+Bvz9Ku4POioBdsP7KCwg43RYgB724W0YLlvdlHHiLbJt0UFmCPFLPkf6ApWAHlwJm4xzka4CtxuG+HG2zG6mGJH3zKpncGwIfmvIeu+hHtpK2Ft8g+0FJdpTRsRDN/MSn7sjwrlxEngWzTES+UsFyc8XDFqX2HmoBRDIJEXq6VJc26FGf57dDi7jJE6ajJeANK5c5VTD3UZE3Yy6Cr9jIU2pv/RPpI1pH/F0k8Jey/U71XHNvpcBDNr+AD9vGSjCaw4O2ojxn1BP0Y8sVAI68r920FlwDT1WsMhIfbbOKcKrNxQnMsY1HzxED1xtM38h7sj/BrXnXXVA3Q3XsmfHAtmKLLIVraZ5R4MawavvLf4BhK6ekBU32tiedwW1mObvgUpAfea7G2g2fkha9Hl8/nNUSLL6HMUkeLpLFuyGS8ImwxybwmuhrgPr2Z3zCdqR+Gy2q6sIugoX2VgYxiIk3hGglrV0kdU2GmY3QCWgMv21DVSlv05+Be5u4itF6qMwWQ3QnD2H+77gZlX6uS3Nxg84hVMJKEs7wwk+pqGoQMOBmBAzPFVLgm8IJOKI2brMC6ha/yYnVAKKNcc5KU05jVJjO8zeHgHY/Uv40JEG8lBLX6XuVWTFz7igEoAjnpNizTFkVk0Fuom8fselFsSegaDfNqCzpryIyKWECyoBhvgxJ4wjY/w+5O3h/1WG/HHw8vD/NS/xgMRCPKR+gRMqAfgm5JTshAmEr2fvhPprcQaEf16oPoJw7ccc5oRKgDq6xSkpse0owDf2ZXeRNz50xrxlxIJwJXQKnQDZbqekxOzBp2blIXzcAj9x5FllZB3C1zKnUAlw5k6CRXsSyUNLhvDtGKKDTQfxdQyRGHAGlQBnKUWo0L2CNNGttUQAvq4/QsYkC5zxTwL+Ar0YBcupztWoAAAAAElFTkSuQmCC"},1158:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAANbY1E9YMgAABPBJREFUWIWtl3tMW1Ucxw+0hfEorwIDhdFSKJRnaSnl0ZZXKa9CC4wCo1RhPESWuUQTFd2cuKiJ07hItrnBmFFnXOaymZllWZwic1uMYzGZyZZgMrc/xCnExCjh1Z+/c90qwr0Tj5J8cnO59/zO9/7O9/x+pwQACB8/dzjIrLuB3G6zkfM1xeSdEgN5WZ8lcicrDIkhwYM+Pj4jhJCjxIeMKEKCdzoT4wtfM2SLjxTnkbPVZvI9jqPjaRyhOSiCD+4LuIOBvqwvJ7u06TmxQYHnxL6+SzmR4dCZkgg7MlTQhVddVASIRaLl2KCAC89q1IZxWykn/H8RMOt2kGc06kfwa+cbFHHwTaMVPD1OgMe2ePH0tMC3TVXQqkzAiGTpiQxV/8y98f9JwHzXZrI3X9OJQeGIOQ+gHyfsawXPVicsbW32sozQ/9PnH5QVAC4PvJSbOUDHMwv4wVVPzlSacnHyhaMlBoCBdm6ipQfACRlwwXFLIc2E54Sl0DSNcZgEXG2wkmxZ2LlGTDv0//PkK4HH28GtUoAqVDrxld0iZhLwqj7LJPL1hWtNlQC9reuenBPQ2wI3W2pBIvKFndq0SiYBmsjw5zNl4Vyw1V9/qb4cHkX3ywIDuCu95/OEIToSkkOlQ0wC8O+wE11NjbX6C+mkYrHYC71fkwUc15WaSAONsAoY605V8gqgX75SAL3nE7AjK4UGGmMVcLBBEc/tc9YMuFRyGugQkwBTbNRTyWFSWO52snkAvZOFHtJGRTzHJGC4SKfFgjI/XleOhmr7d7sADfh1g5UWJM/e/Gwjk4CLdWXEGBN1zBQThcvQBp5u57omX+7+M/1V8bG0R5wet5WxFaLpdjvB1Cr9RaLZodwMLuh6ihEtWq/nawBryK+f2UrT7mIcJgEzXC9opm3Ygkaa21eo5d0Rq403WpxHjbd4wKirW8BeMMPaC+hAygKKOGTSN9GGdKbKzC0H/7q3wQSakTYizEDn/UbE3oza673MdW4m29KTd8s2+MN0hwMA2+/fJkd//N7VDMqQYGhPShimon9yOchdl52DScCtVpuX22115M6WOlFKWMjl9iT5mtpAU48HFgj39/vuelNV6K3WWjLVUuOFScAkdsOV3GiupktRRpdisvGvBgV4OPkRsxKIBWm3LqNryllDruH7K2EScKG2ZA1X7BaikYV/4lRu8maBfv0redkQ4e93E7eu/2V8hx7hVsJcB1Zz1VFB3izIqcCtCbgknBcWcd8rpEHQp1Y+OdloJV/ge6thEnDaalzDx8gpq1Ei9ZNM4XJwp59Ldgvd83OnrEUJVxzl5GJ92RqYBBwvL+AFj2mk9KHot2ilg+1uPHCkg1waNEGX6GyVmRcmAaNmPS/vlRrI9gxVdVTABlhEDxRsjAS7/OHBkxVF+CyfFyYBh016XkbNeeSN/JzYQIn4t89tpbARO+KgJs34Pk40hj9K+GAS8KIug5ehe2BRuvG0Rg14/WVfgVZGhQmJZhLwgjZdkD25mSQxRPqpPloGm4KDrr+Np/eDRh05IACTgF61UhAsywQPmx8GSSSQFCo9jz9CCJpRECYBPalKQQbSkkmWLGw/rYrykOCPXMly0qLcJAiTgP2YOiGosezyuF1UQEVczPAxNKDQrqEwCaCuFuKkpYj0qZPcVECHSr7tREUheRe3pxAPEvAHoSjT1B9h9DoAAAAASUVORK5CYII="},1159:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAANbY1E9YMgAABPRJREFUWMOtlwtQVFUYgA/sIggstQtoNMpzVxritbwfuymPFTSUh/F+KGRRQeVMNCUCPkdp1AolRCCQSbDIGGh0yBCUUMAKHGdoBgonETOyJBwfxGv//nMpBPZu4qGd+Wbn3r33/N899z//f5YAAOHjjxtRZOjmBnL9x/Wk8XQAqSzzIXt3ughSEm28bW1E2To6OmWEkGNImY21cW5MlKXf/r2uwvKj3qShfhXp713P3U/H0RaDQh4lMPBTOLnYHEzysh3lFk8ZnhEKBRNyFwmkJtvClkx7SNtoB+5yU8Dzk/h789asZ71bGoM48f9FYOhmFHk3y2EjPuloZPhyuHIpFNQjcXhJ0jTqv+Lhh861EBdthSOSiTcz7F+9/c/9CxIYHY4lB/LlqTgolBd7TwWcSAD1vTiYuBs7zeS9WIDxBPw9GU5U+gG+Htid55wxOhzDLvDrzxHkVO1KDww+dqzUB0+lcIFmBp4LJ4LX1VQp6EyoT1YrlIP9EWwCnW0hxMVJfCYqYjn3ZI8KPhN6PSYrrJCZtH7bulrIJJC/20Up0NWFy9+t4aZ3vsE5gbF46O0OAz2hLuRudQxhEnB1Fuc4OYoBRuM1nr7tnAo2JduBqWQx902PZ70KKoG54u1lBjKpaBeTAH5KY16w4hJv7hPSoEKhcBp6rPkakrglSusEq0DF5lQprwB98pkC9JhPYMvrz9CBKlgFiiMjLBc0A0kJNnSgEiYBpf+SLJnMBCax6Dx2DtDlOJYAzk5icJNLtjEJFH7g7oYFZbSlKRhgMvHxVgEm4PcdobQgqQ/skyuYBC6cDSYKf/Nqpb85J6C+Hzev4FPFKAlCVRbYIyT1tC8wCQxeiyQ4tXb6+oKhXblOU8VonkXoYL4cBALdu+e+CnS41R/JJnD7F+wFd2JJZalPMCbSSMFBd96EnJt4H2PPwOvHjxzyXDeG99NxmAUodJCSj7w20IZ0qm6VVglQJ0IrJqMO0aEzkDp6Z6oRLagZ/cvIn9Ek85UVO0wl+jA4EAWA7XdW8Adx8GA4BuxsRZAYZ11IpX8fiCS3rk/BJHCtZ900dHMx0BcusJeZtGMAjVmgx3nbHEH85KKr3Z1rn6D39HWHTcMk0NUeOoueK8/TVxFIX0XXpYcNCrBO/HYjEgwNhbAjxymNBrzcHjILJoHmhkANOlpUtEmdjol+2CPo9749riAR6/deaArWbz+v4rZwM2GrA03BGnReDCEf7ndT6S8SwMDVcK5TjuPuCDelkP6i9K2ujhDyzdkgDZgE6muUGnz5uZLU1Sj1RMZ6fSVFXtzup61FRdf8CJ63ojPEJ84kUHPcnxfcppGA55YeDl39NF62iW44wNrSqLW5IYA01K3khUkACwovx8t9yRuv2a8xNzPA6Y8FX28zCA9bll37qYL7jQ8mgdIiL16oxPvvuVlg1t8//3UQLF2yGLLfdlBUYaAK/FPCB5PAzhwnXrAvIM7EVGLQ806WA7Zkg2Es06ZUTJs0k8D2bEet7NnuTGytRU2eHmZgucyo++hhL1J8yJMcKeCHSeDlNKlWsCwTmdTkMyNDPZDaiRrxTwjBZNQKk8BLqXZayUiXEWdHcRGtitZWxl/g1ovERltphUmgqMBDKzSxMPPzqIAq0KKwutJP66qhMAlUVfhqpfaEgqRvlqZQgeQEm8yTePwJrgJt/JfA31YevDW0y0E4AAAAAElFTkSuQmCC"},1162:function(e,t,a){e.exports=a.p+"static/media/profile-cover.e2582654.jpg"},121:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(0),s=o(l),r=o(a(3));function o(e){return e&&e.__esModule?e:{default:e}}var i={table:r.default.string.isRequired,filename:r.default.string.isRequired,sheet:r.default.string.isRequired,id:r.default.string,className:r.default.string,buttonText:r.default.string},c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleDownload=a.handleDownload.bind(a),a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"handleDownload",value:function(){var e=this;this.props.multipleTables.map((function(a){if(!document)return null;if(1!==document.getElementById(a.tableId).nodeType||"TABLE"!==document.getElementById(a.tableId).nodeName)return null;console.log("multiTables",e.props.multipleTables);var n=document.getElementById(a.tableId).outerHTML,l=String(e.props.sheet),s=String(a.fileName)+".xls",r={worksheet:l||"Worksheet",table:n};if(window.navigator.msSaveOrOpenBlob){var o=new Blob(['<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>'+n+"</body></html>"]);return document.getElementById("react-html-table-to-excel").click()((function(){window.navigator.msSaveOrOpenBlob(o,s)})),!0}var i=window.document.createElement("a");return i.href="data:application/vnd.ms-excel;base64,"+t.base64(t.format('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>{table}</body></html>',r)),i.download=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),!0}))}},{key:"render",value:function(){return s.default.createElement("button",{id:this.props.id,className:this.props.className,type:"button",onClick:this.handleDownload},this.props.buttonText)}}],[{key:"base64",value:function(e){return window.btoa(unescape(encodeURIComponent(e)))}},{key:"format",value:function(e,t){return e.replace(/{(\w+)}/g,(function(e,a){return t[a]}))}}]),t}(l.Component);c.propTypes=i,c.defaultProps={id:"button-download-as-xls",className:"button-download",buttonText:"Download"},t.default=c},1255:function(e,t,a){e.exports=a.p+"static/media/github.2e257125.svg"},1256:function(e,t,a){e.exports=a.p+"static/media/google.08ea438e.svg"},1260:function(e,t,a){e.exports=a.p+"static/media/dika-logo.cf303668.png"},1261:function(e,t,a){e.exports=a.p+"static/media/argon-react.f38ddea9.png"},1262:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(80),r=a.n(s),o=a(19),i=a(122),c=(a(585),a(586),a(587),a(588),a(7)),m=a(8),u=a(10),d=a(9),g=a(1265),p=a(1264),h=a(1266),f=a(1267),v=a(1268),E=a(1269),b=a(569),y=a(1270),S=a(1271),k=a(1297),j=a(1298),M=a(1272),w=a(1273),T=a(1274),H=a(1),O=a.n(H),I=a(2),N=a.n(I),D=function(){var e=O.a.User.current();return!!e&&(console.log("Ada user"),console.log(e),!0)},C=function(){var e=O.a.User.current();return!!e&&(console.log(e.get("roles").toLowerCase()),e.get("roles").toLowerCase())},A=function(){var e=O.a.User.current();return console.log(e),!!e&&e.get("username").split(" ")[0]},L=function(){return O.a.User.current().id},x=function(){return O.a.User.current()},q=function(e,t){return N()(e).format(t)},K=function(e){switch(e){case"Absen":return"Absence";case"Izin":case"Cuti":return"Izin";case"Terlambat":return"Late";case"Lembur":return"Overtime";case"Pulang Cepat":return"EarlyLeave"}},P=function(e){switch(e){case 0:return"Rejected";case 1:return"Approved";case 3:return"Belum Terproses";case 4:return"DAILY";case 5:return"WEEKLY";case 6:return"MONTHLY";case 7:return"RANGE"}},J=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).handleLogout=function(t){t.preventDefault(),window.confirm("Anda akan logout dari sistem")&&O.a.User.logOut().then((function(){return localStorage.removeItem("roles"),e.props.history.push("/auth/login")}))},e}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{className:"navbar-top navbar-dark",expand:"md",id:"navbar-main"},l.a.createElement(g.a,{fluid:!0},l.a.createElement(o.b,{className:"h4 mb-0 text-white text-uppercase d-none d-lg-inline-block",to:"/"},this.props.brandText),l.a.createElement(h.a,{className:"navbar-search navbar-search-dark form-inline mr-3 d-none d-md-flex ml-lg-auto"},l.a.createElement(f.a,{className:"mb-0"},l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"fas fa-search"}))),l.a.createElement(y.a,{placeholder:"Search",type:"text"})))),l.a.createElement(S.a,{className:"align-items-center d-none d-md-flex",navbar:!0},l.a.createElement(k.a,{nav:!0},l.a.createElement(j.a,{className:"pr-0",nav:!0},l.a.createElement(M.a,{className:"align-items-center"},l.a.createElement("span",{className:"avatar avatar-sm rounded-circle"},l.a.createElement("img",{alt:"...",width:37,height:37,src:x().get("fotoWajah").url()})),l.a.createElement(M.a,{className:"ml-2 d-none d-lg-block"},l.a.createElement("span",{className:"mb-0 text-sm font-weight-bold"},A()?A():"")))),l.a.createElement(w.a,{className:"dropdown-menu-arrow",right:!0},l.a.createElement(T.a,{className:"noti-title",header:!0,tag:"div"},l.a.createElement("h6",{className:"text-overflow m-0"},"Welcome!")),"admin"===window.localStorage.getItem("roles")?l.a.createElement(T.a,{to:"/admin/user-profile",tag:o.b},l.a.createElement("i",{className:"ni ni-settings-gear-65"}),l.a.createElement("span",null,"Settings")):"",l.a.createElement(T.a,{divider:!0}),l.a.createElement(T.a,{href:"#pablo",onClick:this.handleLogout},l.a.createElement("i",{className:"ni ni-user-run"}),l.a.createElement("span",null,"Logout"))))))))}}]),a}(l.a.Component),F=a(1275),z=a(1276),U=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement("footer",{className:"footer"},l.a.createElement(F.a,{className:"align-items-center justify-content-xl-between"},l.a.createElement(z.a,{xl:"6"},l.a.createElement("div",{className:"copyright text-center text-xl-left text-muted"},"\xa9 ",(new Date).getFullYear()," ",l.a.createElement("a",{className:"font-weight-bold ml-1",href:"https://www.creative-tim.com?ref=adr-admin-footer",rel:"noopener noreferrer",target:"_blank"},"Creative Tim")))))}}]),a}(l.a.Component),B=a(261),R=a(1277),Q=a(1278),Y=a(1279),G=a(574),_=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={collapseOpen:!1},n.handleLogout=function(e){e.preventDefault(),window.confirm("Anda akan logout dari sistem")&&O.a.User.logOut().then((function(){return localStorage.removeItem("roles"),n.props.history.push("/auth/login")}))},n.toggleCollapse=function(){n.setState({collapseOpen:!n.state.collapseOpen})},n.closeCollapse=function(){n.setState({collapseOpen:!1})},n.createLinks=function(e){return e.map((function(e,t){return e.invisible?null:l.a.createElement(R.a,{key:t},l.a.createElement(Q.a,{to:e.layout+e.path,tag:o.c,onClick:n.closeCollapse,activeClassName:"active"},l.a.createElement("i",{className:e.icon}),e.name))}))},n.activeRoute.bind(Object(B.a)(n)),n}return Object(m.a)(a,[{key:"activeRoute",value:function(e){return this.props.location.pathname.indexOf(e)>-1?"active":""}},{key:"render",value:function(){var e,t=this.props,a=(t.bgColor,t.routes),n=t.logo;return n&&n.innerLink?e={to:n.innerLink,tag:o.b}:n&&n.outterLink&&(e={href:n.outterLink,target:"_blank"}),l.a.createElement(p.a,{className:"navbar-vertical fixed-left navbar-light bg-white",expand:"md",id:"sidenav-main"},l.a.createElement(g.a,{fluid:!0},l.a.createElement("button",{className:"navbar-toggler",type:"button",onClick:this.toggleCollapse},l.a.createElement("span",{className:"navbar-toggler-icon"})),n?l.a.createElement(Y.a,Object.assign({className:"pt-0"},e),l.a.createElement("img",{alt:n.imgAlt,className:"navbar-brand-img",src:n.imgSrc})):null,l.a.createElement(S.a,{className:"align-items-center d-md-none"},l.a.createElement(k.a,{nav:!0},l.a.createElement(j.a,{nav:!0,className:"nav-link-icon"},l.a.createElement("i",{className:"ni ni-bell-55"})),l.a.createElement(w.a,{"aria-labelledby":"navbar-default_dropdown_1",className:"dropdown-menu-arrow",right:!0},l.a.createElement(T.a,null,"Action"),l.a.createElement(T.a,null,"Another action"),l.a.createElement(T.a,{divider:!0}),l.a.createElement(T.a,null,"Something else here"))),l.a.createElement(k.a,{nav:!0},l.a.createElement(j.a,{nav:!0},l.a.createElement(M.a,{className:"align-items-center"},l.a.createElement("span",{className:"avatar avatar-sm rounded-circle"},l.a.createElement("img",{alt:"...",width:37,height:37,src:x().get("fotoWajah").url()})))),l.a.createElement(w.a,{className:"dropdown-menu-arrow",right:!0},l.a.createElement(T.a,{className:"noti-title",header:!0,tag:"div"},l.a.createElement("h6",{className:"text-overflow m-0"},"Welcome!")),"admin"===window.localStorage.getItem("roles")?l.a.createElement(T.a,{to:"/admin/user-profile",tag:o.b},l.a.createElement("i",{className:"ni ni-settings-gear-65"}),l.a.createElement("span",null,"Settings")):"",l.a.createElement(T.a,{divider:!0}),l.a.createElement(T.a,{href:"#pablo",onClick:this.handleLogout},l.a.createElement("i",{className:"ni ni-user-run"}),l.a.createElement("span",null,"Logout"))))),l.a.createElement(G.a,{navbar:!0,isOpen:this.state.collapseOpen},l.a.createElement("div",{className:"navbar-collapse-header d-md-none"},l.a.createElement(F.a,null,n?l.a.createElement(z.a,{className:"collapse-brand",xs:"6"},n.innerLink?l.a.createElement(o.b,{to:n.innerLink},l.a.createElement("img",{alt:n.imgAlt,src:n.imgSrc})):l.a.createElement("a",{href:n.outterLink},l.a.createElement("img",{alt:n.imgAlt,src:n.imgSrc}))):null,l.a.createElement(z.a,{className:"collapse-close",xs:"6"},l.a.createElement("button",{className:"navbar-toggler",type:"button",onClick:this.toggleCollapse},l.a.createElement("span",null),l.a.createElement("span",null))))),l.a.createElement(h.a,{className:"mt-4 mb-3 d-md-none"},l.a.createElement(v.a,{className:"input-group-rounded input-group-merge"},l.a.createElement(y.a,{"aria-label":"Search",className:"form-control-rounded form-control-prepended",placeholder:"Search",type:"search"}),l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("span",{className:"fa fa-search"}))))),l.a.createElement(S.a,{navbar:!0},this.createLinks(a)))))}}]),a}(l.a.Component);_.defaultProps={routes:[{}]};var W=_,V=a(44),Z=a(22),X=(a(12),a(66)),$=a.n(X),ee=(a(257),a(1280)),te=a(1283),ae=a(570),ne=a(1284),le=a(1285),se=a(81),re=a(1281),oe=a(1282),ie=a(577),ce=function(e){var t=e.color,a=e.message,n=e.open,s=e.togglez;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ie.a,{color:t,isOpen:n,toggle:s,fade:!1},l.a.createElement("span",{className:"alert-inner--text"},a)))},me=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getTotalStaff=function(){var e=new O.a.User,t=new O.a.Query(e);t.notContainedIn("roles",["admin","leader","supervisor","manager","head","gm"]),t.count().then((function(e){n.setState({totalStaff:e})})).catch((function(e){alert(e.message)}))},n.toggleNavs=function(e,t){e.preventDefault(),n.setState({activeNav:t,chartExample1Data:"data1"===n.state.chartExample1Data?"data2":"data1"})},n.getTotalLeader=function(){var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","leader"),t.count().then((function(e){n.setState({totalLeader:e})})).catch((function(e){console.log(e.message)}))},n.getTotalSupervisor=function(){var e=new O.a.User,t=new O.a.Query(e);t.containedIn("roles",["supervisor","Supervisor"]),t.count().then((function(e){n.setState({totalSupervisor:e})})).catch((function(e){console.log(e.message)}))},n.getTotalManager=function(){var e=new O.a.User,t=new O.a.Query(e);t.containedIn("roles",["manager","Manager"]),t.count().then((function(e){n.setState({totalManager:e})})).catch((function(e){console.log(e.message)}))},n.getTotalHead=function(){var e=new O.a.User,t=new O.a.Query(e);t.containedIn("roles",["head","Head"]),t.count().then((function(e){n.setState({totalHead:e})})).catch((function(e){console.log(e.message)}))},n.getTotalRequest=function(){var e=O.a.Object.extend("ChangeRequest"),t=new O.a.Query(e);t.equalTo("statusApprove",3),t.count().then((function(e){n.setState({totalRequest:e})})).catch((function(e){var t=e.message;n.setState({loading:!1,message:t,visible:!0}),alert(t)}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.state={activeNav:1,chartExample1Data:"data1",loading:!1,totalRequest:0,daftarLeader:[],leave:0,totalLeader:0,totalStaff:0,totalSupervisor:0,totalManager:0,totalHead:0,message:"",visible:!1,color:"danger"},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getTotalLeader(),this.getTotalRequest(),this.getTotalStaff(),this.getTotalSupervisor(),this.getTotalManager(),this.getTotalHead()}},{key:"render",value:function(){var e=this,t=(this.props.totalAbsen,this.props.totalStaff,this.state),a=t.totalLeader,n=t.totalRequest,s=t.totalStaff,r=t.totalSupervisor,i=t.totalManager,c=t.totalHead;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"header bg-gradient-info pb-8 pt-5 pt-md-8"},l.a.createElement(g.a,{fluid:!0},l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}}),l.a.createElement("div",{className:"header-body"},l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"6",xl:"4"},l.a.createElement(o.b,{to:"/admin/staff",style:{color:"inherit"}},l.a.createElement(ee.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(re.a,null,l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(oe.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Staff"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},s)),l.a.createElement(z.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-danger text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-chart-bar"})))))))),l.a.createElement(z.a,{lg:"6",xl:"4"},l.a.createElement(o.b,{to:"/admin/leader",style:{color:"inherit"}},l.a.createElement(ee.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(re.a,null,l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(oe.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Leader"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},a)),l.a.createElement(z.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-warning text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-chart-pie"})))))))),l.a.createElement(z.a,{lg:"6",xl:"4"},l.a.createElement(o.b,{to:"/admin/status-request",style:{color:"inherit"}},l.a.createElement(ee.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(re.a,null,l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(oe.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Change request"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},n)),l.a.createElement(z.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-yellow text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-users"}))))))))),l.a.createElement(F.a,{className:"mt-4"},l.a.createElement(z.a,{lg:"6",xl:"4"},l.a.createElement(o.b,{to:"/admin/leader",style:{color:"inherit"}},l.a.createElement(ee.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(re.a,null,l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(oe.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Supervisor"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},r)),l.a.createElement(z.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-danger text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-chart-bar"})))))))),l.a.createElement(z.a,{lg:"6",xl:"4"},l.a.createElement(o.b,{to:"/admin/leader",style:{color:"inherit"}},l.a.createElement(ee.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(re.a,null,l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(oe.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Manager"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},i)),l.a.createElement(z.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-warning text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-chart-pie"})))))))),l.a.createElement(z.a,{lg:"6",xl:"4"},l.a.createElement(o.b,{to:"/admin/leader",style:{color:"inherit"}},l.a.createElement(ee.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(re.a,null,l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(oe.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Head"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},c)),l.a.createElement(z.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-yellow text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-users"})))))))))))))}}]),a}(l.a.Component),ue=function(e){return e.split(" ").slice(0,2).join(" ")},de=Object(V.a)(Object(V.d)((function(){return{isOpen:!1,id:""}}),{onToggleOpen:function(e){var t=e.isOpen;e.id;return function(e){return{isOpen:!t,id:e}}}}),Z.withScriptjs,Z.withGoogleMap)((function(e){return l.a.createElement(Z.GoogleMap,{defaultZoom:12,zoom:e.defaultZoom,defaultCenter:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},center:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},defaultOptions:{scrollwheel:!1}},e.userPosition.map((function(t){return l.a.createElement(Z.Marker,{key:t.id,onClick:function(a){console.log(t.id),e.onToggleOpen(t.id)},icon:{labelOrigin:new window.google.maps.Point(11,50),url:a(174)("./".concat(void 0===t.get("user").attributes.color?"red":t.get("user").attributes.color,"-dot.png")),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(11,40)},title:"".concat(t.get("fullname")," absen masuk: ").concat(q(t.get("absenMasuk"),"HH:mm:ss")),position:{lat:parseFloat(t.get("latitude")),lng:parseFloat(t.get("longitude"))},label:{text:ue(t.get("fullname")),fontWeight:"bold"}},t.id===e.id&&l.a.createElement(Z.InfoWindow,{onCloseClick:e.onToggleOpen},l.a.createElement("div",null,l.a.createElement("img",{src:void 0==t.get("selfieImage")?"":t.get("selfieImage").url(),height:100,width:100}),l.a.createElement("br",null),l.a.createElement("br",null),"Late"===t.className&&l.a.createElement("p",null,"Terlambat"),l.a.createElement("p",null,"Absen masuk:"," ",l.a.createElement("span",{style:{color:"Late"===t.className?"red":"blue"}},q(t.get("absenMasuk"),"HH:mm:ss"))))))})))})),ge=(Object(Z.withScriptjs)(Object(Z.withGoogleMap)((function(e){return l.a.createElement(Z.GoogleMap,{defaultZoom:12,defaultCenter:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},center:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},defaultOptions:{scrollwheel:!1}},e.userPosition.map((function(e){return l.a.createElement(Z.Marker,{icon:{labelOrigin:new window.google.maps.Point(11,50),url:a(174)("./".concat(void 0===e.get("user").attributes.color?"red":e.get("user").attributes.color,"-dot.png")),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(11,40)},title:"".concat(e.get("fullname")," absen masuk: ").concat(q(e.get("absenMasuk"),"HH:mm:ss")),position:{lat:parseFloat(e.get("latitude")),lng:parseFloat(e.get("longitude"))},label:{text:ue(e.get("fullname")),fontWeight:"bold"}})})))}))),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).scrollToMyRef=function(){return window.scrollTo(0,n.lcoationRef.offsetTop)},n.getCenterAverage=function(e){n.setState({loading:!0});var t=e.reduce((function(e,t){return e+parseFloat(t.get("latitude"))}),0),a=e.reduce((function(e,t){return e+parseFloat(t.get("longitude"))}),0);console.log(t+" "+a),n.setState({avgLat:t/e.length,avgLng:a/e.length,loading:!1})},n.toggleNavs=function(e,t){e.preventDefault(),n.setState({activeNav:t,chartExample1Data:"data1"===n.state.chartExample1Data?"data2":"data1"})},n.getDaftarLeader=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","leader"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarLeader:e})})).catch((function(e){console.log(e.message)}))},n.getDaftarRequest=function(){var e=O.a.Object.extend("ChangeRequest"),t=new O.a.Query(e);t.equalTo("statusApprove",3),t.exclude("createdAt"),t.exclude("updatedAt"),t.include("userId"),t.find().then((function(e){n.setState({daftarRequest:e})})).catch((function(e){var t=e.message;n.setState({loading:!1}),console.log(t)}))},n.getDataTerlambat=function(){n.setState({loading:!0});var e=O.a.Object.extend("Late"),t=new O.a.Query(e),a=new Date,l=new N.a(a);l.startOf("day");var s=new N.a(l);s.add(1,"day"),t.equalTo("status",3),t.greaterThanOrEqualTo("time",l.toDate()),t.lessThan("time",s.toDate()),t.include("user"),t.find().then((function(e){e.map((function(e){return e.select=!1})),console.log(e),n.setState({late:e})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getLeaderStaff=function(){n.setState({loading:!0});var e=O.a.Object.extend("Absence"),t=new O.a.Query(e),a=new Date,l=new N.a(a);l.startOf("day");var s=new N.a(l);s.add(1,"day"),t.greaterThanOrEqualTo("absenMasuk",l.toDate()),t.lessThan("absenMasuk",s.toDate()),t.include("user"),t.find().then((function(e){e.map((function(e){return e.select=!1})),console.log(e),n.setState({dataAbsen:e})})).catch((function(e){console.log(e),n.setState({loading:!1})}))},n.setCenterMaps=function(e,t){n.setState({avgLat:parseFloat(e),avgLng:parseFloat(t)})},n.lcoationRef=l.a.createRef(),n.state={activeNav:1,chartExample1Data:"data1",loading:!1,totalStaff:0,daftarRequest:[],daftarLeader:[],dataAbsen:[],late:[],avgLat:0,avgLng:0,defaultZoom:12},window.Chart&&Object(se.parseOptions)($.a,Object(se.chartOptions)()),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDaftarRequest(),this.getDaftarLeader(),this.getLeaderStaff(),this.getDataTerlambat()}},{key:"componentDidUpdate",value:function(e,t){t.late!==this.state.late&&(console.log(this.state.dataAbsen),this.getCenterAverage(this.state.dataAbsen.concat(this.state.late)))}},{key:"render",value:function(){var e=this,t=this.state,a=t.daftarRequest,n=t.loading;t.daftarLeader;return console.log(this.state.dataAbsen.concat(this.state.late)),l.a.createElement(l.a.Fragment,null,l.a.createElement(me,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,{className:"mt-5"},l.a.createElement(z.a,{className:"mb-5 mb-xl-0",xl:"12"},l.a.createElement(ee.a,{className:"shadow mb-5",ref:this.lcoationRef},this.state.loading?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Loading map..."):0===this.state.dataAbsen.concat(this.state.late).length?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Tidak ada data absen hari ini"):l.a.createElement(de,{userPosition:this.state.dataAbsen.concat(this.state.late),avgLat:this.state.avgLat,avgLng:this.state.avgLng,defaultZoom:this.state.defaultZoom,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyC5tj-2X6b7kwGTqGZkB7sofZdMhpyE75Q",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:"500px"},className:"map-canvas",id:"map-canvas"}),mapElement:l.a.createElement("div",{style:{height:"100%",borderRadius:"inherit"}})}))),l.a.createElement(z.a,{xl:"6",className:"mb-5"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h3",{className:"mb-0"},"Change request")),l.a.createElement("div",{className:"col text-right"},l.a.createElement(o.b,{to:"/admin/status-request"},l.a.createElement(ae.a,{color:"primary",size:"sm"},"See all"))))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Status"))),l.a.createElement("tbody",null,n?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):a.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found...")):a.map((function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null,e.get("userId").attributes.nik),l.a.createElement("td",null,e.get("userId").attributes.fullname),l.a.createElement("td",{style:{color:"".concat(3===e.attributes.statusApprove?"blue":"".concat(1===e.attributes.statusApprove?"green":"red"))}},l.a.createElement("strong",null,3===e.get("statusApprove")?"Waiting":1===e.get("statusApprove")?"Approved".toUpperCase():"Rejected".toUpperCase())))})))))),l.a.createElement(z.a,{xl:"6"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h3",{className:"mb-0"},"Data absen hari ini")))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Absen masuk"))),l.a.createElement("tbody",null,n?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):this.state.dataAbsen.concat(this.state.late).length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},"No data found...")):this.state.dataAbsen.concat(this.state.late).map((function(t,a){return l.a.createElement("tr",{onClick:function(){e.setCenterMaps(t.get("latitude"),t.get("longitude")),e.setState({defaultZoom:22}),e.scrollToMyRef()}},l.a.createElement("td",null,t.get("user").attributes.nik),l.a.createElement("td",null,t.get("user").attributes.fullname),l.a.createElement("td",null,"Late"===t.className?l.a.createElement("div",null,l.a.createElement("span",{style:{color:"red"}},q(t.get("time"),"HH:mm:ss"))):q(t.get("absenMasuk"),"HH:mm:ss")))})))))))))}}]),a}(l.a.Component)),pe=(l.a.memo(ge),a(177)),he=a.n(pe),fe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"header pb-2 pt-5 pt-lg-8 d-flex align-items-center",style:{minHeight:"100px",backgroundImage:"url("+a(1162)+")",backgroundSize:"cover",backgroundPosition:"center top"}},l.a.createElement("span",{className:"mask bg-gradient-default opacity-8"})))}}]),n}(l.a.Component),ve=a(14),Ee=a.n(ve),be=a(1286),ye=a(1287),Se=a(1288),ke=function(e){for(var t=e.resPerPage,a=e.totalPosts,n=[],s=1;s<=Math.ceil(a/t);s++)n.push(s);return l.a.createElement(l.a.Fragment,null,l.a.createElement("nav",{"aria-label":"Page navigation example"},l.a.createElement(be.a,{className:"pagination justify-content-end p-4",listClassName:"justify-content-end"},n.map((function(e){return l.a.createElement(ye.a,null,l.a.createElement(Se.a,{href:"#pablo",onClick:function(e){return e.preventDefault()},tabIndex:"-1"},e,l.a.createElement("span",{className:"sr-only"},e)))})))))},je=(a(1289),a(1290),a(1291),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n.setState({loading:!0,page:e});var t=n.state,a=t.resPerPage,l=(t.page,new O.a.User),s=new O.a.Query(l);s.notContainedIn("roles",["admin","leader","Admin","Leader"]),s.skip(a*e-a),s.limit(a),s.withCount(),s.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loading:!1,toast:!0,message:"Halo"})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getPosisi=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Position"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarPosisi:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getLeader=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","leader"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarLeader:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.handleFilter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.preventDefault(),n.setState({loadingFilter:!0});var a=n.state,l=a.searchBy,s=a.searchValue,r=n.state,o=r.resPerPage,i=(r.page,new O.a.User),c=new O.a.Query(i);switch(c.notContainedIn("roles",["admin","leader","Admin","Leader"]),c.skip(o*t-o),c.limit(o),c.withCount(),l){case"all":c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"name":c.matches("fullname",s,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"nik":c.equalTo("nik",s),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"divisi":c.matches("posisi",s,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"leader":var m=new O.a.User,u=new O.a.Query(m);u.matches("fullname",s,"i"),c.matchesQuery("leaderIdNew",u),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}))}},n.handleFilterPagination=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n.setState({loadingFilter:!0});var t=n.state,a=t.searchBy,l=t.searchValue,s=n.state,r=s.resPerPage,o=(s.page,new O.a.User),i=new O.a.Query(o);switch(i.notContainedIn("roles",["admin","leader","Admin","Leader"]),i.skip(r*e-r),i.limit(r),i.withCount(),a){case"all":i.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"name":i.matches("fullname",l,"i"),i.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"nik":i.equalTo("nik",l),i.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"divisi":i.matches("posisi",l,"i"),i.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"leader":var c=new O.a.User,m=new O.a.Query(c);m.matches("fullname",l,"i"),i.matchesQuery("leaderIdNew",m),i.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}))}},n.state={daftarStaff:[],daftarLevel:[],daftarPosisi:[],loading:!1,searchBy:"all",searchValue:"",resPerPage:20,page:1,totalData:0,loadingFilter:!1,toast:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getPosisi(),this.getLeader(),this.handleFilterPagination()}},{key:"getAbsenStaff",value:function(){var e=this,t=new O.a.User,a=new O.a.Query(t);a.notContainedIn("roles",["admin","leader","Admin","Leader"]),a.find({useMasterKey:!0}).then((function(t){e.setState({daftarStaff:t})})).catch((function(e){alert(e.message)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.daftarStaff,n=t.daftarLevel,s=t.loading,r=l.a.createElement(f.a,{controlId:"formlvl"},l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){return e.setState({searchValue:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih ",this.state.searchBy),"leader"===this.state.searchBy?n.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))})):this.state.daftarPosisi.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))})))),i=l.a.createElement(f.a,null,l.a.createElement(y.a,{type:"text",className:"form-control-alternative",disabled:"all"===this.state.searchBy,placeholder:"all"===this.state.searchBy?"":"Masukkan ".concat(this.state.searchBy),onChange:function(t){return e.setState({searchValue:t.target.value})}}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(fe,null),l.a.createElement(g.a,{className:"mt-2",fluid:!0},l.a.createElement(ee.a,{className:"shadow p-2 pt-4"},l.a.createElement(te.a,{className:"border-0 p-1 ml-2"},l.a.createElement(h.a,{onSubmit:this.handleFilter,className:!0},l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:2},"Search by"),l.a.createElement(z.a,{lg:2},l.a.createElement(f.a,{controlId:"formHorizontalEmails"},l.a.createElement(y.a,{className:"form-control-alternative",type:"select",onChange:function(t){return e.setState({searchBy:t.target.value,searchValue:""})}},["all","nik","name","leader","divisi"].map((function(e){return l.a.createElement("option",{value:e},e)}))))),l.a.createElement(z.a,{lg:4},"level"==this.state.searchBy||"divisi"==this.state.searchBy?r:i),l.a.createElement(z.a,{sm:2},l.a.createElement(ae.a,{color:"primary",type:"submit",disable:this.state.loadingFilter?"true":"false"},l.a.createElement("i",{className:"fa fa-search"})," ",this.state.loadingFilter?"Fetching...":"Search"))))),l.a.createElement(F.a,null,s?l.a.createElement(z.a,{lg:12,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement(z.a,{lg:12,style:{textAlign:"center"}},"No staff found"):a.map((function(e){return l.a.createElement(z.a,{md:3,className:"mt-2"},l.a.createElement(ee.a,{className:"card-profile shadow"},l.a.createElement(F.a,{className:"justify-content-center"},l.a.createElement(z.a,{className:"text-center p-2",lg:""},l.a.createElement("div",{className:""},l.a.createElement("a",{href:e.get("fotoWajah").url()},l.a.createElement("img",{alt:"...",style:{height:"150px",width:"150px"},className:"rounded-circle",src:e.get("fotoWajah").url()}))))),l.a.createElement(re.a,{className:"pt-0 pt-md-4",style:{height:"200px",borderRadius:"50px 20px 20px 20px",borderColor:"#fc032d"}},l.a.createElement("div",{className:"text-center mt-md-2"},l.a.createElement("h3",null,ue(e.get("fullname"))),l.a.createElement("div",{className:"h5 font-weight-300"},l.a.createElement("i",{className:"ni location_pin mr-2"}),e.get("nik")),l.a.createElement("div",{className:"h5"},l.a.createElement("i",{className:"ni business_briefcase-24 mr-2"}),Ee.a.isEmpty(e.get("email"))?"-":e.get("email")),l.a.createElement("div",{className:"mt-2"},l.a.createElement(o.b,{color:"inherit",to:"/admin/export-absen/".concat(e.id)},l.a.createElement(ae.a,{size:"sm",color:"primary",outline:!0},l.a.createElement("i",{className:"ni ni-spaceship mr-2"}),"View history")),l.a.createElement(o.b,{color:"inherit",to:"/admin/edit/".concat(e.id)},l.a.createElement(ae.a,{size:"sm",color:"primary",outline:!0},l.a.createElement("i",{className:"ni ni-spaceship mr-2"}),"Edit data")))))))}))),l.a.createElement(he.a,{activePage:this.state.page,itemsCountPerPage:this.state.resPerPage,totalItemsCount:this.state.totalData,pageRangeDisplayed:5,onChange:function(t){return e.handleFilterPagination(t)},innerClass:"pagination justify-content-end p-4",itemClass:"page-item mt-2",linkClass:"page-link",prevPageText:"<",nextPageText:">"}))))}}]),a}(l.a.Component)),Me=a(1292),we=a(26),Te=a.n(we),He=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),n.setState({loading:!0});var t=n.state,a=t.username,l=t.password;O.a.User.logIn(a,Te()(l)).then((function(e){console.log(e.get("roles")),"admin"!==e.get("roles")?(console.log("leader"),window.localStorage.setItem("roles","leader"),n.setState({loading:!1}),window.location.replace("/leader/index"),n.props.history.push("/leader/index")):"admin"===e.get("roles")?(window.localStorage.setItem("roles","admin"),n.setState({loading:!1}),window.location.replace("/admin/index"),n.props.history.push("/admin/index")):(O.a.User.logOut(),n.setState({error:"Maaf anda dilarang login ke sistem",loading:!1}))})).catch((function(e){console.log(e),n.setState({error:e.message,loading:!1})}))},n.state={loading:!1,username:"",password:"",error:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){console.log("mounted")}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.error;return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{lg:"5",md:"7"},l.a.createElement(ee.a,{className:"bg-secondary shadow border-0"},l.a.createElement(re.a,{className:"px-lg-5 py-lg-5"},l.a.createElement("div",{className:"text-center text-muted mb-4"},""!==n?l.a.createElement(Me.a,{color:"danger",fade:!1},l.a.createElement("span",{className:"alert-inner--text"},n)):l.a.createElement("small",null,"Masukkan username dan password")),l.a.createElement(h.a,{role:"form",onSubmit:this.handleSubmit},l.a.createElement(f.a,{className:"mb-3"},l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-circle-08"}))),l.a.createElement(y.a,{placeholder:"Username",type:"text",autoComplete:"new-email",required:!0,onChange:function(t){return e.setState({username:t.target.value})}}))),l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-lock-circle-open"}))),l.a.createElement(y.a,{placeholder:"Password",type:"password",autoComplete:"new-password",required:!0,onChange:function(t){return e.setState({password:t.target.value})}}))),l.a.createElement("div",{className:"text-center"},l.a.createElement(ae.a,{className:"my-4",color:"primary",type:"submit",disabled:a},a?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Signing in..."):"Sign in")))))))}}]),a}(l.a.Component),Oe=a(4),Ie=a(1296),Ne=a(1293),De=a(1299),Ce=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement(De.a,{size:this.props.size,scrollable:!1,className:"modal-dialog-centered",isOpen:this.props.show,toggle:this.props.handleHide},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h3",{className:"modal-title",id:"exampleModalLabel"},this.props.title),l.a.createElement("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:this.props.handleHide},l.a.createElement("span",{"aria-hidden":!0},"\xd7"))),l.a.createElement("div",{className:"modal-body text-danger"},this.props.body),this.props.footer?l.a.createElement("div",{className:"modal-footer"},l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:this.props.handleHide},"Close"),l.a.createElement(ae.a,{color:"primary",type:"button",onClick:this.props.handleSubmit,disabled:this.props.disabled||!1},this.props.loading?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")):"")}}]),a}(n.Component),Ae=a(47),Le=a.n(Ae),xe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={activeNav:1,chartExample1Data:"data1"},n}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"header bg-gradient-info pb-8 pt-5 pt-md-8"},l.a.createElement(g.a,{fluid:!0},l.a.createElement("div",{className:"header-body"}))))}}]),a}(l.a.Component),qe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).toggle=function(e){n.setState({[e]:!n.state[e]})},n.getDetail=function(e,t){e.preventDefault();var a=O.a.Object.extend("ChangeRequest"),l=new O.a.Query(a);l.equalTo("userId",{__type:"Pointer",className:"_User",objectId:t}),l.include("userId"),l.include("absenPoint"),l.first().then((function(e){console.log(e.attributes),console.log("shifting",e.get("shifting")),n.setState({detailMode:!0,detail:e.attributes,shifting:e.get("shifting").attributes,absenPoint:e.get("absenPoint").attributes,loading:!1})})).catch((function(e){alert(e.message)}))},n.handleReject=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=O.a.Object.extend("ChangeRequest");new O.a.Query(t).get(n.state.idUser).then((function(e){e.set("statusApprove",0),e.set("alasanReject",n.state.reason),e.save().then((function(){var e=Object(Oe.a)(n.state.staff);e.splice(n.state.userIndex,1),n.setState({message:"Berhasil reject",color:"success",visible:!0,staff:e,rejectMode:!1,loadingModal:!1})})).catch((function(e){n.setState({message:"Terjadi kesalahan, mohon ulangi beberapa saat lagi.",color:"danger",visible:!0,rejectMode:!1,loadingModal:!1})}))}))},n.handleApproval=function(e,t){e.preventDefault(),n.setState({loadingModal:!0});var a=new O.a.User;new O.a.Query(a).get(n.state.userId).then((function(e){var a=O.a.Object.extend("ChangeRequest"),l=new O.a.Query(a);l.exclude("createdAt"),l.exclude("updatedAt"),l.include("userId"),l.get(n.state.idUser).then((function(a){var l=a.attributes;for(var s in console.log(a),l)"statusApprove"!==s&&"leaderId"!==s&&"idUser"!==s&&"userId"!==s&&e.set(s,l[s]);e.save(null,{useMasterKey:!0}).then((function(e){a.set("statusApprove",t?1:0),t||a.set("alasanReject",n.state.reason),a.save().then((function(e){var t=Object(Oe.a)(n.state.staff);t.splice(n.state.userIndex,1),n.setState({message:"Berhasil approve",color:"success",staff:t,approvalMode:!1,loadingModal:!1,visible:!0})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Terjadi kesalahan",color:"danger",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Terjadi kesalahan",color:"danger"})}))})).catch((function(e){var t=e.message;n.setState({loadingModal:!1,message:"Terjadi kesalahan",color:"danger",visible:!0}),console.log(t)}))})).catch((function(e){console.log(e.message),n.setState({loading:!1,message:"Terjadi kesalahan",color:"danger",visible:!0})}))},n.state={staff:[],shifting:{},absenPoint:{},loading:!1,requestMode:!1,userIndex:0,loadingModal:!1,approvalMode:!1,rejectMode:!1,userId:"",fullnames:"",reason:"",checkId:[],loadingReco:!1,detail:{},detailMode:!1,message:"",color:"danger",visible:!1,idUser:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;this.setState({loading:!0});var t=O.a.Object.extend("ChangeRequest"),a=new O.a.Query(t);a.equalTo("statusApprove",3),a.include("userId"),a.find().then((function(t){console.log(t),e.setState({staff:t,loading:!1})})).catch((function(t){alert(t.message),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.staff,n=t.loading,s=t.loadingModal,r=t.fullnames,o=t.approvalMode,i=t.rejectMode,c=t.detailMode,m=t.detail;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-2"},"Change request status"),l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}})),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Status"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,t.get("userId").attributes.nik),l.a.createElement("td",null,t.get("userId").attributes.fullname),l.a.createElement("td",{style:{color:"".concat(3===t.attributes.statusApprove?"blue":"".concat(2===t.attributes.statusApprove?"green":"red"))}},l.a.createElement("strong",null,3===t.get("statusApprove")?"Belum diproses":2===t.get("statusApprove")?"Approved".toUpperCase():"Rejected".toUpperCase())),l.a.createElement("td",null,l.a.createElement(ae.a,{id:"t4",color:"secondary",className:"btn-circle",onClick:function(n){e.setState({userId:t.get("userId").id,userIndex:a,fullnames:t.get("userId").attributes.fullname}),e.getDetail(n,t.get("userId").id)}},l.a.createElement("i",{className:"fa fa-eye"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t4"},"Detail"),l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(){e.setState({approvalMode:!0,userId:t.get("userId").id,idUser:t.id,userIndex:a,fullnames:t.get("userId").attributes.fullname})}},l.a.createElement("i",{className:"fa fa-check"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Approve"),l.a.createElement(ae.a,{id:"t2",className:"btn-circle btn-danger",onClick:function(n){e.setState({rejectMode:!0,userId:t.get("userId").id,idUser:t.id,userIndex:a,fullnames:t.get("userId").attributes.fullname})}},l.a.createElement("i",{className:"fa fa-times"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t2"},"Reject")))})))))))),l.a.createElement(Ce,{show:c,loading:s,footer:!1,handleHide:function(){e.toggle("detailMode"),e.setState({detail:{}})},title:"".concat(r," change request data"),body:l.a.createElement("div",null,l.a.createElement(h.a,{className:"text-dark"},void 0!==m.fotoWajah?l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Foto Wajah"),l.a.createElement(F.a,{className:"ml-1"},l.a.createElement("img",{height:100,width:100,src:void 0!==m.fotoWajah?m.fotoWajah.url():"",alt:"foto"}))):"",l.a.createElement(f.a,{controlId:"formAbsenPoint"},l.a.createElement(Ne.a,null,"Absen point"),l.a.createElement(y.a,{type:"number",disabled:!0,placeholder:this.state.absenPoint.placeName})),l.a.createElement(f.a,{controlId:"formCuti"},l.a.createElement(Ne.a,null,"Jumlah cuti"),l.a.createElement(y.a,{type:"number",disabled:!0,placeholder:m.jumlahCuti})),l.a.createElement(f.a,{controlId:"formLembut"},l.a.createElement(Ne.a,null,"Lembur"),l.a.createElement(y.a,{className:"text-dark",type:"text",disabled:!0,placeholder:m.lembur})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"))),handleSubmit:this.rejectChecked}),l.a.createElement(Ce,{show:o,loading:s,footer:!0,handleHide:function(){return e.toggle("approvalMode")},title:"Approval Confirmation",body:"Approve change request ".concat(r," ?"),handleSubmit:function(t){return e.handleApproval(t,!0)}}),l.a.createElement(Ce,{show:i,loading:s,handleHide:function(){return e.toggle("rejectMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject change request ".concat(r," ?")),l.a.createElement(h.a,{onSubmit:function(t){return e.handleReject(t)}},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleReject(t)}}))}}]),a}(l.a.Component),Ke=a(1294),Pe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getPoint=function(){var e=new O.a.Object.extend("ValidGeopoint"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarPoint:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getTipe=function(){n.setState({loading:!0});var e=new O.a.Object.extend("EmployeeType"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarTipe:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getPosisi=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Position"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarPosisi:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getLevel=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Level"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarLevel:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getStaff=function(){n.setState({loading:!0});var e=new O.a.User;new O.a.Query(e).find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getData=function(){n.setState({loading:!0});var e=new O.a.User;new O.a.Query(e).find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.handleFilter=function(e){e.preventDefault(),n.setState({loadingFilter:!0});var t=n.state,a=t.searchBy,l=t.searchValue,s=n.state,r=s.resPerPage,o=s.page,i=new O.a.User,c=new O.a.Query(i);switch(c.skip(r*o-r),c.limit(r),c.withCount(),a){case"all":c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"name":c.matches("fullname",l,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"nik":c.equalTo("nik",l),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"divisi":c.matches("posisi",l,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}));break;case"level":c.matches("level",l,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"leader":var m=new O.a.User,u=new O.a.Query(m);u.matches("fullname",l,"i"),c.matchesQuery("leaderIdNew",u),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}))}},n.handleFilterPagination=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n.setState({loading:!0,page:e});var t=n.state,a=t.searchBy,l=t.searchValue,s=n.state,r=s.resPerPage,o=(s.page,new O.a.User),i=new O.a.Query(o);switch(i.skip(r*e-r),i.limit(r),i.withCount(),a){case"all":i.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}));break;case"divisi":i.matches("posisi",l,"i"),i.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}));break;case"name":i.matches("fullname",l,"i"),i.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}));break;case"nik":i.equalTo("nik",l),i.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}));break;case"level":i.matches("level",l,"i"),i.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}));break;case"leader":var c=new O.a.User,m=new O.a.Query(c);m.matches("fullname",l,"i"),i.matchesQuery("leaderIdNew",m),i.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))}},n.getShifting=function(){var e=O.a.Object.extend("Shifting"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarShifting:e})})).catch((function(e){alert("cek koneksi anda")}))},n.getLeader=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","leader"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarLeader:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getSupervisor=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","supervisor"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarSupervisor:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getManager=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","manager"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarManager:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getHead=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","head"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarHead:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getGM=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","gm"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarGM:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.hans=function(){},n.handleFace=function(e){n.setState({loadingReco:!0,statusReco:0,fotoWajah:e.target.files[0]});var t=new FormData;t.append("knax",e.target.files[0]),Le.a.post("http://34.126.96.126:4000/api/face-check",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;return 1===t.status?n.setState({statusReco:1,message:"\u2714\ufe0f ".concat(t.message),loadingReco:!1}):n.setState({statusReco:0,message:"\u2716\ufe0f ".concat(t.message),loadingReco:!1})})).catch((function(e){return alert("Terjadi error...")}))},n.handleCheckImei=function(e,t){e.preventDefault(),n.setState({loadingModal:!0});var a=new O.a.User,l=new O.a.Query(a);l.equalTo("imei",t),l.first().then((function(e){e?n.setState({imeiMessage:"Imei telah terdaftar",loadingModal:!1}):n.handleSubmit()})).catch((function(e){console.log(e),n.setState({loadingModal:!1})}))},n.handleSubmit=function(){n.setState({loading:!0});var e=n.state,t=(e.name,e.nik),a=e.tipeKaryawan,l=e.posisi,s=e.level,r=e.imei,o=e.jamKerja,i=e.lokasiKerja,c=e.jumlahCuti,m=e.lembur,u=e.fotoWajah,d=e.username,g=e.password,p=e.email,h=new O.a.User,f=function(e,t){h.set(e,{__type:"Pointer",className:"_User",objectId:n.state[t]})};"staff"===s.toLowerCase()&&(""!==n.state.selectLeader&&f("leaderIdNew","selectLeader"),""!==n.state.selectSupervisor&&f("supervisorID","selectSupervisor"),""!==n.state.selectManager&&f("managerID","selectManager"),""!==n.state.selectHead&&f("headID","selectHead"),""!==n.state.selectGM&&f("gmID","selectGM")),"leader"===s.toLowerCase()&&(""!==n.state.selectSupervisor&&f("supervisorID","selectSupervisor"),""!==n.state.selectManager&&f("managerID","selectManager"),""!==n.state.selectHead&&f("headID","selectHead"),""!==n.state.selectGM&&f("gmID","selectGM")),"supervisor"===s.toLowerCase()&&(""!==n.state.selectManager&&f("managerID","selectManager"),""!==n.state.selectHead&&f("headID","selectHead"),""!==n.state.selectGM&&f("gmID","selectGM")),"manager"===s.toLowerCase()&&(""!==n.state.selectHead&&f("headID","selectHead"),""!==n.state.selectGM&&f("gmID","selectGM")),"head"===s.toLowerCase()&&""!==n.state.selectGM&&f("gmID","selectGM"),h.set("absenPoint",{__type:"Pointer",className:"ValidGeopoint",objectId:n.state.idPoint}),h.set("fullname",n.state.fullname),h.set("email",p),h.set("username",d),h.set("password",Te()(g)),h.set("passwordClone",Te()(g)),h.set("nik",t.toUpperCase()),h.set("tipe",a),h.set("posisi",l),h.set("level",s.toLowerCase()),h.set("imei",r),h.set("jamKerja",o),h.set("lokasiKerja",i),0===n.state.jamMasuk?h.set("jamMasuk",8):h.set("jamMasuk",parseInt(n.state.jamMasuk)),0===n.state.jamKeluar?h.set("jamMasuk",17):h.set("jamKeluar",parseInt(n.state.jamKeluar)),h.set("jumlahCuti",parseInt(c)),h.set("lembur",m),h.set("roles",s.toLowerCase()),h.set("fotoWajah",new O.a.File("profile.jpg",u)),h.save().then((function(e){n.setState({daftarStaff:n.state.daftarStaff.concat(e),addMode:!1,loading:!1,message:"Berhasil tambah data",visible:!0,color:"success"})})).catch((function(e){n.setState({addMode:!1,loading:!1,message:"Gagal tambah data, coba lagi",visible:!0}),console.log(e.message)}))},n.handleUpdate=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state,a=t.name,l=t.nik,s=t.tipeKaryawan,r=t.posisi,o=t.level,i=t.imei,c=t.jamKerja,m=t.lokasiKerja,u=t.jumlahCuti,d=t.lembur,g=t.fotoWajah,p=t.username,h=t.password,f=t.email,v=new O.a.User;new O.a.Query(v).get(n.state.userId).then((function(e){var t=function(e,t){v.set(e,{__type:"Pointer",className:"_User",objectId:n.state[t]})};"staff"===o.toLowerCase()&&(""!==n.state.selectLeader&&t("leaderIdNew","selectLeader"),""!==n.state.selectSupervisor&&t("supervisorID","selectSupervisor"),""!==n.state.selectManager&&t("managerID","selectManager"),""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"leader"===o.toLowerCase()&&(""!==n.state.selectSupervisor&&t("supervisorID","selectSupervisor"),""!==n.state.selectManager&&t("managerID","selectManager"),""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"supervisor"===o.toLowerCase()&&(""!==n.state.selectManager&&t("managerID","selectManager"),""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"manager"===o.toLowerCase()&&(""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"head"===o.toLowerCase()&&""!==n.state.selectGM&&t("gmID","selectGM"),""!==n.state.idPoint&&v.set("absenPoint",{__type:"Pointer",className:"ValidGeopoint",objectId:n.state.idPoint}),e.set("fullname",a),e.set("email",f),e.set("username",p),e.set("jamMasuk",n.state.jamMasuk),e.set("jamKeluar",n.state.jamKeluar),e.set("username",p),""!==h&&(e.set("password",Te()(h)),e.set("passwordClone",Te()(h))),e.set("nik",l.toUpperCase()),e.set("tipe",s),e.set("posisi",r),e.set("level",o.toLowerCase()),e.set("imei",i),e.set("jamKerja",c),e.set("lokasiKerja",m),e.set("jumlahCuti",parseInt(u)),e.set("lembur",d),e.set("roles",o.toLowerCase()),""!==g&&e.set("fotoWajah",new O.a.File("profile.jpg",g)),e.save(null,{useMasterKey:!0}).then((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})})).catch((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0}),console.log(e.message)}))})).catch((function(e){n.setState({editMode:!1,loadingModal:!1,message:e.message,visible:!0}),console.log(e.message)}))},n.getDetail=function(e,t){e.preventDefault();var a=new O.a.User,l=new O.a.Query(a);l.include("leaderIdNew"),l.include("supervisorID"),l.include("managerID"),l.include("headID"),l.include("gmID"),l.include("absenPoint"),l.get(t,{useMasterKey:!0}).then((function(e){var t=e.attributes;console.log(t),n.setState({nik:t.nik,name:t.fullname,username:t.username,imei:t.imei,email:t.email,tipeKaryawan:t.tipe,posisi:t.posisi,jamKerja:t.jamKerja,lokasiKerja:t.lokasiKerja,jumlahCuti:t.jumlahCuti,jamMasuk:void 0===t.jamMasuk?0:t.jamMasuk,jamKeluar:void 0===t.jamKeluar?0:t.jamKeluar,absenPointObject:void 0===t.absenPoint?"":t.absenPoint,shifting:void 0===t.shifting?"":t.shifting,lembur:t.lembur,level:t.roles.toLowerCase(),leader:void 0===t.leaderIdNew?"":t.leaderIdNew,supervisor:void 0===t.supervisorID?"":t.supervisorID,manager:void 0===t.managerID?"":t.managerID,head:void 0===t.headID?"":t.headID,gm:void 0===t.gmID?"":t.gmID,editMode:!0})})).catch((function(e){alert(e.message)}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.handleIdAbsen=function(e){var t=document.getElementById("myoptions"),a=document.getElementById("data").querySelector('[value="'.concat(t.value,'"]'));if(null!==a.getAttribute("data-key")){var l=a.getAttribute("data-key");console.log(l),console.log(e.target.value),n.setState({selectLeader:l})}},n.state={daftarStaff:[],daftarLeader:[],daftarTipe:[],daftarPosisi:[],daftarLevel:[],daftarSupervisor:[],daftarManager:[],daftarHead:[],daftarGM:[],resPerPage:20,first:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",fullname:"",userId:"",name:"",userIndex:0,reason:"",checkId:[],addMode:!1,editMode:!1,deleteCounter:0,loadingReco:!1,message:"",level:"",fotoWajah:"",message:"",loadingReco:!1,nik:"",tipeKaryawan:"",posisi:"",imei:"",jamKerja:"",lokasiKerja:"",jumlahCuti:0,lembur:"ya",username:"",password:"",selectLeader:"",selectSupervisor:"",selectManager:"",selectHead:"",selectGM:"",statusReco:0,email:"",fotoWajahObject:{},daftarShifting:[],shifting:{},leader:{},absenPointObject:{},message:"",color:"",visible:!1,message:"",color:"danger",absenPoint:[],daftarPoint:[],idPoint:"",imeiMessage:"",searchBy:"all",searchValue:"",jamMasuk:0,jamKeluar:0},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.handleFilterPagination(),this.getLeader(),this.getSupervisor(),this.getManager(),this.getHead(),this.getGM(),this.getLevel(),this.getPosisi(),this.getTipe(),this.getShifting(),this.getPoint()}},{key:"render",value:function(){var e=this,t=this.state,a=t.daftarStaff,n=t.loading,s=t.loadingReco,r=t.message,o=t.level,i=t.email,c=(t.fullname,t.imei),m=t.jamKerja,u=t.jumlahCuti,d=t.lokasiKerja,p=(t.shifting,t.lembur),v=t.tipeKaryawan,E=t.nik,b=t.posisi,S=t.daftarPoint,k=t.loadingModal,j=(t.fullnames,t.addMode),M=t.leader,w=(t.photoMode,t.statusReco,t.daftarShifting,t.daftarLevel),T=t.daftarPosisi,H=t.daftarTipe,O=t.editMode,I=l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih leader"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectLeader:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih leader"),this.state.daftarLeader.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))),l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih supervisor"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectSupervisor:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih supervisor"),this.state.daftarSupervisor.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},void 0===e.get("fullname")?"":e.get("fullname"))})))),l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih manager"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectManager:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih manager"),this.state.daftarManager.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))),l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih head"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectHead:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih head"),this.state.daftarHead.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))),l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih GM"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectGM:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih GM"),this.state.daftarGM.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))}))))),N=l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih supervisor"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectSupervisor:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih supervisor"),this.state.daftarSupervisor.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))),l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih manager"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectManager:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih manager"),this.state.daftarManager.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))),l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih head"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectHead:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih head"),this.state.daftarHead.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))),l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih GM"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectGM:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih GM"),this.state.daftarGM.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))}))))),D=l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih manager"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectManager:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih manager"),this.state.daftarManager.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))),l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih head"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectHead:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih head"),this.state.daftarHead.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))),l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih GM"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectGM:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih GM"),this.state.daftarGM.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))}))))),C=l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih head"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectHead:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih head"),this.state.daftarHead.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))),l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih GM"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectGM:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih GM"),this.state.daftarGM.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))}))))),A=l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih GM"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectGM:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih GM"),this.state.daftarGM.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))}))))),L=l.a.createElement(f.a,{controlId:"formlvl"},l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){return e.setState({searchValue:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih ",this.state.searchBy),"leader"===this.state.searchBy?w.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))})):this.state.daftarPosisi.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))})))),x=l.a.createElement(f.a,null,l.a.createElement(y.a,{type:"text",className:"form-control-alternative",disabled:"all"===this.state.searchBy,placeholder:"all"===this.state.searchBy?"":"Masukkan ".concat(this.state.searchBy),onChange:function(t){return e.setState({searchValue:t.target.value})}}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}}),l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,{className:"mb-4"},l.a.createElement(ae.a,{className:"ml-2",color:"primary","data-dismiss":"modal",type:"button",onClick:function(){return e.setState({addMode:!0})}},l.a.createElement("i",{className:"fa fa-plus"})," Register")),l.a.createElement(h.a,{onSubmit:this.handleFilter,className:!0},l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:2},"Search by"),l.a.createElement(z.a,{lg:2},l.a.createElement(f.a,{controlId:"formHorizontalEmails"},l.a.createElement(y.a,{className:"form-control-alternative",type:"select",onChange:function(t){return e.setState({searchBy:t.target.value.toLowerCase(),searchValue:""})}},["All","NIK","Name","Level","Leader","Divisi"].map((function(e){return l.a.createElement("option",{value:e},e)}))))),l.a.createElement(z.a,{lg:4},"level"===this.state.searchBy||"divisi"===this.state.searchBy?L:x),l.a.createElement(z.a,{sm:2},l.a.createElement(ae.a,{color:"primary",type:"submit",disable:this.state.loadingFilter?"true":"false"},l.a.createElement("i",{className:"fa fa-search"})," ",this.state.loadingFilter?"Fetching...":"Search"))))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Email"),l.a.createElement("th",{scope:"col"},"Tipe Karyawan"),l.a.createElement("th",{scope:"col"},"Posisi"),l.a.createElement("th",{scope:"col"},"Level"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,t.get("nik")),l.a.createElement("td",null,t.get("fullname")),l.a.createElement("td",null,t.get("email")),l.a.createElement("td",null,t.get("tipe")),l.a.createElement("td",null,t.get("posisi")),l.a.createElement("td",null,t.get("level")),l.a.createElement("td",null,l.a.createElement(ae.a,{id:"t4",color:"yellow",className:"btn-circle",onClick:function(){e.setState({viewPhoto:!0})}},l.a.createElement("i",{className:"fa fa-eye"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t4"},"Lihat detail"),l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(n){e.setState({approvalMode:!0,userId:t.id,userIndex:a,fullname:t.get("fullname")}),e.getDetail(n,t.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Ubah data")))})))),l.a.createElement(he.a,{activePage:this.state.page,itemsCountPerPage:this.state.resPerPage,totalItemsCount:this.state.totalData,pageRangeDisplayed:5,onChange:function(t){return e.handleFilterPagination(t)},innerClass:"pagination justify-content-end p-4",itemClass:"page-item mt-2",linkClass:"page-link",prevPageText:"<",nextPageText:">"}))))),l.a.createElement(Ce,{show:j,loading:k,footer:!1,handleHide:function(){return e.toggle("addMode")},title:"Tambah Data",body:l.a.createElement(h.a,{onSubmit:function(t){return e.handleCheckImei(t,e.state.imei)},autoComplete:"off"},l.a.createElement(f.a,{controlId:"formCategory"},l.a.createElement(Ne.a,null,"Foto wajah"),l.a.createElement(y.a,{type:"file",label:"Foto wajah",onChange:this.handleFace,required:!0}),l.a.createElement(Ke.a,{className:s?"text-muted":"",style:{color:"".concat(0==this.state.statusReco?"red":"green")}},s?"processing...":r)),l.a.createElement(f.a,{controlId:"formNama"},l.a.createElement(Ne.a,null,"Nama"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",required:!0,type:"text",placeholder:"Masukkan nama",onChange:function(t){return e.setState({name:t.target.value})}})),l.a.createElement(f.a,{controlId:"formTipex"},l.a.createElement(Ne.a,null,"Level"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({level:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih level"),w.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))})))),""!==this.state.level?function(e){switch(e.toLowerCase()){case"staff":return I;case"leader":return N;case"supervisor":return D;case"manager":return C;case"head":return A;default:return}}(this.state.level.toLowerCase()):"",l.a.createElement(f.a,{controlId:"formEmail"},l.a.createElement(Ne.a,null,"Email"),l.a.createElement(y.a,{autoComplete:"off",required:!0,type:"email",placeholder:"Masukkan email",onChange:function(t){return e.setState({email:t.target.value})}})),l.a.createElement(f.a,{controlId:"formx"},l.a.createElement(Ne.a,null,"Username"),l.a.createElement(y.a,{autoComplete:"off",required:!0,type:"text",placeholder:"Masukkan username",onChange:function(t){return e.setState({username:t.target.value})}})),l.a.createElement(f.a,{controlId:"formz"},l.a.createElement(Ne.a,null,"Password"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"new-password",required:!0,type:"password",placeholder:"Masukkan password",onChange:function(t){return e.setState({password:t.target.value})}})),l.a.createElement(f.a,{controlId:"formNik"},l.a.createElement(Ne.a,null,"NIK"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",required:!0,type:"text",placeholder:"Masukkan NIK",onChange:function(t){return e.setState({nik:t.target.value.toUpperCase()})}})),l.a.createElement(f.a,{controlId:"formTipex"},l.a.createElement(Ne.a,null,"Tipe karyawan"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({tipeKaryawan:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih tipe karyawan"),H.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("tipe")},e.get("tipe"))})))),l.a.createElement(f.a,{controlId:"formPosisi"},l.a.createElement(Ne.a,null,"Posisi"),l.a.createElement(y.a,{required:!0,type:"select",onChange:function(t){return e.setState({posisi:t.target.value.toUpperCase()})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih posisi"),T.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))})))),l.a.createElement(f.a,{controlId:"formImei"},l.a.createElement(Ne.a,null,"IMEI"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",required:!0,type:"text",placeholder:"Masukkan imei hp",onChange:function(t){return e.setState({imei:t.target.value})}}),l.a.createElement(Ke.a,{className:"text-red",style:{color:"red"}},""!==this.state.imeiMessage?this.state.imeiMessage:"")),l.a.createElement(f.a,{controlId:"formJam"},l.a.createElement(Ne.a,null,"Jam kerja"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({jamKerja:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih jam kerja"),["Jam tetap","Jam fleksibel","Jam bebas"].map((function(e){return l.a.createElement("option",{value:e},e)})))),""!==this.state.jamKerja&&"Jam bebas"!==this.state.jamKerja?l.a.createElement(f.a,{controlId:"formJam"},l.a.createElement(Ne.a,null,"Jam masuk dan keluar"),l.a.createElement(F.a,null,l.a.createElement(z.a,{md:6},l.a.createElement(y.a,{type:"number",required:!0,placeholder:"Jam Masuk",onChange:function(t){return e.setState({jamMasuk:t.target.value})}})),l.a.createElement(z.a,{md:6},l.a.createElement(y.a,{type:"number",placeholder:"Jam Keluar",required:!0,onChange:function(t){return e.setState({jamKeluar:t.target.value})}})))):"",l.a.createElement(f.a,{controlId:"formLokasi"},l.a.createElement(Ne.a,null,"Lokasi kerja"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({lokasiKerja:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lokasi kerja"),["Tetap","Bebas (mobile)"].map((function(e){return l.a.createElement("option",{value:e},e)})))),"Tetap"===this.state.lokasiKerja?l.a.createElement(f.a,{controlId:"formPoint"},l.a.createElement(Ne.a,null,"Absen point"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({idPoint:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih absen point"),S.map((function(e){return l.a.createElement("option",{value:e.id},e.get("placeName"))})))):"",l.a.createElement(f.a,{controlId:"formCuti"},l.a.createElement(Ne.a,null,"Jumlah cuti"),l.a.createElement(y.a,{type:"number",required:!0,placeholder:"Masukkan jumlah cuti",onChange:function(t){return e.setState({jumlahCuti:parseInt(t.target.value)})}})),l.a.createElement(f.a,{controlId:"formLembut"},l.a.createElement(Ne.a,null,"Lembur"),l.a.createElement(y.a,{type:"select",defaultValue:"all",required:!0,onChange:function(t){return e.setState({lembur:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lembur"),["Ya","Tidak"].map((function(e){return l.a.createElement("option",{value:e},e)})))),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:4,md:4},l.a.createElement(ae.a,{color:0===this.state.statusReco?"danger":"primary",type:"submit",disabled:0===this.state.statusReco},0===this.state.statusReco?"upload foto dahulu":this.state.loadingModal?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")),l.a.createElement(z.a,{lg:8,md:8},l.a.createElement("div",{className:"text-red",style:{color:"red"}},""!==this.state.imeiMessage?this.state.imeiMessage:"")))),handleSubmit:function(t){return e.handleAdd(t)}}),l.a.createElement(Ce,{show:O,loading:k,footer:!1,handleHide:function(){return e.toggle("editMode")},title:"Edit Data",body:l.a.createElement(h.a,{onSubmit:this.handleUpdate,autoComplete:"off"},l.a.createElement(f.a,{controlId:"formCategory"},l.a.createElement(Ne.a,null,"Foto wajah"),l.a.createElement(y.a,{type:"file",label:"Foto wajah",onChange:this.handleFace}),l.a.createElement(Ke.a,{className:s?"text-muted":"",style:{color:"".concat(0==this.state.statusReco?"red":"green")}},s?"processing...":r)),l.a.createElement(f.a,{controlId:"formNama"},l.a.createElement(Ne.a,null,"Nama"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",value:this.state.name,type:"text",placeholder:"Masukkan nama",onChange:function(t){return e.setState({name:t.target.value})}})),l.a.createElement(f.a,{controlId:"formTipex"},l.a.createElement(Ne.a,null,"Level"),l.a.createElement(y.a,{type:"select",onChange:function(t){return e.setState({level:t.target.value})}},w.map((function(e,t){return l.a.createElement("option",{selected:o.toLowerCase()===e.get("level").toLowerCase(),key:t,value:e.get("level")},e.get("level"))})))),"leader"!==this.state.level&&"admin"!==this.state.level?l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih leader"),l.a.createElement(y.a,{type:"select",onChange:function(t){return e.setState({selectLeader:t.target.value})}},this.state.daftarLeader.map((function(e,t){return l.a.createElement("option",{selected:M.id===e.id,key:t,value:e.id},e.get("fullname"))})))):"",l.a.createElement(f.a,{controlId:"formEmail"},l.a.createElement(Ne.a,null,"Email"),l.a.createElement(y.a,{autoComplete:"off",value:i,type:"email",placeholder:"Masukkan email",onChange:function(t){return e.setState({email:t.target.value})}})),l.a.createElement(f.a,{controlId:"formz"},l.a.createElement(Ne.a,null,"Password"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"new-password",type:"password",placeholder:"Masukkan password jika ingin mengubah password",onChange:function(t){return e.setState({password:t.target.value})}})),l.a.createElement(f.a,{controlId:"formNik"},l.a.createElement(Ne.a,null,"NIK"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",value:E,type:"text",placeholder:"Masukkan NIK",onChange:function(t){return e.setState({nik:t.target.value.toUpperCase()})}})),l.a.createElement(f.a,{controlId:"formTipex"},l.a.createElement(Ne.a,null,"Tipe karyawan"),l.a.createElement(y.a,{type:"select",onChange:function(t){return e.setState({tipeKaryawan:t.target.value})}},H.map((function(e,t){return l.a.createElement("option",{selected:v===e.get("tipe").toLowerCase(),key:t,value:e.get("tipe")},e.get("tipe"))})))),l.a.createElement(f.a,{controlId:"formPosisi"},l.a.createElement(Ne.a,null,"Posisi"),l.a.createElement(y.a,{type:"select",onChange:function(t){return e.setState({posisi:t.target.value.toUpperCase()})}},T.map((function(e,t){return l.a.createElement("option",{selected:b.toLowerCase()===e.get("position").toLowerCase(),key:t,value:e.get("position")},e.get("position"))})))),l.a.createElement(f.a,{controlId:"formImei"},l.a.createElement(Ne.a,null,"IMEI"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",defaultValue:c,type:"text",placeholder:"Masukkan imei hp",onChange:function(t){return e.setState({imei:t.target.value})}})),l.a.createElement(f.a,{controlId:"formJam"},l.a.createElement(Ne.a,null,"Jam kerja"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({jamKerja:t.target.value})}},["Jam tetap","Jam fleksibel","Jam bebas"].map((function(e){return l.a.createElement("option",{selected:m.toLowerCase()===e.toLowerCase(),value:e},e)})))),""!==this.state.jamKerja&&"Jam bebas"!==this.state.jamKerja?l.a.createElement(f.a,{controlId:"formJam"},l.a.createElement(Ne.a,null,"Jam masuk dan keluar"),l.a.createElement(F.a,null,l.a.createElement(z.a,{md:6},l.a.createElement(y.a,{type:"number",value:this.state.jamMasuk,placeholder:"Jam Masuk",onChange:function(t){return e.setState({jamMasuk:t.target.value})}})),l.a.createElement(z.a,{md:6},l.a.createElement(y.a,{type:"number",value:this.state.jamKeluar,placeholder:"Jam Keluar",onChange:function(t){return e.setState({jamKeluar:t.target.value})}})))):"",l.a.createElement(f.a,{controlId:"formLokasi"},l.a.createElement(Ne.a,null,"Lokasi kerja"),l.a.createElement(y.a,{type:"select",onChange:function(t){return e.setState({lokasiKerja:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lokasi kerja"),["Tetap","Bebas (mobile)"].map((function(e){return l.a.createElement("option",{selected:d.toLowerCase()===e.toLowerCase(),value:e},e)})))),"Tetap"===this.state.lokasiKerja?l.a.createElement(f.a,{controlId:"formPoint"},l.a.createElement(Ne.a,null,"Absen point"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({idPoint:t.target.value})}},S.map((function(t){return l.a.createElement("option",{selected:e.state.absenPointObject.id===t.id,key:t.id,value:t.id},t.get("placeName"))})))):"",l.a.createElement(f.a,{controlId:"formCuti"},l.a.createElement(Ne.a,null,"Jumlah cuti"),l.a.createElement(y.a,{type:"number",defaultValue:u,placeholder:"Masukkan jumlah cuti",onChange:function(t){return e.setState({jumlahCuti:parseInt(t.target.value)})}})),l.a.createElement(f.a,{controlId:"formLembut"},l.a.createElement(Ne.a,null,"Lembur"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({lembur:t.target.value})}},["Ya","Tidak"].map((function(e){return l.a.createElement("option",{selected:p.toLowerCase()===e.toLowerCase(),value:e},e)})))),l.a.createElement(ae.a,{color:"primary",type:"submit",disabled:0===k},k?"Submitting...":"Submit")),handleSubmit:function(t){return e.handleUpdate(t)}}))}}]),a}(l.a.Component),Je=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getData=function(){n.setState({loading:!0});var e=new O.a.Object.extend("EmployeeType"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({tipe:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.handleAdd=function(e){e.preventDefault();var t=n.state.inputTipe;n.setState({loadingModal:!0});var a=new(O.a.Object.extend("EmployeeType"));a.set("tipe",t),a.save().then((function(e){n.setState({addMode:!1,loadingModal:!1,tipe:n.state.tipe.concat(e),message:"Berhasil tambah data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})}))},n.getDetail=function(e,t){e.preventDefault();var a=O.a.Object.extend("EmployeeType");new O.a.Query(a).get(t).then((function(e){var t=e.attributes;n.setState({inputTipe:t.tipe,editMode:!0})})).catch((function(e){alert(e.message),n.setState({loadingModal:!1})}))},n.handleUpdate=function(e){e.preventDefault();var t=n.state.inputTipe;n.setState({loadingModal:!0});var a=O.a.Object.extend("EmployeeType");new O.a.Query(a).get(n.state.userId).then((function(e){e.set("tipe",t),e.save().then((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))},n.handleRemove=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=O.a.Object.extend("EmployeeType");new O.a.Query(t).get(n.state.userId).then((function(e){e.set("status",0),e.save().then((function(e){var t=Object(Oe.a)(n.state.tipe);t.splice(n.state.userIndex,1),n.setState({deleteMode:!1,loadingModal:!1,tipe:t,message:"Berhasil hapus data",visible:!0})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.state={tipe:[],inputTipe:"",detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,deleteMode:!1,editMode:!1,deleteCounter:0,message:"",color:"danger",visible:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.tipe,n=t.loading,s=t.inputTipe,r=(t.rejectMode,t.loadingModal),o=t.fullnames,i=t.addMode,c=t.deleteMode,m=t.editMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,null,l.a.createElement(ae.a,{className:"ml-2",color:"primary","data-dismiss":"modal",type:"button",onClick:function(){return e.setState({addMode:!0})}},l.a.createElement("i",{className:"fa fa-plus"})," Tambah")),l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}})),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"No"),l.a.createElement("th",{scope:"col"},"Tipe"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,a+1),l.a.createElement("td",null,t.get("tipe")),l.a.createElement("td",null,l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(n){e.setState({userId:t.id,userIndex:a}),e.getDetail(n,t.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Ubah data"),l.a.createElement(ae.a,{id:"t2",className:"btn-circle btn-danger",onClick:function(n){e.setState({deleteMode:!0,userId:t.id,userIndex:a,fullnames:t.get("level")})}},l.a.createElement("i",{className:"fa fa-trash"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t2"},"Hapus data")))})))))))),l.a.createElement(Ce,{show:i,loading:r,footer:!1,handleHide:function(){return e.toggle("addMode")},title:"Tambah Data",body:l.a.createElement("div",null,l.a.createElement(h.a,{onSubmit:function(t){return e.handleAdd(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Tipe"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan tipe karyawan",type:"text",required:!0,onChange:function(t){return e.setState({inputTipe:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleAdd(t)}}),l.a.createElement(Ce,{show:m,loading:r,footer:!1,handleHide:function(){return e.toggle("editMode")},title:"Edit Data",body:l.a.createElement(h.a,{onSubmit:function(t){return e.handleUpdate(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Tipe"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan tipe karyawan",value:s,type:"text",required:!0,onChange:function(t){return e.setState({inputTipe:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("editMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")),handleSubmit:function(t){return e.handleUpdate(t)}}),l.a.createElement(Ce,{show:c,loading:r,footer:!0,handleHide:function(){return e.toggle("deleteMode")},title:"Remove Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Remove tipe ".concat(o," ?"))),handleSubmit:function(t){return e.handleRemove(t)}}))}}]),a}(l.a.Component),Fe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getData=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Position"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({posisi:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.handleAdd=function(e){e.preventDefault();var t=n.state.inputPosisi;n.setState({loadingModal:!0});var a=new(O.a.Object.extend("Position"));a.set("position",t),a.save().then((function(e){n.setState({addMode:!1,loadingModal:!1,posisi:n.state.posisi.concat(e),message:"Berhasil tambah data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})}))},n.getDetail=function(e,t){e.preventDefault();var a=O.a.Object.extend("Position");new O.a.Query(a).get(t).then((function(e){var t=e.attributes;n.setState({inputPosisi:t.position,editMode:!0})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})}))},n.handleUpdate=function(e){e.preventDefault();var t=n.state.inputPosisi;n.setState({loadingModal:!0});var a=O.a.Object.extend("Position");new O.a.Query(a).get(n.state.userId).then((function(e){e.set("position",t),e.save().then((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))},n.handleRemove=function(e){e.preventDefault();n.state.inputLevel;n.setState({loadingModal:!0});var t=O.a.Object.extend("Position");new O.a.Query(t).get(n.state.userId).then((function(e){e.set("status",0),e.save().then((function(e){var t=Object(Oe.a)(n.state.posisi);t.splice(n.state.userIndex,1),n.setState({deleteMode:!1,loadingModal:!1,posisi:t,message:"Berhasil hapus data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.state={posisi:[],inputPosisi:"",detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,deleteMode:!1,editMode:!1,deleteCounter:0,message:"",color:"danger",visible:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.posisi,n=t.loading,s=(t.inputPosisi,t.rejectMode,t.loadingModal),r=t.fullnames,o=t.addMode,i=t.deleteMode,c=t.editMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}}),l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,null,l.a.createElement(ae.a,{className:"ml-2",color:"primary","data-dismiss":"modal",type:"button",onClick:function(){return e.setState({addMode:!0})}},l.a.createElement("i",{className:"fa fa-plus"})," Tambah"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"No"),l.a.createElement("th",{scope:"col"},"Posisi"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,a+1),l.a.createElement("td",null,t.get("position")),l.a.createElement("td",null,l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(n){e.setState({userId:t.id,userIndex:a}),e.getDetail(n,t.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Ubah data"),l.a.createElement(ae.a,{id:"t2",className:"btn-circle btn-danger",onClick:function(n){e.setState({deleteMode:!0,userId:t.id,userIndex:a,fullnames:t.get("posisi")})}},l.a.createElement("i",{className:"fa fa-trash"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t2"},"Hapus data")))})))))))),l.a.createElement(Ce,{show:o,loading:s,footer:!1,handleHide:function(){return e.toggle("addMode")},title:"Tambah Data",body:l.a.createElement("div",null,l.a.createElement(h.a,{onSubmit:function(t){return e.handleAdd(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Posisi"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan posisi",type:"text",required:!0,onChange:function(t){return e.setState({inputPosisi:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleAdd(t)}}),l.a.createElement(Ce,{show:c,loading:s,footer:!1,handleHide:function(){return e.toggle("editMode")},title:"Edit Data",body:l.a.createElement(h.a,{onSubmit:function(t){return e.handleUpdate(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Posisi"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan posisi",value:this.state.inputPosisi,type:"text",required:!0,onChange:function(t){return e.setState({inputPosisi:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("editMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")),handleSubmit:function(t){return e.handleUpdate(t)}}),l.a.createElement(Ce,{show:i,loading:s,footer:!0,handleHide:function(){return e.toggle("deleteMode")},title:"Remove Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Remove level ".concat(r," ?"))),handleSubmit:function(t){return e.handleRemove(t)}}))}}]),a}(l.a.Component),ze=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getData=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Level"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({level:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.handleAdd=function(e){e.preventDefault();var t=n.state.inputLevel;n.setState({loadingModal:!0});var a=new(O.a.Object.extend("Level"));a.set("level",t),a.save().then((function(e){n.setState({addMode:!1,loadingModal:!1,level:n.state.level.concat(e),message:"Berhasil tambah data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})}))},n.getDetail=function(e,t){e.preventDefault();var a=O.a.Object.extend("Level");new O.a.Query(a).get(t).then((function(e){var t=e.attributes;n.setState({inputLevel:t.level,editMode:!0})})).catch((function(e){alert(e.message),n.setState({loadingModal:!1})}))},n.handleUpdate=function(e){e.preventDefault();var t=n.state.inputLevel;n.setState({loadingModal:!0});var a=O.a.Object.extend("Level");new O.a.Query(a).get(n.state.userId).then((function(e){e.set("level",t),e.save().then((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))},n.handleRemove=function(e){e.preventDefault();n.state.inputLevel;n.setState({loadingModal:!0});var t=O.a.Object.extend("Level");new O.a.Query(t).get(n.state.userId).then((function(e){e.set("status",0),e.save().then((function(e){var t=Object(Oe.a)(n.state.level);t.splice(n.state.userIndex,1),n.setState({deleteMode:!1,loadingModal:!1,level:t,message:"Berhasil hapus data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.state={level:[],inputLevel:"",detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,deleteMode:!1,editMode:!1,deleteCounter:0,message:"",color:"danger",visible:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.level,n=t.loading,s=t.inputLevel,r=(t.rejectMode,t.loadingModal),o=t.fullnames,i=t.addMode,c=t.deleteMode,m=t.editMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}}),l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,null,l.a.createElement(ae.a,{className:"ml-2",color:"primary","data-dismiss":"modal",type:"button",onClick:function(){return e.setState({addMode:!0})}},l.a.createElement("i",{className:"fa fa-plus"})," Tambah"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"No"),l.a.createElement("th",{scope:"col"},"Level"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,a+1),l.a.createElement("td",null,t.get("level")),l.a.createElement("td",null,l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(n){e.setState({userId:t.id,userIndex:a}),e.getDetail(n,t.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Ubah data"),l.a.createElement(ae.a,{id:"t2",className:"btn-circle btn-danger",onClick:function(n){e.setState({deleteMode:!0,userId:t.id,userIndex:a,fullnames:t.get("level")})}},l.a.createElement("i",{className:"fa fa-trash"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t2"},"Hapus data")))})))))))),l.a.createElement(Ce,{show:i,loading:r,footer:!1,handleHide:function(){return e.toggle("addMode")},title:"Tambah Data",body:l.a.createElement("div",null,l.a.createElement(h.a,{onSubmit:function(t){return e.handleAdd(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Level"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan level",type:"text",required:!0,onChange:function(t){return e.setState({inputLevel:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleAdd(t)}}),l.a.createElement(Ce,{show:m,loading:r,footer:!1,handleHide:function(){return e.toggle("editMode")},title:"Edit Data",body:l.a.createElement(h.a,{onSubmit:function(t){return e.handleUpdate(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Level"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan level",value:s,type:"text",required:!0,onChange:function(t){return e.setState({inputLevel:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("editMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")),handleSubmit:function(t){return e.handleUpdate(t)}}),l.a.createElement(Ce,{show:c,loading:r,footer:!0,handleHide:function(){return e.toggle("deleteMode")},title:"Remove Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Remove level ".concat(o," ?"))),handleSubmit:function(t){return e.handleRemove(t)}}))}}]),a}(l.a.Component),Ue=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getData=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Departemen"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({dept:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.handleAdd=function(e){e.preventDefault();var t=n.state.inputDept;n.setState({loadingModal:!0});var a=new(O.a.Object.extend("Departemen"));a.set("deptName",t),a.save().then((function(e){n.setState({addMode:!1,loadingModal:!1,dept:n.state.dept.concat(e),message:"Berhasil tambah data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})}))},n.getDetail=function(e,t){e.preventDefault();var a=O.a.Object.extend("Departemen");new O.a.Query(a).get(t).then((function(e){var t=e.attributes;n.setState({inputDept:t.deptName,editMode:!0})})).catch((function(e){alert(e.message),n.setState({loadingModal:!1})}))},n.handleUpdate=function(e){e.preventDefault();var t=n.state.inputDept;n.setState({loadingModal:!0});var a=O.a.Object.extend("Departemen");new O.a.Query(a).get(n.state.userId).then((function(e){e.set("deptName",t),e.save().then((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))},n.handleRemove=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=O.a.Object.extend("Departemen");new O.a.Query(t).get(n.state.userId).then((function(e){e.set("status",0),e.save().then((function(e){var t=Object(Oe.a)(n.state.dept);t.splice(n.state.userIndex,1),n.setState({deleteMode:!1,loadingModal:!1,dept:t})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.state={dept:[],inputDept:"",detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,deleteMode:!1,editMode:!1,deleteCounter:0,message:"",color:"danger",visible:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.dept,n=t.loading,s=(t.inputDept,t.rejectMode,t.loadingModal),r=t.fullnames,o=t.addMode,i=t.deleteMode,c=t.editMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}}),l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,null,l.a.createElement(ae.a,{className:"ml-2",color:"primary","data-dismiss":"modal",type:"button",onClick:function(){return e.setState({addMode:!0})}},l.a.createElement("i",{className:"fa fa-plus"})," Tambah"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"No"),l.a.createElement("th",{scope:"col"},"Departemen"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,a+1),l.a.createElement("td",null,t.get("deptName")),l.a.createElement("td",null,l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(n){e.setState({userId:t.id,userIndex:a}),e.getDetail(n,t.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Ubah data"),l.a.createElement(ae.a,{id:"t2",className:"btn-circle btn-danger",onClick:function(n){e.setState({deleteMode:!0,userId:t.id,userIndex:a,fullnames:t.get("level")})}},l.a.createElement("i",{className:"fa fa-trash"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t2"},"Hapus data")))})))))))),l.a.createElement(Ce,{show:o,loading:s,footer:!1,handleHide:function(){return e.toggle("addMode")},title:"Tambah Data",body:l.a.createElement("div",null,l.a.createElement(h.a,{onSubmit:function(t){return e.handleAdd(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Departemen"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan departemen",type:"text",required:!0,onChange:function(t){return e.setState({inputDept:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleAdd(t)}}),l.a.createElement(Ce,{show:c,loading:s,footer:!1,handleHide:function(){return e.toggle("editMode")},title:"Edit Data",body:l.a.createElement(h.a,{onSubmit:function(t){return e.handleUpdate(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Departemen"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan departemen",value:this.state.inputDept,type:"text",required:!0,onChange:function(t){return e.setState({inputDept:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("editMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")),handleSubmit:function(t){return e.handleUpdate(t)}}),l.a.createElement(Ce,{show:i,loading:s,footer:!0,handleHide:function(){return e.toggle("deleteMode")},title:"Remove Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Remove departemen ".concat(r," ?"))),handleSubmit:function(t){return e.handleRemove(t)}}))}}]),a}(l.a.Component),Be=a(94),Re=a.n(Be),Qe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getData=function(){n.setState({loading:!0});var e=new O.a.Object.extend("ValidGeopoint"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({point:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.handleAdd=function(e){e.preventDefault();var t=n.state,a=t.placeName,l=t.latitude,s=t.longitude;n.setState({loadingModal:!0});var r=new(O.a.Object.extend("ValidGeopoint"));r.set("placeName",a),r.set("latitude",l.toString()),r.set("longitude",s.toString()),r.save().then((function(e){n.setState({addMode:!1,loadingModal:!1,point:n.state.point.concat(e),message:"Berhasil tambah data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})}))},n.getDetail=function(e,t){e.preventDefault();var a=O.a.Object.extend("ValidGeopoint");new O.a.Query(a).get(t).then((function(e){var t=e.attributes;n.setState({placeName:t.placeName,latitude:t.latitude,longitude:t.longitude,editMode:!0})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.handleUpdate=function(e){e.preventDefault();var t=n.state,a=t.placeName,l=t.latitude,s=t.longitude;n.setState({loadingModal:!0});var r=O.a.Object.extend("ValidGeopoint");new O.a.Query(r).get(n.state.userId).then((function(e){e.set("placeName",a),e.set("latitude",l.toString()),e.set("longitude",s.toString()),e.save().then((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingMModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))},n.handleRemove=function(e){e.preventDefault();n.state.placeName;n.setState({loadingModal:!0});var t=O.a.Object.extend("ValidGeopoint");new O.a.Query(t).get(n.state.userId).then((function(e){e.set("status",0),e.save().then((function(e){var t=Object(Oe.a)(n.state.point);t.splice(n.state.userIndex,1),n.setState({deleteMode:!1,loadingModal:!1,point:t,message:"Berhail hapus data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.getLocationGeopoint=function(){n.setState({loadingGeocode:!0});var e=n.state.inputAddress;Re.a.fromAddress(e).then((function(e){var t=e.results[0].geometry.location,a=t.lat,l=t.lng;console.log(a,l),n.setState({latitude:a,longitude:l,loadingGeocode:!1})}),(function(e){console.error(e),n.setState({loadingGeocode:!1})}))},n.state={point:[],placeName:"",detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,editMode:!1,deleteMode:!1,deleteCounter:0,latitude:0,longitude:0,message:"",color:"danger",visible:!1,inputAddress:"",loadingGeocode:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData(),Re.a.setApiKey("AIzaSyC5tj-2X6b7kwGTqGZkB7sofZdMhpyE75Q"),Re.a.setRegion("es")}},{key:"render",value:function(){var e=this,t=this.state,a=t.point,n=t.loading,s=t.addMode,r=t.editMode,o=t.loadingModal,i=t.fullnames,c=(t.detail,t.deleteMode);t.approveAllMode,t.rejectAllMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}}),l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,null,l.a.createElement(ae.a,{className:"ml-2",color:"primary","data-dismiss":"modal",type:"button",onClick:function(){return e.setState({addMode:!0})}},l.a.createElement("i",{className:"fa fa-plus"})," Tambah"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"No"),l.a.createElement("th",{scope:"col"},"Place Name"),l.a.createElement("th",{scope:"col"},"Latitude"),l.a.createElement("th",{scope:"col"},"Longitude"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,a+1),l.a.createElement("td",null,t.get("placeName")),l.a.createElement("td",null,t.get("latitude")),l.a.createElement("td",null,t.get("longitude")),l.a.createElement("td",null,l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(n){e.setState({userId:t.id,userIndex:a}),e.getDetail(n,t.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Ubah data"),l.a.createElement(ae.a,{id:"t2",className:"btn-circle btn-danger",onClick:function(n){e.setState({deleteMode:!0,userId:t.id,userIndex:a,fullnames:t.get("placeName")})}},l.a.createElement("i",{className:"fa fa-trash"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t2"},"Hapus data")))})))))))),l.a.createElement(Ce,{show:s,loading:o,footer:!1,handleHide:function(){return e.toggle("addMode")},title:"Tambah Absen Point",body:l.a.createElement("div",null,l.a.createElement(h.a,{onSubmit:function(t){return e.handleAdd(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Tempat absen"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan tempat absen",className:"form-control-alternitive",type:"text",required:!0,onChange:function(t){return e.setState({placeName:t.target.value})}})),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Nama lokasi"),l.a.createElement(y.a,{id:"zz1",placeholder:"Ex: DIKA 1",className:"form-control-alternitive",type:"text",onChange:function(t){return e.setState({inputAddress:t.target.value})}})),l.a.createElement(ae.a,{color:"primary",className:"mb-4",onClick:this.getLocationGeopoint,disabled:""===this.state.inputAddress},this.state.loadingGeocode?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Mendapatkan geopoint..."):"Search"),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Latitude"),l.a.createElement(y.a,{id:"zz2",placeholder:"Masukkan latitude absen point",type:"text",value:this.state.latitude,required:!0,onChange:function(t){return e.setState({latitude:t.target.value})}})),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Longitude"),l.a.createElement(y.a,{id:"zz3",placeholder:"Masukkan longitude absen point",type:"text",value:this.state.longitude,required:!0,onChange:function(t){return e.setState({longitude:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},o?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleAdd(t)}}),l.a.createElement(Ce,{show:r,loading:o,footer:!1,handleHide:function(){return e.toggle("editMode")},title:"Edit Absen Point",body:l.a.createElement("div",null,l.a.createElement(h.a,{onSubmit:function(t){return e.handleUpdate(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Tempat absen"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan tempat absen",type:"text",value:this.state.placeName,required:!0,onChange:function(t){return e.setState({placeName:t.target.value})}})),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Latitude"),l.a.createElement(y.a,{id:"zz2",placeholder:"Masukkan latitude absen point",type:"text",value:this.state.latitude,required:!0,onChange:function(t){return e.setState({latitude:t.target.value})}})),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Longitude"),l.a.createElement(y.a,{id:"zz3",placeholder:"Masukkan longitude absen point",type:"text",value:this.state.longitude,required:!0,onChange:function(t){return e.setState({longitude:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("editMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},o?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleUpdate(t)}}),l.a.createElement(Ce,{show:c,loading:o,footer:!0,handleHide:function(){return e.toggle("deleteMode")},title:"Remove Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Remove absen point ".concat(i," ?"))),handleSubmit:function(t){return e.handleRemove(t)}}))}}]),a}(l.a.Component),Ye=a(145),Ge=a.n(Ye),_e=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getPoint=function(){var e=new O.a.Object.extend("ValidGeopoint"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarPoint:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.sendEmail=function(e){Ge.a.sendForm("gmail","template_N8cRQk3D",e.target,"user_h2fWwDoztgEPcKNQ9vadt").then((function(e){console.log(e.text)}),(function(e){console.log(e.text)}))},n.getTipe=function(){n.setState({loading:!0});var e=new O.a.Object.extend("EmployeeType"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarTipe:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getPosisi=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Position"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarPosisi:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getLevel=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Level"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarLevel:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getStaff=function(){n.setState({loading:!0});var e=O.a.Object.extend("SelfRegist"),t=new O.a.Query(e);t.equalTo("status",3),t.find().then((function(e){n.setState({selfRegist:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getDetail=function(e,t,a){e.preventDefault();var l=O.a.Object.extend("SelfRegist");new O.a.Query(l).get(t).then((function(e){var t=e.attributes;console.log(t),n.setState({nik:t.nik,name:t.fullname,username:t.usernameClone,imei:t.imei,email:t.email,fotoWajah:void 0===t.fotoWajah?"":t.fotoWajah.url(),fotoWajahObj:t.fotoWajah,password:t.passwordClone,loading:!1,[a]:!0},(function(){return console.log(n.state.fotoWajah)}))})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getShifting=function(){var e=O.a.Object.extend("Shifting"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarShifting:e})})).catch((function(e){alert("cek koneksi anda")}))},n.getLeader=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","leader"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarLeader:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.handleFace=function(e){n.setState({loadingReco:!0,statusReco:0,fotoWajah:e.target.files[0]});var t=new FormData;t.append("knax",e.target.files[0]),Le.a.post("http://35.247.147.177:4000/api/face-check",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;return 1===t.status?n.setState({statusReco:1,message:"\u2714\ufe0f ".concat(t.message),loadingReco:!1}):n.setState({statusReco:0,message:"\u2716\ufe0f ".concat(t.message),loadingReco:!1})})).catch((function(e){return alert("Terjadi error...")}))},n.handleSendEmail=function(e,t,a,l,s,r,o){var i={to_email:e,from_name:t,to_name:a,message_html:l,alasan:s};Ge.a.send("gmail","template_N8cRQk3D",i).then((function(){var e=Object(Oe.a)(n.state.selfRegist);e.splice(n.state.userIndex,1),n.setState({selfRegist:e,[r]:!1,loadingModal:!1,message:o,visible:!0,color:"success"}),console.log("sukses")})).catch((function(e){n.setState({[r]:!1,loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})}))},n.handleReject=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=O.a.Object.extend("SelfRegist");new O.a.Query(t).get(n.state.userId).then((function(e){e.set("status",0),e.set("alasanReject",n.state.reason),e.set("imei","-"),e.save().then((function(){n.handleSendEmail(n.state.email,"KTA Team",n.state.name,"Maaf self registration kamu ditolak dengan alasan:",n.state.reason,"rejectMode","Berhasil reject")})).catch((function(e){alert(e.message),n.setState({loadingModal:!1,rejectMode:!1,message:"Gagal reject data",visible:!0})}))}))},n.handleCheckImei=function(e,t){e.preventDefault();var a=new O.a.User,l=new O.a.Query(a);l.equalTo("imei",t),l.first().then((function(e){e?n.setState({imeiMessage:"Imei telah terdaftar",loadingModal:!1}):n.handleSubmit()})).catch((function(e){console.log(e),n.setState({loadingModal:!1})}))},n.handleSubmit=function(){n.setState({loadingModal:!0});var e=n.state,t=e.name,a=e.nik,l=e.tipeKaryawan,s=e.posisi,r=e.level,o=e.imei,i=e.jamKerja,c=e.lokasiKerja,m=e.jumlahCuti,u=e.lembur,d=(e.fotoWajah,e.username,e.password),g=e.email,p=(e.absenPoint,new O.a.User);p.set("leaderIdNew",{__type:"Pointer",className:"_User",objectId:n.state.selectLeader}),p.set("fullname",t),p.set("email",g),p.set("username",a.toUpperCase()),p.set("password",d),p.set("absenPoint",n.state.absenPoint),p.set("passwordClone",d),p.set("nik",a.toUpperCase()),p.set("tipe",l),p.set("posisi",s),p.set("level",r),p.set("imei",o),p.set("jamKerja",i),p.set("lokasiKerja",c),p.set("jumlahCuti",parseInt(m)),p.set("lembur",u),p.set("roles",r),p.set("fotoWajah",n.state.fotoWajahObj),p.save().then((function(e){var t=O.a.Object.extend("SelfRegist");new O.a.Query(t).get(n.state.userId).then((function(e){e.set("status",1),e.save().then((function(){n.handleSendEmail(n.state.email,"KTA Team",n.state.name,"Selamat kamu berhasil melakukan self registration! Silahkan login menggunakan NIK dan password yang sudah kamu buat, terimakasih!","","addMode","Berhasil approve data")})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,rejectMode:!1,message:"Gagal tambah data, coba lagi",visible:!0})}))}))})).catch((function(e){n.setState({addMode:!1,loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0}),console.log(e.message)}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.state={selfRegist:[],daftarLeader:[],daftarTipe:[],daftarPosisi:[],daftarLevel:[],daftarShifting:[],detail:{},loading:!1,approvalMode:!1,rejectMode:!1,detailMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,photoMode:!1,deleteCounter:0,loadingReco:!1,message:"",level:"Leader",fotoWajah:"",message:"",loadingReco:!1,name:"",nik:"",tipeKaryawan:"",posisi:"",imei:"",jamKerja:"",lokasiKerja:"",jumlahCuti:0,lembur:"ya",username:"",password:"",selectLeader:"",statusReco:0,email:"",fotoWajahObj:{},message:"",color:"danger",visible:!1,daftarPoint:[],jamMasuk:0,jamKeluar:0,absenPoint:[],imeiMessage:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getStaff(),this.getLeader(),this.getLevel(),this.getPosisi(),this.getTipe(),this.getPoint(),this.getShifting(),Ge.a.init("user_h2fWwDoztgEPcKNQ9vadt")}},{key:"render",value:function(){var e=this,t=this.state,a=t.selfRegist,n=t.loading,s=(t.loadingReco,t.message,t.approvalMode,t.daftarPoint),r=t.rejectMode,i=t.detailMode,c=t.loadingModal,m=t.fullnames,u=t.addMode,d=(t.photoMode,t.username,t.statusReco,t.imei),p=t.nik,v=t.daftarLevel,E=t.daftarPosisi,b=t.daftarTipe,S=t.email,k=t.fotoWajah,j=t.name;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}}),l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",null,"Self registration request")),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Email"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found...")):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,t.get("nik")),l.a.createElement("td",null,t.get("fullname")),l.a.createElement("td",null,t.get("email")),l.a.createElement("td",null,l.a.createElement(o.b,{className:"mr-2",color:"inherit",to:"/admin/self-regist/".concat(t.id)},l.a.createElement(ae.a,{id:"t4",color:"primary",className:"btn-circle"},l.a.createElement("i",{className:"fa fa-eye"}))),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t4"},"Go to form"),l.a.createElement(ae.a,{id:"t2",className:"btn-circle btn-danger",onClick:function(n){e.setState({rejectMode:!0,userId:t.id,userIndex:a,email:t.get("email"),fullnames:t.get("fullname")})}},l.a.createElement("i",{className:"fa fa-times"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t2"},"Reject")))})))))))),l.a.createElement(Ce,{show:i,loading:c,footer:!1,handleHide:function(){return e.toggle("detailMode")},title:"Details",body:l.a.createElement(h.a,{onSubmit:function(e){return e.preventDefault()}},""!==k?l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Foto Wajah"),l.a.createElement(F.a,{className:"ml-1"},l.a.createElement("img",{height:100,width:100,src:""===k?"":k,alt:"foto"}))):"",l.a.createElement(f.a,{controlId:"formNama"},l.a.createElement(Ne.a,null,"Nama"),l.a.createElement(y.a,{name:"to_name",autoCapitalize:"true",autoComplete:"false",required:!0,value:j,type:"text",placeholder:"Masukkan nama",onChange:function(t){return e.setState({name:t.target.value})}})),l.a.createElement(f.a,{controlId:"formEmail"},l.a.createElement(Ne.a,null,"Email"),l.a.createElement(y.a,{name:"to_email",autoComplete:"off",required:!0,type:"email",value:S,placeholder:"Masukkan email",onChange:function(t){return e.setState({email:t.target.value})}})),l.a.createElement(f.a,{controlId:"formNik"},l.a.createElement(Ne.a,null,"NIK"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",required:!0,value:p,type:"text",placeholder:"Masukkan NIK",onChange:function(t){return e.setState({nik:t.target.value})}})),l.a.createElement(f.a,{controlId:"formImei"},l.a.createElement(Ne.a,null,"IMEI"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",required:!0,value:d,type:"text",placeholder:"Masukkan imei hp",onChange:function(t){return e.setState({imei:t.target.value})}})))}),l.a.createElement(Ce,{show:u,loading:c,footer:!1,handleHide:function(){return e.toggle("addMode")},title:"Tambah Data",body:l.a.createElement(h.a,{onSubmit:function(t){return e.handleCheckImei(t,e.state.imei)}},l.a.createElement(f.a,{controlId:"formNama"},l.a.createElement(Ne.a,null,"Nama"),l.a.createElement(y.a,{name:"to_name",autoCapitalize:"true",autoComplete:"false",required:!0,value:j,type:"text",placeholder:"Masukkan nama",onChange:function(t){return e.setState({name:t.target.value})}})),l.a.createElement(f.a,{controlId:"formTipex"},l.a.createElement(Ne.a,null,"Level"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({level:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih level"),v.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))})))),"Leader"!==this.state.level&&"Admin"!==this.state.level?l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih leader"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({selectLeader:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih leader"),this.state.daftarLeader.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))):"",l.a.createElement(f.a,{controlId:"formEmail"},l.a.createElement(Ne.a,null,"Email"),l.a.createElement(y.a,{name:"to_email",required:!0,type:"email",value:S,placeholder:"Masukkan email",onChange:function(t){return e.setState({email:t.target.value})}})),l.a.createElement(f.a,{controlId:"formNik"},l.a.createElement(Ne.a,null,"NIK"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",required:!0,value:p,type:"text",placeholder:"Masukkan NIK",onChange:function(t){return e.setState({nik:t.target.value})}})),l.a.createElement(f.a,{controlId:"formTipex"},l.a.createElement(Ne.a,null,"Tipe karyawan"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({tipeKaryawan:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih tipe karyawan"),b.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("tipe")},e.get("tipe"))})))),l.a.createElement(f.a,{controlId:"formPosisi"},l.a.createElement(Ne.a,null,"Posisi"),l.a.createElement(y.a,{required:!0,type:"select",onChange:function(t){return e.setState({posisi:t.target.value.toUpperCase()})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih posisi"),E.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))})))),""!==k?l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Foto Wajah"),l.a.createElement(F.a,{className:"ml-1"},l.a.createElement("img",{height:100,width:100,src:""===k?"":k,alt:"foto"}))):"",l.a.createElement(f.a,{controlId:"formImei"},l.a.createElement(Ne.a,null,"IMEI"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",required:!0,value:d,type:"text",placeholder:"Masukkan imei hp",onChange:function(t){return e.setState({imei:t.target.value})}}),l.a.createElement(Ke.a,{className:"text-muted",style:{color:"red"}},""!==this.state.imeiMessage?this.state.imeiMessage:"")),l.a.createElement(f.a,{controlId:"formJam"},l.a.createElement(Ne.a,null,"Jam kerja"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({jamKerja:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih jam kerja"),["Jam tetap","Jam fleksibel","Jam bebas"].map((function(e){return l.a.createElement("option",{value:e},e)})))),""!==this.state.jamKerja&&"Jam bebas"!==this.state.jamKerja?l.a.createElement(f.a,{controlId:"formJam"},l.a.createElement(Ne.a,null,"Jam masuk dan keluar"),l.a.createElement(F.a,null,l.a.createElement(z.a,{md:6},l.a.createElement(y.a,{type:"number",required:!0,placeholder:"Jam Masuk",onChange:function(t){return e.setState({jamMasuk:t.target.value})}})),l.a.createElement(z.a,{md:6},l.a.createElement(y.a,{type:"number",placeholder:"Jam Keluar",required:!0,onChange:function(t){return e.setState({jamKeluar:t.target.value})}})))):"",l.a.createElement(f.a,{controlId:"formLokasi"},l.a.createElement(Ne.a,null,"Lokasi kerja"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({lokasiKerja:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lokasi kerja"),["Tetap","Bebas (mobile)"].map((function(e){return l.a.createElement("option",{value:e},e)})))),"Tetap"===this.state.lokasiKerja?l.a.createElement(f.a,{controlId:"formPoint"},l.a.createElement(Ne.a,null,"Absen point"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({absenPoint:t.target.value.split(",")},(function(){return e.state.absenPoint.map((function(e){console.log(parseFloat(e))}))}))}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih absen point"),s.map((function(e){return l.a.createElement("option",{value:[parseFloat(e.get("latitude")),parseFloat(e.get("longitude"))]},e.get("placeName"))})))):"",l.a.createElement(f.a,{controlId:"formCuti"},l.a.createElement(Ne.a,null,"Jumlah cuti"),l.a.createElement(y.a,{type:"number",required:!0,placeholder:"Masukkan jumlah cuti",onChange:function(t){return e.setState({jumlahCuti:parseInt(t.target.value)})}})),l.a.createElement(f.a,{controlId:"formLembut"},l.a.createElement(Ne.a,null,"Lembur"),l.a.createElement(y.a,{type:"select",defaultValue:"all",required:!0,onChange:function(t){return e.setState({lembur:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lembur"),["Ya","Tidak"].map((function(e){return l.a.createElement("option",{value:e},e)})))),l.a.createElement(ae.a,{color:"primary",type:"submit",disabled:c},c?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")),handleSubmit:function(t){return e.handleCheckImei(t,e.state.imei)}}),l.a.createElement(Ce,{show:r,loading:c,handleHide:function(){return e.toggle("rejectMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject self registration ".concat(m," ?")),l.a.createElement(h.a,{onSubmit:function(t){return e.handleReject(t)}},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},c?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleReject(t)}}))}}]),a}(l.a.Component),We=a(119),Ve=a.n(We),Ze=(l.a.Component,a(578)),Xe=a.n(Ze),$e=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getData=function(){n.setState({loading:!0});var e=new O.a.Object.extend("AppSetting");new O.a.Query(e).find().then((function(e){console.log(e),n.setState({posisi:e,livenessToggle:e[0].get("liveness"),loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.handleAdd=function(e){e.preventDefault();var t=n.state,a=t.inputRadius,l=t.inputTimer;n.setState({loadingModal:!0});var s=new(O.a.Object.extend("AppSetting"));s.set("validationTimer",parseInt(a)),s.set("radiusAbsen",parseInt(l)),s.save().then((function(e){n.setState({addMode:!1,loadingModal:!1,posisi:n.state.posisi.concat(e),message:"Berhasil tambah data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})}))},n.getDetail=function(e,t){e.preventDefault();var a=O.a.Object.extend("AppSetting");new O.a.Query(a).get(t).then((function(e){var t=e.attributes;n.setState({inputTimer:t.validationTimer,inputRadius:t.radiusAbsen,editMode:!0})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})}))},n.handleUpdate=function(e){e.preventDefault();var t=n.state,a=t.inputTimer,l=t.inputRadius;n.setState({loadingModal:!0});var s=O.a.Object.extend("AppSetting");new O.a.Query(s).get(n.state.userId).then((function(e){e.set("validationTimer",a),e.set("radiusAbsen",l),e.save().then((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))},n.handleLivenessToggle=function(e){var t=O.a.Object.extend("AppSetting");new O.a.Query(t).get(n.state.posisi[0].id).then((function(t){t.set("liveness",e),t.save().then((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))},n.handleRemove=function(e){e.preventDefault();n.state.inputLevel;n.setState({loadingModal:!0});var t=O.a.Object.extend("AppSetting");new O.a.Query(t).get(n.state.userId).then((function(e){e.set("status",0),e.save().then((function(e){var t=Object(Oe.a)(n.state.posisi);t.splice(n.state.userIndex,1),n.setState({deleteMode:!1,loadingModal:!1,posisi:t,message:"Berhasil hapus data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.state={posisi:[],inputTimer:0,inputRadius:0,detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,deleteMode:!1,editMode:!1,deleteCounter:0,message:"",color:"danger",visible:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.posisi,n=t.loading,s=(t.inputPosisi,t.rejectMode,t.loadingModal),r=t.fullnames,o=t.addMode,i=t.deleteMode,c=t.editMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}}),l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,null,l.a.createElement("h3",{className:"ml-2"},"Manage Setting"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"No"),l.a.createElement("th",{scope:"col"},"Validation Timer (Detik)"),l.a.createElement("th",{scope:"col"},"Radius Absen (Meter)"),l.a.createElement("th",{scope:"col"},"Liveness"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,a+1),l.a.createElement("td",null,t.get("validationTimer")),l.a.createElement("td",null,t.get("radiusAbsen")),l.a.createElement("td",null,l.a.createElement(Xe.a,{value:e.state.livenessToggle||!1,onToggle:function(t){console.log(!t),e.setState({livenessToggle:!t}),e.handleLivenessToggle(!t)}})),l.a.createElement("td",null,l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(n){e.setState({userId:t.id,userIndex:a}),e.getDetail(n,t.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Ubah data")))})))))))),l.a.createElement(Ce,{show:o,loading:s,footer:!1,handleHide:function(){return e.toggle("addMode")},title:"Tambah Data",body:l.a.createElement("div",null,l.a.createElement(h.a,{onSubmit:function(t){return e.handleAdd(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Posisi"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan posisi",type:"text",required:!0,onChange:function(t){return e.setState({inputPosisi:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleAdd(t)}}),l.a.createElement(Ce,{show:c,loading:s,footer:!1,handleHide:function(){return e.toggle("editMode")},title:"Edit Data",body:l.a.createElement(h.a,{onSubmit:function(t){return e.handleUpdate(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Validation Timer"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan validation timer",value:this.state.inputTimer,type:"text",required:!0,onChange:function(t){return e.setState({inputTimer:t.target.value})}})),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Radius Absen"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan radius absen",value:this.state.inputRadius,type:"text",required:!0,onChange:function(t){return e.setState({inputRadius:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("editMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")),handleSubmit:function(t){return e.handleUpdate(t)}}),l.a.createElement(Ce,{show:i,loading:s,footer:!0,handleHide:function(){return e.toggle("deleteMode")},title:"Remove Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Remove level ".concat(r," ?"))),handleSubmit:function(t){return e.handleRemove(t)}}))}}]),a}(l.a.Component),et=Object(V.a)(Object(V.d)((function(){return{isOpen:!1,id:""}}),{onToggleOpen:function(e){var t=e.isOpen;e.id;return function(e){return{isOpen:!t,id:e}}}}),Z.withScriptjs,Z.withGoogleMap)((function(e){return l.a.createElement(Z.GoogleMap,{defaultZoom:12,defaultCenter:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},center:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},defaultOptions:{scrollwheel:!1}},e.userPosition.map((function(t){return l.a.createElement(Z.Marker,{onClick:function(){return e.onToggleOpen(t.id)},icon:{labelOrigin:new window.google.maps.Point(11,50),url:a(174)("./".concat(void 0===t.get("user").attributes.color?"red":t.get("user").attributes.color,"-dot.png")),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(11,40)},title:"".concat(t.get("fullname")," absen masuk: ").concat(void 0!==t.get("lateTimes")?q(t.get("lateTimes"),"HH:mm:ss"):q(t.get("absenMasuk"),"HH:mm:ss")),position:{lat:parseFloat(t.get("latitude")),lng:parseFloat(t.get("longitude"))},label:{text:ue(t.get("fullname")),fontWeight:"bold"}},e.id===t.id&&l.a.createElement(Z.InfoWindow,{onCloseClick:e.onToggleOpen},l.a.createElement("div",null,l.a.createElement("img",{src:t.get("selfieImage").url(),height:100,width:100}),l.a.createElement("br",null),l.a.createElement("br",null),void 0!==t.get("lateTimes")&&l.a.createElement("p",null,"Terlambat"),l.a.createElement("p",null,"Absen masuk:"," ",l.a.createElement("span",{style:{color:void 0!==t.get("lateTimes")?"red":"blue"}},void 0!==t.get("lateTimes")?q(t.get("lateTimes"),"HH:mm:ss"):q(t.get("absenMasuk"),"HH:mm:ss"))))))})))})),tt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getLeaderStaff=function(){n.setState({loading:!0});var e=n.props.match.params.id;console.log(e);var t=O.a.Object.extend("Absence"),a=new O.a.Query(t),l=new Date,s=new N.a(l);s.startOf("day");var r=new N.a(s);r.add(1,"day"),a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:e}),a.greaterThanOrEqualTo("createdAt",s.toDate()),a.lessThan("createdAt",r.toDate()),a.include("user"),a.find().then((function(e){console.log(e),n.setState({userLocation:e},(function(){return console.log(n.state.userLocation)}))})).catch((function(e){console.log(e),n.setState({loading:!1})}))},n.queryAbsenByLevel=function(e,t,a){console.log("iddssa",a);var l=O.a.Object.extend("Absence"),s=new O.a.Query(l),r=new O.a.User,o=new O.a.Query(r),i=new Date,c=new N.a(i);c.startOf("day");var m=new N.a(c);m.add(1,"day"),o.containedIn("roles",t),o.equalTo(e,{__type:"Pointer",className:"_User",objectId:a}),s.matchesQuery("user",o),s.greaterThanOrEqualTo("createdAt",c.toDate()),s.lessThan("createdAt",m.toDate()),s.include("user"),s.find().then((function(e){console.log(e),n.setState({userLocation:e},(function(){return console.log(n.state.userLocation)}))})).catch((function(e){console.log(e),n.setState({loading:!1})}))},n.getLeaderStaff2=function(){n.setState({loading:!0});C();var e=n.props.match.params.id,t=new O.a.User;new O.a.Query(t).get(e).then((function(t){switch(t.get("roles")){case"leader":n.queryAbsenByLevel("leaderIdNew",["staff","Staff"],e);break;case"supervisor":n.queryAbsenByLevel("supervisorID",["staff","leader"],e);break;case"manager":n.queryAbsenByLevel("managerID",["staff","leader","supervisor"],e);break;case"head":n.queryAbsenByLevel("headID",["staff","leader","supervisor","manager"],e);break;case"gm":n.queryAbsenByLevel("headID",["staff","leader","supervisor","manager","head"],e)}})).catch((function(e){console.log(e),n.setState({loading:!1})}))},n.getCenterAverage=function(e){n.setState({loading:!0});var t=e.reduce((function(e,t){return console.log(e+parseFloat(t.attributes.latitude)),e+parseFloat(t.attributes.latitude)}),0),a=e.reduce((function(e,t){return console.log(e+parseFloat(t.attributes.longitude)),e+parseFloat(t.attributes.longitude)}),0);console.log(t+" "+a),n.setState({avgLat:t/e.length,avgLng:a/e.length,loading:!1})},n.getDataTerlambat=function(){n.setState({loading:!0});var e=O.a.Object.extend("Late"),t=new O.a.Query(e),a=new Date,l=new N.a(a);l.startOf("day");var s=new N.a(l);s.add(1,"day"),t.equalTo("status",3),t.greaterThanOrEqualTo("time",l.toDate()),t.lessThan("time",s.toDate()),t.include("user"),t.find().then((function(e){console.log(e),n.setState({late:e})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.setCenterMaps=function(e,t){n.setState({avgLat:parseFloat(e),avgLng:parseFloat(t)})},n.state={locationArr:[[-6.2407535,106.8558205],[-6.2128274,106.8100491],[-6.2028274,106.8000491]],userLocation:[],avgLat:0,avgLng:0,loading:!1,late:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getLeaderStaff2(),this.getDataTerlambat()}},{key:"componentDidUpdate",value:function(e,t){t.late!==this.state.late&&(console.log(this.state.userLocation),console.log("updated"),this.getCenterAverage(this.state.userLocation.concat(this.state.late)))}},{key:"render",value:function(){var e=this;this.state.locationArr;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},this.state.loading?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Loading map..."):0===this.state.userLocation.length?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Tidak ada data absen hari ini"):l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:6,className:"mb-5"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(et,{userPosition:this.state.userLocation.concat(this.state.late),avgLat:this.state.avgLat,avgLng:this.state.avgLng,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyC5tj-2X6b7kwGTqGZkB7sofZdMhpyE75Q",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:"500px"},className:"map-canvas",id:"map-canvas"}),mapElement:l.a.createElement("div",{style:{height:"100%",borderRadius:"inherit"}})}))),l.a.createElement(z.a,{lg:6,className:""},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",null,"Data absen hari ini")),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0,style:{borderRadius:"inherit"}},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Absen Masuk"))),l.a.createElement("tbody",null,this.state.userLocation.map((function(t,a){return l.a.createElement("tr",{onClick:function(){return e.setCenterMaps(t.get("latitude"),t.get("longitude"))}},l.a.createElement("td",null,t.get("user").attributes.nik),l.a.createElement("td",null,t.get("fullname")),l.a.createElement("td",null,void 0!==t.get("lateTimes")?l.a.createElement("div",null,l.a.createElement("span",{style:{color:"red"}},q(t.get("lateTimes"),"HH:mm:ss"))," "):q(t.get("absenMasuk"),"HH:mm:ss")))})))))))))))}}]),a}(l.a.Component),at=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getTipe=function(){n.setState({loading:!0});var e=new O.a.Object.extend("EmployeeType"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarTipe:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getPosisi=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Position"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarPosisi:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getLevel=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Level"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarLevel:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getStaff=function(){n.setState({loading:!0});var e=new O.a.User;new O.a.Query(e).find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getData=function(){n.setState({loading:!0});var e=new O.a.User;new O.a.Query(e).find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.handleFilter=function(e){e.preventDefault(),n.setState({loadingFilter:!0});var t=n.state,a=t.searchBy,l=t.searchValue,s=n.state,r=(s.resPerPage,s.page,new O.a.User),o=new O.a.Query(r);switch(o.withCount(),a){case"all":o.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"name":o.matches("fullname",l,"i"),o.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"nik":o.equalTo("nik",l),o.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"level":o.matches("level",l,"i"),o.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"leader":var i=new O.a.User,c=new O.a.Query(i);c.matches("fullname",l,"i"),o.matchesQuery("leaderIdNew",c),o.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}))}},n.getShifting=function(){var e=O.a.Object.extend("Shifting"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarShifting:e})})).catch((function(e){alert("cek koneksi anda")}))},n.getLeader=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.notContainedIn("roles",["staff","Staff","admin","Admin"]),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarLeader:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.handleFace=function(e){n.setState({loadingReco:!0,statusReco:0,fotoWajah:e.target.files[0]});var t=new FormData;t.append("knax",e.target.files[0]),Le.a.post("http://35.247.149.107:4000/api/face-check",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;return 1===t.status?n.setState({statusReco:1,message:"\u2714\ufe0f ".concat(t.message),loadingReco:!1}):n.setState({statusReco:0,message:"\u2716\ufe0f ".concat(t.message),loadingReco:!1})})).catch((function(e){return alert("Terjadi error...")}))},n.handleSubmit=function(e){e.preventDefault(),n.setState({loading:!0});var t=n.state,a=t.name,l=t.nik,s=t.tipeKaryawan,r=t.posisi,o=t.level,i=t.imei,c=t.jamKerja,m=t.lokasiKerja,u=t.jumlahCuti,d=t.lembur,g=t.fotoWajah,p=t.username,h=t.password,f=t.email,v=new O.a.User,E=new O.a.Object.extend("Shifting");v.set("leaderIdNew",{__type:"Pointer",className:"_User",objectId:n.state.selectLeader}),v.set("shifting",E.createWithoutData(n.state.shifting)),v.set("fullname",a),v.set("email",f),v.set("username",p),v.set("password",Te()(h)),v.set("passwordClone",Te()(h)),v.set("nik",l.toUpperCase()),v.set("tipe",s),v.set("posisi",r),v.set("level",o),v.set("imei",i),v.set("jamKerja",c),v.set("lokasiKerja",m),v.set("jumlahCuti",parseInt(u)),v.set("lembur",d),v.set("roles",o),v.set("fotoWajah",new O.a.File("profile.jpg",g)),v.save().then((function(e){n.setState({daftarStaff:n.state.daftarStaff.concat(e),addMode:!1,loading:!1,message:"Berhasil tambah data",visible:!0,color:"success"})})).catch((function(e){n.setState({addMode:!1,loading:!1,message:"Gagal tambah data, coba lagi",visible:!0}),console.log(e.message)}))},n.handleUpdate=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state,a=(t.name,t.nik),l=t.tipeKaryawan,s=t.posisi,r=t.level,o=t.imei,i=t.jamKerja,c=t.lokasiKerja,m=t.jumlahCuti,u=t.lembur,d=t.fotoWajah,g=t.username,p=t.password,h=t.email,f=new O.a.User,v=new O.a.Query(f);new O.a.Object.extend("Shifting").id=n.state.selectLeader,v.get(n.state.userId).then((function(e){""!==n.state.selectLeader&&e.set("leaderIdNew",{__type:"Pointer",className:"_User",objectId:n.state.selectLeader}),""!==n.state.shifting&&e.set("shifting",{__type:"Pointer",className:"Shifting",objectId:n.state.shifting}),e.set("fullname",n.state.fullname),e.set("email",h),e.set("username",g),""!==p&&(e.set("password",Te()(p)),e.set("passwordClone",Te()(p))),e.set("nik",a.toUpperCase()),e.set("tipe",l),e.set("posisi",s),e.set("level",r),e.set("imei",o),e.set("jamKerja",i),e.set("lokasiKerja",c),e.set("jumlahCuti",parseInt(m)),e.set("lembur",u),e.set("roles",r),""!==d&&e.set("fotoWajah",new O.a.File("profile.jpg",d)),e.save(null,{useMasterKey:!0}).then((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})})).catch((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0}),console.log(e.message)}))})).catch((function(e){n.setState({editMode:!1,loadingModal:!1,message:e.message,visible:!0}),console.log(e.message)}))},n.getDetail=function(e,t){e.preventDefault();var a=new O.a.User,l=new O.a.Query(a);l.include("shifting"),l.include("leaderIdNew"),l.get(t,{useMasterKey:!0}).then((function(e){var t=e.attributes;console.log(t),n.setState({nik:t.nik,name:t.fullname,username:t.username,imei:t.imei,email:t.email,tipeKaryawan:t.tipe,posisi:t.posisi,jamKerja:t.jamKerja,lokasiKerja:t.lokasiKerja,jumlahCuti:t.jumlahCuti,shifting:void 0===t.shifting?"":t.shifting,lembur:t.lembur,level:t.level.toLowerCase(),leader:void 0===t.leaderIdNew?"":t.leaderIdNew,editMode:!0})})).catch((function(e){alert(e.message)}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.getLeaderStaff=function(e,t){e.preventDefault();var a=O.a.Object.extend("Absence"),n=new O.a.Query(a),l=new Date,s=new N.a(l);s.startOf("day");var r=new N.a(s);r.add(1,"day"),n.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:t}),n.greaterThanOrEqualTo("absenMasuk",s.toDate()),n.lessThan("absenMasuk",r.toDate()),n.find().then((function(e){e.map((function(e){console.log(e.get("latitude")+" "+e.get("longitude"))}))})).catch((function(e){console.log(e)}))},n.state={daftarStaff:[],daftarLeader:[],daftarTipe:[],daftarPosisi:[],daftarLevel:[],resPerPage:25,first:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",fullname:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,editMode:!1,deleteCounter:0,loadingReco:!1,message:"",level:"Leader",fotoWajah:"",message:"",loadingReco:!1,nama:"",nik:"",tipeKaryawan:"Karyawan tetap",posisi:"",imei:"",jamKerja:"Jam tetap",lokasiKerja:"Tetap",jumlahCuti:0,lembur:"ya",username:"",password:"",selectLeader:"",statusReco:0,email:"",fotoWajahObject:{},daftarShifting:[],shifting:{},leader:{},message:"",color:"",visible:!1,message:"",color:"danger",visible:!1,searchBy:"all",searchValue:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getLeader()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.daftarStaff,t.loading),n=t.loadingReco,s=t.message,r=t.level,i=t.email,c=t.fullname,m=t.imei,u=t.jamKerja,d=t.jumlahCuti,p=t.lokasiKerja,v=t.shifting,E=t.lembur,b=t.tipeKaryawan,S=t.nik,k=t.posisi,j=t.daftarLeader,M=t.loadingModal,w=(t.fullnames,t.addMode),T=t.leader,H=(t.photoMode,t.statusReco,t.daftarShifting),O=t.daftarLevel,I=t.daftarPosisi,N=t.daftarTipe,D=t.editMode;f.a,y.a,O.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))})),f.a,y.a,this.state.searchBy,"all"===this.state.searchBy||"Masukkan ".concat(this.state.searchBy);return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}}),l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",null,"Data leader")),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Email"),l.a.createElement("th",{scope:"col"},"Tipe Karyawan"),l.a.createElement("th",{scope:"col"},"Posisi"),l.a.createElement("th",{scope:"col"},"Level"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):j.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):j.map((function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null,e.get("nik")),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,e.get("email")),l.a.createElement("td",null,e.get("tipe")),l.a.createElement("td",null,e.get("posisi")),l.a.createElement("td",null,e.get("level")),l.a.createElement("td",null,l.a.createElement(o.b,{className:"mr-2",to:"/admin/view-absen/".concat(e.id)},l.a.createElement(ae.a,{id:"t4",color:"primary",className:"btn-circle"},l.a.createElement("i",{className:"fa fa-eye"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t4"},"Lihat absen staff"))))})))),l.a.createElement(ke,{resPerPage:this.state.resPerPage,totalPosts:20}))))),l.a.createElement(Ce,{show:w,loading:M,footer:!1,handleHide:function(){return e.toggle("addMode")},title:"Tambah Data",body:l.a.createElement(h.a,{onSubmit:this.handleSubmit,autoComplete:"off"},l.a.createElement(f.a,{controlId:"formCategory"},l.a.createElement(Ne.a,null,"Foto wajah"),l.a.createElement(y.a,{type:"file",label:"Foto wajah",onChange:this.handleFace,required:!0}),l.a.createElement(Ke.a,{className:n?"text-muted":"",style:{color:"".concat(0==this.state.statusReco?"red":"green")}},n?"processing...":s)),l.a.createElement(f.a,{controlId:"formNama"},l.a.createElement(Ne.a,null,"Nama"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",required:!0,type:"text",placeholder:"Masukkan nama",onChange:function(t){return e.setState({name:t.target.value})}})),l.a.createElement(f.a,{controlId:"formTipex"},l.a.createElement(Ne.a,null,"Level"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({level:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih level"),O.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))})))),"Leader"!==this.state.level&&"Admin"!==this.state.level?l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih leader"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({selectLeader:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih leader"),this.state.daftarLeader.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))):"",l.a.createElement(f.a,{controlId:"formEmail"},l.a.createElement(Ne.a,null,"Email"),l.a.createElement(y.a,{autoComplete:"off",required:!0,type:"email",placeholder:"Masukkan email",onChange:function(t){return e.setState({email:t.target.value})}})),l.a.createElement(f.a,{controlId:"formx"},l.a.createElement(Ne.a,null,"Username"),l.a.createElement(y.a,{autoComplete:"off",required:!0,type:"text",placeholder:"Masukkan username",onChange:function(t){return e.setState({username:t.target.value})}})),l.a.createElement(f.a,{controlId:"formz"},l.a.createElement(Ne.a,null,"Password"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"new-password",required:!0,type:"password",placeholder:"Masukkan password",onChange:function(t){return e.setState({password:t.target.value})}})),l.a.createElement(f.a,{controlId:"formNik"},l.a.createElement(Ne.a,null,"NIK"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",required:!0,type:"text",placeholder:"Masukkan NIK",onChange:function(t){return e.setState({nik:t.target.value.toUpperCase()})}})),l.a.createElement(f.a,{controlId:"formTipex"},l.a.createElement(Ne.a,null,"Tipe karyawan"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({tipeKaryawan:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih tipe karyawan"),N.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("tipe")},e.get("tipe"))})))),l.a.createElement(f.a,{controlId:"formPosisi"},l.a.createElement(Ne.a,null,"Posisi"),l.a.createElement(y.a,{required:!0,type:"select",onChange:function(t){return e.setState({posisi:t.target.value.toUpperCase()})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih posisi"),I.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))})))),l.a.createElement(f.a,{controlId:"formImei"},l.a.createElement(Ne.a,null,"IMEI"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",required:!0,type:"text",placeholder:"Masukkan imei hp",onChange:function(t){return e.setState({imei:t.target.value})}})),l.a.createElement(f.a,{controlId:"formJam"},l.a.createElement(Ne.a,null,"Jam kerja"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({jamKerja:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih jam kerja"),["Jam tetap","Jam fleksibel","Jam bebas"].map((function(e){return l.a.createElement("option",{value:e},e)})))),l.a.createElement(f.a,{controlId:"formShifting"},l.a.createElement(Ne.a,null,"Shifting"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({shifting:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih shifting"),H.map((function(e){return l.a.createElement("option",{value:e.id},e.get("tipeShift"))})))),l.a.createElement(f.a,{controlId:"formLokasi"},l.a.createElement(Ne.a,null,"Lokasi kerja"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({lokasiKerja:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lokasi kerja"),["Tetap","Bebas (mobile)"].map((function(e){return l.a.createElement("option",{value:e},e)})))),l.a.createElement(f.a,{controlId:"formCuti"},l.a.createElement(Ne.a,null,"Jumlah cuti"),l.a.createElement(y.a,{type:"number",required:!0,placeholder:"Masukkan jumlah cuti",onChange:function(t){return e.setState({jumlahCuti:parseInt(t.target.value)})}})),l.a.createElement(f.a,{controlId:"formLembut"},l.a.createElement(Ne.a,null,"Lembur"),l.a.createElement(y.a,{type:"select",defaultValue:"all",required:!0,onChange:function(t){return e.setState({lembur:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lembur"),["Ya","Tidak"].map((function(e){return l.a.createElement("option",{value:e},e)})))),l.a.createElement(ae.a,{color:0===this.state.statusReco?"danger":"primary",type:"submit",disabled:0===this.state.statusReco},0===this.state.statusReco?"upload foto dahulu":this.state.loading?"Please wait..":"Submit")),handleSubmit:function(t){return e.handleAdd(t)}}),l.a.createElement(Ce,{show:D,loading:M,footer:!1,handleHide:function(){return e.toggle("editMode")},title:"Edit Data",body:l.a.createElement(h.a,{onSubmit:this.handleUpdate,autoComplete:"off"},l.a.createElement(f.a,{controlId:"formCategory"},l.a.createElement(Ne.a,null,"Foto wajah"),l.a.createElement(y.a,{type:"file",label:"Foto wajah",onChange:this.handleFace}),l.a.createElement(Ke.a,{className:n?"text-muted":"",style:{color:"".concat(0==this.state.statusReco?"red":"green")}},n?"processing...":s)),l.a.createElement(f.a,{controlId:"formNama"},l.a.createElement(Ne.a,null,"Nama"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",value:c,type:"text",placeholder:"Masukkan nama",onChange:function(t){return e.setState({fullname:t.target.value})}})),l.a.createElement(f.a,{controlId:"formTipex"},l.a.createElement(Ne.a,null,"Level"),l.a.createElement(y.a,{type:"select",onChange:function(t){return e.setState({level:t.target.value})}},O.map((function(e,t){return l.a.createElement("option",{selected:r.toLowerCase()===e.get("level").toLowerCase(),key:t,value:e.get("level")},e.get("level"))})))),"leader"!==this.state.level&&"admin"!==this.state.level?l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih leader"),l.a.createElement(y.a,{type:"select",onChange:function(t){return e.setState({selectLeader:t.target.value})}},this.state.daftarLeader.map((function(e,t){return l.a.createElement("option",{selected:T.id===e.id,key:t,value:e.id},e.get("fullname"))})))):"",l.a.createElement(f.a,{controlId:"formEmail"},l.a.createElement(Ne.a,null,"Email"),l.a.createElement(y.a,{autoComplete:"off",value:i,type:"email",placeholder:"Masukkan email",onChange:function(t){return e.setState({email:t.target.value})}})),l.a.createElement(f.a,{controlId:"formz"},l.a.createElement(Ne.a,null,"Password"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"new-password",type:"password",placeholder:"Masukkan password jika ingin mengubah password",onChange:function(t){return e.setState({password:t.target.value})}})),l.a.createElement(f.a,{controlId:"formNik"},l.a.createElement(Ne.a,null,"NIK"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",value:S,type:"text",placeholder:"Masukkan NIK",onChange:function(t){return e.setState({nik:t.target.value.toUpperCase()})}})),l.a.createElement(f.a,{controlId:"formTipex"},l.a.createElement(Ne.a,null,"Tipe karyawan"),l.a.createElement(y.a,{type:"select",onChange:function(t){return e.setState({tipeKaryawan:t.target.value})}},N.map((function(e,t){return l.a.createElement("option",{selected:b===e.get("tipe").toLowerCase(),key:t,value:e.get("tipe")},e.get("tipe"))})))),l.a.createElement(f.a,{controlId:"formPosisi"},l.a.createElement(Ne.a,null,"Posisi"),l.a.createElement(y.a,{type:"select",onChange:function(t){return e.setState({posisi:t.target.value.toUpperCase()})}},I.map((function(e,t){return l.a.createElement("option",{selected:k.toLowerCase()===e.get("position").toLowerCase(),key:t,value:e.get("position")},e.get("position"))})))),l.a.createElement(f.a,{controlId:"formImei"},l.a.createElement(Ne.a,null,"IMEI"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",defaultValue:m,type:"text",placeholder:"Masukkan imei hp",onChange:function(t){return e.setState({imei:t.target.value})}})),l.a.createElement(f.a,{controlId:"formJam"},l.a.createElement(Ne.a,null,"Jam kerja"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({jamKerja:t.target.value})}},["Jam tetap","Jam fleksibel","Jam bebas"].map((function(e){return l.a.createElement("option",{selected:u.toLowerCase()===e.toLowerCase(),value:e},e)})))),l.a.createElement(f.a,{controlId:"formShifting"},l.a.createElement(Ne.a,null,"Shifting"),l.a.createElement(y.a,{type:"select",onChange:function(t){return e.setState({shifting:t.target.value})}},H.map((function(e){return l.a.createElement("option",{selected:v.id===e.id,value:e.id},e.get("tipeShift"))})))),l.a.createElement(f.a,{controlId:"formLokasi"},l.a.createElement(Ne.a,null,"Lokasi kerja"),l.a.createElement(y.a,{type:"select",onChange:function(t){return e.setState({lokasiKerja:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lokasi kerja"),["Tetap","Bebas (mobile)"].map((function(e){return l.a.createElement("option",{selected:p.toLowerCase()===e.toLowerCase(),value:e},e)})))),l.a.createElement(f.a,{controlId:"formCuti"},l.a.createElement(Ne.a,null,"Jumlah cuti"),l.a.createElement(y.a,{type:"number",defaultValue:d,placeholder:"Masukkan jumlah cuti",onChange:function(t){return e.setState({jumlahCuti:parseInt(t.target.value)})}})),l.a.createElement(f.a,{controlId:"formLembut"},l.a.createElement(Ne.a,null,"Lembur"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({lembur:t.target.value})}},["Ya","Tidak"].map((function(e){return l.a.createElement("option",{selected:E.toLowerCase()===e.toLowerCase(),value:e},e)})))),l.a.createElement(ae.a,{color:"primary",type:"submit",disabled:0===M},M?"Submitting...":"Submit")),handleSubmit:function(t){return e.handleUpdate(t)}}))}}]),a}(l.a.Component),nt=Object(V.a)(Object(V.d)((function(){return{isOpen:!1,id:""}}),{onToggleOpen:function(e){var t=e.isOpen;e.id;return function(e){return{isOpen:!t,id:e}}}}),Z.withScriptjs,Z.withGoogleMap)((function(e){return l.a.createElement(Z.GoogleMap,{defaultZoom:12,zoom:e.defaultZoom,defaultCenter:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},center:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},defaultOptions:{scrollwheel:!1}},e.userPosition.map((function(t){return l.a.createElement(Z.Marker,{key:t.id,onClick:function(a){console.log(t.id),e.onToggleOpen(t.id)},icon:{labelOrigin:new window.google.maps.Point(11,50),url:a(174)("./".concat(void 0===t.get("user").attributes.color?"red":t.get("user").attributes.color,"-dot.png")),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(11,40)},title:"".concat(t.get("fullname")," absen masuk: ").concat(void 0!==t.get("lateTimes")?q(t.get("lateTimes"),"HH:mm:ss"):q(t.get("absenMasuk"),"HH:mm:ss")),position:{lat:parseFloat(t.get("latitude")),lng:parseFloat(t.get("longitude"))},label:{text:ue(t.get("fullname")),fontWeight:"bold"}},t.id===e.id&&l.a.createElement(Z.InfoWindow,{onCloseClick:e.onToggleOpen},l.a.createElement("div",null,l.a.createElement("img",{src:void 0==t.get("selfieImage")?"":t.get("selfieImage").url(),height:100,width:100}),l.a.createElement("br",null),l.a.createElement("br",null),void 0!==t.get("lateTimes")&&l.a.createElement("p",null,"Terlambat"),l.a.createElement("p",null,"Absen masuk:"," ",l.a.createElement("span",{style:{color:void 0!==t.get("lateTimes")?"red":"blue"}},void 0!==t.get("lateTimes")?q(t.get("lateTimes"),"HH:mm:ss"):q(t.get("absenMasuk"),"HH:mm:ss"))))))})))})),lt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).scrollToMyRef=function(){return window.scrollTo(0,n.lcoationRef.offsetTop)},n.getCenterAverage=function(e){n.setState({loading:!0});var t=e.reduce((function(e,t){return e+parseFloat(t.get("latitude"))}),0),a=e.reduce((function(e,t){return e+parseFloat(t.get("longitude"))}),0);console.log(t+" "+a),n.setState({avgLat:t/e.length,avgLng:a/e.length,loading:!1})},n.toggleNavs=function(e,t){e.preventDefault(),n.setState({activeNav:t,chartExample1Data:"data1"===n.state.chartExample1Data?"data2":"data1"})},n.getDaftarLeader=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","leader"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarLeader:e})})).catch((function(e){console.log(e.message)}))},n.getDaftarRequest=function(){var e=O.a.Object.extend("ChangeRequest"),t=new O.a.Query(e);t.equalTo("statusApprove",3),t.exclude("createdAt"),t.exclude("updatedAt"),t.include("userId"),t.find().then((function(e){n.setState({daftarRequest:e})})).catch((function(e){var t=e.message;n.setState({loading:!1}),console.log(t)}))},n.getDataTerlambat=function(){n.setState({loading:!0});var e=O.a.Object.extend("Late"),t=new O.a.Query(e),a=new Date,l=new N.a(a);l.startOf("day");var s=new N.a(l);s.add(1,"day"),t.equalTo("status",3),t.greaterThanOrEqualTo("time",l.toDate()),t.lessThan("time",s.toDate()),t.include("user"),t.find().then((function(e){e.map((function(e){return e.select=!1})),console.log(e),n.setState({late:e})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getLeaderStaff=function(){n.setState({loading:!0});var e=O.a.Object.extend("Absence"),t=new O.a.Query(e),a=new O.a.User,l=new O.a.Query(a),s=new Date,r=new N.a(s);r.startOf("day");var o=new N.a(r);o.add(1,"day"),t.greaterThanOrEqualTo("createdAt",r.toDate()),t.lessThan("createdAt",o.toDate()),t.matchesQuery("user",l),t.include("user"),t.find().then((function(e){e.map((function(e){return e.select=!1})),console.log(e),n.setState({dataAbsen:e})})).catch((function(e){console.log(e),n.setState({loading:!1})}))},n.getLeaderStaffFilter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n.setState({loading:!0,page:e});var t=n.state.resPerPage,a=O.a.Object.extend("Absence"),l=new O.a.Query(a),s=new O.a.User,r=new O.a.Query(s),o=new Date,i=new N.a(o);i.startOf("day");var c=new N.a(i);c.add(1,"day"),l.skip(t*e-t),l.limit(t),l.withCount(),l.matchesQuery("user",r),l.include("user"),l.find().then((function(e){e.map((function(e){return e.select=!1})),n.setState({dataAbsen:e,totalData:e.count})})).catch((function(e){console.log(e),n.setState({loading:!1})}))},n.setCenterMaps=function(e,t){n.setState({avgLat:parseFloat(e),avgLng:parseFloat(t)})},n.lcoationRef=l.a.createRef(),n.state={activeNav:1,chartExample1Data:"data1",loading:!1,totalStaff:0,daftarRequest:[],daftarLeader:[],dataAbsen:[],resPerPage:20,late:[],avgLat:0,avgLng:0,defaultZoom:12},window.Chart&&Object(se.parseOptions)($.a,Object(se.chartOptions)()),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDaftarRequest(),this.getDaftarLeader(),this.getLeaderStaff(),this.getDataTerlambat()}},{key:"componentDidUpdate",value:function(e,t){t.late!==this.state.late&&(console.log(this.state.dataAbsen),this.getCenterAverage(this.state.dataAbsen.concat(this.state.late)))}},{key:"render",value:function(){var e=this,t=this.state,a=t.daftarRequest,n=t.loading;t.daftarLeader;return console.log(this.state.dataAbsen.concat(this.state.late)),l.a.createElement(l.a.Fragment,null,l.a.createElement(me,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,{className:"mt-5"},l.a.createElement(z.a,{className:"mb-5 mb-xl-0",xl:"12"},l.a.createElement(ee.a,{className:"shadow mb-5",ref:this.lcoationRef},this.state.loading?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Loading map..."):0===this.state.dataAbsen.concat(this.state.late).length?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Tidak ada data absen hari ini"):l.a.createElement(nt,{userPosition:this.state.dataAbsen.concat(this.state.late),avgLat:this.state.avgLat,avgLng:this.state.avgLng,defaultZoom:this.state.defaultZoom,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyC5tj-2X6b7kwGTqGZkB7sofZdMhpyE75Q",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:"500px"},className:"map-canvas",id:"map-canvas"}),mapElement:l.a.createElement("div",{style:{height:"100%",borderRadius:"inherit"}})}))),l.a.createElement(z.a,{xl:"6",className:"mb-5"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h3",{className:"mb-0"},"Change request")),l.a.createElement("div",{className:"col text-right"},l.a.createElement(o.b,{to:"/admin/status-request"},l.a.createElement(ae.a,{color:"primary",size:"sm"},"See all"))))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Status"))),l.a.createElement("tbody",null,n?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):a.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found...")):a.map((function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null,e.get("userId").attributes.nik),l.a.createElement("td",null,e.get("userId").attributes.fullname),l.a.createElement("td",{style:{color:"".concat(3===e.attributes.statusApprove?"blue":"".concat(1===e.attributes.statusApprove?"green":"red"))}},l.a.createElement("strong",null,3===e.get("statusApprove")?"Waiting":1===e.get("statusApprove")?"Approved".toUpperCase():"Rejected".toUpperCase())))})))))),l.a.createElement(z.a,{xl:"6"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h3",{className:"mb-0"},"Data absen hari ini")))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Absen masuk"))),l.a.createElement("tbody",null,n?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):this.state.dataAbsen.concat(this.state.late).length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},"No data found...")):this.state.dataAbsen.concat(this.state.late).map((function(t,a){return l.a.createElement("tr",{onClick:function(){e.setCenterMaps(t.get("latitude"),t.get("longitude")),e.setState({defaultZoom:22}),e.scrollToMyRef()}},l.a.createElement("td",null,t.get("user").attributes.nik),l.a.createElement("td",null,t.get("user").attributes.fullname),l.a.createElement("td",null,void 0!==t.get("lateTimes")?l.a.createElement("div",null,l.a.createElement("span",{style:{color:"red"}},q(t.get("lateTimes"),"HH:mm:ss"))):q(t.get("absenMasuk"),"HH:mm:ss")))})))))))))}}]),a}(l.a.Component),st=l.a.memo(lt),rt=a(25),ot=a.n(rt),it=a(121),ct=a.n(it),mt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleFilter=function(e){e.preventDefault(),n.setState({loading:!0,exportButton:!0});var t=O.a.Object.extend("Absence"),a=new O.a.Query(t),l=n.props.match.params.id;if(4===parseInt(n.state.status)){new Date;var s=new N.a(n.state.startDate);s.startOf("day");var r=new N.a(s);r.add(1,"day"),a.ascending("createdAt"),a.greaterThanOrEqualTo("createdAt",s.toDate()),a.lessThan("createdAt",r.toDate())}else if(5===parseInt(n.state.status)){new Date;var o=new N.a(n.state.startDate);o.startOf("week");var i=new N.a(o);i.add(1,"week"),a.ascending("createdAt"),a.greaterThanOrEqualTo("createdAt",o.toDate()),a.lessThan("createdAt",i.toDate())}else if(6===parseInt(n.state.status)){new Date;var c=new N.a(n.state.startDate);c.startOf("month");var m=new N.a(c);m.add(1,"month"),a.ascending("createdAt"),a.greaterThanOrEqualTo("createdAt",c.toDate()),a.lessThan("createdAt",m.toDate())}else if(7===parseInt(n.state.status)){new Date;var u=new N.a(n.state.startDate),d=new N.a(n.state.endDate);a.ascending("createdAt"),a.greaterThanOrEqualTo("createdAt",u.toDate()),a.lessThan("createdAt",d.toDate())}a.equalTo("user",{__type:"Pointer",className:"_User",objectId:l}),a.include("user"),a.find().then((function(e){var t=[],a=[],l=[],s=[],r=[],o=[],i=[],c=[];if(e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,n){t.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){l.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),s.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",l)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){r.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),o.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),e.map((function(e,t){c.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"HH:mm"):"00:00","HH:mm")).minutes()),i.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),1===t.length){var m=t.reduce((function(e,t){return e+t}),0),u=m%60,d=Math.floor(m/60);n.setState({sisaJam:d,minutesEarly:u}),console.log("reduce baru menit",u),console.log("reduce baru jam sisa",d)}else if(t.length>1){var g=t.reduce((function(e,t){return e+t}),0),p=g%60,h=Math.floor(g/60);n.setState({sisaJam:h,minutesEarly:p})}else n.setState({minutesEarly:0,sisaJam:0});if(1===a.length){var f=a.reduce((function(e,t){return e+t}),0)+n.state.sisaJam;n.setState({jamEarly:f})}else if(a.length>1){var v=a.reduce((function(e,t){return e+t}),0)+n.state.sisaJam;n.setState({jamEarly:v})}else n.setState({jamEarly:0});if(console.log("late times ",s),1===l.length){var E=l.reduce((function(e,t){return e+t}),0),b=E%60,y=Math.floor(E/60);n.setState({sisaJamLate:y,minutesLate:b})}else if(l.length>1){var S=l.reduce((function(e,t){return e+t}),0),k=S%60,j=Math.floor(S/60);n.setState({sisaJamLate:j,minutesLate:k})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===s.length){var M=s.reduce((function(e,t){return e+t}),0)+n.state.sisaJamLate;n.setState({hoursLate:M})}else if(s.length>1){var w=s.reduce((function(e,t){return e+t}),0)+n.state.sisaJamLate;n.setState({hoursLate:w})}else n.setState({hoursLate:0});if(1===r.length){var T=r.reduce((function(e,t){return e+t}),0),H=T%60,O=Math.floor(T/60);n.setState({sisaJamOvertime:O,minutesOvertime:H})}else if(r.length>1){var I=r.reduce((function(e,t){return e+t}),0),D=I%60,C=Math.floor(I/60);n.setState({sisaJamOvertime:C,minutesOvertime:D})}else n.setState({minutesOvertime:0,sisaJam:0});if(1===o.length){var A=o.reduce((function(e,t){return e+t}),0)+n.state.sisaJamOvertime;n.setState({jamOvertime:A})}else if(o.length>1){var L=o.reduce((function(e,t){return e+t}),0)+n.state.sisaJamOvertime;n.setState({jamOvertime:L})}else n.setState({jamOvertime:0});if(1===c.length){var x=c.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),K=Math.floor(x/60),P=x%60;n.setState({sisaJamTotalMinutes:K,minutesTotal:P})}else if(c.length>1){var J=c.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),F=Math.floor(J/60),z=J%60;n.setState({sisaJamTotalMinutes:F,minutesTotal:z})}else n.setState({minutesTotal:0,sisaJamTotalMinutes:0});if(1===i.length){var U=i.reduce((function(e,t){return e+t}),0)+n.state.sisaJamTotalMinutes;n.setState({jamTotal:U})}else if(i.length>1){var B=i.reduce((function(e,t){return e+t}),0)+n.state.sisaJamTotalMinutes;n.setState({jamTotal:B})}else n.setState({jamTotal:0});n.setState({absence:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.subtractHourLate=function(e,t,a){var n;return"Late"===a&&t>e&&(n=t-e),"Overtime"===a&&t>e&&(n=t-e),"EarlyLeave"===a&&t<e&&(n=e-t),n},n.getDaftarAbsen=function(){n.setState({loading:!0});var e=O.a.Object.extend("Absence"),t=(new(O.a.Object.extend("Leader")),new O.a.Query(e)),a=n.props.match.params.id,l="Data tidak ditemukan",s=new Date,r=new N.a(s);r.startOf("day"),new N.a(r).add(1,"day"),t.equalTo("user",{__type:"Pointer",className:"_User",objectId:a}),t.ascending("absenMasuk"),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("user"),t.find().then((function(e){console.log("user",e);var t=[],a=[],s=[],r=[],o=[],i=[],c=[],m=[];if(e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,n){t.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){s.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),r.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",s)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){o.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),i.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),e.map((function(e,t){m.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),c.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),1===t.length){var u=t.reduce((function(e,t){return e+t}),0),d=u%60,g=Math.floor(u/60);n.setState({sisaJam:g,minutesEarly:d}),console.log("reduce baru menit",d),console.log("reduce baru jam sisa",g)}else if(t.length>1){var p=t.reduce((function(e,t){return e+t}),0),h=p%60,f=Math.floor(p/60);n.setState({sisaJam:f,minutesEarly:h})}else n.setState({minutesEarly:0,sisaJam:0});if(1===a.length){var v=a.reduce((function(e,t){return e+t}),0)+n.state.sisaJam;n.setState({jamEarly:v})}else if(a.length>1){var E=a.reduce((function(e,t){return e+t}),0)+n.state.sisaJam;n.setState({jamEarly:E})}else n.setState({jamEarly:0});if(console.log("late times ",r),1===s.length){var b=s.reduce((function(e,t){return e+t}),0),y=b%60,S=Math.floor(b/60);n.setState({sisaJamLate:S,minutesLate:y})}else if(s.length>1){var k=s.reduce((function(e,t){return e+t}),0),j=k%60,M=Math.floor(k/60);n.setState({sisaJamLate:M,minutesLate:j})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===r.length){var w=r.reduce((function(e,t){return e+t}),0)+n.state.sisaJamLate;n.setState({hoursLate:w})}else if(r.length>1){var T=r.reduce((function(e,t){return e+t}),0)+n.state.sisaJamLate;n.setState({hoursLate:T})}else n.setState({hoursLate:0});if(1===o.length){var H=o.reduce((function(e,t){return e+t}),0),O=H%60,I=Math.floor(H/60);n.setState({sisaJamOvertime:I,minutesOvertime:O})}else if(o.length>1){var D=o.reduce((function(e,t){return e+t}),0),C=D%60,A=Math.floor(D/60);n.setState({sisaJamOvertime:A,minutesOvertime:C})}else n.setState({minutesOvertime:0,sisaJam:0});if(1===i.length){var L=i.reduce((function(e,t){return e+t}),0)+n.state.sisaJamOvertime;n.setState({jamOvertime:L})}else if(i.length>1){var x=i.reduce((function(e,t){return e+t}),0)+n.state.sisaJamOvertime;n.setState({jamOvertime:x})}else n.setState({jamOvertime:"0"});if(1===m.length){var K=m.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),P=Math.floor(K/60),J=K%60;n.setState({sisaJamTotalMinutes:P,minutesTotal:J})}else if(m.length>1){var F=m.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),z=Math.floor(F/60),U=F%60;n.setState({sisaJamTotalMinutes:z,minutesTotal:U})}else n.setState({minutesTotal:0,sisaJamTotalMinutes:0});if(1===c.length){var B=c.reduce((function(e,t){return e+t}),0)+n.state.sisaJamTotalMinutes;n.setState({jamTotal:B})}else if(c.length>1){var R=c.reduce((function(e,t){return e+t}),0)+n.state.sisaJamTotalMinutes;n.setState({jamTotal:R})}else n.setState({jamTotal:"0"});n.setState({absence:e,loading:!1,employeeName:Ee.a.isEmpty(e)?l:e[0].get("fullname"),employeeID:Ee.a.isEmpty(e)?l:e[0].get("user").attributes.nik,employeeTitle:Ee.a.isEmpty(e)?l:e[0].get("user").attributes.level,employeeDepartment:Ee.a.isEmpty(e)?l:e[0].get("user").attributes.posisi})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.state={absence:[],loading:!1,startDate:"",employeeName:"",employeeID:"",sisaJam:0,sisaJamLate:0,sisaJamOvertime:0,sisaJamTotalMinutes:0,minutesEarly:0,minutesTotal:0,jamEarly:0,minutesLate:0,hoursLate:0,minutesOvertime:0,jamOvertime:0,jamTotal:0},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDaftarAbsen()}},{key:"shouldComponentUpdate",value:function(e,t){return console.log(t),t.absence.length>0}},{key:"render",value:function(){var e=this,t=this.state,a=t.absence,n=t.loading,s=t.startDate,r=t.endDate;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Reporting"),l.a.createElement(h.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",required:!0,onChange:function(t){e.setState({status:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6,7].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"".concat(7===parseInt(this.state.status)?"Set start date":"Set tanggal"),required:!0,readOnly:!0},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:s,onChange:function(t){e.setState({startDate:t.toDate()})}})))),7===parseInt(this.state.status)?l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Set end date",required:!0,readOnly:!0},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:r,onChange:function(t){e.setState({endDate:t.toDate()})}})))):"",l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement(ae.a,{className:"my-4",color:"primary",type:"submit",disabled:n},n?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),this.state.exportButton&!this.state.loading?l.a.createElement(ct.a,{id:"eskport",className:"btn btn-primary",table:"ekspor",filename:this.state.employeeName,sheet:"Absensi",buttonText:" Ekspor Excel",multipleTables:[{tableId:"ekspor",fileName:this.state.employeeName}]}):""),l.a.createElement(ne.a,{className:"align-items-center table-flush",id:"ekspor",responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Fingerprint ID"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeID))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Name"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeName))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Title"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeTitle))),l.a.createElement("thead",{className:"border-0 mb-2"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Department Title"),l.a.createElement("th",{scope:"col",className:"mb-2",style:{border:"none"}},this.state.employeeDepartment))),l.a.createElement("thead",{className:"thead-light",style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",rowSpan:"2"},"Day"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Date"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Working Hour"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty On"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty Off"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Late In"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Early Derparture"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Over Time"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Total Hour"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Notes")),l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"))),l.a.createElement("tbody",{style:{textAlign:"center"}},n?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):a.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:14,style:{textAlign:"center"}},"No data found...")):a.map((function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null,q(e.get("createdAt"),"ddd")),l.a.createElement("td",null,q(e.get("createdAt"),"DD/MM/YYYY")),l.a.createElement("td",null,"".concat(e.get("user").attributes.jamMasuk<10?"0":"").concat(e.get("user").attributes.jamMasuk,":00")+" - "+"".concat(e.get("user").attributes.jamKeluar,":00")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"k"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"m"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"m"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"k"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"k"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"m"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"m"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"m"):""),l.a.createElement("td",{className:"lateInHours"},void 0===e.get("lateTimes")?"":N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),l.a.createElement("td",null,void 0===e.get("lateTimes")?"":N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("earlyTimes")?"":N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",{className:"earlyminutes"},void 0===e.get("earlyTimes")?"":N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0!==e.get("overtimeOut")?N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours():""),l.a.createElement("td",null,void 0!==e.get("overtimeOut")?N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes():""),l.a.createElement("td",null,N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",null,N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0!==e.get("overtimeIn")?"Working Overtime":void 0!==e.get("lateTimes")?"Late":void 0!==e.get("earlyTimes")?"Early Depature":"Working Hour"))})),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"7"},"Total"),l.a.createElement("td",null,this.state.hoursLate),l.a.createElement("td",null,this.state.minutesLate),l.a.createElement("td",null,this.state.jamEarly),l.a.createElement("td",null,this.state.minutesEarly),l.a.createElement("td",null,this.state.jamOvertime),l.a.createElement("td",null,this.state.minutesOvertime),l.a.createElement("td",null,this.state.jamTotal),l.a.createElement("td",null,this.state.minutesTotal),l.a.createElement("td",null)))))))))}}]),a}(l.a.Component),ut=l.a.memo(mt),dt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getData=function(){n.setState({loading:!0});var e=new O.a.Object.extend("HariCuti"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({data:e,loading:!1})})).catch((function(e){console.log(e.message),n.setState({loading:!1,message:"Gagal memuat data",visible:!0})}))},n.handleAdd=function(e){e.preventDefault();var t=n.state.hariCuti;n.setState({loadingModal:!0});var a=new(O.a.Object.extend("HariCuti"));a.set("hariCuti",N()(t).add(10,"h").toDate()),a.save().then((function(e){n.setState({addMode:!1,loadingModal:!1,data:n.state.data.concat(e),message:"Berhasil tambah data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})}))},n.getDetail=function(e,t){e.preventDefault();var a=O.a.Object.extend("HariCuti");new O.a.Query(a).get(t).then((function(e){var t=e.attributes;n.setState({hariCuti:t.hariCuti,editMode:!0})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.handleUpdate=function(e){e.preventDefault();var t=n.state.hariCuti;n.setState({loadingModal:!0});var a=O.a.Object.extend("HariCuti");new O.a.Query(a).get(n.state.userId).then((function(e){e.set("hariCuti",t),e.save().then((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))},n.handleRemove=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=O.a.Object.extend("HariCuti");new O.a.Query(t).get(n.state.userId).then((function(e){e.set("status",0),e.save().then((function(e){var t=Object(Oe.a)(n.state.data);t.splice(n.state.userIndex,1),n.setState({deleteMode:!1,loadingModal:!1,data:t,message:"Berhasil hapus data",visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.state={data:[],hariCuti:null,detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,editMode:!1,deleteMode:!1,deleteCounter:0,latitude:0,longitude:0,message:"",color:"danger",visible:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.loading,s=t.addMode,r=t.editMode,o=t.loadingModal,i=t.fullnames,c=(t.detail,t.deleteMode);t.approveAllMode,t.rejectAllMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}}),l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,null,l.a.createElement(ae.a,{className:"ml-2",color:"primary","data-dismiss":"modal",type:"button",onClick:function(){return e.setState({addMode:!0})}},l.a.createElement("i",{className:"fa fa-plus"})," Tambah"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"No"),l.a.createElement("th",{scope:"col"},"Hari Cuti"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,a+1),l.a.createElement("td",null,q(t.get("hariCuti"),"DD/MM/YYYY")),l.a.createElement("td",null,l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(n){e.setState({userId:t.id,userIndex:a}),e.getDetail(n,t.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Ubah data"),l.a.createElement(ae.a,{id:"t2",className:"btn-circle btn-danger",onClick:function(n){e.setState({deleteMode:!0,userId:t.id,userIndex:a,fullnames:t.get("hariCuti")})}},l.a.createElement("i",{className:"fa fa-trash"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t2"},"Hapus data")))})))))))),l.a.createElement(Ce,{show:s,loading:o,footer:!1,handleHide:function(){return e.toggle("addMode")},title:"Tambah Daftar Hari Cuti",body:l.a.createElement("div",null,l.a.createElement(h.a,{onSubmit:function(t){return e.handleAdd(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Set Hari Cuti"),l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Set hari cuti disini"},timeFormat:!1,dateFormat:"DD/MM/YYYY",value:this.state.hariCuti,onChange:function(t){e.setState({hariCuti:t.toDate()}),console.log(t.toDate())}}))),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},o?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleAdd(t)}}),l.a.createElement(Ce,{show:r,loading:o,footer:!1,handleHide:function(){return e.toggle("editMode")},title:"Edit Hari Cuti",body:l.a.createElement("div",null,l.a.createElement(h.a,{onSubmit:function(t){return e.handleUpdate(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Set hari cuti"),l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Set hari cuti disini"},timeFormat:!1,dateFormat:"DD/MM/YYYY",value:this.state.hariCuti,onChange:function(t){e.setState({hariCuti:t.toDate()}),console.log(t.toDate())}}))),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("editMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},o?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleUpdate(t)}}),l.a.createElement(Ce,{show:c,loading:o,footer:!0,handleHide:function(){return e.toggle("deleteMode")},title:"Remove Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Remove tanggal cuti ".concat(q(i,"DD/MM/YYYY")," ?"))),handleSubmit:function(t){return e.handleRemove(t)}}))}}]),a}(l.a.Component),gt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleFilter=function(e){e.preventDefault(),n.setState({loading:!0});var t=O.a.Object.extend("Absence"),a=(new(O.a.Object.extend("Leader")),new O.a.Query(t));if(4===parseInt(n.state.status)){new Date;var l=new N.a(n.state.startDate);l.startOf("day");var s=new N.a(l);s.add(1,"day"),a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),a.ascending("absenMasuk"),a.greaterThanOrEqualTo("createdAt",l.toDate()),a.lessThan("createdAt",s.toDate()),a.include("user"),a.find().then((function(e){console.log("user",e),n.setState({absence:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))}else if(5===parseInt(n.state.status)){new Date;var r=new N.a(n.state.startDate);r.startOf("week");var o=new N.a(r);o.add(1,"week"),a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),a.ascending("absenMasuk"),a.greaterThanOrEqualTo("createdAt",r.toDate()),a.lessThan("createdAt",o.toDate()),a.include("user"),a.find().then((function(e){console.log("user",e),n.setState({absence:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))}else if(6===parseInt(n.state.status)){new Date;var i=new N.a(n.state.startDate);i.startOf("month");var c=new N.a(i);c.add(1,"month"),a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),a.ascending("absenMasuk"),a.greaterThanOrEqualTo("createdAt",i.toDate()),a.lessThan("createdAt",c.toDate()),a.include("user"),a.find().then((function(e){console.log("user",e),n.setState({absence:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))}},n.subtractHourLate=function(e,t,a){var n;return"Late"===a&&t>e&&(n=t-e),"Overtime"===a&&t>e&&(n=t-e),"EarlyLeave"===a&&t<e&&(n=e-t),n},n.getDaftarAbsen=function(){n.setState({loading:!0});var e=O.a.Object.extend("Absence"),t=(new(O.a.Object.extend("Leader")),new O.a.Query(e)),a=(n.props.match.params.id,"Data tidak ditemukan"),l=new Date,s=new N.a(l);s.startOf("day");var r=new N.a(s);r.add(1,"day"),t.ascending("absenMasuk"),t.greaterThanOrEqualTo("absenMasuk",s.toDate()),t.lessThan("absenMasuk",r.toDate()),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("user"),t.find().then((function(e){console.log("user",e),n.setState({absence:e,loading:!1,employeeName:Ee.a.isEmpty(e)?a:e[0].get("fullname"),employeeID:Ee.a.isEmpty(e)?a:e[0].get("user").attributes.nik,employeeTitle:Ee.a.isEmpty(e)?a:e[0].get("user").attributes.level,employeeDepartment:Ee.a.isEmpty(e)?a:e[0].get("user").attributes.posisi})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.state={absence:[],loading:!1,startDate:"",employeeName:"",employeeID:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDaftarAbsen()}},{key:"shouldComponentUpdate",value:function(e,t){return console.log(t),t.absence.length>0}},{key:"render",value:function(){var e=this,t=this.state,a=t.absence,n=t.loading,s=t.startDate;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Reporting"),l.a.createElement(h.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",required:!0,onChange:function(t){e.setState({status:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Date Picker Here",required:!0,readOnly:!0},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:s,onChange:function(t){e.setState({startDate:t.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement(ae.a,{className:"my-4",color:"primary",type:"submit",disabled:n},n?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),l.a.createElement(Ve.a,{id:"eskport",className:"btn btn-primary",table:"ekspor",filename:"Absensi",sheet:"Absensi",buttonText:"Ekspor Excel"})),l.a.createElement(ne.a,{className:"align-items-center table-flush",id:"ekspor",responsive:!0},l.a.createElement("thead",{className:"thead-light",style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",rowSpan:"2"},"Name"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Day"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Date"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Working Hour"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty On"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty Off"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Late In"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Early Derparture"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Over Time"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Total Hour"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Notes")),l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"))),l.a.createElement("tbody",{style:{textAlign:"center"}},n?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):a.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:14,style:{textAlign:"center"}},"No data found...")):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",{style:{textAlign:"start"}},t.get("fullname")),l.a.createElement("td",null,q(t.get("absenMasuk"),"ddd")),l.a.createElement("td",null,q(t.get("absenMasuk"),"DD/MM/YYYY")),l.a.createElement("td",null,"".concat(t.get("user").attributes.jamMasuk<10?"0":"").concat(t.get("user").attributes.jamMasuk,":00")+" - "+"".concat(t.get("user").attributes.jamKeluar,":00")),l.a.createElement("td",{style:{color:void 0!==t.get("lateTimes")?"red":""}},void 0!==t.get("lateTimes")?q(t.get("lateTimes"),"k"):q(t.get("absenMasuk"),"k")),l.a.createElement("td",{style:{color:void 0!==t.get("lateTimes")?"red":""}},void 0!==t.get("lateTimes")?q(t.get("lateTimes"),"m"):q(t.get("absenMasuk"),"m")),l.a.createElement("td",{style:{color:void 0!==t.get("earlyTimes")?"red":""}},void 0!==t.get("earlyTimes")?q(t.get("earlyTimes"),"k"):q(t.get("absenKeluar"),"k")),l.a.createElement("td",{style:{color:void 0!==t.get("earlyTimes")?"red":""}},void 0!==t.get("earlyTimes")?q(t.get("earlyTimes"),"m"):q(t.get("absenKeluar"),"m")),l.a.createElement("td",null,void 0===t.get("lateTimes")?"":e.subtractHourLate(t.get("user").attributes.jamMasuk,q(t.get("lateTimes"),"k"),"Late")),l.a.createElement("td",null,void 0===t.get("lateTimes")?"":e.subtractHourLate(0,q(t.get("lateTimes"),"m"),"Late")),l.a.createElement("td",null,void 0===t.get("earlyTimes")?"":e.subtractHourLate(t.get("user").attributes.jamKeluar,q(t.get("earlyTimes"),"k"),"EarlyLeave")),l.a.createElement("td",null,void 0===t.get("earlyTimes")?"":e.subtractHourLate(0,q(t.get("earlyTimes"),"m"),"EarlyLeave")),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null,"Working OverTime"))})),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"7"},"Total"),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null)))))))))}}]),a}(l.a.Component),pt=(l.a.memo(gt),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getPosisi=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Position"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarPosisi:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n.setState({loadingFilter:!0});var t=n.state,a=t.searchBy,l=t.searchValue,s=n.state,r=s.resPerPage,o=(s.page,new O.a.User),i=new O.a.Query(o);switch(i.notContainedIn("roles",["admin","leader","Admin","Leader"]),i.skip(r*e-r),i.limit(r),i.withCount(),a){case"all":i.find({useMasterKey:!0}).then((function(e){e.results.map((function(e){return e.select=!1})),n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"name":i.matches("fullname",l,"i"),i.find({useMasterKey:!0}).then((function(e){e.results.map((function(e){return e.select=!1})),n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"nik":i.equalTo("nik",l),i.find({useMasterKey:!0}).then((function(e){e.results.map((function(e){return e.select=!1})),n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"divisi":i.matches("posisi",l,"i"),i.find({useMasterKey:!0}).then((function(e){e.results.map((function(e){return e.select=!1})),n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"leader":var c=new O.a.User,m=new O.a.Query(c);m.matches("fullname",l,"i"),i.matchesQuery("leaderIdNew",m),i.find({useMasterKey:!0}).then((function(e){e.results.map((function(e){return e.select=!1})),n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}))}},n.closeLoading=function(){n.setState({loadingModal:!1})},n.handleChildCheck=function(e){var t=n.state.daftarStaff,a=n.state,l=a.checkId,s=a.fileData,r=e.target.value;t.map((function(t,a){if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)n.setState((function(e){return{checkId:[].concat(Object(Oe.a)(n.state.checkId),[r]),fileData:[].concat(Object(Oe.a)(n.state.fileData),[{fileName:t.get("fullname"),tableId:"ekspor".concat(a)}])}}),(function(){console.log(n.state.checkId),console.log(n.state.fileData)}));else{var o=l.indexOf(r),i=s.map((function(e){return e.fileName})).indexOf(t.get("fullname"));(o>-1||i>-1)&&(l.splice(o,1),s.splice(i,1),n.setState((function(e){return{checkId:l,fileData:s}}),(function(){console.log(n.state.checkId),console.log(n.state.fileData)})))}})),n.setState({daftarStaff:t})},n.handleAllCheck=function(e){var t=n.state.daftarStaff,a=[],l=[];t.map((function(t,n){return t.select=e.target.checked,t.select?(a.push(t.id),l.push({fileName:t.get("fullname"),tableId:"ekspor".concat(n)})):(a=[],l=[]),t})),n.setState({daftarStaff:t,checkId:a,fileData:l},(function(){return console.log(n.state.checkId)}))},n.handleApproval=function(e,t){e.preventDefault(),n.setState({loadingModal:!0});var a=O.a.Object.extend("Izin");new O.a.Query(a).get(n.state.userId).then((function(e){e.set("status",t?1:0),t||e.set("alasanReject",n.state.reason),e.save().then((function(){var e=Object(Oe.a)(n.state.izin);e.splice(n.state.userIndex,1),n.setState({counter:n.state.counter+1,izin:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1}),alert("Berhasil ".concat(t?"approve":"reject"))})).catch((function(e){alert(e.message),n.closeLoading()}))})).catch((function(e){alert(e.message),n.closeLoading()}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.handleFilter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.preventDefault(),n.setState({loadingFilter:!0});var a=n.state,l=a.searchBy,s=a.searchValue,r=n.state,o=r.resPerPage,i=(r.page,new O.a.User),c=new O.a.Query(i);switch(c.notContainedIn("roles",["admin","leader","Admin","Leader"]),c.skip(o*t-o),c.limit(o),c.withCount(),l){case"all":c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"name":c.matches("fullname",s,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"nik":c.equalTo("nik",s),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"divisi":c.matches("posisi",s,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"leader":var m=new O.a.User,u=new O.a.Query(m);u.matches("fullname",s,"i"),c.matchesQuery("leaderIdNew",u),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}))}},n.queryAbsen=function(e,t,a,l){var s,r,o=O.a.Object.extend("Absence"),i=new O.a.Query(o),c=(new Date,n.state.checkId),m="DATA TIDAK DITEMUKAN";a?(s=new N.a(n.state.startDate),r=new N.a(n.state.endDate)):((s=new N.a(n.state.startDate)).startOf(e),(r=new N.a(s)).add(1,e)),i.equalTo("user",{__type:"Pointer",className:"_User",objectId:t}),i.ascending("createdAt"),i.greaterThanOrEqualTo("createdAt",s.toDate()),i.lessThan("createdAt",r.toDate()),i.include("user"),i.find().then((function(e){console.log("user",e);var t=[],a=[],s=[],r=[],o=[],i=[],u=[],d=[];e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,n){t.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){s.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),r.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",s)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){o.push(N.a.duration(q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),i.push(N.a.duration(q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),console.log("overtime hours",i),e.map((function(e,t){d.push(N.a.duration(q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),u.push(N.a.duration(q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),console.log("total menit",d),console.log("total jam",u),console.log(s),console.log(r),console.log(o),console.log(i);var g=a.reduce((function(e,t){return e+t}),0);console.log("total overtime",g);var p=u.reduce((function(e,t){return e+t})),h=d.reduce((function(e,t){return parseInt(e)+parseInt(t)}));if(console.log(p+Math.floor(h/60)),console.log(h%60),1===t.length){var f=t.reduce((function(e,t){return e+t}),0),v=Object(Oe.a)(n.state.sisaJam);v.splice(l,0,Math.floor(f/60));var E=Object(Oe.a)(n.state.minutesEarly);E.splice(l,0,f%60),n.setState({sisaJam:v,minutesEarly:E})}else if(t.length>1){var b=t.reduce((function(e,t){return e+t}),0),y=Object(Oe.a)(n.state.sisaJam);y.splice(l,0,Math.floor(b/60));var S=Object(Oe.a)(n.state.minutesEarly);S.splice(l,0,b%60),n.setState({sisaJam:y,minutesEarly:S})}else n.setState({minutesEarly:0,sisaJam:0});if(1===a.length){var k=a.reduce((function(e,t){return e+t}),0),j=Object(Oe.a)(n.state.jamEarly);j.splice(l,0,k+n.state.sisaJam[l]),n.setState({jamEarly:j})}else if(a.length>1){var M=a.reduce((function(e,t){return e+t}),0),w=Object(Oe.a)(n.state.jamEarly);w.splice(l,0,M+n.state.sisaJam[l]),n.setState({jamEarly:w})}else n.setState({jamEarly:0});if(console.log("late times ",r),1===s.length){var T=s.reduce((function(e,t){return e+t}),0),H=Object(Oe.a)(n.state.sisaJamLate);H.splice(l,0,Math.floor(T/60));var O=Object(Oe.a)(n.state.minutesLate);O.splice(l,0,T%60),n.setState({sisaJamLate:H,minutesLate:O})}else if(s.length>1){var I=s.reduce((function(e,t){return e+t}),0),D=Object(Oe.a)(n.state.sisaJamLate);D.splice(l,0,Math.floor(I/60));var C=Object(Oe.a)(n.state.minutesLate);C.splice(l,0,I%60),n.setState({sisaJamLate:D,minutesLate:C})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===r.length){var A=r.reduce((function(e,t){return e+t}),0),L=Object(Oe.a)(n.state.hoursLate);L.splice(l,0,A+n.state.sisaJamLate[l]),n.setState({hoursLate:L})}else if(r.length>1){var x=r.reduce((function(e,t){return e+t}),0),K=Object(Oe.a)(n.state.hoursLate);K.splice(l,0,x+n.state.sisaJamLate[l]),n.setState({hoursLate:K})}else n.setState({hoursLate:0});if(console.log(o),1===o.length){var P=o.reduce((function(e,t){return e+t}),0),J=Object(Oe.a)(n.state.sisaJamOvertime);J.splice(l,0,Math.floor(P/60));var F=Object(Oe.a)(n.state.minutesOvertime);F.splice(l,0,P%60),n.setState({sisaJamOvertime:J,minutesOvertime:F},(function(){return console.log(n.state.minutesOvertime)}))}else if(o.length>1){var z=o.reduce((function(e,t){return e+t}),0),U=Object(Oe.a)(n.state.sisaJamOvertime);U.splice(l,0,Math.floor(z/60));var B=Object(Oe.a)(n.state.minutesOvertime);B.splice(l,0,z%60),n.setState({sisaJamOvertime:U,minutesOvertime:B},(function(){return console.log(n.state.minutesOvertime)}))}else 0===o.length&&n.setState({minutesOvertime:"0",sisaJam:"0"});if(1===i.length){var R=i.reduce((function(e,t){return e+t}),0),Q=Object(Oe.a)(n.state.jamOvertime);Q.splice(l,0,R+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:Q})}else if(i.length>1){var Y=i.reduce((function(e,t){return e+t}),0),G=Object(Oe.a)(n.state.jamOvertime);G.splice(l,0,Y+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:G})}else 0===i.length&&n.setState({jamOvertime:n.state.jamOvertime.concat("0")});if(1===d.length){u.reduce((function(e,t){return e+t}),0);var _=d.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),W=Object(Oe.a)(n.state.sisaJamTotalMinutes);W.splice(l,0,Math.floor(_/60));var V=Object(Oe.a)(n.state.minutesTotal);V.splice(l,0,_%60),n.setState({sisaJamTotalMinutes:W,minutesTotal:V},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)})),console.log("total minutes",d),console.log("total minutes2",n.state.minutesTotal)}if(d.length>1){var Z=d.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),X=Object(Oe.a)(n.state.sisaJamTotalMinutes);X.splice(l,0,Math.floor(Z/60));var $=Object(Oe.a)(n.state.minutesTotal);$.splice(l,0,Z%60),n.setState({sisaJamTotalMinutes:X,minutesTotal:$},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)}))}else n.setState({minutesTotal:n.state.minutesTotal.concat("0"),sisaJamTotalMinutes:n.state.sisaJamTotalMinutes.concat("0")});if(1===u.length){console.log(u);var ee=u.reduce((function(e,t){return e+t}),0),te=Object(Oe.a)(n.state.jamTotal);te.splice(l,0,ee+n.state.sisaJamTotalMinutes[l]),n.setState({jamTotal:te}),console.log("jam total 1",n.state.jamTotal)}if(u.length>1){console.log(u);var ae=u.reduce((function(e,t){return e+t}),0),ne=Object(Oe.a)(n.state.jamTotal);ne.splice(l,0,ae+n.state.sisaJamTotalMinutes[l]),n.setState({jamTotal:ne})}else n.setState({jamTotal:0});var le=Object(Oe.a)(n.state.absence);le.splice(l,0,e);var se=Object(Oe.a)(n.state.tableData);se.splice(l,0,{fileName:Ee.a.isEmpty(e[0])?n.state.fileData[l].fileName:e[0].get("fullname"),tableId:"ekspor".concat(l)}),n.setState({absence:le,tableData:se,employeeName:Ee.a.isEmpty(e)?n.state.employeeName.concat(m):n.state.employeeName.concat(e[0].get("fullname")),employeeID:Ee.a.isEmpty(e)?n.state.employeeID.concat(m):n.state.employeeID.concat(e[0].get("user").attributes.nik),employeeTitle:Ee.a.isEmpty(e)?n.state.employeeTitle.concat(m):n.state.employeeTitle.concat(e[0].get("user").attributes.level),employeeDepartment:Ee.a.isEmpty(e)?n.state.employeeDepartment.concat(m):n.state.employeeDepartment.concat(e[0].get("user").attributes.posisi)}),console.log(!0),(l+=1)===c.length&&n.setState({loading:!1})})).catch((function(e){return console.log(e.message),n.setState({loading:!1}),!1}))},n.getDataAbsen=function(e){e.preventDefault(),n.setState({loading:!0}),n.setState({absence:[],tableData:[],tableData:[],sisaJam:[],sisaJamLate:[],sisaJamOvertime:[],sisaJamTotalMinutes:[],minutesEarly:[],minutesTotal:[],jamEarly:[],minutesLate:[],hoursLate:[],minutesOvertime:[],jamOvertime:[],jamTotal:[]});var t=n.state.checkId,a="DATA TIDAK DITEMUKAN",l=0;if(4===parseInt(n.state.status)){var s=[],r=[],o=[];t.map((function(e){var i,c,m=O.a.Object.extend("Absence"),u=new O.a.Query(m);new Date;(i=new N.a(n.state.startDate)).startOf("day"),(c=new N.a(i)).add(1,"day"),u.equalTo("user",{__type:"Pointer",className:"_User",objectId:e}),u.ascending("createdAt"),u.greaterThanOrEqualTo("createdAt",i.toDate()),u.lessThan("createdAt",c.toDate()),u.include("user"),u.find().then((function(e){console.log("user",e);var i=[],c=[],m=[],u=[],d=[],g=[],p=[],h=[];e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,t){i.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),c.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",i)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){m.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),u.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",m)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){d.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),g.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),e.map((function(e,t){h.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),p.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),console.log("total menit",h),console.log("total jam",p),console.log(m),console.log(u),console.log(d),console.log(g);var f=c.reduce((function(e,t){return e+t}),0);console.log("total overtime",f);var v=p.reduce((function(e,t){return e+t})),E=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}));if(console.log(v+Math.floor(E/60)),console.log(E%60),1===i.length){var b=i.reduce((function(e,t){return e+t}),0),y=Object(Oe.a)(n.state.sisaJam);y.splice(l,0,Math.floor(b/60));var S=Object(Oe.a)(n.state.minutesEarly);S.splice(l,0,b%60),n.setState({sisaJam:y,minutesEarly:S})}else if(i.length>1){var k=i.reduce((function(e,t){return e+t}),0),j=Object(Oe.a)(n.state.sisaJam);j.splice(l,0,Math.floor(k/60));var M=Object(Oe.a)(n.state.minutesEarly);M.splice(l,0,k%60),n.setState({sisaJam:j,minutesEarly:M})}else n.setState({minutesEarly:0,sisaJam:0});if(1===c.length){var w=c.reduce((function(e,t){return e+t}),0),T=Object(Oe.a)(n.state.jamEarly);T.splice(l,0,w+n.state.sisaJam[l]),n.setState({jamEarly:T})}else if(c.length>1){var H=c.reduce((function(e,t){return e+t}),0),O=Object(Oe.a)(n.state.jamEarly);O.splice(l,0,H+n.state.sisaJam[l]),n.setState({jamEarly:O})}else n.setState({jamEarly:0});if(console.log("late times ",u),1===m.length){var I=m.reduce((function(e,t){return e+t}),0),D=Object(Oe.a)(n.state.sisaJamLate);D.splice(l,0,Math.floor(I/60));var C=Object(Oe.a)(n.state.minutesLate);C.splice(l,0,I%60),n.setState({sisaJamLate:D,minutesLate:C})}else if(m.length>1){var A=m.reduce((function(e,t){return e+t}),0),L=Object(Oe.a)(n.state.sisaJamLate);L.splice(l,0,Math.floor(A/60));var x=Object(Oe.a)(n.state.minutesLate);x.splice(l,0,A%60),n.setState({sisaJamLate:L,minutesLate:x})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===u.length){var K=u.reduce((function(e,t){return e+t}),0),P=Object(Oe.a)(n.state.hoursLate);P.splice(l,0,K+n.state.sisaJamLate[l]),n.setState({hoursLate:P})}else if(u.length>1){var J=u.reduce((function(e,t){return e+t}),0),F=Object(Oe.a)(n.state.hoursLate);F.splice(l,0,J+n.state.sisaJamLate[l]),n.setState({hoursLate:F})}else n.setState({hoursLate:0});if(console.log(d),1===d.length){var z=d.reduce((function(e,t){return e+t}),0),U=Object(Oe.a)(n.state.sisaJamOvertime);U.splice(l,0,Math.floor(z/60));var B=Object(Oe.a)(n.state.minutesOvertime);B.splice(l,0,z%60),n.setState({sisaJamOvertime:U,minutesOvertime:B},(function(){return console.log(n.state.minutesOvertime)}))}else if(d.length>1){var R=d.reduce((function(e,t){return e+t}),0),Q=Object(Oe.a)(n.state.sisaJamOvertime);Q.splice(l,0,Math.floor(R/60));var Y=Object(Oe.a)(n.state.minutesOvertime);Y.splice(l,0,R%60),n.setState({sisaJamOvertime:Q,minutesOvertime:Y},(function(){return console.log(n.state.minutesOvertime)}))}else 0===d.length&&n.setState({minutesOvertime:n.state.minutesOvertime.concat("0"),sisaJam:n.state.sisaJam.concat(0)});if(1===g.length){var G=g.reduce((function(e,t){return e+t}),0),_=Object(Oe.a)(n.state.jamOvertime);_.splice(l,0,G+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:_})}else if(g.length>1){var W=g.reduce((function(e,t){return e+t}),0),V=Object(Oe.a)(n.state.jamOvertime);V.splice(l,0,W+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:V})}else 0===g.length&&n.setState({jamOvertime:n.state.jamOvertime.concat("0")});if(1===h.length){p.reduce((function(e,t){return e+t}),0);var Z=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(Z/60)),s.push(Math.floor(Z/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,Z%60),o.splice(l,0,Z%60),n.setState({sisaJamTotalMinutes:s,minutesTotal:o},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)})),console.log("total minutes",h),console.log("total data",l),console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("sisa jam 2",s),console.log("total minutes2",n.state.minutesTotal[l])}if(h.length>1){var X=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(X/60)),s.push(Math.floor(X/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,X%60),o.splice(l,0,X%60),n.setState({sisaJamTotalMinutes:s,minutesTotal:o},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)}))}else n.setState({minutesTotal:n.state.minutesTotal.concat("0"),sisaJamTotalMinutes:n.state.sisaJamTotalMinutes.concat("0")});if(1===p.length){console.log(p),console.log("sisa jam",n.state.sisaJamTotalMinutes[l]),console.log("sisa jam 2",s[l]);var $=p.reduce((function(e,t){return e+t}));Object(Oe.a)(n.state.jamTotal).splice(l,0,$+s[l]),r.splice(l,0,$+s[l]),n.setState({jamTotal:r})}if(p.length>1){console.log(p),console.log("sisa jam 2",s[l]);var ee=p.reduce((function(e,t){return e+t}),0);Object(Oe.a)(n.state.jamTotal).splice(l,0,ee+s[l]),r.splice(l,0,ee+s[l]),n.setState({jamTotal:r})}else 0===p.length&&n.setState({jamTotal:0});var te=Object(Oe.a)(n.state.absence);te.splice(l,0,e);var ae=Object(Oe.a)(n.state.tableData);ae.splice(l,0,{fileName:Ee.a.isEmpty(e[0])?n.state.fileData[l].fileName:e[0].get("fullname"),tableId:"ekspor".concat(l)}),n.setState({absence:te,tableData:ae,employeeName:Ee.a.isEmpty(e)?n.state.employeeName.concat(a):n.state.employeeName.concat(e[0].get("fullname")),employeeID:Ee.a.isEmpty(e)?n.state.employeeID.concat(a):n.state.employeeID.concat(e[0].get("user").attributes.nik),employeeTitle:Ee.a.isEmpty(e)?n.state.employeeTitle.concat(a):n.state.employeeTitle.concat(e[0].get("user").attributes.level),employeeDepartment:Ee.a.isEmpty(e)?n.state.employeeDepartment.concat(a):n.state.employeeDepartment.concat(e[0].get("user").attributes.posisi),jamTotal:r,minutesTotal:o}),console.log(!0),(l+=1)===t.length&&n.setState({loading:!1})})).catch((function(e){return console.log(e.message),n.setState({loading:!1}),!1}))}))}else if(5===parseInt(n.state.status)){var i=[],c=[],m=[];t.map((function(e){var s,r,o=O.a.Object.extend("Absence"),u=new O.a.Query(o);new Date;(s=new N.a(n.state.startDate)).startOf("week"),(r=new N.a(s)).add(1,"week"),u.equalTo("user",{__type:"Pointer",className:"_User",objectId:e}),u.ascending("createdAt"),u.greaterThanOrEqualTo("createdAt",s.toDate()),u.lessThan("createdAt",r.toDate()),u.include("user"),u.find().then((function(e){console.log("user",e);var s=[],r=[],o=[],u=[],d=[],g=[],p=[],h=[];e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,t){s.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),r.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",s)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){o.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),u.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",o)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){d.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),g.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),e.map((function(e,t){h.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),p.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),console.log("total menit",h),console.log("total jam",p),console.log(o),console.log(u),console.log(d),console.log(g);var f=r.reduce((function(e,t){return e+t}),0);console.log("total overtime",f);var v=p.reduce((function(e,t){return e+t})),E=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}));if(console.log(v+Math.floor(E/60)),console.log(E%60),1===s.length){var b=s.reduce((function(e,t){return e+t}),0),y=Object(Oe.a)(n.state.sisaJam);y.splice(l,0,Math.floor(b/60));var S=Object(Oe.a)(n.state.minutesEarly);S.splice(l,0,b%60),n.setState({sisaJam:y,minutesEarly:S})}else if(s.length>1){var k=s.reduce((function(e,t){return e+t}),0),j=Object(Oe.a)(n.state.sisaJam);j.splice(l,0,Math.floor(k/60));var M=Object(Oe.a)(n.state.minutesEarly);M.splice(l,0,k%60),n.setState({sisaJam:j,minutesEarly:M})}else n.setState({minutesEarly:0,sisaJam:0});if(1===r.length){var w=r.reduce((function(e,t){return e+t}),0),T=Object(Oe.a)(n.state.jamEarly);T.splice(l,0,w+n.state.sisaJam[l]),n.setState({jamEarly:T})}else if(r.length>1){var H=r.reduce((function(e,t){return e+t}),0),O=Object(Oe.a)(n.state.jamEarly);O.splice(l,0,H+n.state.sisaJam[l]),n.setState({jamEarly:O})}else n.setState({jamEarly:0});if(console.log("late times ",u),1===o.length){var I=o.reduce((function(e,t){return e+t}),0),D=Object(Oe.a)(n.state.sisaJamLate);D.splice(l,0,Math.floor(I/60));var C=Object(Oe.a)(n.state.minutesLate);C.splice(l,0,I%60),n.setState({sisaJamLate:D,minutesLate:C})}else if(o.length>1){var A=o.reduce((function(e,t){return e+t}),0),L=Object(Oe.a)(n.state.sisaJamLate);L.splice(l,0,Math.floor(A/60));var x=Object(Oe.a)(n.state.minutesLate);x.splice(l,0,A%60),n.setState({sisaJamLate:L,minutesLate:x})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===u.length){var K=u.reduce((function(e,t){return e+t}),0),P=Object(Oe.a)(n.state.hoursLate);P.splice(l,0,K+n.state.sisaJamLate[l]),n.setState({hoursLate:P})}else if(u.length>1){var J=u.reduce((function(e,t){return e+t}),0),F=Object(Oe.a)(n.state.hoursLate);F.splice(l,0,J+n.state.sisaJamLate[l]),n.setState({hoursLate:F})}else n.setState({hoursLate:0});if(console.log(d),1===d.length){var z=d.reduce((function(e,t){return e+t}),0),U=Object(Oe.a)(n.state.sisaJamOvertime);U.splice(l,0,Math.floor(z/60));var B=Object(Oe.a)(n.state.minutesOvertime);B.splice(l,0,z%60),n.setState({sisaJamOvertime:U,minutesOvertime:B},(function(){return console.log(n.state.minutesOvertime)}))}else if(d.length>1){var R=d.reduce((function(e,t){return e+t}),0),Q=Object(Oe.a)(n.state.sisaJamOvertime);Q.splice(l,0,Math.floor(R/60));var Y=Object(Oe.a)(n.state.minutesOvertime);Y.splice(l,0,R%60),n.setState({sisaJamOvertime:Q,minutesOvertime:Y},(function(){return console.log(n.state.minutesOvertime)}))}else 0===d.length&&n.setState({minutesOvertime:n.state.minutesOvertime.concat("0"),sisaJam:n.state.sisaJam.concat(0)});if(1===g.length){var G=g.reduce((function(e,t){return e+t}),0),_=Object(Oe.a)(n.state.jamOvertime);_.splice(l,0,G+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:_})}else if(g.length>1){var W=g.reduce((function(e,t){return e+t}),0),V=Object(Oe.a)(n.state.jamOvertime);V.splice(l,0,W+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:V})}else 0===g.length&&n.setState({jamOvertime:n.state.jamOvertime.concat("0")});if(1===h.length){p.reduce((function(e,t){return e+t}),0);var Z=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(Z/60)),i.push(Math.floor(Z/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,Z%60),m.splice(l,0,Z%60),n.setState({sisaJamTotalMinutes:i,minutesTotal:m},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)})),console.log("total minutes",h),console.log("total data",l),console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("sisa jam 2",i),console.log("total minutes2",n.state.minutesTotal[l])}if(h.length>1){var X=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(X/60)),i.push(Math.floor(X/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,X%60),m.splice(l,0,X%60),n.setState({sisaJamTotalMinutes:i,minutesTotal:m},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)}))}else n.setState({minutesTotal:n.state.minutesTotal.concat("0"),sisaJamTotalMinutes:n.state.sisaJamTotalMinutes.concat("0")});if(1===p.length){console.log(p),console.log("sisa jam",n.state.sisaJamTotalMinutes[l]),console.log("sisa jam 2",i[l]);var $=p.reduce((function(e,t){return e+t}));Object(Oe.a)(n.state.jamTotal).splice(l,0,$+i[l]),c.splice(l,0,$+i[l]),n.setState({jamTotal:c})}if(p.length>1){console.log(p),console.log("sisa jam 2",i[l]);var ee=p.reduce((function(e,t){return e+t}),0);Object(Oe.a)(n.state.jamTotal).splice(l,0,ee+i[l]),c.splice(l,0,ee+i[l]),n.setState({jamTotal:c})}else 0===p.length&&n.setState({jamTotal:0});var te=Object(Oe.a)(n.state.absence);te.splice(l,0,e);var ae=Object(Oe.a)(n.state.tableData);ae.splice(l,0,{fileName:Ee.a.isEmpty(e[0])?n.state.fileData[l].fileName:e[0].get("fullname"),tableId:"ekspor".concat(l)}),n.setState({absence:te,tableData:ae,employeeName:Ee.a.isEmpty(e)?n.state.employeeName.concat(a):n.state.employeeName.concat(e[0].get("fullname")),employeeID:Ee.a.isEmpty(e)?n.state.employeeID.concat(a):n.state.employeeID.concat(e[0].get("user").attributes.nik),employeeTitle:Ee.a.isEmpty(e)?n.state.employeeTitle.concat(a):n.state.employeeTitle.concat(e[0].get("user").attributes.level),employeeDepartment:Ee.a.isEmpty(e)?n.state.employeeDepartment.concat(a):n.state.employeeDepartment.concat(e[0].get("user").attributes.posisi),jamTotal:c,minutesTotal:m}),console.log(!0),(l+=1)===t.length&&n.setState({loading:!1})})).catch((function(e){return console.log(e.message),n.setState({loading:!1}),!1}))}))}else if(6===parseInt(n.state.status)){var u=[],d=[],g=[];t.map((function(e){var s,r,o=O.a.Object.extend("Absence"),i=new O.a.Query(o);new Date;(s=new N.a(n.state.startDate)).startOf("month"),(r=new N.a(s)).add(1,"month"),i.equalTo("user",{__type:"Pointer",className:"_User",objectId:e}),i.ascending("createdAt"),i.greaterThanOrEqualTo("createdAt",s.toDate()),i.lessThan("createdAt",r.toDate()),i.include("user"),i.find().then((function(e){console.log("user",e);var s=[],r=[],o=[],i=[],c=[],m=[],p=[],h=[];e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,t){s.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),r.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",s)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){o.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),i.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",o)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){c.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),m.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),e.map((function(e,t){h.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),p.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),console.log("total menit",h),console.log("total jam",p),console.log(o),console.log(i),console.log(c),console.log(m);var f=r.reduce((function(e,t){return e+t}),0);console.log("total overtime",f);var v=p.reduce((function(e,t){return e+t})),E=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}));if(console.log(v+Math.floor(E/60)),console.log(E%60),1===s.length){var b=s.reduce((function(e,t){return e+t}),0),y=Object(Oe.a)(n.state.sisaJam);y.splice(l,0,Math.floor(b/60));var S=Object(Oe.a)(n.state.minutesEarly);S.splice(l,0,b%60),n.setState({sisaJam:y,minutesEarly:S})}else if(s.length>1){var k=s.reduce((function(e,t){return e+t}),0),j=Object(Oe.a)(n.state.sisaJam);j.splice(l,0,Math.floor(k/60));var M=Object(Oe.a)(n.state.minutesEarly);M.splice(l,0,k%60),n.setState({sisaJam:j,minutesEarly:M})}else n.setState({minutesEarly:0,sisaJam:0});if(1===r.length){var w=r.reduce((function(e,t){return e+t}),0),T=Object(Oe.a)(n.state.jamEarly);T.splice(l,0,w+n.state.sisaJam[l]),n.setState({jamEarly:T})}else if(r.length>1){var H=r.reduce((function(e,t){return e+t}),0),O=Object(Oe.a)(n.state.jamEarly);O.splice(l,0,H+n.state.sisaJam[l]),n.setState({jamEarly:O})}else n.setState({jamEarly:0});if(console.log("late times ",i),1===o.length){var I=o.reduce((function(e,t){return e+t}),0),D=Object(Oe.a)(n.state.sisaJamLate);D.splice(l,0,Math.floor(I/60));var C=Object(Oe.a)(n.state.minutesLate);C.splice(l,0,I%60),n.setState({sisaJamLate:D,minutesLate:C})}else if(o.length>1){var A=o.reduce((function(e,t){return e+t}),0),L=Object(Oe.a)(n.state.sisaJamLate);L.splice(l,0,Math.floor(A/60));var x=Object(Oe.a)(n.state.minutesLate);x.splice(l,0,A%60),n.setState({sisaJamLate:L,minutesLate:x})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===i.length){var K=i.reduce((function(e,t){return e+t}),0),P=Object(Oe.a)(n.state.hoursLate);P.splice(l,0,K+n.state.sisaJamLate[l]),n.setState({hoursLate:P})}else if(i.length>1){var J=i.reduce((function(e,t){return e+t}),0),F=Object(Oe.a)(n.state.hoursLate);F.splice(l,0,J+n.state.sisaJamLate[l]),n.setState({hoursLate:F})}else n.setState({hoursLate:0});if(console.log(c),1===c.length){var z=c.reduce((function(e,t){return e+t}),0),U=Object(Oe.a)(n.state.sisaJamOvertime);U.splice(l,0,Math.floor(z/60));var B=Object(Oe.a)(n.state.minutesOvertime);B.splice(l,0,z%60),n.setState({sisaJamOvertime:U,minutesOvertime:B},(function(){return console.log(n.state.minutesOvertime)}))}else if(c.length>1){var R=c.reduce((function(e,t){return e+t}),0),Q=Object(Oe.a)(n.state.sisaJamOvertime);Q.splice(l,0,Math.floor(R/60));var Y=Object(Oe.a)(n.state.minutesOvertime);Y.splice(l,0,R%60),n.setState({sisaJamOvertime:Q,minutesOvertime:Y},(function(){return console.log(n.state.minutesOvertime)}))}else 0===c.length&&n.setState({minutesOvertime:n.state.minutesOvertime.concat("0"),sisaJam:n.state.sisaJam.concat(0)});if(1===m.length){var G=m.reduce((function(e,t){return e+t}),0),_=Object(Oe.a)(n.state.jamOvertime);_.splice(l,0,G+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:_})}else if(m.length>1){var W=m.reduce((function(e,t){return e+t}),0),V=Object(Oe.a)(n.state.jamOvertime);V.splice(l,0,W+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:V})}else 0===m.length&&n.setState({jamOvertime:n.state.jamOvertime.concat("0")});if(1===h.length){p.reduce((function(e,t){return e+t}),0);var Z=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(Z/60)),u.push(Math.floor(Z/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,Z%60),g.splice(l,0,Z%60),n.setState({sisaJamTotalMinutes:u,minutesTotal:g},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)})),console.log("total minutes",h),console.log("total data",l),console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("sisa jam 2",u),console.log("total minutes2",n.state.minutesTotal[l])}if(h.length>1){var X=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(X/60)),u.push(Math.floor(X/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,X%60),g.splice(l,0,X%60),n.setState({sisaJamTotalMinutes:u,minutesTotal:g},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)}))}else n.setState({minutesTotal:n.state.minutesTotal.concat("0"),sisaJamTotalMinutes:n.state.sisaJamTotalMinutes.concat("0")});if(1===p.length){console.log(p),console.log("sisa jam",n.state.sisaJamTotalMinutes[l]),console.log("sisa jam 2",u[l]);var $=p.reduce((function(e,t){return e+t}));Object(Oe.a)(n.state.jamTotal).splice(l,0,$+u[l]),d.splice(l,0,$+u[l]),n.setState({jamTotal:d})}if(p.length>1){console.log(p),console.log("sisa jam 2",u[l]);var ee=p.reduce((function(e,t){return e+t}),0);Object(Oe.a)(n.state.jamTotal).splice(l,0,ee+u[l]),d.splice(l,0,ee+u[l]),n.setState({jamTotal:d})}else 0===p.length&&n.setState({jamTotal:0});var te=Object(Oe.a)(n.state.absence);te.splice(l,0,e);var ae=Object(Oe.a)(n.state.tableData);ae.splice(l,0,{fileName:Ee.a.isEmpty(e[0])?n.state.fileData[l].fileName:e[0].get("fullname"),tableId:"ekspor".concat(l)}),n.setState({absence:te,tableData:ae,employeeName:Ee.a.isEmpty(e)?n.state.employeeName.concat(a):n.state.employeeName.concat(e[0].get("fullname")),employeeID:Ee.a.isEmpty(e)?n.state.employeeID.concat(a):n.state.employeeID.concat(e[0].get("user").attributes.nik),employeeTitle:Ee.a.isEmpty(e)?n.state.employeeTitle.concat(a):n.state.employeeTitle.concat(e[0].get("user").attributes.level),employeeDepartment:Ee.a.isEmpty(e)?n.state.employeeDepartment.concat(a):n.state.employeeDepartment.concat(e[0].get("user").attributes.posisi),jamTotal:d,minutesTotal:g}),console.log(!0),(l+=1)===t.length&&n.setState({loading:!1})})).catch((function(e){return console.log(e.message),n.setState({loading:!1}),!1}))}))}else if(7===parseInt(n.state.status)){var p=[],h=[],f=[];t.map((function(e){var s,r,o=O.a.Object.extend("Absence"),i=new O.a.Query(o);new Date;s=new N.a(n.state.startDate),r=new N.a(n.state.endDate),i.equalTo("user",{__type:"Pointer",className:"_User",objectId:e}),i.ascending("createdAt"),i.greaterThanOrEqualTo("createdAt",s.toDate()),i.lessThan("createdAt",r.toDate()),i.include("user"),i.find().then((function(e){console.log("user",e);var s=[],r=[],o=[],i=[],c=[],m=[],u=[],d=[];e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,t){s.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),r.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",s)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){o.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),i.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",o)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){c.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),m.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),e.map((function(e,t){d.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),u.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),console.log("total menit",d),console.log("total jam",u),console.log(o),console.log(i),console.log(c),console.log(m);var g=r.reduce((function(e,t){return e+t}),0);console.log("total overtime",g);var v=u.reduce((function(e,t){return e+t})),E=d.reduce((function(e,t){return parseInt(e)+parseInt(t)}));if(console.log(v+Math.floor(E/60)),console.log(E%60),1===s.length){var b=s.reduce((function(e,t){return e+t}),0),y=Object(Oe.a)(n.state.sisaJam);y.splice(l,0,Math.floor(b/60));var S=Object(Oe.a)(n.state.minutesEarly);S.splice(l,0,b%60),n.setState({sisaJam:y,minutesEarly:S})}else if(s.length>1){var k=s.reduce((function(e,t){return e+t}),0),j=Object(Oe.a)(n.state.sisaJam);j.splice(l,0,Math.floor(k/60));var M=Object(Oe.a)(n.state.minutesEarly);M.splice(l,0,k%60),n.setState({sisaJam:j,minutesEarly:M})}else n.setState({minutesEarly:0,sisaJam:0});if(1===r.length){var w=r.reduce((function(e,t){return e+t}),0),T=Object(Oe.a)(n.state.jamEarly);T.splice(l,0,w+n.state.sisaJam[l]),n.setState({jamEarly:T})}else if(r.length>1){var H=r.reduce((function(e,t){return e+t}),0),O=Object(Oe.a)(n.state.jamEarly);O.splice(l,0,H+n.state.sisaJam[l]),n.setState({jamEarly:O})}else n.setState({jamEarly:0});if(console.log("late times ",i),1===o.length){var I=o.reduce((function(e,t){return e+t}),0),D=Object(Oe.a)(n.state.sisaJamLate);D.splice(l,0,Math.floor(I/60));var C=Object(Oe.a)(n.state.minutesLate);C.splice(l,0,I%60),n.setState({sisaJamLate:D,minutesLate:C})}else if(o.length>1){var A=o.reduce((function(e,t){return e+t}),0),L=Object(Oe.a)(n.state.sisaJamLate);L.splice(l,0,Math.floor(A/60));var x=Object(Oe.a)(n.state.minutesLate);x.splice(l,0,A%60),n.setState({sisaJamLate:L,minutesLate:x})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===i.length){var K=i.reduce((function(e,t){return e+t}),0),P=Object(Oe.a)(n.state.hoursLate);P.splice(l,0,K+n.state.sisaJamLate[l]),n.setState({hoursLate:P})}else if(i.length>1){var J=i.reduce((function(e,t){return e+t}),0),F=Object(Oe.a)(n.state.hoursLate);F.splice(l,0,J+n.state.sisaJamLate[l]),n.setState({hoursLate:F})}else n.setState({hoursLate:0});if(console.log(c),1===c.length){var z=c.reduce((function(e,t){return e+t}),0),U=Object(Oe.a)(n.state.sisaJamOvertime);U.splice(l,0,Math.floor(z/60));var B=Object(Oe.a)(n.state.minutesOvertime);B.splice(l,0,z%60),n.setState({sisaJamOvertime:U,minutesOvertime:B},(function(){return console.log(n.state.minutesOvertime)}))}else if(c.length>1){var R=c.reduce((function(e,t){return e+t}),0),Q=Object(Oe.a)(n.state.sisaJamOvertime);Q.splice(l,0,Math.floor(R/60));var Y=Object(Oe.a)(n.state.minutesOvertime);Y.splice(l,0,R%60),n.setState({sisaJamOvertime:Q,minutesOvertime:Y},(function(){return console.log(n.state.minutesOvertime)}))}else 0===c.length&&n.setState({minutesOvertime:n.state.minutesOvertime.concat("0"),sisaJam:n.state.sisaJam.concat(0)});if(1===m.length){var G=m.reduce((function(e,t){return e+t}),0),_=Object(Oe.a)(n.state.jamOvertime);_.splice(l,0,G+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:_})}else if(m.length>1){var W=m.reduce((function(e,t){return e+t}),0),V=Object(Oe.a)(n.state.jamOvertime);V.splice(l,0,W+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:V})}else 0===m.length&&n.setState({jamOvertime:n.state.jamOvertime.concat("0")});if(1===d.length){u.reduce((function(e,t){return e+t}),0);var Z=d.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(Z/60)),p.push(Math.floor(Z/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,Z%60),f.splice(l,0,Z%60),n.setState({sisaJamTotalMinutes:p,minutesTotal:f},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)})),console.log("total minutes",d),console.log("total data",l),console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("sisa jam 2",p),console.log("total minutes2",n.state.minutesTotal[l])}if(d.length>1){var X=d.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(X/60)),p.push(Math.floor(X/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,X%60),f.splice(l,0,X%60),n.setState({sisaJamTotalMinutes:p,minutesTotal:f},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)}))}else n.setState({minutesTotal:n.state.minutesTotal.concat("0"),sisaJamTotalMinutes:n.state.sisaJamTotalMinutes.concat("0")});if(1===u.length){console.log(u),console.log("sisa jam",n.state.sisaJamTotalMinutes[l]),console.log("sisa jam 2",p[l]);var $=u.reduce((function(e,t){return e+t}));Object(Oe.a)(n.state.jamTotal).splice(l,0,$+p[l]),h.splice(l,0,$+p[l]),n.setState({jamTotal:h})}if(u.length>1){console.log(u),console.log("sisa jam 2",p[l]);var ee=u.reduce((function(e,t){return e+t}),0);Object(Oe.a)(n.state.jamTotal).splice(l,0,ee+p[l]),h.splice(l,0,ee+p[l]),n.setState({jamTotal:h})}else 0===u.length&&n.setState({jamTotal:0});var te=Object(Oe.a)(n.state.absence);te.splice(l,0,e);var ae=Object(Oe.a)(n.state.tableData);ae.splice(l,0,{fileName:Ee.a.isEmpty(e[0])?n.state.fileData[l].fileName:e[0].get("fullname"),tableId:"ekspor".concat(l)}),n.setState({absence:te,tableData:ae,employeeName:Ee.a.isEmpty(e)?n.state.employeeName.concat(a):n.state.employeeName.concat(e[0].get("fullname")),employeeID:Ee.a.isEmpty(e)?n.state.employeeID.concat(a):n.state.employeeID.concat(e[0].get("user").attributes.nik),employeeTitle:Ee.a.isEmpty(e)?n.state.employeeTitle.concat(a):n.state.employeeTitle.concat(e[0].get("user").attributes.level),employeeDepartment:Ee.a.isEmpty(e)?n.state.employeeDepartment.concat(a):n.state.employeeDepartment.concat(e[0].get("user").attributes.posisi),jamTotal:h,minutesTotal:f}),console.log(!0),(l+=1)===t.length&&n.setState({loading:!1})})).catch((function(e){return console.log(e.message),n.setState({loading:!1}),!1}))}))}},n.subtractHourLate=function(e,t,a){var n;return"Late"===a&&t>e&&(n=t-e),"Overtime"===a&&t>e&&(n=t-e),"EarlyLeave"===a&&t<e&&(n=e-t),n},n.rejectChecked=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state.checkId,a=0;t.map((function(e){var l=O.a.Object.extend("Izin");new O.a.Query(l).get(e).then((function(e){e.set("status",1),e.set("alasanReject",n.state.reason),e.save().then((function(){if((a+=1)===t.length)return alert("Berhasil reject"),window.location.reload(!1)}))}))}))},n.state={daftarStaff:[],absence:[],tableData:[],fileData:[],daftarLevel:[],daftarPosisi:[],searchBy:"all",searchValue:"",excelMode:!1,loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],approveAllMode:!1,rejectAllMode:!1,deleteCounter:0,searchBy:"all",searchValue:"",resPerPage:20,page:1,totalData:0,employeeName:[],employeeID:[],employeeDepartment:[],employeeTitle:[],sisaJam:[],sisaJamLate:[],sisaJamOvertime:[],sisaJamTotalMinutes:[],minutesEarly:[],minutesTotal:[],jamEarly:[],minutesLate:[],hoursLate:[],minutesOvertime:[],jamOvertime:[],jamTotal:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData(),this.getPosisi()}},{key:"render",value:function(){var e=this,t=this.state,a=t.daftarStaff,n=t.daftarLevel,s=(t.daftarPosisi,t.loading),r=t.approvalMode,o=t.rejectMode,i=t.loadingModal,c=t.fullnames,m=t.counter,u=t.approveAllMode,d=t.rejectAllMode,p=l.a.createElement(f.a,{controlId:"formlvl"},l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){return e.setState({searchValue:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih ",this.state.searchBy),"leader"===this.state.searchBy?n.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))})):this.state.daftarPosisi.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))})))),S=l.a.createElement(f.a,null,l.a.createElement(y.a,{type:"text",className:"form-control-alternative",disabled:"all"===this.state.searchBy,placeholder:"all"===this.state.searchBy?"":"Masukkan ".concat(this.state.searchBy),onChange:function(t){return e.setState({searchValue:t.target.value})}}));return console.log(this.state.jamTotal),l.a.createElement(l.a.Fragment,null,l.a.createElement(me,{izin:m}),l.a.createElement(g.a,{className:"mt--7",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-2"},"Export data karyawan"),l.a.createElement(h.a,{onSubmit:this.handleFilter,className:!0},l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:2},"Search by"),l.a.createElement(z.a,{lg:2},l.a.createElement(f.a,{controlId:"formHorizontalEmails"},l.a.createElement(y.a,{className:"form-control-alternative",type:"select",onChange:function(t){return e.setState({searchBy:t.target.value,searchValue:""})}},["all","nik","name","leader","divisi"].map((function(e){return l.a.createElement("option",{value:e},e)}))))),l.a.createElement(z.a,{lg:4},"level"==this.state.searchBy||"divisi"==this.state.searchBy?p:S),l.a.createElement(z.a,{sm:2},l.a.createElement(ae.a,{color:"primary",type:"submit",disable:this.state.loadingFilter?"true":"false"},l.a.createElement("i",{className:"fa fa-search"})," ",this.state.loadingFilter?"Fetching...":"Search")))),0===a.length||0===this.state.checkId.length?"":l.a.createElement(z.a,{sm:{span:0},className:"float-none"},l.a.createElement(ae.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:s?"true":"false",onClick:function(){return e.setState({excelMode:!0})}},l.a.createElement("i",{className:"ni ni-single-copy-04"})," Export to excel"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0,id:"ekspor"},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck})),l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Level"),l.a.createElement("th",{scope:"col"},"Divisi"))),l.a.createElement("tbody",null,s?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",value:t.id,checked:t.select,onChange:e.handleChildCheck})),l.a.createElement("td",null,t.get("nik")),l.a.createElement("td",null,t.get("fullname")),l.a.createElement("td",null,t.get("level")),l.a.createElement("td",null,t.get("posisi")))}))))),l.a.createElement(ee.a,null,this.state.absence.map((function(t,a){return l.a.createElement(ne.a,{responsive:!0,className:"mt-4",id:"ekspor".concat(a),hidden:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Fingerprint ID"),l.a.createElement("th",{scope:"col",style:{border:"none"}},e.state.employeeID[a]))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Name"),l.a.createElement("th",{scope:"col",style:{border:"none"}},e.state.employeeName[a]))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Title"),l.a.createElement("th",{scope:"col",style:{border:"none"}},e.state.employeeTitle[a]))),l.a.createElement("thead",{className:"border-0 mb-2"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Department Title"),l.a.createElement("th",{scope:"col",className:"mb-2",style:{border:"none"}},e.state.employeeDepartment[a]))),l.a.createElement("thead",{className:"thead-light",style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",rowSpan:"2"},"Day"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Date"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Working Hour"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Duty On"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Duty Off"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Late In"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Early Departure"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Over Time"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Total Hour"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Notes")),l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"))),l.a.createElement("tbody",null,t.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:14,style:{textAlign:"center"}},"Data absen tidak ditemukan")):t.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,q(e.get("createdAt"),"ddd")),l.a.createElement("td",null,q(e.get("createdAt"),"DD/MM/YYYY")),l.a.createElement("td",null,"".concat(e.get("user").attributes.jamMasuk<10?"0":"").concat(e.get("user").attributes.jamMasuk,":00")+" - "+"".concat(e.get("user").attributes.jamKeluar,":00")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"k"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"m"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"m"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"k"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"k"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"m"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"m"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"m"):""),l.a.createElement("td",{className:"lateInHours"},void 0===e.get("lateTimes")?"":N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),l.a.createElement("td",null,void 0===e.get("lateTimes")?"":N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("earlyTimes")?"":N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",{className:"earlyminutes"},void 0===e.get("earlyTimes")?"":N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0!==e.get("overtimeOut")?N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours():""),l.a.createElement("td",null,void 0!==e.get("overtimeOut")?N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes():""),l.a.createElement("td",null,N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"HH:mm"):"","HH:mm")).hours()),l.a.createElement("td",null,N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0!==e.get("overtimeOut")?"Working Overtime":void 0!==e.get("lateTimes")?"Late":void 0!==e.get("earlyTimes")?"EarlyLeave":"Working Hour"))})),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"7"},"Total"),l.a.createElement("td",null,e.state.hoursLate[a]),l.a.createElement("td",null,e.state.minutesLate[a]),l.a.createElement("td",null,e.state.jamEarly[a]),l.a.createElement("td",null,e.state.minutesEarly[a]),l.a.createElement("td",null,e.state.jamOvertime[a]),l.a.createElement("td",null,e.state.minutesOvertime[a]),l.a.createElement("td",null,e.state.jamTotal[a]),l.a.createElement("td",null,e.state.minutesTotal[a]),l.a.createElement("td",null))))})))))),l.a.createElement(Ce,{size:"lg",show:this.state.excelMode,loading:i,footer:!0,disabled:this.state.tableData.length<1,handleHide:function(){e.toggle("excelMode"),e.setState({tableData:[]})},title:"Export ".concat(this.state.checkId.length," data to excel"),body:l.a.createElement("div",null,l.a.createElement(h.a,{role:"form",onSubmit:this.getDataAbsen,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",required:!0,onChange:function(t){e.setState({status:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6,7].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"".concat(7===parseInt(this.state.status)?"Set start date":"Set tanggal"),required:!0,readOnly:!0},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:this.state.startDate,onChange:function(t){e.setState({startDate:t.toDate()})}})))),7===parseInt(this.state.status)?l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Set end date",required:!0,readOnly:!0},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:this.state.endDate,onChange:function(t){e.setState({endDate:t.toDate()})}})))):"",l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement(ae.a,{className:"my-4",color:"primary",type:"submit",disabled:s},s?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),l.a.createElement(F.a,null,this.state.tableData.length>0?l.a.createElement(ct.a,{id:"test-table-xls-button",className:"btn btn-primary ml-2",table:"ekspor1",multipleTables:this.state.tableData,filename:"tablexls",sheet:"tablexls",buttonText:"Data siap di export"}):"")),handleSubmit:function(t){return e.handleApproval(t,!0)}}),l.a.createElement(Ce,{show:r,loading:i,footer:!0,handleHide:function(){return e.toggle("approvalMode")},title:"Approval Confirmation",body:"Approve izin ".concat(c," ?"),handleSubmit:function(t){return e.handleApproval(t,!0)}}),l.a.createElement(Ce,{show:o,loading:i,footer:!1,handleHide:function(){return e.toggle("rejectMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject izin ".concat(c," ?")),l.a.createElement(h.a,{onSubmit:function(t){return e.handleApproval(t,!1)}},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},i?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleApproval(t,!1)}}),l.a.createElement(Ce,{show:u,loading:i,footer:!0,handleHide:function(){return e.toggle("approveAllMode")},title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve izin ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(Ce,{show:d,loading:i,footer:!1,handleHide:function(){return e.toggle("rejectAllMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject izin ".concat(this.state.checkId.length," data ?")),l.a.createElement(h.a,{onSubmit:function(t){return e.rejectChecked(t)}},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectAllMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},i?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}]),a}(l.a.Component)),ht=[{path:"/index",name:"Dashboard",icon:"ni ni-tv-2 text-primary",component:st,layout:"/admin"},{path:"/view-absen/:id",name:"User Location",icon:"ni ni-tv-2 text-danger",component:tt,layout:"/admin",invisible:!0},{path:"/leader",name:"Leader",icon:"ni ni-badge text-yellow",component:at,layout:"/admin"},{path:"/form-registration",name:"Form Registration",icon:"ni ni-align-center text-info",component:function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getPoint=function(){var e=new O.a.Object.extend("ValidGeopoint"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarPoint:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getTipe=function(){n.setState({loading:!0});var e=new O.a.Object.extend("EmployeeType"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarTipe:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getPosisi=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Position"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarPosisi:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getLevel=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Level"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarLevel:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getStaff=function(){n.setState({loading:!0});var e=new O.a.User;new O.a.Query(e).find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getData=function(){n.setState({loading:!0});var e=new O.a.User;new O.a.Query(e).find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.handleFilter=function(e){e.preventDefault(),n.setState({loadingFilter:!0});var t=n.state,a=t.searchBy,l=t.searchValue,s=n.state,r=s.resPerPage,o=s.page,i=new O.a.User,c=new O.a.Query(i);switch(c.skip(r*o-r),c.limit(r),c.withCount(),a){case"all":c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"name":c.matches("fullname",l,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"nik":c.equalTo("nik",l),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"divisi":c.matches("posisi",l,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}));break;case"level":c.matches("level",l,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"leader":var m=new O.a.User,u=new O.a.Query(m);u.matches("fullname",l,"i"),c.matchesQuery("leaderIdNew",u),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}))}},n.getShifting=function(){var e=O.a.Object.extend("Shifting"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarShifting:e})})).catch((function(e){alert("cek koneksi anda")}))},n.getLeader=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","leader"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarLeader:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getSupervisor=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","supervisor"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarSupervisor:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getManager=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","manager"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarManager:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getHead=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","head"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarHead:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getGM=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","gm"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarGM:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.hans=function(){},n.handleFace=function(e){n.setState({loadingReco:!0,statusReco:0,fotoWajah:e.target.files[0]});var t=new FormData;t.append("knax",e.target.files[0]),Le.a.post("http://52.77.8.120:4000/api/face-check",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;return 1===t.status?n.setState({statusReco:1,message:"\u2714\ufe0f ".concat(t.message),loadingReco:!1}):n.setState({statusReco:0,message:"\u2716\ufe0f ".concat(t.message),loadingReco:!1})})).catch((function(e){return alert("Terjadi error...")}))},n.handleCheckImei=function(e,t){e.preventDefault(),n.setState({loadingModal:!0});var a=new O.a.User,l=new O.a.Query(a);l.equalTo("imei",t),l.first().then((function(e){e?n.setState({imeiMessage:"Imei telah terdaftar",loadingModal:!1}):n.handleSubmit()})).catch((function(e){console.log(e),n.setState({loadingModal:!1})}))},n.handleSubmit=function(){n.setState({loading:!0});var e=n.state,t=e.name,a=e.nik,l=e.tipeKaryawan,s=e.posisi,r=e.level,o=e.imei,i=e.jamKerja,c=e.lokasiKerja,m=e.jumlahCuti,u=e.lembur,d=e.fotoWajah,g=e.username,p=e.password,h=e.email,f=new O.a.User,v=function(e,t){f.set(e,{__type:"Pointer",className:"_User",objectId:n.state[t]})};"staff"===r.toLowerCase()&&(""!==n.state.selectLeader&&v("leaderIdNew","selectLeader"),""!==n.state.selectSupervisor&&v("supervisorID","selectSupervisor"),""!==n.state.selectManager&&v("managerID","selectManager"),""!==n.state.selectHead&&v("headID","selectHead"),""!==n.state.selectGM&&v("gmID","selectGM")),"leader"===r.toLowerCase()&&(""!==n.state.selectSupervisor&&v("supervisorID","selectSupervisor"),""!==n.state.selectManager&&v("managerID","selectManager"),""!==n.state.selectHead&&v("headID","selectHead"),""!==n.state.selectGM&&v("gmID","selectGM")),"supervisor"===r.toLowerCase()&&(""!==n.state.selectManager&&v("managerID","selectManager"),""!==n.state.selectHead&&v("headID","selectHead"),""!==n.state.selectGM&&v("gmID","selectGM")),"manager"===r.toLowerCase()&&(""!==n.state.selectHead&&v("headID","selectHead"),""!==n.state.selectGM&&v("gmID","selectGM")),"head"===r.toLowerCase()&&""!==n.state.selectGM&&v("gmID","selectGM"),""!==n.state.idPoint&&f.set("absenPoint",{__type:"Pointer",className:"ValidGeopoint",objectId:n.state.idPoint}),f.set("fullname",t),f.set("email",h),f.set("username",g),f.set("password",Te()(p)),f.set("passwordClone",Te()(p)),f.set("nik",a.toUpperCase()),f.set("tipe",l),f.set("posisi",s),f.set("level",r.toLowerCase()),f.set("imei",o),f.set("jamKerja",i),f.set("lokasiKerja",c),0===n.state.jamMasuk?f.set("jamMasuk",8):f.set("jamMasuk",parseInt(n.state.jamMasuk)),0===n.state.jamKeluar?f.set("jamKeluar",17):f.set("jamKeluar",parseInt(n.state.jamKeluar)),f.set("jumlahCuti",parseInt(m)),f.set("lembur",u),f.set("roles",r.toLowerCase()),f.set("fotoWajah",new O.a.File("profile.jpg",d)),f.save().then((function(e){var t=new O.a.User;new O.a.Query(t).get(e.id).then((function(t){t.set("userId",{__type:"Pointer",className:"_User",objectId:e.id}),t.save(null,{useMasterKey:!0}).then((function(e){n.setState({addMode:!1,loadingModal:!1,message:"Berhasil tambah data",visible:!0,color:"success"})}))}))})).catch((function(e){n.setState({addMode:!1,loadingModal:!1,message:e.message,visible:!0}),console.log(e.message)}))},n.handleUpdate=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state,a=(t.name,t.nik),l=t.tipeKaryawan,s=t.posisi,r=t.level,o=t.imei,i=t.jamKerja,c=t.lokasiKerja,m=t.jumlahCuti,u=t.lembur,d=t.fotoWajah,g=t.username,p=t.password,h=t.email,f=new O.a.User;new O.a.Query(f).get(n.state.userId).then((function(e){var t=function(e,t){f.set(e,{__type:"Pointer",className:"_User",objectId:n.state[t]})};"staff"===r.toLowerCase()&&(""!==n.state.selectLeader&&t("leaderIdNew","selectLeader"),""!==n.state.selectSupervisor&&t("supervisorID","selectSupervisor"),""!==n.state.selectManager&&t("managerID","selectManager"),""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"leader"===r.toLowerCase()&&(""!==n.state.selectSupervisor&&t("supervisorID","selectSupervisor"),""!==n.state.selectManager&&t("managerID","selectManager"),""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"supervisor"===r.toLowerCase()&&(""!==n.state.selectManager&&t("managerID","selectManager"),""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"manager"===r.toLowerCase()&&(""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"head"===r.toLowerCase()&&""!==n.state.selectGM&&t("gmID","selectGM"),""!==n.state.idPoint&&f.set("absenPoint",{__type:"Pointer",className:"ValidGeopoint",objectId:n.state.idPoint}),e.set("fullname",n.state.fullname),e.set("email",h),e.set("username",g),e.set("jamMasuk",n.state.jamMasuk),e.set("jamKeluar",n.state.jamKeluar),e.set("username",g),""!==p&&(e.set("password",Te()(p)),e.set("passwordClone",Te()(p))),e.set("nik",a.toUpperCase()),e.set("tipe",l),e.set("posisi",s),e.set("level",r.toLowerCase()),e.set("imei",o),e.set("jamKerja",i),e.set("lokasiKerja",c),e.set("jumlahCuti",parseInt(m)),e.set("lembur",u),e.set("roles",r.toLowerCase()),""!==d&&e.set("fotoWajah",new O.a.File("profile.jpg",d)),e.save(null,{useMasterKey:!0}).then((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})})).catch((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0}),console.log(e.message)}))})).catch((function(e){n.setState({editMode:!1,loadingModal:!1,message:e.message,visible:!0}),console.log(e.message)}))},n.getDetail=function(e,t){e.preventDefault();var a=new O.a.User,l=new O.a.Query(a);l.include("leaderIdNew"),l.include("supervisorID"),l.include("managerID"),l.include("headID"),l.include("gmID"),l.include("absenPoint"),l.get(t,{useMasterKey:!0}).then((function(e){var t=e.attributes;console.log(t),n.setState({nik:t.nik,name:t.fullname,username:t.username,imei:t.imei,email:t.email,tipeKaryawan:t.tipe,posisi:t.posisi,jamKerja:t.jamKerja,lokasiKerja:t.lokasiKerja,jumlahCuti:t.jumlahCuti,jamMasuk:void 0===t.jamMasuk?0:t.jamMasuk,jamKeluar:void 0===t.jamKeluar?0:t.jamKeluar,absenPointObject:void 0===t.absenPoint?"":t.absenPoint,shifting:void 0===t.shifting?"":t.shifting,lembur:t.lembur,level:t.roles.toLowerCase(),leader:void 0===t.leaderIdNew?"":t.leaderIdNew,supervisor:void 0===t.supervisorID?"":t.supervisorID,manager:void 0===t.managerID?"":t.managerID,head:void 0===t.headID?"":t.headID,gm:void 0===t.gmID?"":t.gmID,editMode:!0})})).catch((function(e){alert(e.message)}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.handleIdAbsen=function(e){var t=document.getElementById("myoptions"),a=document.getElementById("data").querySelector('[value="'.concat(t.value,'"]'));if(null!==a.getAttribute("data-key")){var l=a.getAttribute("data-key");console.log(l),console.log(e.target.value),n.setState({selectLeader:l})}},n.state={daftarStaff:[],daftarLeader:[],daftarTipe:[],daftarPosisi:[],daftarLevel:[],daftarSupervisor:[],daftarManager:[],daftarHead:[],daftarGM:[],resPerPage:20,first:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",fullname:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,editMode:!1,deleteCounter:0,loadingReco:!1,message:"",level:"",fotoWajah:"",message:"",loadingReco:!1,nama:"",nik:"",tipeKaryawan:"",posisi:"",imei:"",jamKerja:"",lokasiKerja:"",jumlahCuti:0,lembur:"ya",username:"",password:"",selectLeader:"",selectSupervisor:"",selectManager:"",selectHead:"",selectGM:"",statusReco:0,email:"",fotoWajahObject:{},daftarShifting:[],shifting:{},leader:{},absenPointObject:{},message:"",color:"",visible:!1,message:"",color:"danger",absenPoint:[],daftarPoint:[],idPoint:"",imeiMessage:"",searchBy:"all",searchValue:"",jamMasuk:0,jamKeluar:0},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getLeader(),this.getSupervisor(),this.getManager(),this.getHead(),this.getGM(),this.getLevel(),this.getPosisi(),this.getTipe(),this.getPoint()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.daftarStaff,t.loading,t.loadingReco),n=t.message,s=(t.level,t.email,t.fullname,t.imei,t.jamKerja,t.jumlahCuti,t.lokasiKerja,t.shifting,t.lembur,t.tipeKaryawan,t.nik,t.posisi,t.daftarPoint),r=(t.loadingModal,t.fullnames,t.addMode,t.leader,t.photoMode,t.statusReco,t.daftarShifting,t.daftarLevel),i=t.daftarPosisi,c=t.daftarTipe,m=(t.editMode,l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,{className:"form-control-label"},"Pilih leader"),l.a.createElement(y.a,{type:"select",className:"form-control-alternative",required:!0,onChange:function(t){e.setState({selectLeader:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih leader"),this.state.daftarLeader.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))}))))),u=l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,{className:"form-control-label"},"Pilih supervisor"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){e.setState({selectSupervisor:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih supervisor"),this.state.daftarSupervisor.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},void 0===e.get("fullname")?"":e.get("fullname"))})))),d=l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,{className:"form-control-label"},"Pilih manager"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){e.setState({selectManager:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih manager"),this.state.daftarManager.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))),p=l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,{className:"form-control-label"},"Pilih head"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){e.setState({selectHead:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih head"),this.state.daftarHead.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))),v=l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,{className:"form-control-label"},"Pilih GM"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){e.setState({selectGM:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih GM"),this.state.daftarGM.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))),E=l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},m),l.a.createElement(z.a,{lg:"4"},u),l.a.createElement(z.a,{lg:"4"},d)),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},p),l.a.createElement(z.a,{lg:"4"},v))),b=l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},u),l.a.createElement(z.a,{lg:"4"},d),l.a.createElement(z.a,{lg:"4"},p)),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},v))),S=l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},d),l.a.createElement(z.a,{lg:"4"},p),l.a.createElement(z.a,{lg:"4"},v))),k=l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},p),l.a.createElement(z.a,{lg:"4"},v))),j=l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih GM"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectGM:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih GM"),this.state.daftarGM.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))));f.a,y.a,this.state.searchBy,"leader"===this.state.searchBy?r.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))})):this.state.daftarPosisi.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))})),f.a,y.a,this.state.searchBy,"all"===this.state.searchBy||"Masukkan ".concat(this.state.searchBy);return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement(z.a,{className:"order-xl-1",xl:"12"},l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}}),l.a.createElement(ee.a,{className:"bg-secondary shadow"},l.a.createElement(te.a,{className:"bg-white border-0"},l.a.createElement(F.a,{className:"align-items-center"},l.a.createElement(z.a,{xs:"8"},l.a.createElement("h3",{className:"mb-0"},"Daftarin anggota karyawanmu disini!")),l.a.createElement(z.a,{className:"text-right",xs:"4"},l.a.createElement(o.b,{color:"inherit",to:"/admin/staff"},l.a.createElement(ae.a,{color:"primary",size:"sm"},"Lihat seluruh anggota karyawan? Klik disini!"))))),l.a.createElement(re.a,null,l.a.createElement(h.a,{onSubmit:function(t){return e.handleCheckImei(t,e.state.imei)},autoComplete:"off"},l.a.createElement("h6",{className:"heading-small text-muted mb-4"},"User information"),l.a.createElement("div",{className:"pl-lg-4"},l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"6"},l.a.createElement(f.a,{controlId:"formCategory"},l.a.createElement(Ne.a,{className:"form-control-label"},"Foto wajah"),l.a.createElement(y.a,{type:"file",label:"Foto wajah",required:!0,onChange:this.handleFace}),l.a.createElement(Ke.a,{className:a?"text-muted":"",style:{color:"".concat(0==this.state.statusReco?"red":"green")}},a?"processing...":n)))),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"6"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-username"},"Username"),l.a.createElement(y.a,{className:"form-control-alternative",autoComplete:"off",id:"input-username",placeholder:"Username",type:"text",onChange:function(t){return e.setState({username:t.target.value})}}))),l.a.createElement(z.a,{lg:"6"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-email"},"Email address"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-email",placeholder:"email@kamu.com",type:"email",onChange:function(t){return e.setState({email:t.target.value})}})))),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"12"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-first-name"},"Full Name"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-first-name",placeholder:"Nama lengkap",type:"text",onChange:function(t){return e.setState({name:t.target.value})}})))),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"6"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-password"},"Password"),l.a.createElement(y.a,{className:"form-control-alternative",autoComplete:"off",id:"input-password",placeholder:"Password kamu",type:"password",minLength:8,onChange:function(t){return e.setState({password:t.target.value})}}))),l.a.createElement(z.a,{lg:"6"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-imei"},"IMEI"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-imei",placeholder:"IMEI Hp",type:"text",onChange:function(t){return e.setState({imei:t.target.value})}}))))),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Job information"),l.a.createElement("div",{className:"pl-lg-4"},l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-address"},"NIK"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-nik",placeholder:"NIK Karyawan",type:"text",onChange:function(t){return e.setState({nik:t.target.value})}}))),l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-address"},"Level"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){return e.setState({level:t.target.value})}},l.a.createElement("option",{disabled:!0,hidden:!0},"Pilih level"),r.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))}))))),l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-address"},"Tipe karyawan"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){return e.setState({tipeKaryawan:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih tipe karyawan"),c.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("tipe")},e.get("tipe"))})))))),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-posisi"},"Posisi kerja"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-posisi",type:"select",onChange:function(t){return e.setState({posisi:t.target.value.toUpperCase()})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih posisi"),i.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))}))))),l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-jam-kerja"},"Jam kerja"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-jam-kerja",type:"select",onChange:function(t){return e.setState({jamKerja:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih jam kerja"),["Jam tetap","Jam fleksibel","Jam bebas"].map((function(e){return l.a.createElement("option",{value:e},e)}))))),l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-lokasi"},"Lokasi kerja"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-lokasi",type:"select",onChange:function(t){return e.setState({lokasiKerja:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lokasi kerja"),["Tetap","Bebas (mobile)"].map((function(e){return l.a.createElement("option",{value:e},e)})))))),""!==this.state.jamKerja&&"Jam bebas"!==this.state.jamKerja?l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"12"},l.a.createElement(f.a,{controlId:"formJam"},l.a.createElement(Ne.a,{className:"form-control-label"},"Jam masuk dan keluar"),l.a.createElement(F.a,null,l.a.createElement(z.a,{md:4},l.a.createElement(y.a,{className:"form-control-alternative",type:"number",required:!0,placeholder:"Jam Masuk",onChange:function(t){return e.setState({jamMasuk:t.target.value})}})),l.a.createElement(z.a,{md:4},l.a.createElement(y.a,{className:"form-control-alternative",type:"number",placeholder:"Jam Keluar",required:!0,onChange:function(t){return e.setState({jamKeluar:t.target.value})}})))))):"","Tetap"===this.state.lokasiKerja?l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,{controlId:"formPoint"},l.a.createElement(Ne.a,{className:"form-control-label"},"Absen point"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){return e.setState({idPoint:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih absen point"),s.map((function(e){return l.a.createElement("option",{value:e.id},e.get("placeName"))})))))):""),""!==this.state.level&&"gm"!==this.state.level.toLowerCase()&&"admin"!==this.state.level.toLowerCase()?l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",{className:"my-4"}),l.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Choose leader"),l.a.createElement("div",{className:"pl-lg-4"},function(e){switch(e.toLowerCase()){case"staff":return E;case"team leader":return b;case"supervisor":return S;case"manager":return k;case"head":return j;default:return}}(this.state.level.toLowerCase()))):"",l.a.createElement("div",{className:"pl-lg-4"},l.a.createElement(F.a,{className:"mt-2"},l.a.createElement(z.a,{lg:"12"},l.a.createElement(ae.a,{block:!0,color:(this.state.statusReco,"primary"),type:"submit",disabled:0===this.state.statusReco},0===this.state.statusReco?"upload foto dahulu":this.state.loadingModal?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")))))))))))}}]),a}(l.a.Component),layout:"/admin"},{path:"/edit/:id",name:"Edit Karyawan Info",icon:"ni ni-align-center text-danger",component:function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getPoint=function(){var e=new O.a.Object.extend("ValidGeopoint"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarPoint:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getTipe=function(){n.setState({loading:!0});var e=new O.a.Object.extend("EmployeeType"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarTipe:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getPosisi=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Position"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarPosisi:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getLevel=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Level"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarLevel:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getStaff=function(){n.setState({loading:!0});var e=new O.a.User;new O.a.Query(e).find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getData=function(){n.setState({loading:!0});var e=new O.a.User;new O.a.Query(e).find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.handleFilter=function(e){e.preventDefault(),n.setState({loadingFilter:!0});var t=n.state,a=t.searchBy,l=t.searchValue,s=n.state,r=s.resPerPage,o=s.page,i=new O.a.User,c=new O.a.Query(i);switch(c.skip(r*o-r),c.limit(r),c.withCount(),a){case"all":c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"name":c.matches("fullname",l,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"nik":c.equalTo("nik",l),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"divisi":c.matches("posisi",l,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}));break;case"level":c.matches("level",l,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"leader":var m=new O.a.User,u=new O.a.Query(m);u.matches("fullname",l,"i"),c.matchesQuery("leaderIdNew",u),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}))}},n.getShifting=function(){var e=O.a.Object.extend("Shifting"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarShifting:e})})).catch((function(e){alert("cek koneksi anda")}))},n.getLeader=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","leader"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarLeader:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getSupervisor=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","supervisor"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarSupervisor:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getManager=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","manager"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarManager:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getHead=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","head"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarHead:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getGM=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","gm"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarGM:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.hans=function(){},n.handleFace=function(e){n.setState({loadingReco:!0,statusReco:0,fotoWajah:e.target.files[0]});var t=new FormData;t.append("knax",e.target.files[0]),Le.a.post("http://52.77.8.120:4000/api/face-check",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;return 1===t.status?n.setState({statusReco:1,message:"\u2714\ufe0f ".concat(t.message),loadingReco:!1}):n.setState({statusReco:0,message:"\u2716\ufe0f ".concat(t.message),loadingReco:!1})})).catch((function(e){return alert("Terjadi error...")}))},n.handleCheckImei=function(e,t){e.preventDefault(),n.setState({loadingModal:!0});var a=new O.a.User,l=new O.a.Query(a);l.equalTo("imei",t),l.first().then((function(e){e?n.setState({imeiMessage:"Imei telah terdaftar",loadingModal:!1}):n.handleSubmit()})).catch((function(e){console.log(e),n.setState({loadingModal:!1})}))},n.handleSubmit=function(){n.setState({loading:!0});var e=n.state,t=e.name,a=e.nik,l=e.tipeKaryawan,s=e.posisi,r=e.level,o=e.imei,i=e.jamKerja,c=e.lokasiKerja,m=e.jumlahCuti,u=e.lembur,d=e.fotoWajah,g=e.username,p=e.password,h=e.email,f=new O.a.User,v=function(e,t){f.set(e,{__type:"Pointer",className:"_User",objectId:n.state[t]})};"staff"===r.toLowerCase()&&(""!==n.state.selectLeader&&v("leaderIdNew","selectLeader"),""!==n.state.selectSupervisor&&v("supervisorID","selectSupervisor"),""!==n.state.selectManager&&v("managerID","selectManager"),""!==n.state.selectHead&&v("headID","selectHead"),""!==n.state.selectGM&&v("gmID","selectGM")),"leader"===r.toLowerCase()&&(""!==n.state.selectSupervisor&&v("supervisorID","selectSupervisor"),""!==n.state.selectManager&&v("managerID","selectManager"),""!==n.state.selectHead&&v("headID","selectHead"),""!==n.state.selectGM&&v("gmID","selectGM")),"supervisor"===r.toLowerCase()&&(""!==n.state.selectManager&&v("managerID","selectManager"),""!==n.state.selectHead&&v("headID","selectHead"),""!==n.state.selectGM&&v("gmID","selectGM")),"manager"===r.toLowerCase()&&(""!==n.state.selectHead&&v("headID","selectHead"),""!==n.state.selectGM&&v("gmID","selectGM")),"head"===r.toLowerCase()&&""!==n.state.selectGM&&v("gmID","selectGM"),f.set("absenPoint",{__type:"Pointer",className:"ValidGeopoint",objectId:n.state.idPoint}),f.set("fullname",t),f.set("email",h),f.set("username",g),f.set("password",Te()(p)),f.set("passwordClone",Te()(p)),f.set("nik",a.toUpperCase()),f.set("tipe",l),f.set("posisi",s),f.set("level",r.toLowerCase()),f.set("imei",o),f.set("jamKerja",i),f.set("lokasiKerja",c),0===n.state.jamMasuk?f.set("jamMasuk",8):f.set("jamMasuk",parseInt(n.state.jamMasuk)),0===n.state.jamKeluar?f.set("jamKeluar",17):f.set("jamKeluar",parseInt(n.state.jamKeluar)),f.set("jumlahCuti",parseInt(m)),f.set("lembur",u),f.set("roles",r.toLowerCase()),f.set("fotoWajah",new O.a.File("profile.jpg",d)),f.save().then((function(e){n.setState({addMode:!1,loadingModal:!1,message:"Berhasil tambah data",visible:!0,color:"success"})})).catch((function(e){n.setState({addMode:!1,loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0}),console.log(e.message)}))},n.handleUpdate=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state,a=t.name,l=t.nik,s=t.tipeKaryawan,r=t.posisi,o=t.level,i=t.imei,c=t.jamKerja,m=t.lokasiKerja,u=t.jumlahCuti,d=t.lembur,g=t.fotoWajah,p=t.username,h=t.password,f=t.email,v=n.props.match.params.id,E=new O.a.User;new O.a.Query(E).get(v).then((function(e){var t=function(t,a){e.set(t,{__type:"Pointer",className:"_User",objectId:n.state[a]})};"staff"===o.toLowerCase()&&(""!==n.state.selectLeader&&t("leaderIdNew","selectLeader"),""!==n.state.selectSupervisor&&t("supervisorID","selectSupervisor"),""!==n.state.selectManager&&t("managerID","selectManager"),""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"leader"===o.toLowerCase()&&(""!==n.state.selectSupervisor&&t("supervisorID","selectSupervisor"),""!==n.state.selectManager&&t("managerID","selectManager"),""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"supervisor"===o.toLowerCase()&&(""!==n.state.selectManager&&t("managerID","selectManager"),""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"manager"===o.toLowerCase()&&(""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"head"===o.toLowerCase()&&""!==n.state.selectGM&&t("gmID","selectGM"),""!==n.state.idPoint&&E.set("absenPoint",{__type:"Pointer",className:"ValidGeopoint",objectId:n.state.idPoint}),e.set("fullname",a),e.set("email",f),e.set("username",p),e.set("jamMasuk",parseInt(n.state.jamMasuk)),e.set("jamKeluar",parseInt(n.state.jamKeluar)),e.set("username",p),""!==h&&(e.set("password",Te()(h)),e.set("passwordClone",Te()(h))),e.set("nik",l.toUpperCase()),e.set("tipe",s),e.set("posisi",r),e.set("level",o.toLowerCase()),e.set("imei",i),e.set("jamKerja",c),e.set("lokasiKerja",m),e.set("jumlahCuti",parseInt(u)),e.set("lembur",d),e.set("roles",o.toLowerCase()),e.set("userId",{__type:"Pointer",className:"_User",objectId:v}),""!==g&&e.set("fotoWajah",new O.a.File("profile.jpg",g)),e.save(null,{useMasterKey:!0}).then((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})})).catch((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0}),console.log(e.message)}))})).catch((function(e){n.setState({editMode:!1,loadingModal:!1,message:e.message,visible:!0}),console.log(e.message)}))},n.getDetail=function(){var e=new O.a.User,t=new O.a.Query(e),a=n.props.match.params.id;t.include("leaderIdNew"),t.include("supervisorID"),t.include("managerID"),t.include("headID"),t.include("gmID"),t.include("absenPoint"),t.get(a,{useMasterKey:!0}).then((function(e){var t=e.attributes;console.log(t),n.setState({nik:t.nik,name:t.fullname,username:t.username,imei:t.imei,email:t.email,tipeKaryawan:t.tipe,posisi:t.posisi,jamKerja:t.jamKerja,lokasiKerja:t.lokasiKerja,jumlahCuti:t.jumlahCuti,jamMasuk:void 0===t.jamMasuk?0:t.jamMasuk,jamKeluar:void 0===t.jamKeluar?0:t.jamKeluar,absenPointObject:void 0===t.absenPoint?"":t.absenPoint,shifting:void 0===t.shifting?"":t.shifting,lembur:t.lembur,level:t.roles.toLowerCase(),leader:void 0===t.leaderIdNew?"":t.leaderIdNew,supervisor:void 0===t.supervisorID?"":t.supervisorID,manager:void 0===t.managerID?"":t.managerID,head:void 0===t.headID?"":t.headID,gm:void 0===t.gmID?"":t.gmID,editMode:!0})})).catch((function(e){alert(e.message)}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.handleIdAbsen=function(e){var t=document.getElementById("myoptions"),a=document.getElementById("data").querySelector('[value="'.concat(t.value,'"]'));if(null!==a.getAttribute("data-key")){var l=a.getAttribute("data-key");console.log(l),console.log(e.target.value),n.setState({selectLeader:l})}},n.state={daftarStaff:[],daftarLeader:[],daftarTipe:[],daftarPosisi:[],daftarLevel:[],daftarSupervisor:[],daftarManager:[],daftarHead:[],daftarGM:[],resPerPage:20,first:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",fullname:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,editMode:!1,deleteCounter:0,loadingReco:!1,message:"",level:"",fotoWajah:"",message:"",loadingReco:!1,name:"",nik:"",tipeKaryawan:"",posisi:"",imei:"",jamKerja:"",lokasiKerja:"",jumlahCuti:0,lembur:"ya",username:"",password:"",selectLeader:"",selectSupervisor:"",selectManager:"",selectHead:"",selectGM:"",statusReco:0,email:"",fotoWajahObject:{},daftarShifting:[],shifting:{},leader:{},supervisor:{},manager:{},head:{},gm:{},absenPointObject:{},message:"",color:"",visible:!1,message:"",color:"danger",absenPoint:[],daftarPoint:[],idPoint:"",imeiMessage:"",searchBy:"all",searchValue:"",jamMasuk:0,jamKeluar:0},n}return Object(m.a)(a,[{key:"componentWillMount",value:function(){this.getDetail()}},{key:"componentDidMount",value:function(){this.getLeader(),this.getSupervisor(),this.getManager(),this.getHead(),this.getGM(),this.getLevel(),this.getPosisi(),this.getTipe(),this.getPoint()}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=(t.daftarStaff,t.loading,t.loadingReco),s=t.message,r=t.level,i=t.email,c=(t.fullname,t.imei),m=t.jamKerja,u=t.jumlahCuti,d=t.lokasiKerja,p=(t.shifting,t.lembur),v=t.tipeKaryawan,E=t.nik,b=t.posisi,S=t.daftarPoint,k=(t.loadingModal,t.fullnames,t.addMode,t.leader),j=(t.photoMode,t.statusReco,t.daftarShifting,t.daftarLevel),M=t.daftarPosisi,w=t.daftarTipe,T=(t.editMode,t.supervisor),H=t.manager,O=t.head,I=t.gm,N=l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,{className:"form-control-label"},"Pilih leader"),l.a.createElement(y.a,{type:"select",className:"form-control-alternative",required:!0,onChange:function(t){e.setState({selectLeader:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Leader"),this.state.daftarLeader.map((function(e,t){return l.a.createElement("option",{selected:k.id===e.id,key:t,value:e.id},e.get("fullname"))})))),D=l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,{className:"form-control-label"},"Pilih supervisor"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){e.setState({selectSupervisor:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Supervisor"),this.state.daftarSupervisor.map((function(e,t){return l.a.createElement("option",{selected:T.id===e.id,key:t,value:e.id},void 0===e.get("fullname")?"":e.get("fullname"))})))),C=l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,{className:"form-control-label"},"Pilih manager"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){e.setState({selectManager:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Manager"),this.state.daftarManager.map((function(e,t){return l.a.createElement("option",{selected:H.id===e.id,key:t,value:e.id},e.get("fullname"))})))),A=l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,{className:"form-control-label"},"Pilih head"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){e.setState({selectHead:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Head"),this.state.daftarHead.map((function(e,t){return l.a.createElement("option",{selected:O.id===e.id,key:t,value:e.id},e.get("fullname"))})))),L=l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,{className:"form-control-label"},"Pilih GM"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){e.setState({selectGM:t.target.value})}},l.a.createElement("option",{value:""},"Pilih GM"),this.state.daftarGM.map((function(e,t){return l.a.createElement("option",{selected:I.id===e.id,key:t,value:e.id},e.get("fullname"))})))),x=l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},N),l.a.createElement(z.a,{lg:"4"},D),l.a.createElement(z.a,{lg:"4"},C)),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},A),l.a.createElement(z.a,{lg:"4"},L))),q=l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},D),l.a.createElement(z.a,{lg:"4"},C),l.a.createElement(z.a,{lg:"4"},A)),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},L))),K=l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},C),l.a.createElement(z.a,{lg:"4"},A),l.a.createElement(z.a,{lg:"4"},L))),P=l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},A),l.a.createElement(z.a,{lg:"4"},L))),J=l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih GM"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectGM:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih GM"),this.state.daftarGM.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))));f.a,y.a,this.state.searchBy,"leader"===this.state.searchBy?j.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))})):this.state.daftarPosisi.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))})),f.a,y.a,this.state.searchBy,"all"===this.state.searchBy||"Masukkan ".concat(this.state.searchBy);return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement(z.a,{className:"order-xl-1",xl:"12"},l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}}),l.a.createElement(ee.a,{className:"bg-secondary shadow"},l.a.createElement(te.a,{className:"bg-white border-0"},l.a.createElement(F.a,{className:"align-items-center"},l.a.createElement(z.a,{xs:"8"},l.a.createElement("h3",{className:"mb-0"},"Ubah data ".concat(this.state.name))),l.a.createElement(z.a,{className:"text-right",xs:"4"},l.a.createElement(o.b,{color:"inherit",to:"/admin/staff"},l.a.createElement(ae.a,{color:"primary",size:"sm"},"Lihat seluruh anggota karyawan? Klik disini!"))))),l.a.createElement(re.a,null,l.a.createElement(h.a,{onSubmit:function(t){return e.handleUpdate(t)},autoComplete:"off"},l.a.createElement("h6",{className:"heading-small text-muted mb-4"},"User information"),l.a.createElement("div",{className:"pl-lg-4"},l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"6"},l.a.createElement(f.a,{controlId:"formCategory"},l.a.createElement(Ne.a,{className:"form-control-label"},"Foto wajah"),l.a.createElement(y.a,{type:"file",label:"Foto wajah",onChange:this.handleFace}),l.a.createElement(Ke.a,{className:n?"text-muted":"",style:{color:"".concat(0==this.state.statusReco?"red":"green")}},n?"processing...":s)))),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"6"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-email"},"Email address"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-email",placeholder:"email@kamu.com",type:"email",value:i,onChange:function(t){return e.setState({email:t.target.value})}})))),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"12"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-first-name"},"Full Name"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-first-name",placeholder:"Nama lengkap",type:"text",value:a,onChange:function(t){return e.setState({name:t.target.value})}})))),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"6"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-password"},"Password"),l.a.createElement(y.a,{className:"form-control-alternative",autoComplete:"off",id:"input-password",placeholder:"Masukkan password jika ingin mengubah",type:"password",minLength:8,onChange:function(t){return e.setState({password:t.target.value})}}))),l.a.createElement(z.a,{lg:"6"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-imei"},"IMEI"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-imei",placeholder:"IMEI Hp",type:"text",value:c,onChange:function(t){return e.setState({imei:t.target.value})}}))))),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Job information"),l.a.createElement("div",{className:"pl-lg-4"},l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-address"},"NIK"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-nik",placeholder:"NIK Karyawan",type:"text",value:E,onChange:function(t){return e.setState({nik:t.target.value})}}))),l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-address"},"Level"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){return e.setState({level:t.target.value})}},j.map((function(e,t){return l.a.createElement("option",{selected:r.toLowerCase()===e.get("level").toLowerCase(),key:t,value:e.get("level")},e.get("level"))}))))),l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-address"},"Tipe karyawan"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){return e.setState({tipeKaryawan:t.target.value})}},w.map((function(e,t){return l.a.createElement("option",{selected:v.toLowerCase()===e.get("tipe").toLowerCase(),key:t,value:e.get("tipe")},e.get("tipe"))})))))),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-posisi"},"Posisi kerja"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-posisi",type:"select",onChange:function(t){return e.setState({posisi:t.target.value.toUpperCase()})}},M.map((function(e,t){return l.a.createElement("option",{selected:b.toLowerCase()===e.get("position").toLowerCase(),key:t,value:e.get("position")},e.get("position"))}))))),l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-jam-kerja"},"Jam kerja"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-jam-kerja",type:"select",onChange:function(t){return e.setState({jamKerja:t.target.value})}},["Jam tetap","Jam fleksibel","Jam bebas"].map((function(e){return l.a.createElement("option",{selected:m.toLowerCase()===e.toLowerCase(),value:e},e)}))))),l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-lokasi"},"Lokasi kerja"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-lokasi",type:"select",onChange:function(t){return e.setState({lokasiKerja:t.target.value})}},["Tetap","Bebas (mobile)"].map((function(e){return l.a.createElement("option",{selected:d.toLowerCase()===e.toLowerCase(),value:e},e)})))))),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-lembur"},"Lembur ?"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-lembur",type:"select",onChange:function(t){return e.setState({lembur:t.target.value})}},["ya","tidak"].map((function(e){return l.a.createElement("option",{selected:p.toLowerCase()===e.toLowerCase(),value:e},e)}))))),l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-cuti"},"Jumlah Cuti"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-lokasi",type:"number",value:u,onChange:function(t){return e.setState({jumlahCuti:t.target.value})}})))),""!==this.state.jamKerja&&"Jam bebas"!==this.state.jamKerja?l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"12"},l.a.createElement(f.a,{controlId:"formJam"},l.a.createElement(Ne.a,{className:"form-control-label"},"Jam masuk dan keluar"),l.a.createElement(F.a,null,l.a.createElement(z.a,{md:4},l.a.createElement(y.a,{className:"form-control-alternative",type:"number",required:!0,value:this.state.jamMasuk,placeholder:"Jam Masuk",onChange:function(t){return e.setState({jamMasuk:t.target.value})}})),l.a.createElement(z.a,{md:4},l.a.createElement(y.a,{className:"form-control-alternative",type:"number",placeholder:"Jam Keluar",required:!0,value:this.state.jamKeluar,onChange:function(t){return e.setState({jamKeluar:t.target.value})}})))))):"","Tetap"===this.state.lokasiKerja?l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,{controlId:"formPoint"},l.a.createElement(Ne.a,{className:"form-control-label"},"Absen point"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){return e.setState({idPoint:t.target.value})}},S.map((function(t){return l.a.createElement("option",{selected:e.state.absenPointObject.id===t.id,value:t.id},t.get("placeName"))})))))):""),""!==this.state.level&&"gm"!==this.state.level.toLowerCase()&&"admin"!==this.state.level.toLowerCase()?l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",{className:"my-4"}),l.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Choose leader"),l.a.createElement("div",{className:"pl-lg-4"},function(e){switch(e.toLowerCase()){case"staff":return x;case"team leader":return q;case"supervisor":return K;case"manager":return P;case"head":return J;default:return}}(this.state.level.toLowerCase()))):"",l.a.createElement("div",{className:"pl-lg-4"},l.a.createElement(F.a,{className:"mt-2"},l.a.createElement(z.a,{lg:"12"},l.a.createElement(ae.a,{block:!0,color:"primary",type:"submit"},this.state.loadingModal?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")))))))))))}}]),a}(l.a.Component),layout:"/admin",invisible:!0},{path:"/self-regist/:id",name:"Self Registration Form",icon:"ni ni-align-center text-info",component:function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getPoint=function(){var e=new O.a.Object.extend("ValidGeopoint"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarPoint:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getTipe=function(){n.setState({loading:!0});var e=new O.a.Object.extend("EmployeeType"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarTipe:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getPosisi=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Position"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarPosisi:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getLevel=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Level"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarLevel:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getStaff=function(){n.setState({loading:!0});var e=new O.a.User;new O.a.Query(e).find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getData=function(){n.setState({loading:!0});var e=new O.a.User;new O.a.Query(e).find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.handleFilter=function(e){e.preventDefault(),n.setState({loadingFilter:!0});var t=n.state,a=t.searchBy,l=t.searchValue,s=n.state,r=s.resPerPage,o=s.page,i=new O.a.User,c=new O.a.Query(i);switch(c.skip(r*o-r),c.limit(r),c.withCount(),a){case"all":c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"name":c.matches("fullname",l,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"nik":c.equalTo("nik",l),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"divisi":c.matches("posisi",l,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}));break;case"level":c.matches("level",l,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"leader":var m=new O.a.User,u=new O.a.Query(m);u.matches("fullname",l,"i"),c.matchesQuery("leaderIdNew",u),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}))}},n.getShifting=function(){var e=O.a.Object.extend("Shifting"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarShifting:e})})).catch((function(e){alert("cek koneksi anda")}))},n.getLeader=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","leader"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarLeader:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getSupervisor=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","supervisor"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarSupervisor:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getManager=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","manager"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarManager:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getHead=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","head"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarHead:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getGM=function(){n.setState({loading:!0});var e=new O.a.User,t=new O.a.Query(e);t.equalTo("roles","gm"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarGM:e,loading:!1})})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.hans=function(){},n.handleFace=function(e){n.setState({loadingReco:!0,statusReco:0,fotoWajah:e.target.files[0]});var t=new FormData;t.append("knax",e.target.files[0]),Le.a.post("http://52.77.8.120:4000/api/face-check",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;return 1===t.status?n.setState({statusReco:1,message:"\u2714\ufe0f ".concat(t.message),loadingReco:!1}):n.setState({statusReco:0,message:"\u2716\ufe0f ".concat(t.message),loadingReco:!1})})).catch((function(e){return alert("Terjadi error...")}))},n.handleCheckImei=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=new O.a.User,a=new O.a.Query(t);a.equalTo("imei",n.state.imei),a.first().then((function(e){e?n.setState({imeiMessage:"Imei telah terdaftar",loadingModal:!1}):n.handleSubmit()})).catch((function(e){console.log(e),n.setState({loadingModal:!1})}))},n.handleSubmit=function(){n.setState({loading:!0});var e=n.props.match.params.id,t=n.state,a=t.name,l=t.nik,s=t.tipeKaryawan,r=t.posisi,o=t.level,i=t.imei,c=t.jamKerja,m=t.lokasiKerja,u=t.jumlahCuti,d=t.lembur,g=(t.fotoWajah,t.username),p=t.password,h=t.email,f=new O.a.User,v=function(e,t){f.set(e,{__type:"Pointer",className:"_User",objectId:n.state[t]})};"staff"===o.toLowerCase()&&(""!==n.state.selectLeader&&v("leaderIdNew","selectLeader"),""!==n.state.selectSupervisor&&v("supervisorID","selectSupervisor"),""!==n.state.selectManager&&v("managerID","selectManager"),""!==n.state.selectHead&&v("headID","selectHead"),""!==n.state.selectGM&&v("gmID","selectGM")),"leader"===o.toLowerCase()&&(""!==n.state.selectSupervisor&&v("supervisorID","selectSupervisor"),""!==n.state.selectManager&&v("managerID","selectManager"),""!==n.state.selectHead&&v("headID","selectHead"),""!==n.state.selectGM&&v("gmID","selectGM")),"supervisor"===o.toLowerCase()&&(""!==n.state.selectManager&&v("managerID","selectManager"),""!==n.state.selectHead&&v("headID","selectHead"),""!==n.state.selectGM&&v("gmID","selectGM")),"manager"===o.toLowerCase()&&(""!==n.state.selectHead&&v("headID","selectHead"),""!==n.state.selectGM&&v("gmID","selectGM")),"head"===o.toLowerCase()&&""!==n.state.selectGM&&v("gmID","selectGM"),f.set("absenPoint",{__type:"Pointer",className:"ValidGeopoint",objectId:n.state.idPoint}),f.set("fullname",a),f.set("email",h),f.set("username",g),f.set("password",Te()(p)),f.set("passwordClone",Te()(p)),f.set("nik",l.toUpperCase()),f.set("tipe",s),f.set("posisi",r),f.set("level",o.toLowerCase()),f.set("imei",i),f.set("jamKerja",c),f.set("lokasiKerja",m),0===n.state.jamMasuk?f.set("jamMasuk",8):f.set("jamMasuk",parseInt(n.state.jamMasuk)),0===n.state.jamKeluar?f.set("jamMasuk",17):f.set("jamKeluar",parseInt(n.state.jamKeluar)),f.set("jumlahCuti",parseInt(u)),f.set("lembur",d),f.set("roles",o.toLowerCase()),f.set("fotoWajah",n.state.fotoWajahObj),f.save().then((function(t){console.log("isi user",f),console.log("objectid user",t.id);var a=new O.a.User;new O.a.Query(a).get(t.id).then((function(a){a.set("userId",{__type:"Pointer",className:"_User",objectId:t.id}),a.save(null,{useMasterKey:!0}).then((function(t){var a=O.a.Object.extend("SelfRegist");new O.a.Query(a).get(e).then((function(e){e.set("status",1),e.save().then((function(){n.handleSendEmail(n.state.email,"KTA Team",n.state.name,"Selamat kamu berhasil melakukan self registration! Silahkan login menggunakan NIK dan password yang sudah kamu buat, terimakasih!","","addMode","Berhasil approve data")})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,rejectMode:!1,message:"Gagal tambah data, coba lagi",visible:!0})}))}))}))}))})).catch((function(e){n.setState({addMode:!1,loadingModal:!1,message:e.message,visible:!0}),console.log(e.message)}))},n.handleSendEmail=function(e,t,a,l,s,r,o){var i={to_email:e,from_name:t,to_name:a,message_html:l,alasan:s};Ge.a.send("gmail","template_N8cRQk3D",i).then((function(){n.setState({[r]:!1,loadingModal:!1,message:o,visible:!0,color:"success"}),console.log("sukses")})).catch((function(e){n.setState({[r]:!1,loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0}),console.log(e),window.location.reload(!1)}))},n.handleUpdate=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state,a=t.name,l=t.nik,s=t.tipeKaryawan,r=t.posisi,o=t.level,i=t.imei,c=t.jamKerja,m=t.lokasiKerja,u=t.jumlahCuti,d=t.lembur,g=t.fotoWajah,p=t.username,h=t.password,f=t.email,v=n.props.match.params.id,E=new O.a.User;new O.a.Query(E).get(v).then((function(e){var t=function(e,t){E.set(e,{__type:"Pointer",className:"_User",objectId:n.state[t]})};"staff"===o.toLowerCase()&&(""!==n.state.selectLeader&&t("leaderIdNew","selectLeader"),""!==n.state.selectSupervisor&&t("supervisorID","selectSupervisor"),""!==n.state.selectManager&&t("managerID","selectManager"),""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"leader"===o.toLowerCase()&&(""!==n.state.selectSupervisor&&t("supervisorID","selectSupervisor"),""!==n.state.selectManager&&t("managerID","selectManager"),""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"supervisor"===o.toLowerCase()&&(""!==n.state.selectManager&&t("managerID","selectManager"),""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"manager"===o.toLowerCase()&&(""!==n.state.selectHead&&t("headID","selectHead"),""!==n.state.selectGM&&t("gmID","selectGM")),"head"===o.toLowerCase()&&""!==n.state.selectGM&&t("gmID","selectGM"),""!==n.state.idPoint&&E.set("absenPoint",{__type:"Pointer",className:"ValidGeopoint",objectId:n.state.idPoint}),e.set("fullname",a),e.set("email",f),e.set("username",p),e.set("jamMasuk",n.state.jamMasuk),e.set("jamKeluar",n.state.jamKeluar),e.set("username",p),""!==h&&(e.set("password",Te()(h)),e.set("passwordClone",Te()(h))),e.set("nik",l.toUpperCase()),e.set("tipe",s),e.set("posisi",r),e.set("level",o.toLowerCase()),e.set("imei",i),e.set("jamKerja",c),e.set("lokasiKerja",m),e.set("jumlahCuti",parseInt(u)),e.set("lembur",d),e.set("roles",o.toLowerCase()),""!==g&&e.set("fotoWajah",new O.a.File("profile.jpg",g)),e.save(null,{useMasterKey:!0}).then((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})})).catch((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0}),console.log(e.message)}))})).catch((function(e){n.setState({editMode:!1,loadingModal:!1,message:e.message,visible:!0}),console.log(e.message)}))},n.getUserDetail=function(){var e=n.props.match.params.id,t=O.a.Object.extend("SelfRegist");new O.a.Query(t).get(e).then((function(e){var t=e.attributes;console.log(t),n.setState({nik:t.nik,name:t.fullname,username:t.usernameClone,imei:t.imei,email:t.email,fotoWajah:void 0===t.fotoWajah?"":t.fotoWajah.url(),fotoWajahObj:t.fotoWajah,password:t.passwordClone,loading:!1},(function(){return console.log(n.state.fotoWajah)}))})).catch((function(e){n.setState({loading:!1}),alert("cek koneksi anda")}))},n.getDetail=function(){var e=new O.a.User,t=new O.a.Query(e),a=n.props.match.params.id;t.include("leaderIdNew"),t.include("supervisorID"),t.include("managerID"),t.include("headID"),t.include("gmID"),t.include("absenPoint"),t.get(a,{useMasterKey:!0}).then((function(e){var t=e.attributes;console.log(t),n.setState({nik:t.nik,name:t.fullname,username:t.username,imei:t.imei,email:t.email,tipeKaryawan:t.tipe,posisi:t.posisi,jamKerja:t.jamKerja,lokasiKerja:t.lokasiKerja,jumlahCuti:t.jumlahCuti,jamMasuk:void 0===t.jamMasuk?0:t.jamMasuk,jamKeluar:void 0===t.jamKeluar?0:t.jamKeluar,absenPointObject:void 0===t.absenPoint?"":t.absenPoint,shifting:void 0===t.shifting?"":t.shifting,lembur:t.lembur,level:t.roles.toLowerCase(),leader:void 0===t.leaderIdNew?"":t.leaderIdNew,supervisor:void 0===t.supervisorID?"":t.supervisorID,manager:void 0===t.managerID?"":t.managerID,head:void 0===t.headID?"":t.headID,gm:void 0===t.gmID?"":t.gmID,editMode:!0})})).catch((function(e){alert(e.message)}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.handleIdAbsen=function(e){var t=document.getElementById("myoptions"),a=document.getElementById("data").querySelector('[value="'.concat(t.value,'"]'));if(null!==a.getAttribute("data-key")){var l=a.getAttribute("data-key");console.log(l),console.log(e.target.value),n.setState({selectLeader:l})}},n.state={daftarStaff:[],daftarLeader:[],daftarTipe:[],daftarPosisi:[],daftarLevel:[],daftarSupervisor:[],daftarManager:[],daftarHead:[],daftarGM:[],resPerPage:20,first:{},fotoWajahObj:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",fullname:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,editMode:!1,deleteCounter:0,loadingReco:!1,message:"",level:"",fotoWajah:"",message:"",loadingReco:!1,name:"",nik:"",tipeKaryawan:"",posisi:"",imei:"",jamKerja:"",lokasiKerja:"",jumlahCuti:0,lembur:"ya",username:"",password:"",selectLeader:"",selectSupervisor:"",selectManager:"",selectHead:"",selectGM:"",statusReco:0,email:"",fotoWajahObject:{},daftarShifting:[],shifting:{},leader:{},supervisor:{},manager:{},head:{},gm:{},absenPointObject:{},message:"",color:"",visible:!1,message:"",color:"danger",absenPoint:[],daftarPoint:[],idPoint:"",imeiMessage:"",searchBy:"all",searchValue:"",jamMasuk:0,jamKeluar:0,visibleToggle:!1},n}return Object(m.a)(a,[{key:"componentWillMount",value:function(){this.getUserDetail()}},{key:"componentDidMount",value:function(){this.getLeader(),this.getSupervisor(),this.getManager(),this.getHead(),this.getGM(),this.getLevel(),this.getPosisi(),this.getTipe(),this.getPoint(),Ge.a.init("user_h2fWwDoztgEPcKNQ9vadt")}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=(t.daftarStaff,t.loading,t.loadingReco,t.message,t.level,t.email),s=(t.fullname,t.imei),r=(t.jamKerja,t.jumlahCuti),i=(t.lokasiKerja,t.shifting,t.lembur,t.tipeKaryawan,t.nik),c=(t.posisi,t.daftarPoint),m=(t.loadingModal,t.fullnames,t.addMode,t.leader,t.photoMode,t.statusReco,t.daftarShifting,t.daftarLevel),u=t.daftarPosisi,d=t.daftarTipe,p=(t.editMode,t.supervisor,t.manager,t.head,t.gm,l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,{className:"form-control-label"},"Pilih leader"),l.a.createElement(y.a,{type:"select",className:"form-control-alternative",required:!0,onChange:function(t){e.setState({selectLeader:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0,value:""},"Pilih leader"),this.state.daftarLeader.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))}))))),b=l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,{className:"form-control-label"},"Pilih supervisor"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){e.setState({selectSupervisor:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0,value:""},"Pilih supervisor"),this.state.daftarSupervisor.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},void 0===e.get("fullname")?"":e.get("fullname"))})))),S=l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,{className:"form-control-label"},"Pilih manager"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){e.setState({selectManager:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0,value:""},"Pilih manager"),this.state.daftarManager.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))),k=l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,{className:"form-control-label"},"Pilih head"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){e.setState({selectHead:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0,value:""},"Pilih head"),this.state.daftarHead.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))),j=l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,{className:"form-control-label"},"Pilih GM"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){e.setState({selectGM:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0,value:""},"Pilih GM"),this.state.daftarGM.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))),M=l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},p),l.a.createElement(z.a,{lg:"4"},b),l.a.createElement(z.a,{lg:"4"},S)),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},k),l.a.createElement(z.a,{lg:"4"},j))),w=l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},b),l.a.createElement(z.a,{lg:"4"},S),l.a.createElement(z.a,{lg:"4"},k)),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},j))),T=l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},S),l.a.createElement(z.a,{lg:"4"},k),l.a.createElement(z.a,{lg:"4"},j))),H=l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},k),l.a.createElement(z.a,{lg:"4"},j))),O=l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{controlId:"formLeaders"},l.a.createElement(Ne.a,null,"Pilih GM"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){e.setState({selectGM:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih GM"),this.state.daftarGM.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))})))));f.a,y.a,this.state.searchBy,"leader"===this.state.searchBy?m.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))})):this.state.daftarPosisi.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))})),f.a,y.a,this.state.searchBy,"all"===this.state.searchBy||"Masukkan ".concat(this.state.searchBy);return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement(z.a,{className:"order-xl-1",xl:"12"},l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}}),l.a.createElement(ee.a,{className:"bg-secondary shadow"},l.a.createElement(te.a,{className:"bg-white border-0"},l.a.createElement(F.a,{className:"align-items-center"},l.a.createElement(z.a,{xs:"8"},l.a.createElement("h3",{className:"mb-0"},"Ubah data ".concat(this.state.name))),l.a.createElement(z.a,{className:"text-right",xs:"4"},l.a.createElement(o.b,{color:"inherit",to:"/admin/staff"},l.a.createElement(ae.a,{color:"primary",size:"sm"},"Lihat seluruh anggota karyawan? Klik disini!"))))),l.a.createElement(re.a,null,l.a.createElement(h.a,{onSubmit:function(t){return e.handleCheckImei(t)},autoComplete:"off"},l.a.createElement("h6",{className:"heading-small text-muted mb-4"},"User information"),l.a.createElement("div",{className:"pl-lg-4"},l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"6"},""!==this.state.fotoWajah?l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Foto Wajah"),l.a.createElement(F.a,{className:"ml-1"},l.a.createElement("img",{height:100,width:100,src:""===this.state.fotoWajah?"":this.state.fotoWajah,alt:"foto"}))):"")),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"6"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-email"},"Email address"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-email",placeholder:"email@kamu.com",type:"email",value:n,onChange:function(t){return e.setState({email:t.target.value})}})))),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"12"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-first-name"},"Full Name"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-first-name",placeholder:"Nama lengkap",type:"text",value:a,onChange:function(t){return e.setState({name:t.target.value})}})))),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"6"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-password"},"Password"),l.a.createElement(v.a,{className:"input-group-alternative mb-4"},l.a.createElement(y.a,{className:"form-control-alternative",autoComplete:"off",id:"input-password",placeholder:"Masukkan password jika ingin mengubah",type:this.state.visibleToggle?"text":"password",value:this.state.password,minLength:8,onChange:function(t){return e.setState({password:t.target.value})}}),l.a.createElement(E.a,{addonType:"append"},l.a.createElement(ae.a,{onClick:function(){return e.toggle("visibleToggle")}},l.a.createElement("i",{className:this.state.visibleToggle?"fas fa-eye-slash":"fas fa-eye"})))))),l.a.createElement(z.a,{lg:"6"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-imei"},"IMEI"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-imei",placeholder:"IMEI Hp",type:"text",value:s,onChange:function(t){return e.setState({imei:t.target.value})}}))))),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Job information"),l.a.createElement("div",{className:"pl-lg-4"},l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-address"},"NIK"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-nik",placeholder:"NIK Karyawan",type:"text",value:i,onChange:function(t){return e.setState({nik:t.target.value})}}))),l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-address"},"Level"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){return e.setState({level:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih level"),m.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))}))))),l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-address"},"Tipe karyawan"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){return e.setState({tipeKaryawan:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih tipe karyawan"),d.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("tipe")},e.get("tipe"))})))))),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-posisi"},"Posisi kerja"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-posisi",type:"select",onChange:function(t){return e.setState({posisi:t.target.value.toUpperCase()})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih posisi pekerjaan"),u.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))}))))),l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-jam-kerja"},"Jam kerja"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-jam-kerja",type:"select",onChange:function(t){return e.setState({jamKerja:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih tipe jam kerja"),["Jam tetap","Jam fleksibel","Jam bebas"].map((function(e){return l.a.createElement("option",{value:e},e)}))))),l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-lokasi"},"Lokasi kerja"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-lokasi",type:"select",onChange:function(t){return e.setState({lokasiKerja:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lokasi kerja"),["Tetap","Bebas (mobile)"].map((function(e){return l.a.createElement("option",{value:e},e)})))))),l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-lembur"},"Lembur ?"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-lembur",type:"select",onChange:function(t){return e.setState({lembur:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih tipe lembur"),["ya","tidak"].map((function(e){return l.a.createElement("option",{value:e},e)}))))),l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,null,l.a.createElement("label",{className:"form-control-label",htmlFor:"input-cuti"},"Jumlah Cuti"),l.a.createElement(y.a,{className:"form-control-alternative",id:"input-lokasi",type:"number",value:r,onChange:function(t){return e.setState({jumlahCuti:t.target.value})}})))),""!==this.state.jamKerja&&"Jam bebas"!==this.state.jamKerja?l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"12"},l.a.createElement(f.a,{controlId:"formJam"},l.a.createElement(Ne.a,{className:"form-control-label"},"Jam masuk dan keluar"),l.a.createElement(F.a,null,l.a.createElement(z.a,{md:4},l.a.createElement(y.a,{className:"form-control-alternative",type:"number",required:!0,value:this.state.jamMasuk,placeholder:"Jam Masuk",onChange:function(t){return e.setState({jamMasuk:t.target.value})}})),l.a.createElement(z.a,{md:4},l.a.createElement(y.a,{className:"form-control-alternative",type:"number",placeholder:"Jam Keluar",required:!0,value:this.state.jamKeluar,onChange:function(t){return e.setState({jamKeluar:t.target.value})}})))))):"","Tetap"===this.state.lokasiKerja?l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"4"},l.a.createElement(f.a,{controlId:"formPoint"},l.a.createElement(Ne.a,{className:"form-control-label"},"Absen point"),l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){return e.setState({idPoint:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih absen point"),c.map((function(e){return l.a.createElement("option",{value:e.id},e.get("placeName"))})))))):""),""!==this.state.level&&"gm"!==this.state.level.toLowerCase()?l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",{className:"my-4"}),l.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Choose leader"),l.a.createElement("div",{className:"pl-lg-4"},function(e){switch(e.toLowerCase()){case"staff":return M;case"team leader":return w;case"supervisor":return T;case"manager":return H;case"head":return O;default:return}}(this.state.level.toLowerCase()))):"",l.a.createElement("div",{className:"pl-lg-4"},l.a.createElement(F.a,{className:"mt-2"},l.a.createElement(z.a,{lg:"12"},l.a.createElement(ae.a,{block:!0,color:"primary",type:"submit"},this.state.loadingModal?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")))))))))))}}]),a}(l.a.Component),layout:"/admin",invisible:!0},{path:"/export-absen/:id",name:"Absen",icon:"ni ni-pin-3 text-danger",component:ut,layout:"/admin",invisible:!0},{path:"/staff",name:"Staff",icon:"ni ni-single-02 text-yellow",component:je,layout:"/admin"},{path:"/register",name:"Register",icon:"ni ni-bullet-list-67 text-red",component:Pe,layout:"/admin"},{path:"/tes-eksport",name:"Reporting karyawan",icon:"ni ni-folder-17 text-green",component:pt,layout:"/admin"},{path:"/self-regist",name:"Self Registration",icon:"ni ni-circle-08 text-primary",component:_e,layout:"/admin"},{path:"/status-request",name:"Status Request",icon:"ni ni-archive-2 text-info",component:qe,layout:"/admin"},{path:"/tipe",name:"Manage Tipe",icon:"ni ni-settings-gear-65 text-danger",component:Je,layout:"/admin"},{path:"/haricuti",name:"Manage Hari Cuti",icon:"ni ni-settings-gear-65 text-yellow",component:dt,layout:"/admin"},{path:"/point",name:"Manage Absen Point",icon:"ni ni-settings-gear-65 text-primary",component:Qe,layout:"/admin"},{path:"/posisi",name:"Manage Posisi",icon:"ni ni-settings-gear-65 text-green",component:Fe,layout:"/admin"},{path:"/level",name:"Manage Level",icon:"ni ni-settings-gear-65 text-info",component:ze,layout:"/admin"},{path:"/appsetting",name:"Manage Setting",icon:"ni ni-settings text-blue",component:$e,layout:"/admin"},{path:"/departemen",name:"Manage Departemen",icon:"ni ni-folder-17 text-primary",component:Ue,layout:"/admin"},{path:"/login",name:"Login",icon:"ni ni-circle-08 text-pink",component:He,layout:"/auth",invisible:!0}],ft=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).queryTotalStaff=function(e,t){var a=new O.a.User,l=new O.a.Query(a);l.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),l.containedIn("roles",t),l.count().then((function(e){n.setState({totalStaff:e})})).catch((function(e){alert(e.message)}))},n.getTotalStaff=function(){switch(C()){case"leader":n.queryTotalStaff("leaderIdNew",["staff"]);break;case"supervisor":n.queryTotalStaff("supervisorID",["staff","leader"]);break;case"manager":n.queryTotalStaff("managerID",["staff","leader","supervisor"]);break;case"head":n.queryTotalStaff("headID",["staff","leader","supervisor","manager"]);break;case"gm":n.queryTotalStaff("headID",["staff","leader","supervisor","manager","head"])}},n.toggleNavs=function(e,t){e.preventDefault(),n.setState({activeNav:t,chartExample1Data:"data1"===n.state.chartExample1Data?"data2":"data1"})},n.getDaftarStaff=function(){var e=new O.a.User,t=new O.a.Query(e);t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.equalTo("roles","staff"),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e})})).catch((function(e){}))},n.getDaftarAbsen=function(){n.setState({loading:!0});var e=O.a.Object.extend("Absence"),t=new O.a.Query(e),a=new Date,l=new N.a(a);l.startOf("day");var s=new N.a(l);s.add(1,"day"),console.log("leaderid",L()),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.ascending("absenMasuk"),t.greaterThanOrEqualTo("createdAt",l.toDate()),t.lessThan("createdAt",s.toDate()),t.include("user"),t.find().then((function(e){console.log("user",e),n.setState({absence:e,loading:!1})})).catch((function(e){n.setState({loading:!1})}))},n.queryTotalAbsen=function(e,t){var a=O.a.Object.extend("Absence"),l=new O.a.Query(a),s=new O.a.User,r=new O.a.Query(s),o=(C(),new Date),i=new N.a(o);i.startOf("day");var c=new N.a(i);c.add(1,"day"),l.greaterThanOrEqualTo("absenMasuk",i.toDate()),l.lessThan("absenMasuk",c.toDate()),r.containedIn("roles",t),r.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),l.matchesQuery("user",r),l.count().then((function(e){n.setState({totalAbsen:e})})).catch((function(e){e.message;n.setState({loading:!1}),window.location.reload(!1)}))},n.getTotalAbsen=function(){switch(n.setState({loading:!0}),C()){case"leader":n.queryTotalAbsen("leaderIdNew",["staff"]);break;case"supervisor":n.queryTotalAbsen("supervisorID",["staff","leader"]);break;case"manager":n.queryTotalAbsen("managerID",["staff","leader","supervisor"]);break;case"head":n.queryTotalAbsen("headID",["staff","leader","supervisor","manager"]);break;case"gm":n.queryTotalAbsen("headID",["staff","leader","supervisor","manager","head"])}},n.queryTotalTerlambat=function(e,t){var a=O.a.Object.extend("Absence"),l=new O.a.Query(a),s=new O.a.User,r=new O.a.Query(s),o=new Date,i=new N.a(o);i.startOf("day");var c=new N.a(i);c.add(1,"day"),l.greaterThanOrEqualTo("lateTimes",i.toDate()),l.lessThan("lateTimes",c.toDate()),l.exists("lateTimes"),r.containedIn("roles",t),r.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),l.matchesQuery("user",r),l.equalTo("approvalLate",3),l.count().then((function(e){n.setState({totalTerlambat:e})})).catch((function(e){e.message;n.setState({loading:!1}),window.location.reload(!1)}))},n.getTotalTerlambat=function(){switch(C()){case"leader":n.queryTotalTerlambat("leaderIdNew",["staff"]);break;case"supervisor":n.queryTotalTerlambat("supervisorID",["staff","leader"]);break;case"manager":n.queryTotalTerlambat("managerID",["staff","leader","supervisor"]);break;case"head":n.queryTotalTerlambat("headID",["staff","leader","supervisor","manager"]);break;case"gm":n.queryTotalTerlambat("headID",["staff","leader","supervisor","manager","head"])}},n.queryTotalIzin=function(e,t){var a=O.a.Object.extend("Izin"),l=new O.a.Query(a),s=new O.a.User,r=new O.a.Query(s),o=new Date,i=new N.a(o);i.startOf("day"),new N.a(i).add(1,"day"),l.equalTo("statusIzin",2),l.equalTo("status",3),r.containedIn("roles",t),r.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),l.matchesQuery("user",r),l.count().then((function(e){n.setState({totalIzin:e})})).catch((function(e){e.message;n.setState({loading:!1}),window.location.reload(!1)}))},n.getTotalIzin=function(){switch(C()){case"leader":n.queryTotalIzin("leaderIdNew",["staff"]);break;case"supervisor":n.queryTotalIzin("supervisorID",["staff","leader"]);break;case"manager":n.queryTotalIzin("managerID",["staff","leader","supervisor"]);break;case"head":n.queryTotalIzin("headID",["staff","leader","supervisor","manager"]);break;case"gm":n.queryTotalIzin("headID",["staff","leader","supervisor","manager","head"])}},n.queryTotalSakit=function(e,t){var a=O.a.Object.extend("Izin"),l=new O.a.Query(a),s=new O.a.User,r=new O.a.Query(s),o=new Date,i=new N.a(o);i.startOf("day"),new N.a(i).add(1,"day"),r.containedIn("roles",t),r.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),l.matchesQuery("user",r),l.equalTo("statusIzin",1),l.equalTo("status",3),l.count().then((function(e){n.setState({totalSakit:e})})).catch((function(e){e.message;n.setState({loading:!1}),window.location.reload(!1)}))},n.getTotalSakit=function(){switch(C()){case"leader":n.queryTotalSakit("leaderIdNew",["staff"]);break;case"supervisor":n.queryTotalSakit("supervisorID",["staff","leader"]);break;case"manager":n.queryTotalSakit("managerID",["staff","leader","supervisor"]);break;case"head":n.queryTotalSakit("headID",["staff","leader","supervisor","manager"]);break;case"gm":n.queryTotalSakit("headID",["staff","leader","supervisor","manager","head"])}},n.getTotalRequest=function(){var e=O.a.Object.extend("ChangeRequest"),t=new O.a.Query(e);t.equalTo("statusApprove",3),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.count().then((function(e){n.setState({totalRequest:e})})).catch((function(e){e.message;n.setState({loading:!1}),window.location.reload(!1)}))},n.queryTotalOvertime=function(e,t){var a=O.a.Object.extend("Absence"),l=new O.a.Query(a),s=new O.a.User,r=new O.a.Query(s);console.log("yesterday",N()().subtract(1,"days").toDate());var o=new Date,i=new N.a(o);i.startOf("day");var c=new N.a(i);c.add(1,"day"),r.containedIn("roles",t),r.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),l.matchesQuery("user",r),l.greaterThanOrEqualTo("overtimeOut",i.toDate()),l.lessThan("overtimeOut",c.toDate()),l.equalTo("approvalOvertime",3),l.count().then((function(e){n.setState({totalOvertime:e,loading:!1})})).catch((function(e){e.message;n.setState({loading:!1}),window.location.reload(!1)}))},n.getTotalOvertime=function(){switch(C()){case"leader":n.queryTotalOvertime("leaderIdNew",["staff"]);break;case"supervisor":n.queryTotalOvertime("supervisorID",["staff","leader"]);break;case"manager":n.queryTotalOvertime("managerID",["staff","leader","supervisor"]);break;case"head":n.queryTotalOvertime("headID",["staff","leader","supervisor","manager"]);break;case"gm":n.queryTotalOvertime("headID",["staff","leader","supervisor","manager","head"])}},n.queryTotalLeave=function(e,t){var a=O.a.Object.extend("Absence"),l=new O.a.Query(a),s=new O.a.User,r=new O.a.Query(s),o=new Date,i=new N.a(o);i.startOf("day");var c=new N.a(i);c.add(1,"day"),r.containedIn("roles",t),r.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),l.matchesQuery("user",r),l.equalTo("approvalEarly",3),l.greaterThanOrEqualTo("earlyTimes",i.toDate()),l.lessThan("earlyTimes",c.toDate()),l.count().then((function(e){n.setState({leave:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getTotalLeave=function(){switch(C()){case"leader":n.queryTotalLeave("leaderIdNew",["staff"]);break;case"supervisor":n.queryTotalLeave("supervisorID",["staff","leader"]);break;case"manager":n.queryTotalLeave("managerID",["staff","leader","supervisor"]);break;case"head":n.queryTotalLeave("headID",["staff","leader","supervisor","manager"]);break;case"gm":n.queryTotalLeave("headID",["staff","leader","supervisor","manager","head"])}},n.state={activeNav:1,chartExample1Data:"data1",totalAbsen:0,totalTerlambat:0,totalIzin:0,totalSakit:0,totalOvertime:0,totalRequest:0,percentage:{},loading:!1,totalStaff:0,absence:[],daftarStaff:[],leave:0},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getTotalAbsen(),this.getTotalTerlambat(),this.getTotalIzin(),this.getTotalRequest(),this.getTotalSakit(),this.getTotalOvertime(),this.getTotalStaff(),this.getDaftarAbsen(),this.getDaftarStaff(),this.getTotalLeave()}},{key:"render",value:function(){this.props.totalAbsen,this.props.totalStaff;var e=this.state,t=e.totalAbsen,a=e.totalIzin,n=e.totalOvertime,s=e.totalSakit,r=e.totalStaff,i=e.leave;return console.log(i),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"header bg-gradient-info pb-8 pt-5 pt-md-8"},l.a.createElement(g.a,{fluid:!0},l.a.createElement("div",{className:"header-body"},l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:"6",xl:"3"},l.a.createElement(o.b,{to:"/leader/data-absen",style:{color:"inherit"}},l.a.createElement(ee.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(re.a,null,l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(oe.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Tepat waktu"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},t/r==1?"Done":"".concat(t," / ").concat(r))),l.a.createElement(z.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-danger text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-chart-bar"})))))))),l.a.createElement(z.a,{lg:"6",xl:"3"},l.a.createElement(o.b,{to:"/leader/request-cuti",style:{color:"inherit"}},l.a.createElement(ee.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(re.a,null,l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(oe.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Cuti"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},a-(this.props.cuti?this.props.cuti:0))),l.a.createElement(z.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-warning text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-chart-pie"})))))))),l.a.createElement(z.a,{lg:"6",xl:"3"},l.a.createElement(o.b,{to:"/leader/request-izin",style:{color:"inherit"}},l.a.createElement(ee.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(re.a,null,l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(oe.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Izin"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},s-(this.props.izin?this.props.izin:0))),l.a.createElement(z.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-yellow text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-users"})))))))),l.a.createElement(z.a,{lg:"6",xl:"3"},l.a.createElement(o.b,{to:"/leader/request-lembur",style:{color:"inherit"}},l.a.createElement(ee.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(re.a,null,l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(oe.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Overtime"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},n," / ",r)),l.a.createElement(z.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-info text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-percent"}))))))))),l.a.createElement(F.a,{className:"mt-4"},l.a.createElement(z.a,{lg:"6",xl:"4"},l.a.createElement(o.b,{to:"/leader/request-pulang",style:{color:"inherit"}},l.a.createElement(ee.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(re.a,null,l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(oe.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Request Pulang"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},i-(this.props.leaveCounter?this.props.leaveCounter:0))),l.a.createElement(z.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-yellow text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-chart-pie"})))))))),l.a.createElement(z.a,{lg:"6",xl:"4"},l.a.createElement(o.b,{to:"/leader/request-terlambat",style:{color:"inherit"}},l.a.createElement(ee.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(re.a,null,l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(oe.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Request Terlambat"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},this.state.totalTerlambat)),l.a.createElement(z.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-primary text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-users"})))))))),l.a.createElement(z.a,{lg:"6",xl:"4"},l.a.createElement(o.b,{to:"/leader/staff",style:{color:"inherit"}},l.a.createElement(ee.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(re.a,null,l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(oe.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Total Staff"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},r)),l.a.createElement(z.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-danger text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-percent"})))))))))))))}}]),a}(l.a.Component),vt=Object(V.a)(Object(V.d)((function(){return{isOpen:!1,markerId:""}}),{onToggleOpen:function(e){var t=e.isOpen;e.markerId;return function(e){return{isOpen:!t,markerId:e}}}}),Z.withScriptjs,Z.withGoogleMap)((function(e){return l.a.createElement(Z.GoogleMap,{defaultZoom:12,defaultCenter:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},center:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},defaultOptions:{scrollwheel:!1}},e.userPosition.map((function(t){return l.a.createElement(Z.Marker,{onClick:function(){return e.onToggleOpen(t.id)},icon:{labelOrigin:new window.google.maps.Point(11,50),url:a(174)("./".concat(void 0===t.get("user").attributes.color?"red":t.get("user").attributes.color,"-dot.png")),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(11,40)},title:"".concat(t.get("fullname")," absen masuk: ").concat(q(t.get("absenMasuk"),"HH:mm")),position:{lat:parseFloat(t.get("latitude")),lng:parseFloat(t.get("longitude"))},label:{text:ue(t.get("fullname")),fontWeight:"bold"}},e.markerId===t.id&&e.isOpen&&l.a.createElement(Z.InfoWindow,{onCloseClick:e.onToggleOpen},l.a.createElement("div",null,l.a.createElement("img",{src:t.get("selfieImage").url(),height:100,width:100}),l.a.createElement("br",null),l.a.createElement("br",null),void 0===t.get("lateTimes")?"":l.a.createElement("p",null,"Terlambat"),l.a.createElement("p",null,"Absen masuk:"," ",l.a.createElement("span",{style:{color:void 0===t.get("lateTimes")?"red":"blue"}},void 0!==t.get("lateTimes")?q(t.get("lateTimes"),"HH:mm"):q(t.get("absenMasuk"),"HH:mm"))))))})))})),Et=(Object(Z.withScriptjs)(Object(Z.withGoogleMap)((function(e){return l.a.createElement(Z.GoogleMap,{defaultZoom:12,defaultCenter:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},center:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},defaultOptions:{scrollwheel:!1}},e.userPosition.map((function(e){return l.a.createElement(Z.Marker,{icon:{labelOrigin:new window.google.maps.Point(11,50),url:"Late"===e.className?"https://maps.gstatic.com/mapfiles/ms2/micons/red-dot.png":"https://maps.gstatic.com/mapfiles/ms2/micons/green-dot.png",origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(11,40)},title:"".concat(e.get("fullname")," absen masuk: ").concat(q(e.get("absenMasuk"),"HH:mm:ss")),position:{lat:parseFloat(e.get("latitude")),lng:parseFloat(e.get("longitude"))},label:{text:ue(e.get("fullname")),fontWeight:"bold"}})})))}))),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).scrollToMyRef=function(){return window.scrollTo(0,n.lcoationRef.offsetTop)},n.getCenterAverage=function(e){var t=e.reduce((function(e,t){return e+parseFloat(t.get("latitude"))}),0),a=e.reduce((function(e,t){return e+parseFloat(t.get("longitude"))}),0);console.log(t+" "+a),n.setState({avgLat:t/e.length,avgLng:a/e.length})},n.toggleNavs=function(e,t){e.preventDefault(),n.setState({activeNav:t,chartExample1Data:"data1"===n.state.chartExample1Data?"data2":"data1"})},n.getDataTerlambat=function(){n.setState({loading:!0});var e=n.props.match.params.id,t=O.a.Object.extend("Late"),a=new O.a.Query(t),l=new Date,s=new N.a(l);s.startOf("day");var r=new N.a(s);r.add(1,"day"),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:e}),a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),a.greaterThanOrEqualTo("time",s.toDate()),a.lessThan("time",r.toDate()),a.include("user"),a.find().then((function(e){e.map((function(e){return e.isOpen=!1})),console.log(e),n.setState({late:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getLeaderStaff=function(){n.setState({loading:!0});var e=n.props.match.params.id,t=O.a.Object.extend("Absence"),a=new O.a.Query(t),l=new Date,s=new N.a(l);s.startOf("day");var r=new N.a(s);r.add(1,"day"),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:e}),a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),a.greaterThanOrEqualTo("createdAt",s.toDate()),a.lessThan("createdAt",r.toDate()),a.include("user"),a.find().then((function(e){e.map((function(e){return e.isOpen=!1})),console.log(e),n.setState({dataAbsen:e,loading:!1})})).catch((function(e){console.log(e),n.setState({loading:!1})}))},n.queryAbsenByLevel=function(e,t,a){var l=new O.a.User,s=new O.a.Query(l);s.containedIn("roles",t),s.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()});var r=O.a.Object.extend("Absence"),o=new O.a.Query(r),i=new Date,c=new N.a(i);c.startOf("day");var m=new N.a(c);m.add(1,"day"),o.ascending("createdAt"),o.greaterThanOrEqualTo("createdAt",c.toDate()),o.lessThan("createdAt",m.toDate()),o.matchesQuery("user",s),o.include("user"),o.equalTo("user",{__type:"Pointer",className:"_User",objectId:a}),o.find().then((function(e){console.log("user",e),n.setState({dataAbsen:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getDaftarAbsenByLevel2=function(){n.setState({loading:!0});var e=C(),t=n.props.match.params.id;switch(e){case"leader":n.queryAbsenByLevel("leaderIdNew",["staff","Staff"],t);break;case"supervisor":n.queryAbsenByLevel("supervisorID",["staff","leader"],t);break;case"manager":n.queryAbsenByLevel("managerID",["staff","leader","supervisor"],t);break;case"head":n.queryAbsenByLevel("headID",["staff","leader","supervisor","manager"],t);break;case"gm":n.queryAbsenByLevel("headID",["staff","leader","supervisor","manager","head"],t)}},n.getDaftarAbsenByLevel=function(){n.setState({loading:!0});var e=C(),t=n.props.match.params.id;switch(e){case"leader":var a=new O.a.User,l=new O.a.Query(a);l.containedIn("roles",["staff","Staff"]),l.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()});var s=O.a.Object.extend("Absence"),r=new O.a.Query(s),o=new Date,i=new N.a(o);i.startOf("day"),new N.a(i).add(1,"day"),r.ascending("createdAt"),r.matchesQuery("user",l),r.include("user"),r.equalTo("user",{__type:"Pointer",className:"_User",objectId:t}),r.find().then((function(e){console.log("user",e),n.setState({dataAbsen:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))}},n.setCenterMaps=function(e,t){n.setState({avgLat:parseFloat(e),avgLng:parseFloat(t)})},n.lcoationRef=l.a.createRef(),n.state={activeNav:1,chartExample1Data:"data1",loading:!1,totalStaff:0,daftarRequest:[],daftarLeader:[],dataAbsen:[],late:[],avgLat:0,avgLng:0},window.Chart&&Object(se.parseOptions)($.a,Object(se.chartOptions)()),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDaftarAbsenByLevel2()}},{key:"componentDidUpdate",value:function(e,t){t.dataAbsen!==this.state.dataAbsen&&(console.log(this.state.dataAbsen),this.getCenterAverage(this.state.dataAbsen))}},{key:"render",value:function(){var e=this,t=this.state,a=(t.daftarRequest,t.loading);t.daftarLeader;return console.log(this.state.dataAbsen.concat(this.state.late)),l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,{className:"mt-5"},l.a.createElement(z.a,{className:"mb-5 mb-xl-0",xl:"12"},l.a.createElement(ee.a,{className:"shadow mb-5",ref:this.lcoationRef},this.state.loading?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Loading map..."):0===this.state.dataAbsen.concat(this.state.late).length?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Tidak ada data absen hari ini"):l.a.createElement(vt,{userPosition:this.state.dataAbsen,avgLat:this.state.avgLat,avgLng:this.state.avgLng,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyC5tj-2X6b7kwGTqGZkB7sofZdMhpyE75Q",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:"500px"},className:"map-canvas",id:"map-canvas"}),mapElement:l.a.createElement("div",{style:{height:"100%",borderRadius:"inherit"}})}))),l.a.createElement(z.a,{xl:"6"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h3",{className:"mb-0"},"Data absen hari ini")))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Absen masuk"))),l.a.createElement("tbody",null,a?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):this.state.dataAbsen.map<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},"No data found...")):this.state.dataAbsen.concat(this.state.late).map((function(t,a){return l.a.createElement("tr",{onClick:function(){e.setCenterMaps(t.get("latitude"),t.get("longitude")),e.scrollToMyRef()}},l.a.createElement("td",null,t.get("user").attributes.nik),l.a.createElement("td",null,t.get("user").attributes.fullname),l.a.createElement("td",null,void 0!==t.get("lateTimes")?l.a.createElement("div",null,l.a.createElement("span",{style:{color:"red"}},q(t.get("lateTimes"),"HH:mm"))):q(t.get("absenMasuk"),"HH:mm")))})))))))))}}]),a}(l.a.Component)),bt=(a(176),a(567).MarkerClusterer,Object(V.a)(Object(V.d)((function(){return{isOpen:!1,markerId:""}}),{onToggleOpen:function(e){var t=e.isOpen;e.markerId;return function(e){return{isOpen:!t,markerId:e}}}}),Z.withScriptjs,Z.withGoogleMap)((function(e){return l.a.createElement(Z.GoogleMap,{defaultZoom:12,defaultCenter:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},center:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},defaultOptions:{scrollwheel:!1}},e.userPosition.map((function(t){return l.a.createElement(Z.Marker,{onClick:function(){return e.onToggleOpen(t.id)},icon:{labelOrigin:new window.google.maps.Point(11,50),url:a(174)("./".concat(void 0===t.get("user").attributes.color?"red":t.get("user").attributes.color,"-dot.png")),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(11,40)},title:"".concat(t.get("fullname")," absen masuk: ").concat(void 0!==t.get("lateTimes")?q(t.get("lateTimes"),"HH:mm"):q(t.get("absenMasuk"),"HH:mm")),position:{lat:parseFloat(t.get("latitude")),lng:parseFloat(t.get("longitude"))},label:{text:ue(t.get("fullname")),fontWeight:"bold"}},e.markerId===t.id&&e.isOpen&&l.a.createElement(Z.InfoWindow,{onCloseClick:e.onToggleOpen},l.a.createElement("div",null,l.a.createElement("img",{src:t.get("selfieImage").url(),height:100,width:100,alt:"tidak Ada Gambar"}),l.a.createElement("br",null),l.a.createElement("br",null),void 0!==t.get("lateTimes")?l.a.createElement("p",null,"Terlambat"):"",l.a.createElement("p",null,"Absen masuk:"," ",l.a.createElement("span",{style:{color:void 0!==t.get("lateTimes")?"red":"blue"}},void 0!==t.get("lateTimes")?q(t.get("lateTimes"),"HH:mm"):q(t.get("absenMasuk"),"HH:mm"))))))})))})));[[{lat:-6.2407857,lng:106.854221},{lat:-6.2407857,lng:106.854221},{lat:-6.2407857,lng:106.854221},{lat:-6.2407857,lng:106.854221}],[{lat:-6.2607535,lng:106.8558205},{lat:-6.2428274,lng:106.8100491},{lat:-6.2328274,lng:106.8000491},{lat:-6.1903274,lng:106.7600491}]].map((function(e,t){console.log("lat",e[t].lat),console.log("long",e[t].lng)}));var yt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).queryAbsenByLevel=function(e,t){var a=new O.a.User,l=new O.a.Query(a);l.containedIn("roles",t),l.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()});var s=O.a.Object.extend("Absence"),r=new O.a.Query(s),o=new Date,i=new N.a(o);i.startOf("day");var c=new N.a(i);c.add(1,"day"),r.ascending("absenMasuk"),r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThan("createdAt",c.toDate()),r.matchesQuery("user",l),r.include("user"),r.find().then((function(e){console.log("user",e),n.setState({absence:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getDaftarAbsenByLevel2=function(){switch(n.setState({loading:!0}),C()){case"leader":n.queryAbsenByLevel("leaderIdNew",["staff"]);break;case"supervisor":n.queryAbsenByLevel("supervisorID",["staff","leader"]);break;case"manager":n.queryAbsenByLevel("managerID",["staff","leader","supervisor"]);break;case"head":n.queryAbsenByLevel("headID",["staff","leader","supervisor","manager"]);break;case"gm":n.queryAbsenByLevel("headID",["staff","leader","supervisor","manager","head"])}},n.getDaftarAbsenByLevel=function(){switch(n.setState({loading:!0}),C()){case"leader":var e=new O.a.User,t=new O.a.Query(e);t.containedIn("roles",["staff","Staff"]),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()});var a=O.a.Object.extend("Absence"),l=new O.a.Query(a),s=new Date,r=new N.a(s);r.startOf("day");var o=new N.a(r);o.add(1,"day"),l.ascending("absenMasuk"),l.greaterThanOrEqualTo("createdAt",r.toDate()),l.lessThan("createdAt",o.toDate()),l.matchesQuery("user",t),l.include("user"),l.find().then((function(e){console.log("user",e),n.setState({absence:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))}},n.getDataLate=function(){n.setState({loading:!0});var e=O.a.Object.extend("Late"),t=new O.a.Query(e),a=new Date,l=new N.a(a);l.startOf("day");var s=new N.a(l);s.add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.notContainedIn("roles",["admin","Admin","Leader","leader"]),t.greaterThanOrEqualTo("createdAt",l.toDate()),t.lessThan("createdAt",s.toDate()),t.include("user"),t.ascending("createdAt"),t.find().then((function(e){e.map((function(e){return e.select=!1})),console.log(e),n.setState({late:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getDaftarAbsen=function(){n.setState({loading:!0});var e=O.a.Object.extend("Absence"),t=(new(O.a.Object.extend("Leader")),new O.a.Query(e)),a=new Date,l=new N.a(a);l.startOf("day");var s=new N.a(l);s.add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.ascending("createdAt"),t.greaterThanOrEqualTo("createdAt",l.toDate()),t.lessThan("createdAt",s.toDate()),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("Late"),t.include("user"),t.find().then((function(e){console.log("user",e),n.setState({absence:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.handleToggleOpen=function(e,t){n.setState({isOpen:!0})},n.handleToggleClose=function(){n.setState({isOpen:!1})},n.getLocation=function(){n.state.locationArr.map((function(e,t){console.log(),console.log(e[0])}))},n.scrollToMyRef=function(){return window.scrollTo(0,n.lcoationRef.offsetTop)},n.getCenterAverage=function(e){var t=e.reduce((function(e,t){return e+parseFloat(t.get("latitude"))}),0),a=e.reduce((function(e,t){return e+parseFloat(t.get("longitude"))}),0);console.log(t+" "+a),n.setState({avgLat:t/e.length,avgLng:a/e.length})},n.state={locationArr:[[-6.2407535,106.8558205],[-6.2128274,106.8100491],[-6.2028274,106.8000491]],absence:[],late:[],loading:!1,isOpen:!1,avgLat:0,avgLng:0},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getLocation(),this.getDaftarAbsenByLevel2()}},{key:"componentDidUpdate",value:function(e,t){t.absence!==this.state.absence&&(console.log(this.state.absence),this.getCenterAverage(this.state.absence))}},{key:"render",value:function(){var e=this.state,t=(e.locationArr,e.absence),a=e.late;return l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow border-0 pl--5"},this.state.loading?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Loading map..."):t.concat(a).length<1?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Tidak ada data absen hari ini"):l.a.createElement(bt,{userPosition:this.state.absence,avgLat:this.state.avgLat,avgLng:this.state.avgLng,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyC5tj-2X6b7kwGTqGZkB7sofZdMhpyE75Q",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:"600px"},className:"map-canvas",id:"map-canvas"}),mapElement:l.a.createElement("div",{style:{height:"100%",borderRadius:"inherit"}})})))))}}]),a}(l.a.Component),St=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).toggleNavs=function(e,t){e.preventDefault(),n.setState({activeNav:t,chartExample1Data:"data1"===n.state.chartExample1Data?"data2":"data1"})},n.getDaftarStaff=function(){var e=new O.a.User,t=new O.a.Query(e);t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e})})).catch((function(e){alert(e.message)}))},n.queryStaffByLevel=function(e,t){var a=new O.a.User,l=new O.a.Query(a);l.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),l.containedIn("roles",t),l.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e})})).catch((function(e){alert(e.message)}))},n.getDaftarStaffByLevel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C();switch(e){case"leader":n.queryStaffByLevel("leaderIdNew",["staff"]);break;case"supervisor":n.queryStaffByLevel("supervisorID",["staff","leader"]);break;case"manager":n.queryStaffByLevel("managerID",["staff","leader","supervisor"]);break;case"head":n.queryStaffByLevel("headID",["staff","leader","supervisor","manager"]);break;case"gm":n.queryStaffByLevel("headID",["staff","leader","supervisor","manager","head"])}},n.queryAbsenByLevel=function(e,t){var a=new O.a.User,l=new O.a.Query(a);l.containedIn("roles",t),l.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()});var s=O.a.Object.extend("Absence"),r=new O.a.Query(s),o=new Date,i=new N.a(o);i.startOf("day");var c=new N.a(i);c.add(1,"day"),r.ascending("absenMasuk"),r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThan("createdAt",c.toDate()),r.matchesQuery("user",l),r.include("user"),r.find().then((function(e){console.log("user",e),n.setState({absence:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getDaftarAbsenByLevel2=function(){switch(n.setState({loading:!0}),C()){case"leader":n.queryAbsenByLevel("leaderIdNew",["staff"]);break;case"supervisor":n.queryAbsenByLevel("supervisorID",["staff","leader"]);break;case"manager":n.queryAbsenByLevel("managerID",["staff","leader","supervisor"]);break;case"head":n.queryAbsenByLevel("headID",["staff","leader","supervisor","manager"]);break;case"gm":n.queryAbsenByLevel("headID",["staff","leader","supervisor","manager","head"])}},n.getDaftarAbsenByLevel=function(){switch(n.setState({loading:!0}),C()){case"leader":var e=new O.a.User,t=new O.a.Query(e);t.containedIn("roles",["staff","Staff"]),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()});var a=O.a.Object.extend("Absence"),l=new O.a.Query(a),s=new Date,r=new N.a(s);r.startOf("day");var o=new N.a(r);o.add(1,"day"),l.ascending("absenMasuk"),l.greaterThanOrEqualTo("createdAt",r.toDate()),l.lessThan("createdAt",o.toDate()),l.matchesQuery("user",t),l.include("user"),l.find().then((function(e){console.log("user",e),n.setState({absence:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))}},n.getDaftarAbsen=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Absence"),t=new O.a.Query(e),a=new Date,l=new N.a(a);l.startOf("day");var s=new N.a(l);s.add(1,"day"),console.log("leaderid",L()),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.ascending("absenMasuk"),t.greaterThanOrEqualTo("createdAt",l.toDate()),t.lessThan("createdAt",s.toDate()),t.include("user"),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.find().then((function(e){console.log("user",e),n.setState({absence:e,loading:!1})})).catch((function(e){n.setState({loading:!1})}))},n.getDaftarAbsenLate=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Late"),t=new O.a.Query(e),a=new Date,l=new N.a(a);l.startOf("day");var s=new N.a(l);s.add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.ascending("createdAt"),t.greaterThanOrEqualTo("createdAt",l.toDate()),t.lessThan("createdAt",s.toDate()),t.include("user"),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.find().then((function(e){console.log("lateeee",e),n.setState({late:e,loading:!1})})).catch((function(e){n.setState({loading:!1})}))},n.state={activeNav:1,chartExample1Data:"data1",totalAbsen:0,totalTerlambat:0,totalIzin:0,totalSakit:0,totalOvertime:0,totalRequest:0,percentage:{},loading:!1,totalStaff:0,absence:[],daftarStaff:[],late:[]},window.Chart&&Object(se.parseOptions)($.a,Object(se.chartOptions)()),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDaftarAbsenByLevel2(),this.getDaftarStaffByLevel()}},{key:"render",value:function(){var e=this.state,t=e.absence,a=e.late,n=e.loading,s=e.daftarStaff;return console.log(t.concat(a)),l.a.createElement(l.a.Fragment,null,l.a.createElement(ft,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,{className:"mt-5"},l.a.createElement(z.a,{xl:"5"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h3",{className:"mb-0"},"Staff saya")),l.a.createElement("div",{className:"col text-right"},l.a.createElement(o.b,{to:"/leader/staff"},l.a.createElement(ae.a,{color:"primary",size:"sm"},"See all"))))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Sisa cuti"),l.a.createElement("th",{scope:"col"},"Email"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):s.length<1?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found..."):s.map((function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null,e.get("nik")),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,e.get("jumlahCuti")),l.a.createElement("td",null,e.get("email")))})))))),l.a.createElement(z.a,{className:"mb-5 mb-xl-0",xl:"7"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h3",{className:"mb-0"},"Data Absen")),l.a.createElement("div",{className:"col text-right"},l.a.createElement(o.b,{to:"/leader/data-absen"},l.a.createElement(ae.a,{color:"primary",size:"sm"},"See all"))))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Absen Masuk"),l.a.createElement("th",{scope:"col"},"Keterangan"),l.a.createElement("th",{scope:"col"},"Lokasi"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found..."):t.map((function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null,e.get("user").attributes.nik),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,void 0!==e.get("lateTimes")?"".concat(q(e.get("lateTimes"),"HH:mm")):void 0===e.get("absenMasuk")?"":q(e.get("absenMasuk"),"HH:mm")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":"green"}},void 0!==e.get("lateTimes")?"Terlambat":"Tepat Waktu"),l.a.createElement("td",null,l.a.createElement(o.b,{className:"mr-2",to:"/leader/maps/".concat(e.get("user").id)},l.a.createElement(ae.a,{id:"t4",color:"yellow",className:"btn-circle"},l.a.createElement("i",{className:"fa fa-eye"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t4"},"Lihat detail"))))}))))),t.length<10?l.a.createElement(ee.a,{className:"shadow mt-3"},l.a.createElement(yt,null)):"")),t.length>=10?l.a.createElement(ee.a,{className:"shadow mt-3"},l.a.createElement(yt,null)):""))}}]),a}(l.a.Component),kt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).queryStaffByLevel=function(e,t){var a=new O.a.User,l=new O.a.Query(a);l.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),l.ascending("roles"),l.containedIn("roles",t),l.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e})})).catch((function(e){alert(e.message)}))},n.getDaftarAbsenByLevel=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C();switch(n.setState({loading:!0}),e){case"leader":n.queryStaffByLevel("leaderIdNew",["staff"]);break;case"supervisor":n.queryStaffByLevel("supervisorID",["staff","leader"]);break;case"manager":n.queryStaffByLevel("managerID",["staff","leader","supervisor"]);break;case"head":n.queryStaffByLevel("headID",["staff","leader","supervisor","manager"]);break;case"gm":n.queryStaffByLevel("headID",["staff","leader","supervisor","manager","head"])}},n.state={daftarStaff:[],loading:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDaftarAbsenByLevel()}},{key:"getAbsenStaff",value:function(){var e=this,t=new O.a.User,a=new O.a.Query(t);a.equalTo("supervisorID",{__type:"Pointer",className:"_User",objectId:L()}),a.notContainedIn("roles",[C()]),a.find({useMasterKey:!0}).then((function(t){e.setState({daftarStaff:t})})).catch((function(e){alert(e.message)}))}},{key:"render",value:function(){var e=this.state.daftarStaff;return l.a.createElement(l.a.Fragment,null,l.a.createElement(fe,null),l.a.createElement(g.a,{className:"mt-2",fluid:!0},l.a.createElement(F.a,null,e.map((function(e){return l.a.createElement(z.a,{md:4,className:"mt-5"},l.a.createElement(ee.a,{className:"card-profile shadow"},l.a.createElement(F.a,{className:"justify-content-center"},l.a.createElement(z.a,{className:"order-lg-2",lg:"3"},l.a.createElement("div",{className:"card-profile-image"},l.a.createElement("a",{href:e.get("fotoWajah").url()},l.a.createElement("img",{alt:"...",style:{height:"150px",width:"150px"},className:"rounded-circle",src:e.get("fotoWajah").url()}))))),l.a.createElement(te.a,{className:"text-center border-0 pt-8 pt-md-4 pb-0 pb-md-4"}),l.a.createElement(re.a,{className:"pt-0 pt-md-4"},l.a.createElement("div",{className:"text-center mt-md-5"},l.a.createElement("h3",null,ue(e.get("fullname"))),l.a.createElement("h2",null,e.get("roles")),l.a.createElement("div",{className:"h5 font-weight-300"},l.a.createElement("i",{className:"ni location_pin mr-2"}),e.get("nik")),l.a.createElement("div",{className:"h5"},Ee.a.isEmpty(e.get("email"))?"-":e.get("email")),l.a.createElement(o.b,{to:"/leader/view-history/".concat(e.id)},l.a.createElement(ae.a,{outline:!0,color:"primary",size:"sm",className:""},l.a.createElement("i",{className:"ni ni-spaceship"})," View History")),l.a.createElement(o.b,{to:"/leader/exportexcelid/".concat(e.id)},l.a.createElement(ae.a,{outline:!0,color:"primary",size:"sm",className:"ml-1"},l.a.createElement("i",{className:"ni ni-single-copy-04"})," Report Data"))))))})))))}}]),a}(l.a.Component),jt=(l.a.Component,function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getdaftarStaff=function(){var e=new O.a.User,t=new O.a.Query(e);t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.equalTo("objectId","aKyuHcDwSe"),t.notContainedIn("roles",["admin","leader"]),t.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e})})).catch((function(e){alert(e.message)}))},n.getDaftarAbsen=function(){n.setState({loading:!0}),console.log("idds",n.props.startDateExcelFrom),console.log("iddss",n.props.status);var e="Data tidak ditemukan",t=O.a.Object.extend("Absence"),a=(new(O.a.Object.extend("Leader")),new O.a.Query(t));if(6===parseInt(n.props.status)){new Date;var l=new N.a(n.props.startDateExcelFrom);l.startOf("month");var s=new N.a(l);s.add(1,"month"),a.greaterThanOrEqualTo("absenMasuk",l.toDate()),a.lessThan("absenMasuk",s.toDate())}else if(5===parseInt(n.props.status)){new Date;var r=new N.a(n.props.startDateExcelFrom);r.startOf("week");var o=new N.a(r);o.add(1,"week"),a.greaterThanOrEqualTo("absenMasuk",r.toDate()),a.lessThan("absenMasuk",o.toDate())}else if(4===parseInt(n.props.status)){new Date;var i=new N.a(n.props.startDateExcelFrom);i.startOf("day");var c=new N.a(i);c.add(1,"day"),a.greaterThanOrEqualTo("absenMasuk",i.toDate()),a.lessThan("absenMasuk",c.toDate())}else{var m=new Date,u=new N.a(m);u.startOf("day"),new N.a(u).add(1,"day")}a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:n.props.userId}),a.descending("absenMasuk"),a.notContainedIn("roles",["admin","Admin","leader","Leader"]),a.include("user"),a.find().then((function(t){console.log("user",t),n.setState({data:t,loading:!1,employeeName:Ee.a.isEmpty(t)?e:t[0].get("fullname"),employeeID:Ee.a.isEmpty(t)?e:t[0].get("user").attributes.nik,employeeTitle:Ee.a.isEmpty(t)?e:t[0].get("user").attributes.level,employeeDepartment:Ee.a.isEmpty(t)?e:t[0].get("user").attributes.posisi})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getDaftarAbsenLate=function(){n.setState({loading:!0});var e=O.a.Object.extend("Late"),t=(new(O.a.Object.extend("Leader")),new O.a.Query(e)),a=new Date,l=new N.a(a);l.startOf("day"),new N.a(l).add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.equalTo("user",{__type:"Pointer",className:"_User",objectId:"aKyuHcDwSe"}),t.descending("time"),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("user"),t.find().then((function(e){console.log("user",e),n.setState({dataLate:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getDaftarOvertime=function(){n.setState({loading:!0});var e=O.a.Object.extend("Overtime"),t=(new(O.a.Object.extend("Leader")),new O.a.Query(e)),a=new Date,l=new N.a(a);l.startOf("day"),new N.a(l).add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.equalTo("user",{__type:"Pointer",className:"_User",objectId:"aKyuHcDwSe"}),t.descending("time"),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("user"),t.find().then((function(e){console.log("user",e),n.setState({dataOvertime:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getDaftarEarlyLeave=function(){n.setState({loading:!0});var e=O.a.Object.extend("EarlyLeave"),t=(new(O.a.Object.extend("Leader")),new O.a.Query(e)),a=new Date,l=new N.a(a);l.startOf("day"),new N.a(l).add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.equalTo("user",{__type:"Pointer",className:"_User",objectId:"aKyuHcDwSe"}),t.descending("time"),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("user"),t.find().then((function(e){console.log("user",e),n.setState({dataEarlyLeave:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.subtractHourLate=function(e,t,a){var n;return"Late"===a&&t>e&&(n=t-e),"Overtime"===a&&t>e&&(n=t-e),"EarlyLeave"===a&&t<e&&(n=e-t),n},n.subtractHour=function(e,t,a,n){var l;return"earlyDeparture"===a&&("Hours"===n&&(l=Math.floor((e-parseInt(t))/6e4/60)),"Minutes"===n&&(l=(e-parseInt(t))/6e4)),console.log("working hours",typeof e),console.log("attendance",typeof t),console.log("result",l),l},n.state={data:[],daftarStaff:[],dataLate:[],dataOvertime:[],dataEarlyLeave:[],loading:!1,employeeName:"",employeeID:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDaftarAbsen(),this.getdaftarStaff(),this.getDaftarAbsenLate(),this.getDaftarOvertime(),this.getDaftarEarlyLeave()}},{key:"render",value:function(){var e=this.state,t=e.data,a=(e.daftarStaff,e.loading);e.dataLate,e.dataOvertime,e.dataEarlyLeave;return l.a.createElement("div",null,l.a.createElement(ne.a,{className:"align-items-center table-flush",id:this.props.table,responsive:!0,hidden:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Fingerprint ID"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeID))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Name"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeName))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Title"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeTitle))),l.a.createElement("thead",{className:"border-0 mb-2"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Department Title"),l.a.createElement("th",{scope:"col",className:"mb-2",style:{border:"none"}},this.state.employeeDepartment))),l.a.createElement("thead",{className:"thead-light",style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",rowSpan:"2"},"Day"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Date"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Working Hour"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty On"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty Off"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Late In"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Early Derparture"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Over Time"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Total Hour"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Notes")),l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"))),l.a.createElement("tbody",{style:{textAlign:"center"}},a?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):t.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found...")):t.map((function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null,q(e.get("createdAt"),"ddd")),l.a.createElement("td",null,q(e.get("createdAt"),"DD/MM/YYYY")),l.a.createElement("td",null,"".concat(e.get("user").attributes.jamMasuk<10?"0":"").concat(e.get("user").attributes.jamMasuk,":00")+" - "+"".concat(e.get("user").attributes.jamKeluar,":00")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"k"):q(e.get("absenMasuk"),"k")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"m"):q(e.get("absenMasuk"),"m")),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"k"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"k"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"m"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"k"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"m"):""),l.a.createElement("td",null,void 0===e.get("lateTimes")?"":N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),l.a.createElement("td",null,void 0===e.get("lateTimes")?"":N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("earlyTimes")?"":N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",null,void 0===e.get("earlyTimes")?"":N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("overtimeIn")&&void 0===e.get("overtimeOut")?"":N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration(q(e.get("overtimeIn"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",null,void 0===e.get("overtimeIn")&&void 0===e.get("overtimeOut")?"":N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration(q(e.get("overtimeIn"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",null,N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0!==e.get("overtimeIn")&&void 0!==e.get("overtimeOut")?"Work-Over Time":"Working Hour"))})),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"7"},"Total"),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null)))))}}]),a}(n.Component)),Mt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).queryAbsenByLevel=function(e,t){var a,l,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"today",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"day",o=O.a.Object.extend("Absence"),i=new O.a.Query(o),c=new O.a.User,m=new O.a.Query(c);if("today"!==s){new Date;(a=new N.a(s)).startOf(r),(l=new N.a(a)).add(1,r)}else{var u=new Date;(a=new N.a(u)).startOf(r),(l=new N.a(a)).add(1,r)}m.containedIn("roles",t),m.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),i.ascending("absenMasuk"),i.greaterThanOrEqualTo("absenMasuk",a.toDate()),i.lessThan("absenMasuk",l.toDate()),i.matchesQuery("user",m),i.include("user"),i.find().then((function(e){console.log("user",e),n.setState({absence:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getDaftarAbsenByLevel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"today",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day";switch(n.setState({loading:!0}),t){case"leader":n.queryAbsenByLevel("leaderIdNew",["staff"],e,a);break;case"supervisor":n.queryAbsenByLevel("supervisorID",["staff","leader"],e,a);break;case"manager":n.queryAbsenByLevel("managerID",["staff","leader","supervisor"],e,a);break;case"head":n.queryAbsenByLevel("headID",["staff","leader","supervisor","manager"],e,a);break;case"gm":n.queryAbsenByLevel("headID",["staff","leader","supervisor","manager","head"],e,a)}},n.handleFilter=function(e){e.preventDefault(),n.setState({loading:!0});var t=O.a.Object.extend("Absence");new O.a.Query(t);4===parseInt(n.state.status)?n.getDaftarAbsenByLevel(n.state.startDate,C(),"day"):5===parseInt(n.state.status)?n.getDaftarAbsenByLevel(n.state.startDate,C(),"week"):6===parseInt(n.state.status)&&n.getDaftarAbsenByLevel(n.state.startDate,C(),"month")},n.getDaftarAbsen=function(){n.setState({loading:!0});var e=O.a.Object.extend("Absence"),t=(new(O.a.Object.extend("Leader")),new O.a.Query(e)),a=new Date,l=new N.a(a);l.startOf("day");var s=new N.a(l);s.add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.ascending("absenMasuk"),t.greaterThanOrEqualTo("createdAt",l.toDate()),t.lessThan("createdAt",s.toDate()),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("user"),t.find().then((function(e){console.log("user",e),n.setState({absence:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.state={absence:[],loading:!1,startDate:"",hitButtonExcel:!1},n.btnRef=l.a.createRef(),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDaftarAbsenByLevel()}},{key:"render",value:function(){var e=this,t=this.state,a=t.absence,n=t.loading,s=t.startDate;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Absen hari ini"),l.a.createElement(h.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",required:!0,onChange:function(t){e.setState({status:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Date Picker Here",required:""===this.state.startDate,readOnly:""!==this.state.startDate},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:s,onChange:function(t){e.setState({startDate:t.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement(ae.a,{className:"my-4",color:"primary",type:"submit",disabled:n},n?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search"))))),l.a.createElement(ne.a,{className:"align-items-center table-flush",id:"ekspor",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Absen Masuk"),l.a.createElement("th",{scope:"col"},"Absen Keluar"))),l.a.createElement("tbody",null,n?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):a.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found...")):a.map((function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null,e.get("user").attributes.nik),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,void 0===e.get("absenMasuk")?"":q(e.get("absenMasuk"),"DD/MM/YYYY HH:mm:ss")),l.a.createElement("td",null,void 0===e.get("absenKeluar")?"":q(e.get("absenKeluar"),"DD/MM/YYYY HH:mm:ss")))})))))))))}}]),a}(l.a.Component),wt=a(11),Tt=(l.a.Component,function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).handleShow=function(){e.setState({show:!0}),setTimeout((function(){e.setState({show:!1})}),300)},e}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Me.a,{color:this.props.alert,fade:!1,show:this.handleShow},l.a.createElement("span",{className:"alert-inner--icon"},l.a.createElement("i",{className:this.props.icon}))," ",l.a.createElement("span",{className:"alert-inner--text"},l.a.createElement("strong",null,this.props.alert," !")," ",this.props.message)))}}]),a}(l.a.Component)),Ht=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getData=function(){n.setState({loading:!0});var e=O.a.Object.extend("Izin"),t=new O.a.Query(e),a=new Date,l=new N.a(a);l.startOf("day"),new N.a(l).add(1,"day"),t.include("user"),t.greaterThanOrEqualTo("createdAt",l.toDate()),t.equalTo("statusIzin",2),t.equalTo("status",3),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.notContainedIn("roles",["admin","Admin","Leader","leader"]),t.descending("createdAt"),t.find().then((function(e){e.map((function(e){return e.select=!1})),n.setState({cuti:e,loading:!1})})).catch((function(e){var t=e.message;n.setState({loading:!1}),alert(t)}))},n.getTotalIzin=function(){n.setState({loading:!0});var e=O.a.Object.extend("Izin"),t=new O.a.Query(e),a=new Date,l=new N.a(a);l.startOf("day"),new N.a(l).add(1,"day"),t.include("user"),t.equalTo("statusIzin",1),t.greaterThanOrEqualTo("createdAt",l.toDate()),t.equalTo("status",3),t.descending("createdAt"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.notContainedIn("roles",["admin","Admin","Leader","leader"]),t.find().then((function(e){e.map((function(e){return e.select=!1})),n.setState({cuti:e,loading:!1})})).catch((function(e){var t=e.message;n.setState({loading:!1}),alert(t),window.location.reload(!1)}))},n.queryLateByLevel=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"today",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"day",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.state.status,r=new O.a.Object.extend("Izin"),o=new O.a.Query(r),i=new O.a.User,c=new O.a.Query(i);if(o.equalTo("statusIzin",2),4===parseInt(n.state.statusWaktu)){new Date;var m=new N.a(n.state.startDate);m.startOf("day");var u=new N.a(m);u.add(1,"day"),o.greaterThanOrEqualTo("createdAt",m.toDate()),o.lessThan("createdAt",u.toDate())}if(5===parseInt(n.state.statusWaktu)){new Date;var d=new N.a(n.state.startDate);d.startOf("week");var g=new N.a(d);g.add(1,"week"),o.greaterThanOrEqualTo("createdAt",d.toDate()),o.lessThan("createdAt",g.toDate())}if(6===parseInt(n.state.statusWaktu)){new Date;var p=new N.a(n.state.startDate);p.startOf("month");var h=new N.a(p);h.add(1,"month"),o.greaterThanOrEqualTo("createdAt",p.toDate()),o.lessThan("createdAt",h.toDate())}if(3===parseInt(n.state.status)||3===s)if("today"!==a);else if("today"===a){var f=new Date,v=new N.a(f);v.startOf(l);var E=new N.a(v);E.add(1,l),o.greaterThanOrEqualTo("createdAt",v.toDate()),o.lessThan("createdAt",E.toDate())}1!==parseInt(n.state.status)&&0!==parseInt(n.state.status)||o.descending("updatedAt"),c.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),c.containedIn("roles",t),o.equalTo("status",s),o.matchesQuery("user",c),o.include("user"),o.find().then((function(e){e.map((function(e){return e.select=!1})),console.log(e),n.setState({cuti:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getDataByLevel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"today",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.state.status;switch(t){case"leader":n.queryLateByLevel("leaderIdNew",["staff"],e,a,l);break;case"supervisor":n.queryLateByLevel("supervisorID",["staff","leader"],e,a,l);break;case"manager":n.queryLateByLevel("managerID",["staff","leader","supervisor"],e,a,l);break;case"head":n.queryLateByLevel("headID",["staff","leader","supervisor","manager"],e,a,l);break;case"gm":n.queryLateByLevel("headID",["staff","leader","supervisor","manager","head"],e,a,l)}},n.handleFilter=function(e){e.preventDefault(),n.setState({loading:!0}),n.getDataByLevel(n.state.startDate,C(),"fox",parseInt(n.state.status))},n.getHariCuti=function(){n.setState({loading:!0});var e=O.a.Object.extend("HariCuti");new O.a.Query(e).find().then((function(e){e.map((function(e){return e.select=!1})),n.setState({hariCuti:e,loading:!1})})).catch((function(e){var t=e.message;n.setState({loading:!1}),alert(t)}))},n.handleFilter2=function(e){e.preventDefault(),n.setState({loading:!0});var t=O.a.Object.extend("Izin"),a=new O.a.Query(t);if(4===parseInt(n.state.statusWaktu)){new Date;var l=new N.a(n.state.startDate);l.startOf("day");var s=new N.a(l);s.add(1,"day"),a.greaterThanOrEqualTo("createdAt",l.toDate()),a.lessThan("createdAt",s.toDate())}else if(5===parseInt(n.state.statusWaktu)){new Date;var r=new N.a(n.state.startDate);r.startOf("week");var o=new N.a(r);o.add(1,"week"),a.greaterThanOrEqualTo("createdAt",r.toDate()),a.lessThan("createdAt",o.toDate())}else if(6===parseInt(n.state.statusWaktu)){new Date;var i=new N.a(n.state.startDate);i.startOf("month");var c=new N.a(i);c.add(1,"month"),a.greaterThanOrEqualTo("createdAt",i.toDate()),a.lessThan("createdAt",c.toDate())}1!==parseInt(n.state.status)&&0!==parseInt(n.state.status)||a.descending("updatedAt"),3===parseInt(n.state.status)&&a.descending("createdAt"),a.include("user"),a.equalTo("statusIzin",2),a.equalTo("status",parseInt(n.state.status)),a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),a.notContainedIn("roles",["admin","Admin","Leader","leader"]),a.find().then((function(e){e.map((function(e){return e.select=!1})),n.setState({cuti:e,loading:!1})})).catch((function(e){var t=e.message;n.setState({loading:!1}),alert(t)}))},n.closeLoading=function(){n.setState({loadingModal:!1})},n.countDays=function(e,t){var a=q(e,"YYYY/MM/DD"),n=q(t,"YYYY/MM/DD");e=N()(a);return(t=N()(n)).diff(e,"days")+1},n.handleApproval=function(e,t){console.log(n.state.user),console.log(n.state.userId),e.preventDefault(),n.setState({loadingModal:!0});var a=O.a.Object.extend("Izin"),l=new O.a.Query(a),s=q(n.state.fromm,"YYYY/MM/DD"),r=q(n.state.too,"YYYY/MM/DD"),o=N()(s),i=N()(r).diff(o,"days");l.get(n.state.userId).then((function(e){var a=new O.a.User;new O.a.Query(a).get(n.state.user).then((function(a){console.log("leaderId",n.state.userId),console.log("userId",n.state.user);var l=parseInt(a.get("jumlahCuti"));console.log("jumlah Cuti",l),console.log("jumlah hari",parseInt(i)),0!==a.get("jumlahCuti")?l<i?n.setState({loadingModal:!1,messageApprove:"Kouta Cuti Tidak Mencukupi"}):(e.set("status",t?1:0),t||e.set("alasanReject",n.state.reason),e.save().then((function(){console.log(t),t?(console.log("Libur Nasional",n.getLiburNasional(e.get("dari"),e.get("sampai"),n.state.hariCuti)),a.set("jumlahCuti",parseInt(l)-parseInt(n.getLiburNasional(e.get("dari"),e.get("sampai"),n.state.hariCuti)))):a.set("jumlahCuti",parseInt(l)-0),a.save(null,{useMasterKey:!0}).then((function(){var e=Object(Oe.a)(n.state.cuti);e.splice(n.state.userIndex,1),n.setState({counter:n.state.counter+1,cuti:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1,alerts:1,messageApprove:t?"approve":"reject"})}))})).catch((function(e){alert(e.message),n.closeLoading()}))):n.setState({loadingModal:!1,messageApprove:"Sisa Cuti Anda Telah Habis"})}))})).catch((function(e){alert(e.message),n.closeLoading()}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.handleAllCheck=function(e){var t=n.state.cuti,a=[];t.map((function(t){return t.select=e.target.checked,t.select?a.push(t.id):a=[],t})),n.setState({cuti:t,checkId:a},(function(){return console.log(n.state.checkId)}))},n.handleChildCheck=function(e){var t=n.state.cuti,a=n.state.checkId,l=e.target.value;t.map((function(t){if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)n.setState((function(e){return{checkId:[].concat(Object(Oe.a)(n.state.checkId),[l])}}),(function(){return console.log(n.state.checkId)}));else{var s=a.indexOf(l);s>-1&&(a.splice(s,1),n.setState((function(e){return{checkId:a}}),(function(){return console.log(n.state.checkId)})))}})),n.setState({cuti:t})},n.handleApproveAll=function(e){n.setState({loading:!0});var t=O.a.Object.extend("Izin");new O.a.Query(t).get(e).then((function(e){e.set("status",1),e.save().then((function(){var e=Object(Oe.a)(n.state.cuti);e.splice(n.state.userIndex,1),n.setState({cuti:e,approvalMode:!1,loading:!1})}))}))},n.handleRejectAll=function(e){n.setState({loading:!0});var t=O.a.Object.extend("Overtime");new O.a.Query(t).get(e).then((function(e){e.set("status",0),e.save().then((function(){var e=Object(Oe.a)(n.state.cuti);e.splice(n.state.userIndex,1),n.setState({cuti:e,rejectMode:!1,loading:!1})}))}))},n.approveChecked=function(e){n.setState({loadingModal:!0});var t=n.state.checkId,a=0;t.map((function(e){var l=O.a.Object.extend("Izin"),s=new O.a.Query(l);s.include("user"),s.get(e).then((function(e){var l=e.get("user").id,s=e.get("dari"),r=e.get("sampai"),o=q(s,"YYYY/MM/DD"),i=q(r,"YYYY/MM/DD"),c=N()(o),m=N()(i).diff(c,"days");e.set("status",1),e.save().then((function(){var s=new O.a.User;new O.a.Query(s).get(l).then((function(l){var s=l.get("jumlahCuti");console.log("sisa",parseInt(s)-parseInt(m)),l.set("jumlahCuti",parseInt(s)-n.getLiburNasional(e.get("dari"),e.get("sampai"),n.state.hariCuti)),l.save(null,{useMasterKey:!0}).then((function(){if((a+=1)===t.length)return n.setState({loadingModal:!1}),n.setState({messageApprove:"Approve "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)}))}))}))}))}))},n.rejectChecked=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state.checkId,a=0;t.map((function(e){var l=O.a.Object.extend("Izin");new O.a.Query(l).get(e).then((function(e){e.set("status",1),e.save().then((function(){if((a+=1)===t.length)return n.setState({messageApprove:"Reject "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)}))}))}))},n.getDatesBetweenDates=function(e,t){for(var a=[],n=N()(e),l=N()(t);n<=l;)a.push(N()(n).format("YYYY-MM-DD")),n=N()(n).add(1,"days");return a},n.getLiburNasional=function(e,t,a){var l,s,r=0;return s=n.getDatesBetweenDates(e,t),console.log("dates",s.length),a.map((function(e,t){for(var a=0;a<=s.length;a++)s[a]===q(e.get("hariCuti"),"YYYY-MM-DD")?r+=1:r+=0,console.log("jumlah Libur libur",r)})),l=r>0?s.length-r:s.length,r=0,l},n.state={cuti:[],hariCuti:[],loading:!1,rejectMode:!1,approvalMode:!1,approveAllMode:!1,rejectAllMode:!1,fullnames:"",loadingModal:!1,userIndex:0,minus:!1,counter:0,userId:"",startDate:"",reason:"",checkId:[],messageApprove:"",alerts:2},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDataByLevel(),this.getHariCuti()}},{key:"render",value:function(){var e=this,t=this.state,a=t.cuti,n=(t.hariCuti,t.minus,t.rejectAllMode),s=t.approveAllMode,r=t.loading,o=t.loadingModal,i=t.approvalMode,c=t.rejectMode,m=t.fullnames,u=t.startDate,d=t.counter;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,{cuti:d}),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-2"},"Request cuti"),2===parseInt(this.state.alerts)?"":l.a.createElement(Tt,{show:!0,icon:"ni ni-like-2",alert:"success",message:"Berhasil ".concat(this.state.messageApprove)}),l.a.createElement(h.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",required:!0,onChange:function(t){e.setState({status:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Kategori"),[3,1,0].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",onChange:function(t){e.setState({statusWaktu:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Date Picker Here",required:!0,readOnly:!0},viewMode:6===parseInt(this.state.statusWaktu)?"months":"days",dateFormat:6===parseInt(this.state.statusWaktu)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,value:u,onChange:function(t){e.setState({startDate:t.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement(ae.a,{className:"my-4",color:"primary",type:"submit",disabled:r},r?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),0===a.length||0===this.state.checkId.length?"":l.a.createElement(z.a,{sm:{span:0},className:"float-none"},l.a.createElement(ae.a,{color:"primary",size:"sm",type:"submit",disable:r?"true":"false",className:"mr-2 m-1",onClick:function(){return e.setState({approveAllMode:!0})}},l.a.createElement("i",{className:"fa fa-check"})," ",r?"Fetching...":"Approve"),l.a.createElement(ae.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:r?"true":"false",onClick:function(){return e.setState({rejectAllMode:!0})}},l.a.createElement("i",{className:"fa fa-times"})," ",r?"Fetching...":"Reject"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,1===parseInt(this.state.status)||0===parseInt(this.state.status)?l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck,disabled:"true"})):l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck})),l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Alasan"),l.a.createElement("th",{scope:"col"},"Tanggal Request"),l.a.createElement("th",{scope:"col"},"Dari"),l.a.createElement("th",{scope:"col"},"Sampai"),l.a.createElement("th",{scope:"col"},"Jumlah Hari"),l.a.createElement("th",{scope:"col"},"Sisa Cuti"),l.a.createElement("th",{scope:"col"},"Keterangan"),l.a.createElement("th",{scope:"col"},"Approve"))),l.a.createElement("tbody",null,r?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:9,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):a.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:9,style:{textAlign:"center"}},"No data found...")):a.map((function(t,a){return l.a.createElement("tr",null,1===t.get("status")||0===t.get("status")?l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",disabled:"true",style:{color:"red"}})):l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",value:t.id,checked:t.select,onChange:e.handleChildCheck})),l.a.createElement("td",null,t.get("user").attributes.nik),l.a.createElement("td",null,t.get("fullname")),l.a.createElement("td",null,t.get("alasanIzin")),l.a.createElement("td",null,q(t.get("createdAt"),"DD/MM/YYYY")),l.a.createElement("td",null,q(t.get("dari"),"DD/MM/YYYY")),l.a.createElement("td",null,q(t.get("sampai"),"DD/MM/YYYY")),l.a.createElement("td",null,e.countDays(t.get("dari"),t.get("sampai"))," ","Hari"),l.a.createElement("td",null,t.get("user").attributes.jumlahCuti," Hari"),l.a.createElement("td",null,t.get("descIzin")),1===t.get("status")?l.a.createElement("td",null,"Approved"):0===t.get("status")?l.a.createElement("td",null,"Rejected"):l.a.createElement("td",null,l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(){e.setState({approvalMode:!0,userId:t.id,user:t.get("user").id,fromm:t.get("dari"),too:t.get("sampai"),userIndex:a,fullnames:t.get("fullname")})}},l.a.createElement("i",{className:"fa fa-check"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Approve"),l.a.createElement(ae.a,{id:"t2",color:"danger",className:"btn-circle",onClick:function(n){e.setState({rejectMode:!0,userId:t.id,user:t.get("user").id,fromm:t.get("dari"),too:t.get("sampai"),userIndex:a,fullnames:t.get("fullname")})}},l.a.createElement("i",{className:"fa fa-times"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t2"},"Reject")))})))))))),l.a.createElement(Ce,{show:i,loading:o,footer:!0,handleHide:function(){return e.toggle("approvalMode")},title:"Approval Confirmation",body:"Approve cuti ".concat(m," ?"),handleSubmit:function(t){return e.handleApproval(t,!0)}}),l.a.createElement(Ce,{show:c,loading:o,handleHide:function(){return e.toggle("rejectMode")},title:"Reject Confirmation",footer:!1,body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject cuti ".concat(m," ?")),l.a.createElement(h.a,{onSubmit:function(t){return e.handleApproval(t,!1)}},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},o?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleApproval(t,!1)}}),l.a.createElement(Ce,{show:s,loading:o,footer:!0,handleHide:function(){return e.toggle("approveAllMode")},title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve cuti ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(Ce,{show:n,loading:o,footer:!1,handleHide:function(){return e.toggle("rejectAllMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject cuti ".concat(this.state.checkId.length," data ?")),l.a.createElement(h.a,{onSubmit:function(t){return e.rejectChecked(t)}},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectAllMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},o?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}]),a}(l.a.Component),Ot=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getTotalIzin=function(){n.setState({loading:!0});var e=O.a.Object.extend("Izin"),t=new O.a.Query(e),a=new Date,l=new N.a(a);l.startOf("day"),new N.a(l).add(1,"day"),t.include("user"),t.equalTo("statusIzin",1),t.greaterThanOrEqualTo("createdAt",l.toDate()),t.equalTo("status",3),t.descending("createdAt"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.notContainedIn("roles",["admin","Admin","Leader","leader"]),t.find().then((function(e){e.map((function(e){return e.select=!1})),n.setState({izin:e,loading:!1})})).catch((function(e){var t=e.message;n.setState({loading:!1}),alert(t),window.location.reload(!1)}))},n.queryLateByLevel=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"today",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"day",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.state.status,r=new O.a.Object.extend("Izin"),o=new O.a.Query(r),i=new O.a.User,c=new O.a.Query(i);if(o.equalTo("statusIzin",1),4===parseInt(n.state.statusWaktu)){new Date;var m=new N.a(n.state.startDate);m.startOf("day");var u=new N.a(m);u.add(1,"day"),o.greaterThanOrEqualTo("createdAt",m.toDate()),o.lessThan("createdAt",u.toDate())}if(5===parseInt(n.state.statusWaktu)){new Date;var d=new N.a(n.state.startDate);d.startOf("week");var g=new N.a(d);g.add(1,"week"),o.greaterThanOrEqualTo("createdAt",d.toDate()),o.lessThan("createdAt",g.toDate())}if(6===parseInt(n.state.statusWaktu)){new Date;var p=new N.a(n.state.startDate);p.startOf("month");var h=new N.a(p);h.add(1,"month"),o.greaterThanOrEqualTo("createdAt",p.toDate()),o.lessThan("createdAt",h.toDate())}if(3===parseInt(n.state.status)||3===s)if("today"!==a);else if("today"===a){var f=new Date,v=new N.a(f);v.startOf(l);var E=new N.a(v);E.add(1,l),o.greaterThanOrEqualTo("createdAt",v.toDate()),o.lessThan("createdAt",E.toDate())}1!==parseInt(n.state.status)&&0!==parseInt(n.state.status)||o.descending("updatedAt"),c.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),c.containedIn("roles",t),o.equalTo("status",s),o.matchesQuery("user",c),o.include("user"),o.find().then((function(e){e.map((function(e){return e.select=!1})),console.log(e),n.setState({izin:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getDataByLevel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"today",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.state.status;switch(t){case"leader":n.queryLateByLevel("leaderIdNew",["staff"],e,a,l);break;case"supervisor":n.queryLateByLevel("supervisorID",["staff","leader"],e,a,l);break;case"manager":n.queryLateByLevel("managerID",["staff","leader","supervisor"],e,a,l);break;case"head":n.queryLateByLevel("headID",["staff","leader","supervisor","manager"],e,a,l);break;case"gm":n.queryLateByLevel("headID",["staff","leader","supervisor","manager","head"],e,a,l)}},n.handleFilter=function(e){e.preventDefault(),n.setState({loading:!0}),n.getDataByLevel(n.state.startDate,C(),"fox",parseInt(n.state.status))},n.closeLoading=function(){n.setState({loadingModal:!1})},n.handleApproval=function(e,t){e.preventDefault(),n.setState({loadingModal:!0});var a=O.a.Object.extend("Izin"),l=new O.a.Query(a),s=new O.a.Query(O.a.Installation);l.get(n.state.userId).then((function(e){e.set("status",t?1:0),t||e.set("alasanReject",n.state.reason),e.save().then((function(){s.equalTo("deviceType","android"),O.a.Push.send({where:s,data:{alert:"Info Approval"}});var e=Object(Oe.a)(n.state.izin);e.splice(n.state.userIndex,1),n.setState({counter:n.state.counter+1,izin:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1,alerts:1,messageApprove:t?"approve":"reject"})})).catch((function(e){alert(e.message),n.closeLoading()}))})).catch((function(e){alert(e.message),n.closeLoading()}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.handleAllCheck=function(e){var t=n.state.izin,a=[];t.map((function(t){return t.select=e.target.checked,t.select?a.push(t.id):a=[],t})),n.setState({izin:t,checkId:a},(function(){return console.log(n.state.checkId)}))},n.handleChildCheck=function(e){var t=n.state.izin,a=n.state.checkId,l=e.target.value;t.map((function(t){if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)n.setState((function(e){return{checkId:[].concat(Object(Oe.a)(n.state.checkId),[l])}}),(function(){return console.log(n.state.checkId)}));else{var s=a.indexOf(l);s>-1&&(a.splice(s,1),n.setState((function(e){return{checkId:a}}),(function(){return console.log(n.state.checkId)})))}})),n.setState({izin:t})},n.handleApproveAll=function(e){n.setState({loading:!0});var t=O.a.Object.extend("Izin");new O.a.Query(t).get(e).then((function(e){e.set("status",1),e.save().then((function(){var e=Object(Oe.a)(n.state.izin);e.splice(n.state.userIndex,1),n.setState({izin:e,counter:n.state.counter+1,approvalMode:!1,loading:!1})}))}))},n.handleRejectAll=function(e){n.setState({loading:!0});var t=O.a.Object.extend("Izin");new O.a.Query(t).get(e).then((function(e){e.set("status",0),e.set("alasanReject",n.state.reason),e.save().then((function(){var e=Object(Oe.a)(n.state.izin);e.splice(n.state.userIndex,1),n.setState({counter:n.state.counter+1,izin:e})}))}))},n.approveChecked=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state.checkId,a=0;t.map((function(e){var l=O.a.Object.extend("Izin");new O.a.Query(l).get(e).then((function(e){e.set("status",1),e.save().then((function(){if((a+=1)===t.length)return n.setState({messageApprove:"Approve "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)}))}))})),n.setState({loadingModal:!1})},n.rejectChecked=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state.checkId,a=0;t.map((function(e){var l=O.a.Object.extend("Izin");new O.a.Query(l).get(e).then((function(e){e.set("status",0),e.set("alasanReject",n.state.reason),e.save().then((function(){if((a+=1)===t.length)return n.setState({messageApprove:"Reject "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)}))}))}))},n.state={izin:[],loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],approveAllMode:!1,rejectAllMode:!1,deleteCounter:0,startDate:"",lampiran:"",alerts:2,messageApprove:"",photoMode:!1,status:3},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDataByLevel()}},{key:"render",value:function(){var e=this,t=this.state,a=t.izin,n=t.loading,s=t.approvalMode,r=t.rejectMode,o=t.loadingModal,i=t.fullnames,c=t.counter,m=t.startDate,u=t.approveAllMode,d=t.rejectAllMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,{izin:c}),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-2"},"Request izin"),2===parseInt(this.state.alerts)?"":l.a.createElement(Tt,{show:!0,icon:"ni ni-like-2",alert:"success",message:"Berhasil ".concat(this.state.messageApprove)}),l.a.createElement(h.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",required:!0,onChange:function(t){e.setState({status:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Kategori"),[3,1,0].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",onChange:function(t){e.setState({statusWaktu:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Date Picker Here",required:!0,readOnly:!0},viewMode:6===parseInt(this.state.statusWaktu)?"months":"days",dateFormat:6===parseInt(this.state.statusWaktu)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,value:m,onChange:function(t){e.setState({startDate:t.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement(ae.a,{className:"my-4",color:"primary",type:"submit",disabled:n},n?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),0===a.length||0===this.state.checkId.length?"":l.a.createElement(z.a,{sm:{span:0},className:"float-none"},l.a.createElement(ae.a,{color:"primary",size:"sm",type:"submit",disable:n?"true":"false",className:"mr-2 m-1",onClick:function(){return e.setState({approveAllMode:!0})}},l.a.createElement("i",{className:"fa fa-check"})," ",n?"Fetching...":"Approve"),l.a.createElement(ae.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:n?"true":"false",onClick:function(){return e.setState({rejectAllMode:!0})}},l.a.createElement("i",{className:"fa fa-times"})," ",n?"Fetching...":"Reject"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,0===parseInt(this.state.status)||1===parseInt(this.state.status)?l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck,disabled:"true"})):l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck})),l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Alasan"),l.a.createElement("th",{scope:"col"},"Tanggal Request"),l.a.createElement("th",{scope:"col"},"Dari"),l.a.createElement("th",{scope:"col"},"Sampai"),l.a.createElement("th",{scope:"col"},"Keterangan"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,3===t.get("status")?l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",value:t.id,checked:t.select,onChange:e.handleChildCheck})):l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",disabled:"true"})),l.a.createElement("td",null,t.get("user").attributes.nik),l.a.createElement("td",null,t.get("fullname")),l.a.createElement("td",null,t.get("alasanIzin")),l.a.createElement("td",null,q(t.get("createdAt"),"DD/MM/YYYY")),l.a.createElement("td",null,void 0==t.get("dari")?"-":q(t.get("dari"),"DD/MM/YYYY")),l.a.createElement("td",null,void 0==t.get("sampai")?"-":q(t.get("sampai"),"DD/MM/YYYY")),l.a.createElement("td",null,t.get("descIzin")),1===t.get("status")?l.a.createElement("td",null,"Approved"):0===t.get("status")?l.a.createElement("td",null,"Rejected"):l.a.createElement("td",null,void 0==t.attributes.attachFile?"":l.a.createElement(ae.a,{id:"t13",color:"warning",className:"btn-circle",onClick:function(){e.setState({photoMode:!0,lampiran:t.attributes.attachFile.url()})}},l.a.createElement("i",{className:"fa fa-eye"})),l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(){e.setState({approvalMode:!0,userId:t.id,userIndex:a,fullnames:t.get("fullname")})}},l.a.createElement("i",{className:"fa fa-check"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Approve"),l.a.createElement(ae.a,{id:"t2",className:"btn-circle btn-danger",onClick:function(n){e.setState({rejectMode:!0,userId:t.id,userIndex:a,fullnames:t.get("fullname")})}},l.a.createElement("i",{className:"fa fa-times"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t2"},"Reject")))})))))))),l.a.createElement(Ce,{show:s,loading:o,footer:!0,handleHide:function(){return e.toggle("approvalMode")},title:"Approval Confirmation",body:"Approve izin ".concat(i," ?"),handleSubmit:function(t){return e.handleApproval(t,!0)}}),l.a.createElement(Ce,{show:r,loading:o,footer:!1,handleHide:function(){return e.toggle("rejectMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject izin ".concat(i," ?")),l.a.createElement(h.a,{onSubmit:function(t){return e.handleApproval(t,!1)}},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},o?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleApproval(t,!1)}}),l.a.createElement(Ce,{show:u,loading:o,footer:!0,handleHide:function(){return e.toggle("approveAllMode")},title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve izin ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(Ce,{show:d,loading:o,footer:!1,handleHide:function(){return e.toggle("rejectAllMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject izin ".concat(this.state.checkId.length," data ?")),l.a.createElement(h.a,{onSubmit:function(t){return e.rejectChecked(t)}},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectAllMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},o?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}),l.a.createElement(Ce,{show:this.state.photoMode,title:"Lampiran Dokter",handleHide:function(){e.setState({photoMode:!1})},body:l.a.createElement("img",{width:"100%",height:300,src:this.state.lampiran})}))}}]),a}(l.a.Component),It=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).queryEarlyLeavesByLevel=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"today",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"day",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.state.status,r=new O.a.Object.extend("Absence"),o=new O.a.Query(r),i=new O.a.User,c=new O.a.Query(i);if(4===parseInt(n.state.statusWaktu)){new Date;var m=new N.a(n.state.startDate);m.startOf("day");var u=new N.a(m);u.add(1,"day"),o.exists("earlyTimes"),o.greaterThanOrEqualTo("earlyTimes",m.toDate()),o.lessThan("earlyTimes",u.toDate())}if(5===parseInt(n.state.statusWaktu)){new Date;var d=new N.a(n.state.startDate);d.startOf("week");var g=new N.a(d);g.add(1,"week"),o.exists("earlyTimes"),o.greaterThanOrEqualTo("earlyTimes",d.toDate()),o.lessThan("earlyTimes",g.toDate())}if(6===parseInt(n.state.statusWaktu)){new Date;var p=new N.a(n.state.startDate);p.startOf("month");var h=new N.a(p);h.add(1,"month"),o.exists("earlyTimes"),o.greaterThanOrEqualTo("earlyTimes",p.toDate()),o.lessThan("earlyTimes",h.toDate())}if(3===parseInt(n.state.status)||3===s)if("today"!==a);else if("today"===a){var f=new Date,v=new N.a(f);v.startOf(l);var E=new N.a(v);E.add(1,l),o.exists("earlyTimes"),o.greaterThanOrEqualTo("earlyTimes",v.toDate()),o.lessThan("earlyTimes",E.toDate())}1!==parseInt(n.state.status)&&0!==parseInt(n.state.status)||(o.descending("updatedAt"),o.exists("earlyTimes")),o.exists("earlyTimes"),c.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),c.containedIn("roles",t),o.matchesQuery("user",c),o.equalTo("approvalEarly",s),o.include("user"),o.find().then((function(e){e.map((function(e){return e.select=!1})),console.log(e),n.setState({leave:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getDataByLevel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"today",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.state.status;switch(t){case"leader":n.queryEarlyLeavesByLevel("leaderIdNew",["staff"],e,a,l);break;case"supervisor":n.queryEarlyLeavesByLevel("supervisorID",["staff","leader"],e,a,l);break;case"manager":n.queryEarlyLeavesByLevel("managerID",["staff","leader","supervisor"],e,a,l);break;case"head":n.queryEarlyLeavesByLevel("headID",["staff","leader","supervisor","manager"],e,a,l);break;case"gm":n.queryEarlyLeavesByLevel("headID",["staff","leader","supervisor","manager","head"],e,a,l)}},n.getData=function(){n.setState({loading:!0});var e=O.a.Object.extend("Absence"),t=new O.a.Query(e),a=new Date,l=new N.a(a);l.startOf("day");var s=new N.a(l);s.add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.exists("earlyTimes"),t.descending("createdAt"),t.equalTo("approvalEarly",3),t.greaterThanOrEqualTo("createdAt",l.toDate()),t.lessThan("createdAt",s.toDate()),t.notContainedIn("roles",["admin","Admin","Leader","leader"]),t.find().then((function(e){e.map((function(e){return e.select=!1})),console.log(e),n.setState({leave:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.handleFilter=function(e){e.preventDefault(),n.setState({loading:!0}),n.getDataByLevel(n.state.startDate,C(),"fox",parseInt(n.state.status))},n.closeLoading=function(){n.setState({loadingModal:!1})},n.handleApproval=function(e,t){e.preventDefault(),n.setState({loadingModal:!0});var a=O.a.Object.extend("Absence");new O.a.Query(a).get(n.state.userId).then((function(e){e.set("approvalEarly",t?1:0),t||e.set("alasanRejectEarly",n.state.reason),e.save().then((function(){var e=Object(Oe.a)(n.state.leave);e.splice(n.state.userIndex,1),n.setState({counter:n.state.counter+1,leave:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1,messageApprove:t?"approve":"reject",alerts:1})})).catch((function(e){alert(e.message),n.closeLoading()}))})).catch((function(e){alert(e.message),n.closeLoading()}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.handleAllCheck=function(e){var t=n.state.leave,a=[];t.map((function(t){return t.select=e.target.checked,t.select?a.push(t.id):a=[],t})),n.setState({leave:t,checkId:a},(function(){return console.log(n.state.checkId)}))},n.handleChildCheck=function(e){var t=n.state.leave,a=n.state.checkId,l=e.target.value;t.map((function(t){if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)n.setState((function(e){return{checkId:[].concat(Object(Oe.a)(n.state.checkId),[l])}}),(function(){return console.log(n.state.checkId)}));else{var s=a.indexOf(l);s>-1&&(a.splice(s,1),n.setState((function(e){return{checkId:a}}),(function(){return console.log(n.state.checkId)})))}})),n.setState({leave:t})},n.handleApproveAll=function(e){n.setState({loading:!0});var t=O.a.Object.extend("Absence");new O.a.Query(t).get(e).then((function(e){e.set("approvalEarly",1),e.save().then((function(){var e=Object(Oe.a)(n.state.leave);e.splice(n.state.userIndex,1),n.setState({leave:e,approvalMode:!1,loading:!1})}))}))},n.handleRejectAll=function(e){n.setState({loading:!0});var t=O.a.Object.extend("Absence");new O.a.Query(t).get(e).then((function(e){e.set("approvalEarly",0),e.save().then((function(){var e=Object(Oe.a)(n.state.leave);e.splice(n.state.userIndex,1),n.setState({leave:e,rejectMode:!1,loading:!1})}))}))},n.approveChecked=function(e){n.setState({loadingModal:!0});var t=n.state.checkId,a=0;t.map((function(e){var l=O.a.Object.extend("Absence");new O.a.Query(l).get(e).then((function(e){e.set("approvalEarly",1),e.save().then((function(){if((a+=1)===t.length)return n.setState({messageApprove:"Approve "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)}))}))})),n.setState({loadingModal:!1})},n.rejectChecked=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state.checkId,a=0;t.map((function(e){var l=O.a.Object.extend("Absence");new O.a.Query(l).get(e).then((function(e){e.set("approvalEarly",0),e.set("alasanRejectEarly",n.state.reason),e.save().then((function(){if((a+=1)===t.length)return n.setState({messageApprove:"Reject "+a+" Data",alerts:1,loadingModal:!1,closeLoading:!1,approveAllMode:!1}),window.location.reload(!1)}))}))}))},n.state={leave:[],loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userIndex:0,userId:"",reason:"",checkId:[],approveAllMode:!1,rejectAllMode:!1,startDate:"",messageApprove:"",alerts:2,status:3},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDataByLevel()}},{key:"render",value:function(){var e=this,t=this.state,a=t.leave,n=t.loading,s=t.approvalMode,r=t.rejectMode,o=t.counter,i=t.loadingModal,c=t.fullnames,m=t.rejectAllMode,u=t.approveAllMode,d=t.startDate;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,{leaveCounter:o}),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Request pulang cepat"),2===parseInt(this.state.alerts)?"":l.a.createElement(Tt,{show:!0,icon:"ni ni-like-2",alert:"success",message:"Berhasil ".concat(this.state.messageApprove)}),l.a.createElement(h.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",required:!0,onChange:function(t){e.setState({status:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Kategori"),[3,1,0].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",onChange:function(t){e.setState({statusWaktu:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Date Picker Here",required:!0,readOnly:!0},viewMode:6===parseInt(this.state.statusWaktu)?"months":"days",dateFormat:6===parseInt(this.state.statusWaktu)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,value:d,onChange:function(t){e.setState({startDate:t.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement(ae.a,{className:"my-4",color:"primary",type:"submit",disabled:n},n?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),0===a.length||0===this.state.checkId.length?"":l.a.createElement(z.a,{sm:{span:0},className:"float-none"},l.a.createElement(ae.a,{color:"primary",size:"sm",type:"submit",disable:n?"true":"false",className:"mr-2 m-1",onClick:function(){return e.setState({approveAllMode:!0})}},l.a.createElement("i",{className:"fa fa-check"})," ",n?"Fetching...":"Approve"),l.a.createElement(ae.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:n?"true":"false",onClick:function(){return e.setState({rejectAllMode:!0})}},l.a.createElement("i",{className:"fa fa-times"})," ",n?"Fetching...":"Reject"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,0===parseInt(this.state.status)||1===parseInt(this.state.status)?l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",disabled:"true"})):l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck})),l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Alasan"),l.a.createElement("th",{scope:"col"},"Approve"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:5,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:5,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,3===t.get("approvalEarly")?l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",value:t.id,checked:t.select,onChange:e.handleChildCheck})):l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",disabled:"true"})),l.a.createElement("td",null,t.get("user").attributes.nik),l.a.createElement("td",null,t.get("fullname")),l.a.createElement("td",null,t.get("alasanKeluar")),1===t.get("approvalEarly")?l.a.createElement("td",null,"Approved"):0===t.get("approvalEarly")?l.a.createElement("td",null,"Rejected"):l.a.createElement("td",null,l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(){e.setState({approvalMode:!0,userId:t.id,userIndex:a,fullnames:t.get("fullname")})}},l.a.createElement("i",{className:"fa fa-check"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Approve"),l.a.createElement(ae.a,{id:"t2",className:"btn-circle btn-danger",onClick:function(n){e.setState({rejectMode:!0,userId:t.id,userIndex:a,fullnames:t.get("fullname")})}},l.a.createElement("i",{className:"fa fa-times"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t2"},"Reject")))})))))))),l.a.createElement(Ce,{show:s,loading:i,footer:!0,handleHide:function(){return e.toggle("approvalMode")},title:"Approval Confirmation",body:"Approve pulang cepat ".concat(c," ?"),handleSubmit:function(t){return e.handleApproval(t,!0)}}),l.a.createElement(Ce,{show:r,footer:!1,handleHide:function(){return e.toggle("rejectMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject pulang cepat ".concat(c," ?")),l.a.createElement(h.a,{onSubmit:function(t){return e.handleApproval(t,!1)}},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},i?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")))}),l.a.createElement(Ce,{show:u,loading:i,footer:!0,handleHide:function(){return e.toggle("approveAllMode")},title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve Pulang Cepat ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(Ce,{show:m,loading:i,footer:!1,handleHide:function(){return e.toggle("rejectAllMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject Pulang Cepat ".concat(this.state.checkId.length," data ?")),l.a.createElement(h.a,{onSubmit:this.rejectChecked},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectAllMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},i?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}]),a}(l.a.Component),Nt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getData=function(){n.setState({loading:!0}),n.setState({loading:!0});var e=O.a.Object.extend("Absence"),t=new O.a.Query(e),a=new Date,l=new N.a(a);l.startOf("day");var s=new N.a(l);s.add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.notContainedIn("roles",["admin","Admin","Leader","leader"]),t.equalTo("approvalOvertime",3),t.exists("lateTimes"),t.greaterThanOrEqualTo("createdAt",l.toDate()),t.lessThan("createdAt",s.toDate()),t.descending("createdAt"),t.find().then((function(e){e.map((function(e){return e.select=!1})),console.log(e),n.setState({overtime:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.queryLateByLevel=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"today",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"day",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.state.status,r=new O.a.Object.extend("Absence"),o=new O.a.Query(r),i=new O.a.User,c=new O.a.Query(i);if(4===parseInt(n.state.statusWaktu)){new Date;var m=new N.a(n.state.startDate);m.startOf("day");var u=new N.a(m);u.add(1,"day"),o.exists("overtimeOut"),o.greaterThanOrEqualTo("overtimeOut",m.toDate()),o.lessThan("overtimeOut",u.toDate())}if(5===parseInt(n.state.statusWaktu)){new Date;var d=new N.a(n.state.startDate);d.startOf("week");var g=new N.a(d);g.add(1,"week"),o.exists("overtimeOut"),o.greaterThanOrEqualTo("overtimeOut",d.toDate()),o.lessThan("overtimeOut",g.toDate())}if(6===parseInt(n.state.statusWaktu)){new Date;var p=new N.a(n.state.startDate);p.startOf("month");var h=new N.a(p);h.add(1,"month"),o.exists("overtimeOut"),o.greaterThanOrEqualTo("overtimeOut",p.toDate()),o.lessThan("overtimeOut",h.toDate())}if(3===parseInt(n.state.status)||3===s)if("today"!==a);else if("today"===a){var f=new Date,v=new N.a(f);v.startOf(l);var E=new N.a(v);E.add(1,l),o.exists("overtimeOut"),o.greaterThanOrEqualTo("overtimeOut",v.toDate()),o.lessThan("overtimeOut",E.toDate())}1!==parseInt(n.state.status)&&0!==parseInt(n.state.status)||(o.descending("updatedAt"),o.exists("overtimeOut")),o.exists("overtimeOut"),c.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),c.containedIn("roles",t),o.matchesQuery("user",c),o.equalTo("approvalOvertime",s),o.include("user"),o.find().then((function(e){e.map((function(e){return e.select=!1})),console.log(e),n.setState({overtime:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getDataByLevel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"today",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.state.status;switch(t){case"leader":n.queryLateByLevel("leaderIdNew",["staff"],e,a,l);break;case"supervisor":n.queryLateByLevel("supervisorID",["staff","leader"],e,a,l);break;case"manager":n.queryLateByLevel("managerID",["staff","leader","supervisor"],e,a,l);break;case"head":n.queryLateByLevel("headID",["staff","leader","supervisor","manager"],e,a,l);break;case"gm":n.queryLateByLevel("headID",["staff","leader","supervisor","manager","head"],e,a,l)}},n.handleFilter=function(e){e.preventDefault(),n.setState({loading:!0}),n.getDataByLevel(n.state.startDate,C(),"fox",parseInt(n.state.status))},n.closeLoading=function(){n.setState({loadingModal:!1})},n.handleApproval=function(e,t){e.preventDefault(),n.setState({loadingModal:!0});var a=O.a.Object.extend("Absence");new O.a.Query(a).get(n.state.userId).then((function(e){e.set("approvalOvertime",t?1:0),t||e.set("alasanReject",n.state.reason),e.save().then((function(){var e=Object(Oe.a)(n.state.overtime);e.splice(n.state.userIndex,1),n.setState({counter:n.state.counter+1,overtime:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1,messageApprove:t?"approve":"reject",alerts:1})})).catch((function(e){alert(e.message),n.closeLoading()}))})).catch((function(e){alert(e.message),n.closeLoading()}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.handleAllCheck=function(e){var t=n.state.overtime,a=[];t.map((function(t){return t.select=e.target.checked,t.select?a.push(t.id):a=[],t})),n.setState({overtime:t,checkId:a},(function(){return console.log(n.state.checkId)}))},n.handleChildCheck=function(e){var t=n.state.overtime,a=n.state.checkId,l=e.target.value;t.map((function(t){if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)n.setState((function(e){return{checkId:[].concat(Object(Oe.a)(n.state.checkId),[l])}}),(function(){return console.log(n.state.checkId)}));else{var s=a.indexOf(l);s>-1&&(a.splice(s,1),n.setState((function(e){return{checkId:a}}),(function(){return console.log(n.state.checkId)})))}})),n.setState({overtime:t})},n.handleApproveAll=function(e){n.setState({loading:!0});var t=O.a.Object.extend("Absence");new O.a.Query(t).get(e).then((function(e){e.set("approvalOvertime",1),e.save().then((function(){var e=Object(Oe.a)(n.state.overtime);e.splice(n.state.userIndex,1),n.setState({overtime:e,approvalMode:!1,loading:!1})}))}))},n.handleRejectAll=function(e){n.setState({loading:!0});var t=O.a.Object.extend("Absence");new O.a.Query(t).get(e).then((function(e){e.set("approvalOvertime",0),e.save().then((function(){var e=Object(Oe.a)(n.state.overtime);e.splice(n.state.userIndex,1),n.setState({overtime:e,rejectMode:!1,loading:!1})}))}))},n.approveChecked=function(e){n.setState({loadingModal:!0});var t=n.state.checkId,a=0;t.map((function(e){var l=O.a.Object.extend("Absence");new O.a.Query(l).get(e).then((function(e){e.set("approvalOvertime",1),e.save().then((function(){if((a+=1)===t.length)return n.setState({messageApprove:"Approve "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)}))}))})),n.setState({loadingModal:!1})},n.rejectChecked=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state.checkId,a=0;t.map((function(e){var l=O.a.Object.extend("Absence");new O.a.Query(l).get(e).then((function(e){e.set("approvalOvertime",0),e.save().then((function(){if((a+=1)===t.length)return n.setState({messageApprove:"Reject "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)}))}))}))},n.state={overtime:[],loading:!1,approvalMode:!1,rejectMode:!1,userIndex:0,loadingModal:!1,userId:"",fullnames:"",reason:"",checkId:[],rejectAllMode:!1,approveAllMode:!1,startDate:"",messageApprove:"",alerts:2,status:3},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDataByLevel()}},{key:"render",value:function(){var e=this,t=this.state,a=t.overtime,n=t.loading,s=t.approvalMode,r=t.rejectMode,o=t.loadingModal,i=t.fullnames,c=t.approveAllMode,m=t.rejectAllMode,u=t.startDate;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Request lembur"),2===parseInt(this.state.alerts)?"":l.a.createElement(Tt,{show:!0,icon:"ni ni-like-2",alert:"success",message:"Berhasil ".concat(this.state.messageApprove)}),l.a.createElement(h.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",required:!0,onChange:function(t){e.setState({status:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Kategori"),[3,1,0].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",onChange:function(t){e.setState({statusWaktu:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Date Picker Here",required:!0,readOnly:!0},viewMode:6===parseInt(this.state.statusWaktu)?"months":"days",dateFormat:6===parseInt(this.state.statusWaktu)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,value:u,onChange:function(t){e.setState({startDate:t.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement(ae.a,{className:"my-4",color:"primary",type:"submit",disabled:n},n?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),0===a.length||0===this.state.checkId.length?"":l.a.createElement(z.a,{sm:{span:0},className:"float-none"},l.a.createElement(ae.a,{color:"primary",size:"sm",type:"submit",disable:n?"true":"false",className:"mr-2 m-1",onClick:function(){return e.setState({approveAllMode:!0})}},l.a.createElement("i",{className:"fa fa-check"})," ",n?"Fetching...":"Approve"),l.a.createElement(ae.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:n?"true":"false",onClick:function(){return e.setState({rejectAllMode:!0})}},l.a.createElement("i",{className:"fa fa-times"})," ",n?"Fetching...":"Reject"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck,disabled:1===parseInt(this.state.status)||0===parseInt(this.state.status)})),l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Alasan"),l.a.createElement("th",{scope:"col"},"Approve"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:5,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,3===t.get("approvalOvertime")?l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",value:t.id,checked:t.select,onChange:e.handleChildCheck})):l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",disabled:"true"})),l.a.createElement("td",null,t.get("user").attributes.nik),l.a.createElement("td",null,t.get("fullname")),l.a.createElement("td",null,t.get("alasanKeluar")),1===t.get("approvalOvertime")?l.a.createElement("td",null,"Approved"):0===t.get("approvalOvertime")?l.a.createElement("td",null,"Rejected"):l.a.createElement("td",null,l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(){e.setState({approvalMode:!0,userId:t.id,userIndex:a,fullnames:t.get("fullname")})}},l.a.createElement("i",{className:"fa fa-check"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Approve"),l.a.createElement(ae.a,{id:"t2",className:"btn-circle btn-danger",onClick:function(n){e.setState({rejectMode:!0,userId:t.id,userIndex:a,fullnames:t.get("fullname")})}},l.a.createElement("i",{className:"fa fa-times"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t2"},"Reject")))})))))))),l.a.createElement(Ce,{show:s,loading:o,footer:!0,handleHide:function(){return e.toggle("approvalMode")},title:"Approval Confirmation",body:"Approve lembur ".concat(i," ?"),handleSubmit:function(t){return e.handleApproval(t,!0)}}),l.a.createElement(Ce,{show:r,loading:o,footer:!1,handleHide:function(){return e.toggle("rejectMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject lembur ".concat(i," ?")),l.a.createElement(h.a,{onSubmit:function(t){return e.handleApproval(t,!1)}},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},o?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleApproval(t,!1)}}),l.a.createElement(Ce,{show:c,loading:o,footer:!0,handleHide:function(){return e.toggle("approveAllMode")},title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve lembur ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(Ce,{show:m,loading:o,footer:!1,handleHide:function(){return e.toggle("rejectAllMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject lembur ".concat(this.state.checkId.length," data ?")),l.a.createElement(h.a,{onSubmit:this.rejectChecked},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectAllMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},o?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}]),a}(l.a.Component),Dt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getData=function(){n.setState({loading:!0});var e=O.a.Object.extend("Absence"),t=new O.a.Query(e),a=new Date,l=new N.a(a);l.startOf("day");var s=new N.a(l);s.add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),t.notContainedIn("roles",["admin","Admin","Leader","leader"]),t.equalTo("approvalLate",3),t.exists("lateTimes"),t.greaterThanOrEqualTo("createdAt",l.toDate()),t.lessThan("createdAt",s.toDate()),t.include("user"),t.descending("createdAt"),t.find().then((function(e){e.map((function(e){return e.select=!1})),console.log(e),n.setState({late:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.closeLoading=function(){n.setState({loadingModal:!1})},n.queryEarlyLeavesByLevel=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"today",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"day",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.state.status,r=new O.a.Object.extend("Absence"),o=new O.a.Query(r),i=new O.a.User,c=new O.a.Query(i);if(4===parseInt(n.state.statusWaktu)){new Date;var m=new N.a(n.state.startDate);m.startOf("day");var u=new N.a(m);u.add(1,"day"),o.exists("lateTimes"),o.greaterThanOrEqualTo("lateTimes",m.toDate()),o.lessThan("lateTimes",u.toDate())}if(5===parseInt(n.state.statusWaktu)){new Date;var d=new N.a(n.state.startDate);d.startOf("week");var g=new N.a(d);g.add(1,"week"),o.exists("lateTimes"),o.greaterThanOrEqualTo("lateTimes",d.toDate()),o.lessThan("lateTimes",g.toDate())}if(6===parseInt(n.state.statusWaktu)){new Date;var p=new N.a(n.state.startDate);p.startOf("month");var h=new N.a(p);h.add(1,"month"),o.exists("lateTimes"),o.greaterThanOrEqualTo("lateTimes",p.toDate()),o.lessThan("lateTimes",h.toDate())}if(3===parseInt(n.state.status)||3===s)if("today"!==a);else if("today"===a){var f=new Date,v=new N.a(f);v.startOf(l);var E=new N.a(v);E.add(1,l),o.exists("lateTimes"),o.greaterThanOrEqualTo("lateTimes",v.toDate()),o.lessThan("lateTimes",E.toDate())}1!==parseInt(n.state.status)&&0!==parseInt(n.state.status)||(o.descending("updatedAt"),o.exists("lateTimes")),o.exists("lateTimes"),c.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),o.matchesQuery("user",c),c.notContainedIn("roles",t),o.equalTo("approvalLate",s),o.include("user"),o.find().then((function(e){e.map((function(e){return e.select=!1})),console.log(e),n.setState({late:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getDataByLevel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"today",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.state.status;switch(t){case"leader":n.queryEarlyLeavesByLevel("leaderIdNew",["staff"],e,a,l);break;case"supervisor":n.queryEarlyLeavesByLevel("supervisorID",["staff","leader"],e,a,l);break;case"manager":n.queryEarlyLeavesByLevel("managerID",["staff","leader","supervisor"],e,a,l);break;case"head":n.queryEarlyLeavesByLevel("headID",["staff","leader","supervisor","manager"],e,a,l);break;case"gm":n.queryEarlyLeavesByLevel("headID",["staff","leader","supervisor","manager","head"],e,a,l)}},n.handleFilter=function(e){e.preventDefault(),n.setState({loading:!0}),n.getDataByLevel(n.state.startDate,C(),"fox",parseInt(n.state.status))},n.handleApproval=function(e,t){e.preventDefault(),n.setState({loadingModal:!0});var a=O.a.Object.extend("Absence");new O.a.Query(a).get(n.state.userId).then((function(e){e.set("approvalLate",t?1:0),t||e.set("alasanRejectTerlambat",n.state.reason),e.save().then((function(){var e=Object(Oe.a)(n.state.late);e.splice(n.state.userIndex,1),n.setState({counter:n.state.counter+1,late:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1,messageApprove:t?"approve":"reject",alerts:1})})).catch((function(e){alert(e.message),n.closeLoading()}))})).catch((function(e){alert(e.message),n.closeLoading()}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.handleAllCheck=function(e){var t=n.state.late,a=[];t.map((function(t){return t.select=e.target.checked,t.select?a.push(t.id):a=[],t})),n.setState({late:t,checkId:a},(function(){return console.log(n.state.checkId)}))},n.handleChildCheck=function(e){var t=n.state.late,a=n.state.checkId,l=e.target.value;t.map((function(t){if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)n.setState((function(e){return{checkId:[].concat(Object(Oe.a)(n.state.checkId),[l])}}),(function(){return console.log(n.state.checkId)}));else{var s=a.indexOf(l);s>-1&&(a.splice(s,1),n.setState((function(e){return{checkId:a}}),(function(){return console.log(n.state.checkId)})))}})),n.setState({late:t})},n.handleApproveAll=function(e){n.setState({loading:!0});var t=O.a.Object.extend("Late");new O.a.Query(t).get(e).then((function(e){e.set("approvalLate",1),e.save().then((function(){var e=Object(Oe.a)(n.state.late);e.splice(n.state.userIndex,1),n.setState({late:e,approvalMode:!1,loading:!1})}))}))},n.handleRejectAll=function(e){n.setState({loading:!0});var t=O.a.Object.extend("Late");new O.a.Query(t).get(e).then((function(e){e.set("approvalLate",0),e.save().then((function(){var e=Object(Oe.a)(n.state.late);e.splice(n.state.userIndex,1),n.setState({late:e,rejectMode:!1,loading:!1})}))}))},n.approveChecked=function(e){n.setState({loadingModal:!0});var t=n.state.checkId,a=0;t.map((function(e){var l=O.a.Object.extend("Absence");new O.a.Query(l).get(e).then((function(e){e.set("approvalLate",1),e.save().then((function(){if((a+=1)===t.length)return n.setState({messageApprove:"Approve "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)}))}))})),n.setState({loadingModal:!1})},n.rejectChecked=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state.checkId,a=0;t.map((function(e){var l=O.a.Object.extend("Absence");new O.a.Query(l).get(e).then((function(e){e.set("approvalLate",0),e.set("alasanRejectTerlambat",n.state.reason),e.save().then((function(){if((a+=1)===t.length)return n.setState({messageApprove:"Reject "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)}))}))}))},n.state={late:[],loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userIndex:0,userId:"",reason:"",startDate:"",checkId:[],approveAllMode:!1,rejectAllMode:!1,messageApprove:"",alerts:2,status:3},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDataByLevel()}},{key:"render",value:function(){var e=this,t=this.state,a=t.late,n=t.loading,s=t.fullnames,r=t.loadingModal,o=t.counter,i=t.approvalMode,c=t.rejectMode,m=t.approveAllMode,u=t.rejectAllMode,d=t.startDate;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,{lateCounter:o}),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Request datang terlambat"),2===parseInt(this.state.alerts)?"":l.a.createElement(Tt,{show:!0,icon:"ni ni-like-2",alert:"success",message:"Berhasil ".concat(this.state.messageApprove)}),l.a.createElement(h.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",required:!0,onChange:function(t){console.log(t.target.value),e.setState({status:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Kategori"),[3,1,0].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",onChange:function(t){console.log(t.target.value),e.setState({statusWaktu:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Date Picker Here",required:!0,disabled:4!==parseInt(this.state.statusWaktu)&&5!==parseInt(this.state.statusWaktu)&&6!==parseInt(this.state.statusWaktu)},viewMode:6===parseInt(this.state.statusWaktu)?"months":"days",dateFormat:6===parseInt(this.state.statusWaktu)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,value:d,onChange:function(t){e.setState({startDate:t.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement(ae.a,{className:"my-4",color:"primary",type:"submit",disabled:n},n?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),0===a.length||0===this.state.checkId.length?"":l.a.createElement(z.a,{sm:{span:0},className:"float-none"},l.a.createElement(ae.a,{color:"primary",size:"sm",type:"submit",disable:n?"true":"false",className:"mr-2 m-1",onClick:function(){return e.setState({approveAllMode:!0})}},l.a.createElement("i",{className:"fa fa-check"})," ",n?"Fetching...":"Approve"),l.a.createElement(ae.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:n?"true":"false",onClick:function(){return e.setState({rejectAllMode:!0})}},l.a.createElement("i",{className:"fa fa-times"})," ",n?"Fetching...":"Reject"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck,disabled:1===parseInt(this.state.status)||0===parseInt(this.state.status)})),l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Alasan"),l.a.createElement("th",{scope:"col"},"Approve"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",value:t.id,checked:t.select,onChange:e.handleChildCheck,disabled:3!==t.get("approvalLate")})),l.a.createElement("td",null,t.get("user").attributes.nik),l.a.createElement("td",null,t.get("fullname")),l.a.createElement("td",null,t.get("alasanMasuk")),1===t.get("approvalLate")?l.a.createElement("td",null,"Approved"):0===t.get("approvalLate")?l.a.createElement("td",null,"Rejected"):l.a.createElement("td",null,l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(){e.setState({approvalMode:!0,userId:t.id,userIndex:a,fullnames:t.get("fullname")})}},l.a.createElement("i",{className:"fa fa-check"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Approve"),l.a.createElement(ae.a,{id:"t2",className:"btn-circle btn-danger",onClick:function(n){e.setState({rejectMode:!0,userId:t.id,userIndex:a,fullnames:t.get("fullname")})}},l.a.createElement("i",{className:"fa fa-times"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t2"},"Reject")))})))))))),l.a.createElement(Ce,{show:i,loading:r,handleHide:function(){return e.toggle("approvalMode")},footer:!0,title:"Approval Confirmation",body:"Approve terlambat ".concat(s," ?"),handleSubmit:function(t){return e.handleApproval(t,!0)}}),l.a.createElement(Ce,{show:c,loading:r,handleHide:function(){return e.toggle("rejectMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject terlambat ".concat(s," ?")),l.a.createElement(h.a,{onSubmit:function(t){return e.handleApproval(t,!1)}},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleApproval(t,!1)}}),l.a.createElement(Ce,{show:m,loading:r,footer:!0,handleHide:function(){return e.toggle("approveAllMode")},title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve cuti ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(Ce,{show:u,loading:r,footer:!1,handleHide:function(){return e.toggle("rejectAllMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject cuti ".concat(this.state.checkId.length," data ?")),l.a.createElement(h.a,{onSubmit:function(t){return e.rejectChecked(t)}},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectAllMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}]),a}(l.a.Component),Ct=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getPoint=function(){var e=new O.a.Object.extend("ValidGeopoint"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarPoint:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.handleSearchBy=function(e){e.preventDefault(),n.setState({loading:!0});var t=n.state,a=t.searchBy,l=t.searchValue;if("name"===a){var s=new O.a.User,r=new O.a.Query(s);return r.matches("fullname",l,"i"),r.equalTo("roles","staff"),void r.find().then((function(e){n.setState({staff:e,loading:!1})})).catch((function(e){return alert(e.message)}))}if("all"===a){var o=new O.a.User,i=new O.a.Query(o);return i.equalTo("roles","staff"),i.descending("createdAt"),void i.find().then((function(e){n.setState({staff:e,loading:!1})})).catch((function(e){return alert(e.message)}))}var c=new O.a.User,m=new O.a.Query(c);m.equalTo("nik",l.toUpperCase()),m.equalTo("roles","staff"),m.find().then((function(e){console.log(e),n.setState({staff:e,loading:!1})})).catch((function(e){return alert(e.message)}))},n.handleSubmit=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state,a=t.userId,l=t.fotoWajah,s=(t.imei,t.shifting),r=(t.jamKerja,t.jumlahCuti),o=t.lembur,i=(t.email,t.posisi,t.tipe,t.level,t.absenPoint),c=O.a.Object.extend("ChangeRequest"),m=O.a.Object.extend("Shifting"),u=O.a.Object.extend("ValidGeopoint"),d=new c;d.set("userId",O.a.User.createWithoutData(a)),d.set("leaderId",O.a.User.createWithoutData(L())),""!==l&&d.set("fotoWajah",new O.a.File("foto_wajah.jpg",l)),""!==s&&d.set("shifting",m.createWithoutData(s)),""!==i&&d.set("absenPoint",u.createWithoutData(i)),""!==r&&d.set("jumlahCuti",parseInt(r)),""!==o&&d.set("lembur",o),d.save().then((function(e){n.setState({messageApprove:"Success melakukan request",alerts:1,requestMode:!1})})).catch((function(e){alert(e.message),n.setState({requestMode:!1})}))},n.handleFace=function(e){n.setState({loadingReco:!0,statusReco:0,fotoWajah:e.target.files[0]});var t=new FormData;t.append("knax",e.target.files[0]),Le.a.post("http://34.126.96.126:4000/api/face-check",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;return 1===t.status?n.setState({statusReco:1,message:"\u2714\ufe0f ".concat(t.message),loadingReco:!1}):n.setState({statusReco:0,message:"\u2716\ufe0f ".concat(t.message),loadingReco:!1})})).catch((function(e){return alert("Terjadi error...")}))},n.state={staff:[],shift:[],loading:!1,requestMode:!1,rejectMode:!1,userIndex:0,loadingModal:!1,userId:"",fullnames:"",reason:"",checkId:[],loadingReco:!1,message:"",searchBy:"all",searchValue:"",statusReco:0,fotoWajah:"",jumlahCuti:"",shifting:"",jamKerja:"",lembur:"",email:"",posisi:"",tipe:"",level:"",messageApprove:"",alerts:2,daftarPoint:[],absenPoint:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData(),this.getPoint()}},{key:"getData",value:function(){var e=this;this.setState({loading:!0});var t=new O.a.User,a=new O.a.Query(t);a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:L()}),a.notContainedIn("roles",["admin","Admin","Leader","leader"]),a.include("shifting"),a.include("userId"),a.descending("createdAt"),a.find({useMasterKey:!0}).then((function(t){console.log(t),e.setState({staff:t,loading:!1})})).catch((function(t){alert(t.message),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.staff,n=(t.shift,t.loading),s=t.loadingModal,r=t.loadingReco,o=t.requestMode,i=(t.rejectMode,t.message),c=t.statusReco;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Data staff"),2===parseInt(this.state.alerts)?"":l.a.createElement(Tt,{show:!0,icon:"ni ni-like-2",alert:"success",message:"".concat(this.state.messageApprove)}),l.a.createElement(h.a,{role:"form",onSubmit:this.handleSearchBy,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Search By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",defaultValue:"all",onChange:function(t){e.setState({searchBy:t.target.value})}},["all","nik","name"].map((function(e){return l.a.createElement("option",{value:e},e)})))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"text",className:"fa-pull-right",onChange:function(t){e.setState({searchValue:t.target.value})},placeholder:"Masukan ".concat(this.state.searchBy),disabled:"all"===this.state.searchBy,required:"all"!==this.state.searchBy})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement(ae.a,{className:"my-4",color:"primary",type:"submit",disabled:n},n?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),0===a.length||0===this.state.checkId.length?"":l.a.createElement(z.a,{sm:{span:0},className:"float-none"},l.a.createElement(ae.a,{color:"primary",size:"sm",type:"submit",disable:n?"true":"false",className:"mr-2 m-1",onClick:function(){return e.setState({approveAllMode:!0})}},l.a.createElement("i",{className:"fa fa-check"})," ",n?"Fetching...":"Approve"),l.a.createElement(ae.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:n?"true":"false",onClick:this.setState({rejectAllMode:!0})},l.a.createElement("i",{className:"fa fa-times"})," ",n?"Fetching...":"Reject"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Shifting"),l.a.createElement("th",{scope:"col"},"Jumlah Cuti"),l.a.createElement("th",{scope:"col"},"Lembur"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:7,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:7,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,t.get("nik")),l.a.createElement("td",null,t.get("fullname")),l.a.createElement("td",null,void 0===t.get("shifting")?"-":t.get("shifting").attributes.tipeShift),l.a.createElement("td",null,t.get("jumlahCuti")),l.a.createElement("td",null,t.get("lembur")),l.a.createElement("td",null,l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(){e.setState({requestMode:!0,userId:t.id,userIndex:a,fullnames:t.get("fullname")})}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Ubah data")))})))))))),l.a.createElement(Ce,{show:o,loading:s,footer:!1,handleHide:function(){return e.toggle("requestMode")},title:"Change Request Form",body:l.a.createElement("div",null,l.a.createElement(h.a,{onSubmit:this.handleSubmit,className:"text-dark"},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Foto Wajah"),l.a.createElement(y.a,{id:"exampleFormControlInput1",type:"file",onChange:this.handleFace}),l.a.createElement(Ke.a,{className:r?"text-muted":"",style:{color:"".concat(0==c?"red":"green")}},r?"Processing...":i)),l.a.createElement(f.a,{controlId:"formLokasi"},l.a.createElement(Ne.a,null,"Absen point"),l.a.createElement(y.a,{type:"select",required:!0,onChange:function(t){return e.setState({absenPoint:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih Absen Point"),this.state.daftarPoint.map((function(e,t){return l.a.createElement("option",{key:e.id,value:e.id},e.get("placeName"))})))),l.a.createElement(f.a,{controlId:"formCuti"},l.a.createElement(Ne.a,null,"Jumlah cuti"),l.a.createElement(y.a,{type:"number",placeholder:"Masukkan jumlah cuti",onChange:function(t){return e.setState({jumlahCuti:parseInt(t.target.value)})}})),l.a.createElement(f.a,{controlId:"formLembut"},l.a.createElement(Ne.a,null,"Lembur"),l.a.createElement(y.a,{className:"text-dark",type:"select",onChange:function(t){return e.setState({lembur:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih Lembur"),["Ya","Tidak"].map((function(e){return l.a.createElement("option",{value:e},e)})))),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("requestMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}]),a}(l.a.Component),At=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state,a=t.userId,l=t.fotoWajah,s=t.imei,r=t.lokasiKerja,o=t.jamKerja,i=t.jumlahCuti,c=t.lembur,m=new(O.a.Object.extend("ChangeRequest"));m.set("idUser",a),""!==l&&m.set("fotoWajah",new O.a.File("foto_wajah.jpg",l)),""!==s&&m.set("imei",s),""!==o&&m.set("jamKerja",o),""!==r&&m.set("lokasiKerja",r),""!==i&&m.set("jumlahCuti",parseInt(i)),""!==c&&m.set("lembur",c),m.save().then((function(e){alert("Succes melakukan request!"),n.setState({requestMode:!1})})).catch((function(e){alert(e.message),n.setState({requestMode:!1})}))},n.handleFace=function(e){n.setState({loadingReco:!0,statusReco:0,fotoWajah:e.target.files[0]});var t=new FormData;t.append("knax",e.target.files[0]),Le.a.post("http://35.247.147.177:4000/api/face-check",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;return 1===t.status?n.setState({statusReco:1,message:"\u2714\ufe0f ".concat(t.message),loadingReco:!1}):n.setState({statusReco:0,message:"\u2716\ufe0f ".concat(t.message),loadingReco:!1})})).catch((function(e){return alert("Terjadi error...")}))},n.state={staff:[],loading:!1,requestMode:!1,userIndex:0,loadingModal:!1,userId:"",fullnames:"",reason:"",checkId:[],loadingReco:!1,message:"",statusReco:0,fotoWajah:"",jumlahCuti:"",lokasiKerja:"",jamKerja:"",lembur:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;this.setState({loading:!0});var t=O.a.Object.extend("ChangeRequest"),a=new O.a.Query(t);a.include("userId"),a.equalTo("leaderId",{__type:"Pointer",className:"_User",objectId:L()}),a.notContainedIn("roles",["admin","Admin","leader","Leader"]),a.find().then((function(t){console.log(t),e.setState({staff:t,loading:!1})})).catch((function(t){alert(t.message),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.staff,n=t.loading,s=t.loadingModal,r=t.loadingReco,o=t.requestMode,i=t.message,c=t.statusReco;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Change request status"),0===a.length||0===this.state.checkId.length?"":l.a.createElement(z.a,{sm:{span:0},className:"float-none"},l.a.createElement(ae.a,{color:"primary",size:"sm",type:"submit",disable:n?"true":"false",className:"mr-2 m-1",onClick:function(){return e.setState({approveAllMode:!0})}},l.a.createElement("i",{className:"fa fa-check"})," ",n?"Fetching...":"Approve"),l.a.createElement(ae.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:n?"true":"false",onClick:this.setState({rejectAllMode:!0})},l.a.createElement("i",{className:"fa fa-times"})," ",n?"Fetching...":"Reject"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Status"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},"No data found..."):a.map((function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null,void 0===e.get("userId")?"-":e.get("userId").attributes.nik),l.a.createElement("td",null,void 0===e.get("userId")?"-":e.get("userId").attributes.fullname),l.a.createElement("td",{style:{color:"".concat(3===e.attributes.statusApprove?"blue":"".concat(1===e.attributes.statusApprove?"green":"red"))}},l.a.createElement("strong",null,3===e.get("statusApprove")?"ON PROCESS":1===e.get("statusApprove")?"Approved".toUpperCase():"Rejected".toUpperCase())))})))))))),l.a.createElement(Ce,{show:o,loading:s,footer:!1,handleHide:function(){return e.toggle("requestMode")},title:"Change Request Form",body:l.a.createElement("div",null,l.a.createElement(h.a,{onSubmit:this.handleSubmit,className:"text-dark"},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Foto Wajah"),l.a.createElement(y.a,{id:"exampleFormControlInput1",type:"file",onChange:this.handleFace}),l.a.createElement(Ke.a,{className:r?"text-muted":"",style:{color:"".concat(0==c?"red":"green")}},r?"Processing...":i)),l.a.createElement(f.a,{controlId:"formImei"},l.a.createElement(Ne.a,null,"IMEI"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",type:"text",placeholder:"Masukkan imei hp",onChange:function(t){return e.setState({imei:t.target.value})}})),l.a.createElement(f.a,{controlId:"formImei"},l.a.createElement(Ne.a,null,"Jam Kerja"),l.a.createElement(y.a,{autoCapitalize:"true",autoComplete:"false",type:"select",onChange:function(t){return e.setState({jamKerja:t.target.value})}},["Jam tetap","Jam fleksibel","Jam bebas"].map((function(e){return l.a.createElement("option",{value:e},e)})))),l.a.createElement(f.a,{controlId:"formLokasi"},l.a.createElement(Ne.a,null,"Lokasi kerja"),l.a.createElement(y.a,{type:"select",defaultValue:"all",required:!0,onChange:function(t){return e.setState({lokasiKerja:t.target.value})}},["Tetap","Bebas (mobile)"].map((function(e){return l.a.createElement("option",{value:e},e)})))),l.a.createElement(f.a,{controlId:"formCuti"},l.a.createElement(Ne.a,null,"Jumlah cuti"),l.a.createElement(y.a,{type:"number",placeholder:"Masukkan jumlah cuti",onChange:function(t){return e.setState({jumlahCuti:parseInt(t.target.value)})}})),l.a.createElement(f.a,{controlId:"formLembut"},l.a.createElement(Ne.a,null,"Lembur"),l.a.createElement(y.a,{className:"text-dark",type:"select",defaultValue:"all",onChange:function(t){return e.setState({lembur:t.target.value})}},["Ya","Tidak"].map((function(e){return l.a.createElement("option",{value:e},e)})))),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}]),a}(l.a.Component),Lt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handlePageChange=function(e){console.log("active page is ".concat(e)),n.setState({activePage:e})},n.getData=function(){n.setState({loading:!0});var e=n.state,t=e.searchBy,a=(e.searchValue,n.props.match.params.id),l=O.a.Object.extend(K(t)),s=new O.a.Query(l);"Absen"===t&&(s.descending("createdAt"),s.equalTo("user",{__type:"Pointer",className:"_User",objectId:a}),s.include("user"),s.find().then((function(e){console.log("user",e),n.setState({history:e,loading:!1})})).catch((function(e){alert(e.message),console.log(e),n.setState({loading:!1})})))},n.handleFilter=function(e){e.preventDefault(),n.setState({loading:!0});var t=n.state,a=t.searchBy,l=(t.searchValue,n.props.match.params.id),s=O.a.Object.extend(K(a)),r=new O.a.Query(s);if("Absen"===a){if(4===parseInt(n.state.status)){new Date;var o=new N.a(n.state.startDate);o.startOf("day");var i=new N.a(o);i.add(1,"day"),r.greaterThanOrEqualTo("createdAt",o.toDate()),r.lessThan("createdAt",i.toDate())}if(5===parseInt(n.state.status)){new Date;var c=new N.a(n.state.startDate);c.startOf("week");var m=new N.a(c);m.add(1,"week"),r.greaterThanOrEqualTo("createdAt",c.toDate()),r.lessThan("createdAt",m.toDate())}if(6===parseInt(n.state.status)){void 0===n.state.startDate&&alert("wajib pilih tanggal");new Date;var u=new N.a(n.state.startDate);u.startOf("month");var d=new N.a(u);d.add(1,"month"),r.greaterThanOrEqualTo("createdAt",u.toDate()),r.lessThan("createdAt",d.toDate())}r.descending("createdAt"),r.equalTo("user",{__type:"Pointer",className:"_User",objectId:l}),r.include("user"),r.find().then((function(e){console.log("user",e),n.setState({history:e,loading:!1})})).catch((function(e){alert(e.message),console.log(e),n.setState({loading:!1})}))}if("Cuti"===a){if(4===parseInt(n.state.status)){new Date;var g=new N.a(n.state.startDate);g.startOf("day");var p=new N.a(g);p.add(1,"day"),r.greaterThanOrEqualTo("createdAt",g.toDate()),r.lessThan("createdAt",p.toDate())}if(5===parseInt(n.state.status)){new Date;var h=new N.a(n.state.startDate);h.startOf("week");var f=new N.a(h);f.add(1,"week"),r.greaterThanOrEqualTo("createdAt",h.toDate()),r.lessThan("createdAt",f.toDate())}if(6===parseInt(n.state.status)){new Date;var v=new N.a(n.state.startDate);v.startOf("month");var E=new N.a(v);E.add(1,"month"),r.greaterThanOrEqualTo("createdAt",v.toDate()),r.lessThan("createdAt",E.toDate())}r.descending("createdAt"),r.equalTo("user",{__type:"Pointer",className:"_User",objectId:l}),r.equalTo("statusIzin",2),r.include("user"),r.find().then((function(e){console.log("wew",e),e.map((function(e){return e.select=!1})),n.setState({history:e,loading:!1})})).catch((function(e){var t=e.message;n.setState({loading:!1}),alert(t)}))}if("Izin"===a){if(4===parseInt(n.state.status)){new Date;var b=new N.a(n.state.startDate);b.startOf("day");var y=new N.a(b);y.add(1,"day"),r.greaterThanOrEqualTo("createdAt",b.toDate()),r.lessThan("createdAt",y.toDate())}if(5===parseInt(n.state.status)){new Date;var S=new N.a(n.state.startDate);S.startOf("week");var k=new N.a(S);k.add(1,"week"),r.greaterThanOrEqualTo("createdAt",S.toDate()),r.lessThan("createdAt",k.toDate())}if(6===parseInt(n.state.status)){new Date;var j=new N.a(n.state.startDate);j.startOf("month");var M=new N.a(j);M.add(1,"month"),r.greaterThanOrEqualTo("createdAt",j.toDate()),r.lessThan("createdAt",M.toDate())}r.descending("createdAt"),r.include("user"),r.equalTo("statusIzin",1),r.equalTo("user",{__type:"Pointer",className:"_User",objectId:l}),r.find().then((function(e){e.map((function(e){return e.select=!1})),n.setState({history:e,loading:!1})})).catch((function(e){var t=e.message;n.setState({loading:!1}),console.log("err",t),alert(t)}))}if("Terlambat"===a){var w=O.a.Object.extend("Absence"),T=new O.a.Query(w);if(4===parseInt(n.state.status)){new Date;var H=new N.a(n.state.startDate);H.startOf("day");var I=new N.a(H);I.add(1,"day"),T.greaterThanOrEqualTo("lateTimes",H.toDate()),T.lessThan("lateTimes",I.toDate())}if(5===parseInt(n.state.status)){new Date;var D=new N.a(n.state.startDate);D.startOf("week");var C=new N.a(D);C.add(1,"week"),T.greaterThanOrEqualTo("lateTimes",D.toDate()),T.lessThan("lateTimes",C.toDate())}if(6===parseInt(n.state.status)){new Date;var A=new N.a(n.state.startDate);A.startOf("month");var L=new N.a(A);L.add(1,"month"),T.greaterThanOrEqualTo("lateTimes",A.toDate()),T.lessThan("lateTimes",L.toDate())}T.include("user"),T.descending("lateTimes"),T.equalTo("user",{__type:"Pointer",className:"_User",objectId:l}),T.find().then((function(e){e.map((function(e){return e.select=!1})),n.setState({history:e,loading:!1})})).catch((function(e){var t=e.message;n.setState({loading:!1}),console.log("err",t),alert(t)}))}if("Lembur"===a){var x=O.a.Object.extend("Absence"),q=new O.a.Query(x);if(4===parseInt(n.state.status)){new Date;var P=new N.a(n.state.startDate);P.startOf("day");var J=new N.a(P);J.add(1,"day"),q.greaterThanOrEqualTo("overtimeOut",P.toDate()),q.lessThan("overtimeOut",J.toDate())}if(5===parseInt(n.state.status)){new Date;var F=new N.a(n.state.startDate);F.startOf("week");var z=new N.a(F);z.add(1,"week"),q.greaterThanOrEqualTo("overtimeOut",F.toDate()),q.lessThan("overtimeOut",z.toDate())}if(6===parseInt(n.state.status)){new Date;var U=new N.a(n.state.startDate);U.startOf("month");var B=new N.a(U);B.add(1,"month"),q.greaterThanOrEqualTo("overtimeOut",U.toDate()),q.lessThan("overtimeOut",B.toDate())}q.include("user"),q.descending("overtimeOut"),q.equalTo("user",{__type:"Pointer",className:"_User",objectId:l}),q.find().then((function(e){e.map((function(e){return e.select=!1})),n.setState({history:e,loading:!1})})).catch((function(e){var t=e.message;n.setState({loading:!1}),console.log("err",t),alert(t)}))}if("Pulang Cepat"===a){var R=O.a.Object.extend("Absence"),Q=new O.a.Query(R);if(4===parseInt(n.state.status)){new Date;var Y=new N.a(n.state.startDate);Y.startOf("day");var G=new N.a(Y);G.add(1,"day"),Q.greaterThanOrEqualTo("earlyTimes",Y.toDate()),Q.lessThan("earlyTimes",G.toDate())}if(5===parseInt(n.state.status)){new Date;var _=new N.a(n.state.startDate);_.startOf("week");var W=new N.a(_);W.add(1,"week"),Q.greaterThanOrEqualTo("earlyTimes",_.toDate()),Q.lessThan("earlyTimes",W.toDate())}if(6===parseInt(n.state.status)){new Date;var V=new N.a(n.state.startDate);V.startOf("month");var Z=new N.a(V);Z.add(1,"month"),Q.greaterThanOrEqualTo("earlyTimes",V.toDate()),Q.lessThan("earlyTimes",Z.toDate())}Q.include("user"),Q.descending("earlyTimes"),Q.equalTo("user",{__type:"Pointer",className:"_User",objectId:l}),Q.find().then((function(e){e.map((function(e){return e.select=!1})),n.setState({history:e,loading:!1})})).catch((function(e){var t=e.message;n.setState({loading:!1}),console.log("err",t),alert(t)}))}},n.closeLoading=function(){n.setState({loadingModal:!1})},n.handleApproval=function(e,t){e.preventDefault(),n.setState({loadingModal:!0});var a=O.a.Object.extend("Overtime");new O.a.Query(a).get(n.state.userId).then((function(e){e.set("status",t?1:0),t||e.set("alasanReject",n.state.reason),e.save().then((function(){var e=Object(Oe.a)(n.state.overtime);e.splice(n.state.userIndex,1),n.setState({counter:n.state.counter+1,overtime:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1}),alert("Berhasil ".concat(t?"approve":"reject"))})).catch((function(e){alert(e.message),n.closeLoading()}))})).catch((function(e){alert(e.message),n.closeLoading()}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.handleAllCheck=function(e){var t=n.state.overtime,a=[];t.map((function(t){return t.select=e.target.checked,t.select?a.push(t.id):a=[],t})),n.setState({overtime:t,checkId:a},(function(){return console.log(n.state.checkId)}))},n.handleChildCheck=function(e){var t=n.state.overtime,a=n.state.checkId,l=e.target.value;t.map((function(t){if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)n.setState((function(e){return{checkId:[].concat(Object(Oe.a)(n.state.checkId),[l])}}),(function(){return console.log(n.state.checkId)}));else{var s=a.indexOf(l);s>-1&&(a.splice(s,1),n.setState((function(e){return{checkId:a}}),(function(){return console.log(n.state.checkId)})))}})),n.setState({overtime:t})},n.handleApproveAll=function(e){n.setState({loading:!0});var t=O.a.Object.extend("Overtime");new O.a.Query(t).get(e).then((function(e){e.set("status",1),e.save().then((function(){var e=Object(Oe.a)(n.state.overtime);e.splice(n.state.userIndex,1),n.setState({overtime:e,approvalMode:!1,loading:!1})}))}))},n.handleRejectAll=function(e){n.setState({loading:!0});var t=O.a.Object.extend("Overtime");new O.a.Query(t).get(e).then((function(e){e.set("status",0),e.save().then((function(){var e=Object(Oe.a)(n.state.overtime);e.splice(n.state.userIndex,1),n.setState({overtime:e,rejectMode:!1,loading:!1})}))}))},n.approveChecked=function(e){n.setState({loadingModal:!0});var t=n.state.checkId,a=0;t.map((function(e){var n=O.a.Object.extend("Overtime");new O.a.Query(n).get(e).then((function(e){e.set("status",1),e.save().then((function(){if((a+=1)===t.length)return alert("Berhasil reject"),window.location.reload(!1)}))}))})),n.setState({loadingModal:!1})},n.rejectChecked=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state.checkId,a=0;t.map((function(e){var n=O.a.Object.extend("Overtime");new O.a.Query(n).get(e).then((function(e){e.set("status",1),e.save().then((function(){if((a+=1)===t.length)return alert("Berhasil reject"),window.location.reload(!1)}))}))}))},n.state={history:[],loading:!1,approvalMode:!1,rejectMode:!1,userIndex:0,loadingModal:!1,userId:"",fullnames:"",reason:"",checkId:[],rejectAllMode:!1,approveAllMode:!1,searchValue:"",searchBy:"Absen",excelMode:!1,startDate:"",startDateExcelFrom:"",activePage:1,itemCountPerPage:10,pageRangeDisplayed:10},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.history,n=t.loading,s=t.approvalMode,r=t.rejectMode,o=t.loadingModal,i=t.fullnames,c=t.approveAllMode,m=t.rejectAllMode,u=t.excelMode,d=this.state.activePage*this.state.itemCountPerPage,p=d-this.state.itemCountPerPage,S=this.state.history.slice(p,d);return console.log(S),l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"History ",this.state.searchBy),l.a.createElement(h.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",required:!0,onChange:function(t){e.setState({searchBy:t.target.value})}},["Absen","Izin","Cuti","Terlambat","Lembur","Pulang Cepat"].map((function(e){return l.a.createElement("option",{value:e},e)})))))),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",onChange:function(t){e.setState({status:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Date Picker Here",required:!0,disabled:4!==parseInt(this.state.status)&&5!==parseInt(this.state.status)&&6!==parseInt(this.state.status)},viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,onChange:function(t){e.setState({startDate:t.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement(ae.a,{className:"my-4",color:"primary",type:"submit",disabled:n},n?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),l.a.createElement(z.a,{sm:{span:0},className:"float-none"})),l.a.createElement(ne.a,{className:"align-items-center table-flush",id:"ekspor",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Absen"===this.state.searchBy?"Tanggal Masuk":"Tanggal"),"Absen"===this.state.searchBy?l.a.createElement("th",{scope:"col"},"Tanggal Keluar"):l.a.createElement("th",{hidden:!0}),l.a.createElement("th",{scope:"col"},"Status"))),l.a.createElement("tbody",null,n?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:5,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,t.get("user").attributes.nik),l.a.createElement("td",null,t.get("fullname")),l.a.createElement("td",null,void 0!==t.get("lateTimes")?q(t.get("lateTimes"),"DD/MM/YYYY HH:mm:ss"):void 0!==t.get("absenMasuk")?q(t.get("absenMasuk"),"DD/MM/YYYY HH:mm:ss"):q(t.get("createdAt"),"DD/MM/YYYY")),"Absen"===e.state.searchBy?l.a.createElement("td",null,void 0===t.get("absenKeluar")?"-":q(t.get("absenKeluar"),"DD/MM/YYYY HH:mm:ss")):l.a.createElement("td",{hidden:!0}),"Absen"===e.state.searchBy?l.a.createElement("td",{style:{color:"".concat(void 0===t.get("lateTimes")||void 0===t.get("earlyTimes")||void 0===t.get("overtimeOut")?"blue":"red")}},void 0!==t.get("lateTimes")?"Terlambat":void 0!==t.get("earlyTimes")?"Pulang Cepat":void 0!==t.get("overtimeOut")?"Lembur":"Tepat Waktu"):"Cuti"===e.state.searchBy||"Izin"===e.state.searchBy?l.a.createElement("td",{style:{color:"".concat(0===t.get("status")?"red":"blue")}},3===t.get("status")?"Menunggu konfirmasi":0===t.get("status")?"Rejected":"Approved"):l.a.createElement("td",{style:{color:"".concat(0===t.get("approvalEarly")||0===t.get("approvalOvertime")||0===t.get("approvalLate")?"red":"blue")}},3===t.get("approvalEarly")||3===t.get("approvalOvertime")||3===t.get("approvalLate")?"Menunggu konfirmasi":0===t.get("approvalEarly")||0===t.get("approvalOvertime")||0===t.get("approvalLate")?"Rejected":"Approved"))})))))))),l.a.createElement(Ce,{show:s,loading:o,footer:!0,handleHide:function(){return e.toggle("approvalMode")},title:"Approval Confirmation",body:"Approve lembur ".concat(i," ?"),handleSubmit:function(t){return e.handleApproval(t,!0)}}),l.a.createElement(Ce,{show:r,loading:o,footer:!1,handleHide:function(){return e.toggle("rejectMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject lembur ".concat(i," ?")),l.a.createElement(h.a,{onSubmit:function(t){return e.handleApproval(t,!1)}},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},o?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleApproval(t,!1)}}),l.a.createElement(Ce,{show:c,loading:o,footer:!1,handleHide:function(){return e.toggle("approveAllMode")},title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve lembur ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(Ce,{show:m,loading:o,footer:!1,handleHide:function(){return e.toggle("rejectAllMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject lembur ".concat(this.state.checkId.length," data ?")),l.a.createElement(h.a,{onSubmit:this.rejectChecked},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},o?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}),l.a.createElement(Ce,{show:u,loading:o,footer:!1,handleHide:function(){return e.setState({excelMode:!1})},title:"Export Excel",body:l.a.createElement(h.a,null,l.a.createElement("div",{className:"col-md-12 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",onChange:function(t){e.setState({status:t.target.value})},required:!0},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6,7].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-12 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Pilih Tanggal",required:!0,disabled:4!==parseInt(this.state.status)&&5!==parseInt(this.state.status)&&6!==parseInt(this.state.status)&&7!==parseInt(this.state.status)},viewMode:5===parseInt(this.state.status)?"days":6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,onChange:function(t){e.setState({startDateExcelFrom:t.toDate()})}})))),7===parseInt(this.state.status)?l.a.createElement("div",{className:"col-md-12 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Pilih Tanggal",required:!0,disabled:4!==parseInt(this.state.status)&&5!==parseInt(this.state.status)&&6!==parseInt(this.state.status)&&7!==parseInt(this.state.status)},viewMode:5===parseInt(this.state.status)?"days":6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,onChange:function(t){e.setState({startDateExcelTo:t.toDate()})}})))):"",l.a.createElement(Ve.a,{id:"eskport",className:"btn btn-primary",table:"data",filename:"Absensi",sheet:"Absensi",buttonText:"Export To .xls"}),l.a.createElement(jt,{table:"data",userId:this.props.match.params.id,startDateExcelFrom:this.state.startDate,status:this.state.status}))}))}}]),a}(l.a.Component),xt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleFilter=function(e){e.preventDefault(),n.setState({loading:!0,exportButton:!0});var t=O.a.Object.extend("Absence"),a=new O.a.Query(t),l=n.props.match.params.id;if(4===parseInt(n.state.status)){new Date;var s=new N.a(n.state.startDate);s.startOf("day");var r=new N.a(s);r.add(1,"day"),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:l}),a.descending("createdAt"),a.greaterThanOrEqualTo("createdAt",s.toDate()),a.lessThan("createdAt",r.toDate()),a.include("user"),a.find().then((function(e){console.log("user",e);var t=[],a=[],l=[],s=[],r=[],o=[],i=[],c=[];if(e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,n){t.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){l.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),s.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",l)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){r.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),o.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),e.map((function(e,t){c.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"HH:mm"):"00:00","HH:mm")).minutes()),i.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),1===t.length){var m=t.reduce((function(e,t){return e+t}),0),u=m%60,d=Math.floor(m/60);n.setState({sisaJam:d,minutesEarly:u}),console.log("reduce baru menit",u),console.log("reduce baru jam sisa",d)}else if(t.length>1){var g=t.reduce((function(e,t){return e+t}),0),p=g%60,h=Math.floor(g/60);n.setState({sisaJam:h,minutesEarly:p})}else n.setState({minutesEarly:0,sisaJam:0});if(1===a.length){var f=a.reduce((function(e,t){return e+t}),0)+n.state.sisaJam;n.setState({jamEarly:f})}else if(a.length>1){var v=a.reduce((function(e,t){return e+t}),0)+n.state.sisaJam;n.setState({jamEarly:v})}else n.setState({jamEarly:0});if(console.log("late times ",s),1===l.length){var E=l.reduce((function(e,t){return e+t}),0),b=E%60,y=Math.floor(E/60);n.setState({sisaJamLate:y,minutesLate:b})}else if(l.length>1){var S=l.reduce((function(e,t){return e+t}),0),k=S%60,j=Math.floor(S/60);n.setState({sisaJamLate:j,minutesLate:k})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===s.length){var M=s.reduce((function(e,t){return e+t}),0)+n.state.sisaJamLate;n.setState({hoursLate:M})}else if(s.length>1){var w=s.reduce((function(e,t){return e+t}),0)+n.state.sisaJamLate;n.setState({hoursLate:w})}else n.setState({hoursLate:0});if(1===r.length){var T=r.reduce((function(e,t){return e+t}),0),H=T%60,O=Math.floor(T/60);n.setState({sisaJamOvertime:O,minutesOvertime:H})}else if(r.length>1){var I=r.reduce((function(e,t){return e+t}),0),D=I%60,C=Math.floor(I/60);n.setState({sisaJamOvertime:C,minutesOvertime:D})}else n.setState({minutesOvertime:0,sisaJam:0});if(1===o.length){var A=o.reduce((function(e,t){return e+t}),0)+n.state.sisaJamOvertime;n.setState({jamOvertime:A})}else if(o.length>1){var L=o.reduce((function(e,t){return e+t}),0)+n.state.sisaJamOvertime;n.setState({jamOvertime:L})}else n.setState({jamOvertime:0});if(1===c.length){var x=c.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),K=Math.floor(x/60),P=x%60;n.setState({sisaJamTotalMinutes:K,minutesTotal:P})}else if(c.length>1){var J=c.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),F=Math.floor(J/60),z=J%60;n.setState({sisaJamTotalMinutes:F,minutesTotal:z})}else n.setState({minutesTotal:0,sisaJamTotalMinutes:0});if(1===i.length){var U=i.reduce((function(e,t){return e+t}),0)+n.state.sisaJamTotalMinutes;n.setState({jamTotal:U})}else if(i.length>1){var B=i.reduce((function(e,t){return e+t}),0)+n.state.sisaJamTotalMinutes;n.setState({jamTotal:B})}else n.setState({jamTotal:0});n.setState({absence:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))}else if(5===parseInt(n.state.status)){new Date;var o=new N.a(n.state.startDate);o.startOf("week");var i=new N.a(o);i.add(1,"week"),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:l}),a.descending("createdAt"),a.greaterThanOrEqualTo("createdAt",o.toDate()),a.lessThan("createdAt",i.toDate()),a.include("user"),a.find().then((function(e){console.log("user",e);var t=[],a=[],l=[],s=[],r=[],o=[],i=[],c=[];if(e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,n){t.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){l.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),s.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",l)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){r.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),o.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),e.map((function(e,t){c.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"HH:mm"):"00:00","HH:mm")).minutes()),i.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),1===t.length){var m=t.reduce((function(e,t){return e+t}),0),u=m%60,d=Math.floor(m/60);n.setState({sisaJam:d,minutesEarly:u}),console.log("reduce baru menit",u),console.log("reduce baru jam sisa",d)}else if(t.length>1){var g=t.reduce((function(e,t){return e+t}),0),p=g%60,h=Math.floor(g/60);n.setState({sisaJam:h,minutesEarly:p})}else n.setState({minutesEarly:0,sisaJam:0});if(1===a.length){var f=a.reduce((function(e,t){return e+t}),0)+n.state.sisaJam;n.setState({jamEarly:f})}else if(a.length>1){var v=a.reduce((function(e,t){return e+t}),0)+n.state.sisaJam;n.setState({jamEarly:v})}else n.setState({jamEarly:0});if(console.log("late times ",s),1===l.length){var E=l.reduce((function(e,t){return e+t}),0),b=E%60,y=Math.floor(E/60);n.setState({sisaJamLate:y,minutesLate:b})}else if(l.length>1){var S=l.reduce((function(e,t){return e+t}),0),k=S%60,j=Math.floor(S/60);n.setState({sisaJamLate:j,minutesLate:k})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===s.length){var M=s.reduce((function(e,t){return e+t}),0)+n.state.sisaJamLate;n.setState({hoursLate:M})}else if(s.length>1){var w=s.reduce((function(e,t){return e+t}),0)+n.state.sisaJamLate;n.setState({hoursLate:w})}else n.setState({hoursLate:0});if(1===r.length){var T=r.reduce((function(e,t){return e+t}),0),H=T%60,O=Math.floor(T/60);n.setState({sisaJamOvertime:O,minutesOvertime:H})}else if(r.length>1){var I=r.reduce((function(e,t){return e+t}),0),D=I%60,C=Math.floor(I/60);n.setState({sisaJamOvertime:C,minutesOvertime:D})}else n.setState({minutesOvertime:"0",sisaJam:0});if(1===o.length){var A=o.reduce((function(e,t){return e+t}),0)+n.state.sisaJamOvertime;n.setState({jamOvertime:A})}else if(o.length>1){var L=o.reduce((function(e,t){return e+t}),0)+n.state.sisaJamOvertime;n.setState({jamOvertime:L})}else n.setState({jamOvertime:"0"});if(1===c.length){var x=c.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),K=Math.floor(x/60),P=x%60;n.setState({sisaJamTotalMinutes:K,minutesTotal:P})}else if(c.length>1){var J=c.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),F=Math.floor(J/60),z=J%60;n.setState({sisaJamTotalMinutes:F,minutesTotal:z})}else n.setState({minutesTotal:0,sisaJamTotalMinutes:0});if(1===i.length){var U=i.reduce((function(e,t){return e+t}),0)+n.state.sisaJamTotalMinutes;n.setState({jamTotal:U})}else if(i.length>1){var B=i.reduce((function(e,t){return e+t}),0)+n.state.sisaJamTotalMinutes;n.setState({jamTotal:B})}else n.setState({jamTotal:0});n.setState({absence:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))}else if(6===parseInt(n.state.status)){new Date;var c=new N.a(n.state.startDate);c.startOf("month");var m=new N.a(c);m.add(1,"month"),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:l}),a.descending("createdAt"),a.greaterThanOrEqualTo("createdAt",c.toDate()),a.lessThan("createdAt",m.toDate()),a.include("user"),a.find().then((function(e){console.log("user",e);var t=[],a=[],l=[],s=[],r=[],o=[],i=[],c=[];if(e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,n){t.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){l.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),s.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",l)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){r.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),o.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),e.map((function(e,t){c.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"HH:mm"):"00:00","HH:mm")).minutes()),i.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),1===t.length){var m=t.reduce((function(e,t){return e+t}),0),u=m%60,d=Math.floor(m/60);n.setState({sisaJam:d,minutesEarly:u}),console.log("reduce baru menit",u),console.log("reduce baru jam sisa",d)}else if(t.length>1){var g=t.reduce((function(e,t){return e+t}),0),p=g%60,h=Math.floor(g/60);n.setState({sisaJam:h,minutesEarly:p})}else n.setState({minutesEarly:0,sisaJam:0});if(1===a.length){var f=a.reduce((function(e,t){return e+t}),0)+n.state.sisaJam;n.setState({jamEarly:f})}else if(a.length>1){var v=a.reduce((function(e,t){return e+t}),0)+n.state.sisaJam;n.setState({jamEarly:v})}else n.setState({jamEarly:0});if(console.log("late times ",s),1===l.length){var E=l.reduce((function(e,t){return e+t}),0),b=E%60,y=Math.floor(E/60);n.setState({sisaJamLate:y,minutesLate:b})}else if(l.length>1){var S=l.reduce((function(e,t){return e+t}),0),k=S%60,j=Math.floor(S/60);n.setState({sisaJamLate:j,minutesLate:k})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===s.length){var M=s.reduce((function(e,t){return e+t}),0)+n.state.sisaJamLate;n.setState({hoursLate:M})}else if(s.length>1){var w=s.reduce((function(e,t){return e+t}),0)+n.state.sisaJamLate;n.setState({hoursLate:w})}else n.setState({hoursLate:0});if(1===r.length){var T=r.reduce((function(e,t){return e+t}),0),H=T%60,O=Math.floor(T/60);n.setState({sisaJamOvertime:O,minutesOvertime:H})}else if(r.length>1){var I=r.reduce((function(e,t){return e+t}),0),D=I%60,C=Math.floor(I/60);n.setState({sisaJamOvertime:C,minutesOvertime:D})}else n.setState({minutesOvertime:0,sisaJam:0});if(1===o.length){var A=o.reduce((function(e,t){return e+t}),0)+n.state.sisaJamOvertime;n.setState({jamOvertime:A})}else if(o.length>1){var L=o.reduce((function(e,t){return e+t}),0)+n.state.sisaJamOvertime;n.setState({jamOvertime:L})}else n.setState({jamOvertime:0});if(1===c.length){var x=c.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),K=Math.floor(x/60),P=x%60;n.setState({sisaJamTotalMinutes:K,minutesTotal:P})}else if(c.length>1){var J=c.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),F=Math.floor(J/60),z=J%60;n.setState({sisaJamTotalMinutes:F,minutesTotal:z})}else n.setState({minutesTotal:0,sisaJamTotalMinutes:0});if(1===i.length){var U=i.reduce((function(e,t){return e+t}),0)+n.state.sisaJamTotalMinutes;n.setState({jamTotal:U})}else if(i.length>1){var B=i.reduce((function(e,t){return e+t}),0)+n.state.sisaJamTotalMinutes;n.setState({jamTotal:B})}else n.setState({jamTotal:0});n.setState({absence:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))}else if(7===parseInt(n.state.status)){console.log("endDate",n.state.endDate),console.log("startDate",n.state.startDate);new Date;var u=new N.a(n.state.startDate);u.startOf("days");var d=new N.a(n.state.endDate);d.add(1,"days"),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:l}),a.ascending("createdAt"),a.greaterThanOrEqualTo("createdAt",u.toDate()),a.lessThan("createdAt",d.toDate()),a.include("user"),a.find().then((function(e){console.log("user",e);var t=[],a=[],l=[],s=[],r=[],o=[],i=[],c=[];if(e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,n){t.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){l.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),s.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",l)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){r.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),o.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),e.map((function(e,t){c.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"HH:mm"):"00:00","HH:mm")).minutes()),i.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),1===t.length){var m=t.reduce((function(e,t){return e+t}),0),u=m%60,d=Math.floor(m/60);n.setState({sisaJam:d,minutesEarly:u}),console.log("reduce baru menit",u),console.log("reduce baru jam sisa",d)}else if(t.length>1){var g=t.reduce((function(e,t){return e+t}),0),p=g%60,h=Math.floor(g/60);n.setState({sisaJam:h,minutesEarly:p})}else n.setState({minutesEarly:0,sisaJam:0});if(1===a.length){var f=a.reduce((function(e,t){return e+t}),0)+n.state.sisaJam;n.setState({jamEarly:f})}else if(a.length>1){var v=a.reduce((function(e,t){return e+t}),0)+n.state.sisaJam;n.setState({jamEarly:v})}else n.setState({jamEarly:0});if(console.log("late times ",s),1===l.length){var E=l.reduce((function(e,t){return e+t}),0),b=E%60,y=Math.floor(E/60);n.setState({sisaJamLate:y,minutesLate:b})}else if(l.length>1){var S=l.reduce((function(e,t){return e+t}),0),k=S%60,j=Math.floor(S/60);n.setState({sisaJamLate:j,minutesLate:k})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===s.length){var M=s.reduce((function(e,t){return e+t}),0)+n.state.sisaJamLate;n.setState({hoursLate:M})}else if(s.length>1){var w=s.reduce((function(e,t){return e+t}),0)+n.state.sisaJamLate;n.setState({hoursLate:w})}else n.setState({hoursLate:0});if(1===r.length){var T=r.reduce((function(e,t){return e+t}),0),H=T%60,O=Math.floor(T/60);n.setState({sisaJamOvertime:O,minutesOvertime:H})}else if(r.length>1){var I=r.reduce((function(e,t){return e+t}),0),D=I%60,C=Math.floor(I/60);n.setState({sisaJamOvertime:C,minutesOvertime:D})}else n.setState({minutesOvertime:0,sisaJam:0});if(1===o.length){var A=o.reduce((function(e,t){return e+t}),0)+n.state.sisaJamOvertime;n.setState({jamOvertime:A})}else if(o.length>1){var L=o.reduce((function(e,t){return e+t}),0)+n.state.sisaJamOvertime;n.setState({jamOvertime:L})}else n.setState({jamOvertime:0});if(1===c.length){var x=c.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),K=Math.floor(x/60),P=x%60;n.setState({sisaJamTotalMinutes:K,minutesTotal:P})}else if(c.length>1){var J=c.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),F=Math.floor(J/60),z=J%60;n.setState({sisaJamTotalMinutes:F,minutesTotal:z})}else n.setState({minutesTotal:0,sisaJamTotalMinutes:0});if(1===i.length){var U=i.reduce((function(e,t){return e+t}),0)+n.state.sisaJamTotalMinutes;n.setState({jamTotal:U})}else if(i.length>1){var B=i.reduce((function(e,t){return e+t}),0)+n.state.sisaJamTotalMinutes;n.setState({jamTotal:B})}else n.setState({jamTotal:0});n.setState({absence:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))}},n.subtractHourLate=function(e,t,a){var n;return"Late"===a&&t>e&&(n=t-e),"Overtime"===a&&t>e&&(n=t-e),"EarlyLeave"===a&&t<e&&(n=e-t),n},n.getDaftarAbsen=function(){n.setState({loading:!0});var e=O.a.Object.extend("Absence"),t=(new(O.a.Object.extend("Leader")),new O.a.Query(e)),a=n.props.match.params.id,l="Data tidak ditemukan",s=new Date,r=new N.a(s);r.startOf("day"),new N.a(r).add(1,"day"),t.equalTo("user",{__type:"Pointer",className:"_User",objectId:a}),t.descending("createdAt"),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("user"),t.find().then((function(e){console.log("user",e);var t=[],a=[],s=[],r=[],o=[],i=[],c=[],m=[];if(e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,n){t.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){s.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),r.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",s)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){o.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),i.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),e.map((function(e,t){m.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),c.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),1===t.length){var u=t.reduce((function(e,t){return e+t}),0),d=u%60,g=Math.floor(u/60);n.setState({sisaJam:g,minutesEarly:d}),console.log("reduce baru menit",d),console.log("reduce baru jam sisa",g)}else if(t.length>1){var p=t.reduce((function(e,t){return e+t}),0),h=p%60,f=Math.floor(p/60);n.setState({sisaJam:f,minutesEarly:h})}else n.setState({minutesEarly:0,sisaJam:0});if(1===a.length){var v=a.reduce((function(e,t){return e+t}),0)+n.state.sisaJam;n.setState({jamEarly:v})}else if(a.length>1){var E=a.reduce((function(e,t){return e+t}),0)+n.state.sisaJam;n.setState({jamEarly:E})}else n.setState({jamEarly:0});if(console.log("late times ",r),1===s.length){var b=s.reduce((function(e,t){return e+t}),0),y=b%60,S=Math.floor(b/60);n.setState({sisaJamLate:S,minutesLate:y})}else if(s.length>1){var k=s.reduce((function(e,t){return e+t}),0),j=k%60,M=Math.floor(k/60);n.setState({sisaJamLate:M,minutesLate:j})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===r.length){var w=r.reduce((function(e,t){return e+t}),0)+n.state.sisaJamLate;n.setState({hoursLate:w})}else if(r.length>1){var T=r.reduce((function(e,t){return e+t}),0)+n.state.sisaJamLate;n.setState({hoursLate:T})}else n.setState({hoursLate:0});if(1===o.length){var H=o.reduce((function(e,t){return e+t}),0),O=H%60,I=Math.floor(H/60);n.setState({sisaJamOvertime:I,minutesOvertime:O})}else if(o.length>1){var D=o.reduce((function(e,t){return e+t}),0),C=D%60,A=Math.floor(D/60);n.setState({sisaJamOvertime:A,minutesOvertime:C})}else n.setState({minutesOvertime:0,sisaJam:0});if(1===i.length){var L=i.reduce((function(e,t){return e+t}),0)+n.state.sisaJamOvertime;n.setState({jamOvertime:L})}else if(i.length>1){var x=i.reduce((function(e,t){return e+t}),0)+n.state.sisaJamOvertime;n.setState({jamOvertime:x})}else n.setState({jamOvertime:0});if(1===m.length){var K=m.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),P=Math.floor(K/60),J=K%60;n.setState({sisaJamTotalMinutes:P,minutesTotal:J})}else if(m.length>1){var F=m.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),z=Math.floor(F/60),U=F%60;n.setState({sisaJamTotalMinutes:z,minutesTotal:U})}else n.setState({minutesTotal:0,sisaJamTotalMinutes:0});if(1===c.length){var B=c.reduce((function(e,t){return e+t}),0)+n.state.sisaJamTotalMinutes;n.setState({jamTotal:B})}else if(c.length>1){var R=c.reduce((function(e,t){return e+t}),0)+n.state.sisaJamTotalMinutes;n.setState({jamTotal:R})}else n.setState({jamTotal:0});n.setState({absence:e,loading:!1,employeeName:Ee.a.isEmpty(e)?l:e[0].get("fullname"),employeeID:Ee.a.isEmpty(e)?l:e[0].get("user").attributes.nik,employeeTitle:Ee.a.isEmpty(e)?l:e[0].get("user").attributes.level,employeeDepartment:Ee.a.isEmpty(e)?l:e[0].get("user").attributes.posisi})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.getSum=function(e,t){return e+Math.round(t)},n.getTotalHours=function(e,t,a){var n,l=[];return e.map((function(e,s){"lateTimes"===a?n="hours"===t?void 0===e.get("lateTimes")?0:N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours():void 0===e.get("lateTimes")?0:N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes():"earlyTimes"===a?n="hours"===t?void 0===e.get("earlyTimes")?0:N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours():void 0===e.get("earlyTimes")?0:N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes():"overtimeOut"===a?n="hours"===t?void 0===e.get("absenKeluar")?0:void 0!==e.get("overtimeOut")?N.a.duration(q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours():0:void 0===e.get("absenKeluar")?0:void 0!==e.get("overtimeOut")?N.a.duration(q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes():0:"totalHours"===a&&("hours"===t?N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):0,"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours():N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):0,"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),l.push(n)})),l},n.state={absence:[],loading:!1,startDate:"",endDate:"",employeeName:"",employeeID:"",totalLateInHours:[],sisaJam:0},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDaftarAbsen()}},{key:"shouldComponentUpdate",value:function(e,t){return console.log(t),t.absence.length>0}},{key:"render",value:function(){var e=this,t=this.state,a=t.absence,n=t.loading,s=t.startDate,r=t.endDate;return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Reporting"),l.a.createElement(h.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",required:!0,onChange:function(t){e.setState({status:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6,7].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"".concat(7===parseInt(this.state.status)?"Set start date":"Set tanggal"),required:""===this.state.startDate,readOnly:""!==this.state.startDate},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:s,onChange:function(t){e.setState({startDate:t.toDate()})}})))),7===parseInt(this.state.status)?l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Set end date",required:""===this.state.endDate,readOnly:""!==this.state.endDate},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:r,onChange:function(t){e.setState({endDate:t.toDate()})}})))):"",l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement(ae.a,{className:"my-4",color:"primary",type:"submit",disabled:n},n?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),this.state.exportButton&!this.state.loading?l.a.createElement(ct.a,{id:"eskport",className:"btn btn-primary",table:"ekspor",multipleTables:[{tableId:"ekspor",fileName:this.state.employeeName}],filename:this.state.employeeName,sheet:"Absensi",buttonText:" Ekspor Excel"}):""),l.a.createElement(ne.a,{className:"align-items-center table-flush aaa",id:"ekspor",responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Fingerprint ID"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeID))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Name"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeName))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Title"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeTitle))),l.a.createElement("thead",{className:"border-0 mb-2"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Department Title"),l.a.createElement("th",{scope:"col",className:"mb-2",style:{border:"none"}},this.state.employeeDepartment))),l.a.createElement("thead",{className:"thead-light",style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",rowSpan:"2"},"Day"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Date"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Working Hour"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty On"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty Off"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Late In"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Early Derparture"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Over Time"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Total Hour"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Notes")),l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"))),l.a.createElement("tbody",{style:{textAlign:"center"}},n?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):a.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:14,style:{textAlign:"center"}},"No data found...")):a.map((function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null,q(e.get("createdAt"),"ddd")),l.a.createElement("td",null,q(e.get("createdAt"),"DD/MM/YYYY")),l.a.createElement("td",null,"".concat(e.get("user").attributes.jamMasuk<10?"0":"").concat(e.get("user").attributes.jamMasuk,":00")+" - "+"".concat(e.get("user").attributes.jamKeluar,":00")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"k"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"m"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"m"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"k"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"k"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"m"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"m"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"m"):""),l.a.createElement("td",{className:"lateInHours"},void 0===e.get("lateTimes")?"":N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),l.a.createElement("td",null,void 0===e.get("lateTimes")?"":N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("earlyTimes")?"":N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",{className:"earlyminutes"},void 0===e.get("earlyTimes")?"":N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0!==e.get("overtimeOut")?N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours():""),l.a.createElement("td",null,void 0!==e.get("overtimeOut")?N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes():""),l.a.createElement("td",null,N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"HH:mm"):"","HH:mm")).hours()),l.a.createElement("td",null,N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0!==e.get("overtimeIn")?"Working Overtime":void 0!==e.get("lateTimes")?"Late":void 0!==e.get("earlyTimes")?"Early Depature":"Working Hour"))})),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"7"},"Total"),l.a.createElement("td",null,this.state.hoursLate),l.a.createElement("td",null,this.state.minutesLate),l.a.createElement("td",null,this.state.jamEarly),l.a.createElement("td",null,this.state.minutesEarly),l.a.createElement("td",null,this.state.jamOvertime),l.a.createElement("td",null,this.state.minutesOvertime),l.a.createElement("td",null,this.state.jamTotal),l.a.createElement("td",null,this.state.minutesTotal),l.a.createElement("td",null)))))))))}}]),a}(l.a.Component),qt=l.a.memo(xt),Kt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getPosisi=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Position"),t=new O.a.Query(e);t.equalTo("status",1),t.find().then((function(e){n.setState({daftarPosisi:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.queryStaffByLevel=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=n.state,s=l.searchBy,r=l.searchValue,o=n.state,i=o.resPerPage,c=(o.page,new O.a.User),m=new O.a.Query(c);switch(m.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),m.containedIn("roles",t),m.skip(i*a-i),m.limit(i),m.withCount(),s){case"all":m.find({useMasterKey:!0}).then((function(e){e.results.map((function(e){return e.select=!1})),n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"name":m.matches("fullname",r,"i"),m.find({useMasterKey:!0}).then((function(e){e.results.map((function(e){return e.select=!1})),n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"nik":m.equalTo("nik",r),m.find({useMasterKey:!0}).then((function(e){e.results.map((function(e){return e.select=!1})),n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"divisi":m.matches("posisi",r,"i"),m.find({useMasterKey:!0}).then((function(e){e.results.map((function(e){return e.select=!1})),n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"leader":var u=new O.a.User,d=new O.a.Query(u);d.matches("fullname",r,"i"),m.matchesQuery("leaderIdNew",d),m.find({useMasterKey:!0}).then((function(e){e.results.map((function(e){return e.select=!1})),n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}))}},n.getDataByLevel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C();switch(n.setState({loadingFilter:!0}),e){case"leader":n.queryStaffByLevel("leaderIdNew",["staff"]);break;case"supervisor":n.queryStaffByLevel("supervisorID",["staff","leader"]);break;case"manager":n.queryStaffByLevel("managerID",["staff","leader","supervisor"]);break;case"head":n.queryStaffByLevel("headID",["staff","leader","supervisor","manager"]);break;case"gm":n.queryStaffByLevel("headID",["staff","leader","supervisor","manager","head"])}},n.getData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n.setState({loadingFilter:!0});var t=n.state,a=t.searchBy,l=t.searchValue,s=n.state,r=s.resPerPage,o=(s.page,new O.a.User),i=new O.a.Query(o);switch(i.notContainedIn("roles",["admin","leader","Admin","Leader"]),i.skip(r*e-r),i.limit(r),i.withCount(),a){case"all":i.find({useMasterKey:!0}).then((function(e){e.results.map((function(e){return e.select=!1})),n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"name":i.matches("fullname",l,"i"),i.find({useMasterKey:!0}).then((function(e){e.results.map((function(e){return e.select=!1})),n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"nik":i.equalTo("nik",l),i.find({useMasterKey:!0}).then((function(e){e.results.map((function(e){return e.select=!1})),n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"divisi":i.matches("posisi",l,"i"),i.find({useMasterKey:!0}).then((function(e){e.results.map((function(e){return e.select=!1})),n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"leader":var c=new O.a.User,m=new O.a.Query(c);m.matches("fullname",l,"i"),i.matchesQuery("leaderIdNew",m),i.find({useMasterKey:!0}).then((function(e){e.results.map((function(e){return e.select=!1})),n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}))}},n.closeLoading=function(){n.setState({loadingModal:!1})},n.handleChildCheck=function(e){var t=n.state.daftarStaff,a=n.state,l=a.checkId,s=a.fileData,r=e.target.value;t.map((function(t,a){if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)n.setState((function(e){return{checkId:[].concat(Object(Oe.a)(n.state.checkId),[r]),fileData:[].concat(Object(Oe.a)(n.state.fileData),[{fileName:t.get("fullname"),tableId:"ekspor".concat(a)}])}}),(function(){console.log(n.state.checkId),console.log(n.state.fileData)}));else{var o=l.indexOf(r),i=s.map((function(e){return e.fileName})).indexOf(t.get("fullname"));(o>-1||i>-1)&&(l.splice(o,1),s.splice(i,1),n.setState((function(e){return{checkId:l,fileData:s}}),(function(){console.log(n.state.checkId),console.log(n.state.fileData)})))}})),n.setState({daftarStaff:t})},n.handleAllCheck=function(e){var t=n.state.daftarStaff,a=[],l=[];t.map((function(t,n){return t.select=e.target.checked,t.select?(a.push(t.id),l.push({fileName:t.get("fullname"),tableId:"ekspor".concat(n)})):(a=[],l=[]),t})),n.setState({daftarStaff:t,checkId:a,fileData:l},(function(){return console.log(n.state.checkId)}))},n.handleApproval=function(e,t){e.preventDefault(),n.setState({loadingModal:!0});var a=O.a.Object.extend("Izin");new O.a.Query(a).get(n.state.userId).then((function(e){e.set("status",t?1:0),t||e.set("alasanReject",n.state.reason),e.save().then((function(){var e=Object(Oe.a)(n.state.izin);e.splice(n.state.userIndex,1),n.setState({counter:n.state.counter+1,izin:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1}),alert("Berhasil ".concat(t?"approve":"reject"))})).catch((function(e){alert(e.message),n.closeLoading()}))})).catch((function(e){alert(e.message),n.closeLoading()}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.handleFilter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.preventDefault(),n.setState({loadingFilter:!0});var a=n.state,l=a.searchBy,s=a.searchValue,r=n.state,o=r.resPerPage,i=(r.page,new O.a.User),c=new O.a.Query(i);switch(c.notContainedIn("roles",["admin","leader","Admin","Leader"]),c.skip(o*t-o),c.limit(o),c.withCount(),l){case"all":c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"name":c.matches("fullname",s,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"nik":c.equalTo("nik",s),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"divisi":c.matches("posisi",s,"i"),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}));break;case"leader":var m=new O.a.User,u=new O.a.Query(m);u.matches("fullname",s,"i"),c.matchesQuery("leaderIdNew",u),c.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})})).catch((function(e){n.setState({loadingFilter:!1}),alert("cek koneksi anda")}))}},n.queryAbsen=function(e,t,a,l){var s,r,o=O.a.Object.extend("Absence"),i=new O.a.Query(o),c=(new Date,n.state.checkId),m="DATA TIDAK DITEMUKAN";a?(s=new N.a(n.state.startDate),r=new N.a(n.state.endDate)):((s=new N.a(n.state.startDate)).startOf(e),(r=new N.a(s)).add(1,e)),i.equalTo("user",{__type:"Pointer",className:"_User",objectId:t}),i.ascending("createdAt"),i.greaterThanOrEqualTo("createdAt",s.toDate()),i.lessThan("createdAt",r.toDate()),i.include("user"),i.find().then((function(e){console.log("user",e);var t=[],a=[],s=[],r=[],o=[],i=[],u=[],d=[];e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,n){t.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){s.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),r.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",s)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){o.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),i.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),console.log("overtime hours",i),e.map((function(e,t){d.push(N.a.duration(q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),u.push(N.a.duration(q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),console.log("total menit",d),console.log("total jam",u),console.log(s),console.log(r),console.log(o),console.log(i);var g=a.reduce((function(e,t){return e+t}),0);console.log("total overtime",g);var p=u.reduce((function(e,t){return e+t})),h=d.reduce((function(e,t){return parseInt(e)+parseInt(t)}));if(console.log(p+Math.floor(h/60)),console.log(h%60),1===t.length){var f=t.reduce((function(e,t){return e+t}),0),v=Object(Oe.a)(n.state.sisaJam);v.splice(l,0,Math.floor(f/60));var E=Object(Oe.a)(n.state.minutesEarly);E.splice(l,0,f%60),n.setState({sisaJam:v,minutesEarly:E})}else if(t.length>1){var b=t.reduce((function(e,t){return e+t}),0),y=Object(Oe.a)(n.state.sisaJam);y.splice(l,0,Math.floor(b/60));var S=Object(Oe.a)(n.state.minutesEarly);S.splice(l,0,b%60),n.setState({sisaJam:y,minutesEarly:S})}else n.setState({minutesEarly:0,sisaJam:0});if(1===a.length){var k=a.reduce((function(e,t){return e+t}),0),j=Object(Oe.a)(n.state.jamEarly);j.splice(l,0,k+n.state.sisaJam[l]),n.setState({jamEarly:j})}else if(a.length>1){var M=a.reduce((function(e,t){return e+t}),0),w=Object(Oe.a)(n.state.jamEarly);w.splice(l,0,M+n.state.sisaJam[l]),n.setState({jamEarly:w})}else n.setState({jamEarly:0});if(console.log("late times ",r),1===s.length){var T=s.reduce((function(e,t){return e+t}),0),H=Object(Oe.a)(n.state.sisaJamLate);H.splice(l,0,Math.floor(T/60));var O=Object(Oe.a)(n.state.minutesLate);O.splice(l,0,T%60),n.setState({sisaJamLate:H,minutesLate:O})}else if(s.length>1){var I=s.reduce((function(e,t){return e+t}),0),D=Object(Oe.a)(n.state.sisaJamLate);D.splice(l,0,Math.floor(I/60));var C=Object(Oe.a)(n.state.minutesLate);C.splice(l,0,I%60),n.setState({sisaJamLate:D,minutesLate:C})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===r.length){var A=r.reduce((function(e,t){return e+t}),0),L=Object(Oe.a)(n.state.hoursLate);L.splice(l,0,A+n.state.sisaJamLate[l]),n.setState({hoursLate:L})}else if(r.length>1){var x=r.reduce((function(e,t){return e+t}),0),K=Object(Oe.a)(n.state.hoursLate);K.splice(l,0,x+n.state.sisaJamLate[l]),n.setState({hoursLate:K})}else n.setState({hoursLate:0});if(console.log(o),1===o.length){var P=o.reduce((function(e,t){return e+t}),0),J=Object(Oe.a)(n.state.sisaJamOvertime);J.splice(l,0,Math.floor(P/60));var F=Object(Oe.a)(n.state.minutesOvertime);F.splice(l,0,P%60),n.setState({sisaJamOvertime:J,minutesOvertime:F},(function(){return console.log(n.state.minutesOvertime)}))}else if(o.length>1){var z=o.reduce((function(e,t){return e+t}),0),U=Object(Oe.a)(n.state.sisaJamOvertime);U.splice(l,0,Math.floor(z/60));var B=Object(Oe.a)(n.state.minutesOvertime);B.splice(l,0,z%60),n.setState({sisaJamOvertime:U,minutesOvertime:B},(function(){return console.log(n.state.minutesOvertime)}))}else 0===o.length&&n.setState({minutesOvertime:"0",sisaJam:"0"});if(1===i.length){var R=i.reduce((function(e,t){return e+t}),0),Q=Object(Oe.a)(n.state.jamOvertime);Q.splice(l,0,R+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:Q})}else if(i.length>1){var Y=i.reduce((function(e,t){return e+t}),0),G=Object(Oe.a)(n.state.jamOvertime);G.splice(l,0,Y+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:G})}else 0===i.length&&n.setState({jamOvertime:n.state.jamOvertime.concat("0")});if(1===d.length){u.reduce((function(e,t){return e+t}),0);var _=d.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),W=Object(Oe.a)(n.state.sisaJamTotalMinutes);W.splice(l,0,Math.floor(_/60));var V=Object(Oe.a)(n.state.minutesTotal);V.splice(l,0,_%60),n.setState({sisaJamTotalMinutes:W,minutesTotal:V},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)})),console.log("total minutes",d),console.log("total minutes2",n.state.minutesTotal)}if(d.length>1){var Z=d.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),X=Object(Oe.a)(n.state.sisaJamTotalMinutes);X.splice(l,0,Math.floor(Z/60));var $=Object(Oe.a)(n.state.minutesTotal);$.splice(l,0,Z%60),n.setState({sisaJamTotalMinutes:X,minutesTotal:$},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)}))}else n.setState({minutesTotal:n.state.minutesTotal.concat("0"),sisaJamTotalMinutes:n.state.sisaJamTotalMinutes.concat("0")});if(1===u.length){console.log(u);var ee=u.reduce((function(e,t){return e+t}),0),te=Object(Oe.a)(n.state.jamTotal);te.splice(l,0,ee+n.state.sisaJamTotalMinutes[l]),n.setState({jamTotal:te}),console.log("jam total 1",n.state.jamTotal)}if(u.length>1){console.log(u);var ae=u.reduce((function(e,t){return e+t}),0),ne=Object(Oe.a)(n.state.jamTotal);ne.splice(l,0,ae+n.state.sisaJamTotalMinutes[l]),n.setState({jamTotal:ne})}else n.setState({jamTotal:0});var le=Object(Oe.a)(n.state.absence);le.splice(l,0,e);var se=Object(Oe.a)(n.state.tableData);se.splice(l,0,{fileName:Ee.a.isEmpty(e[0])?n.state.fileData[l].fileName:e[0].get("fullname"),tableId:"ekspor".concat(l)}),n.setState({absence:le,tableData:se,employeeName:Ee.a.isEmpty(e)?n.state.employeeName.concat(m):n.state.employeeName.concat(e[0].get("fullname")),employeeID:Ee.a.isEmpty(e)?n.state.employeeID.concat(m):n.state.employeeID.concat(e[0].get("user").attributes.nik),employeeTitle:Ee.a.isEmpty(e)?n.state.employeeTitle.concat(m):n.state.employeeTitle.concat(e[0].get("user").attributes.level),employeeDepartment:Ee.a.isEmpty(e)?n.state.employeeDepartment.concat(m):n.state.employeeDepartment.concat(e[0].get("user").attributes.posisi)}),console.log(!0),(l+=1)===c.length&&n.setState({loading:!1})})).catch((function(e){return console.log(e.message),n.setState({loading:!1}),!1}))},n.getDataAbsen=function(e){e.preventDefault(),n.setState({loading:!0}),n.setState({absence:[],tableData:[],tableData:[],sisaJam:[],sisaJamLate:[],sisaJamOvertime:[],sisaJamTotalMinutes:[],minutesEarly:[],minutesTotal:[],jamEarly:[],minutesLate:[],hoursLate:[],minutesOvertime:[],jamOvertime:[],jamTotal:[]});var t=n.state.checkId,a="DATA TIDAK DITEMUKAN",l=0;if(4===parseInt(n.state.status)){var s=[],r=[],o=[];t.map((function(e){var i,c,m=O.a.Object.extend("Absence"),u=new O.a.Query(m);new Date;(i=new N.a(n.state.startDate)).startOf("day"),(c=new N.a(i)).add(1,"day"),u.equalTo("user",{__type:"Pointer",className:"_User",objectId:e}),u.ascending("createdAt"),u.greaterThanOrEqualTo("createdAt",i.toDate()),u.lessThan("createdAt",c.toDate()),u.include("user"),u.find().then((function(e){console.log("user",e);var i=[],c=[],m=[],u=[],d=[],g=[],p=[],h=[];e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,t){i.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),c.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",i)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){m.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),u.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",m)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){d.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),g.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),e.map((function(e,t){h.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),p.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),console.log("total menit",h),console.log("total jam",p),console.log(m),console.log(u),console.log(d),console.log(g);var f=c.reduce((function(e,t){return e+t}),0);console.log("total overtime",f);var v=p.reduce((function(e,t){return e+t})),E=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}));if(console.log(v+Math.floor(E/60)),console.log(E%60),1===i.length){var b=i.reduce((function(e,t){return e+t}),0),y=Object(Oe.a)(n.state.sisaJam);y.splice(l,0,Math.floor(b/60));var S=Object(Oe.a)(n.state.minutesEarly);S.splice(l,0,b%60),n.setState({sisaJam:y,minutesEarly:S})}else if(i.length>1){var k=i.reduce((function(e,t){return e+t}),0),j=Object(Oe.a)(n.state.sisaJam);j.splice(l,0,Math.floor(k/60));var M=Object(Oe.a)(n.state.minutesEarly);M.splice(l,0,k%60),n.setState({sisaJam:j,minutesEarly:M})}else n.setState({minutesEarly:0,sisaJam:0});if(1===c.length){var w=c.reduce((function(e,t){return e+t}),0),T=Object(Oe.a)(n.state.jamEarly);T.splice(l,0,w+n.state.sisaJam[l]),n.setState({jamEarly:T})}else if(c.length>1){var H=c.reduce((function(e,t){return e+t}),0),O=Object(Oe.a)(n.state.jamEarly);O.splice(l,0,H+n.state.sisaJam[l]),n.setState({jamEarly:O})}else n.setState({jamEarly:0});if(console.log("late times ",u),1===m.length){var I=m.reduce((function(e,t){return e+t}),0),D=Object(Oe.a)(n.state.sisaJamLate);D.splice(l,0,Math.floor(I/60));var C=Object(Oe.a)(n.state.minutesLate);C.splice(l,0,I%60),n.setState({sisaJamLate:D,minutesLate:C})}else if(m.length>1){var A=m.reduce((function(e,t){return e+t}),0),L=Object(Oe.a)(n.state.sisaJamLate);L.splice(l,0,Math.floor(A/60));var x=Object(Oe.a)(n.state.minutesLate);x.splice(l,0,A%60),n.setState({sisaJamLate:L,minutesLate:x})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===u.length){var K=u.reduce((function(e,t){return e+t}),0),P=Object(Oe.a)(n.state.hoursLate);P.splice(l,0,K+n.state.sisaJamLate[l]),n.setState({hoursLate:P})}else if(u.length>1){var J=u.reduce((function(e,t){return e+t}),0),F=Object(Oe.a)(n.state.hoursLate);F.splice(l,0,J+n.state.sisaJamLate[l]),n.setState({hoursLate:F})}else n.setState({hoursLate:0});if(console.log(d),1===d.length){var z=d.reduce((function(e,t){return e+t}),0),U=Object(Oe.a)(n.state.sisaJamOvertime);U.splice(l,0,Math.floor(z/60));var B=Object(Oe.a)(n.state.minutesOvertime);B.splice(l,0,z%60),n.setState({sisaJamOvertime:U,minutesOvertime:B},(function(){return console.log(n.state.minutesOvertime)}))}else if(d.length>1){var R=d.reduce((function(e,t){return e+t}),0),Q=Object(Oe.a)(n.state.sisaJamOvertime);Q.splice(l,0,Math.floor(R/60));var Y=Object(Oe.a)(n.state.minutesOvertime);Y.splice(l,0,R%60),n.setState({sisaJamOvertime:Q,minutesOvertime:Y},(function(){return console.log(n.state.minutesOvertime)}))}else 0===d.length&&n.setState({minutesOvertime:n.state.minutesOvertime.concat("0"),sisaJam:n.state.sisaJam.concat(0)});if(1===g.length){var G=g.reduce((function(e,t){return e+t}),0),_=Object(Oe.a)(n.state.jamOvertime);_.splice(l,0,G+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:_})}else if(g.length>1){var W=g.reduce((function(e,t){return e+t}),0),V=Object(Oe.a)(n.state.jamOvertime);V.splice(l,0,W+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:V})}else 0===g.length&&n.setState({jamOvertime:n.state.jamOvertime.concat("0")});if(1===h.length){p.reduce((function(e,t){return e+t}),0);var Z=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(Z/60)),s.push(Math.floor(Z/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,Z%60),o.splice(l,0,Z%60),n.setState({sisaJamTotalMinutes:s,minutesTotal:o},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)})),console.log("total minutes",h),console.log("total data",l),console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("sisa jam 2",s),console.log("total minutes2",n.state.minutesTotal[l])}if(h.length>1){var X=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(X/60)),s.push(Math.floor(X/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,X%60),o.splice(l,0,X%60),n.setState({sisaJamTotalMinutes:s,minutesTotal:o},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)}))}else n.setState({minutesTotal:n.state.minutesTotal.concat("0"),sisaJamTotalMinutes:n.state.sisaJamTotalMinutes.concat("0")});if(1===p.length){console.log(p),console.log("sisa jam",n.state.sisaJamTotalMinutes[l]),console.log("sisa jam 2",s[l]);var $=p.reduce((function(e,t){return e+t}));Object(Oe.a)(n.state.jamTotal).splice(l,0,$+s[l]),r.splice(l,0,$+s[l]),n.setState({jamTotal:r})}if(p.length>1){console.log(p),console.log("sisa jam 2",s[l]);var ee=p.reduce((function(e,t){return e+t}),0);Object(Oe.a)(n.state.jamTotal).splice(l,0,ee+s[l]),r.splice(l,0,ee+s[l]),n.setState({jamTotal:r})}else 0===p.length&&n.setState({jamTotal:0});var te=Object(Oe.a)(n.state.absence);te.splice(l,0,e);var ae=Object(Oe.a)(n.state.tableData);ae.splice(l,0,{fileName:Ee.a.isEmpty(e[0])?n.state.fileData[l].fileName:e[0].get("fullname"),tableId:"ekspor".concat(l)}),n.setState({absence:te,tableData:ae,employeeName:Ee.a.isEmpty(e)?n.state.employeeName.concat(a):n.state.employeeName.concat(e[0].get("fullname")),employeeID:Ee.a.isEmpty(e)?n.state.employeeID.concat(a):n.state.employeeID.concat(e[0].get("user").attributes.nik),employeeTitle:Ee.a.isEmpty(e)?n.state.employeeTitle.concat(a):n.state.employeeTitle.concat(e[0].get("user").attributes.level),employeeDepartment:Ee.a.isEmpty(e)?n.state.employeeDepartment.concat(a):n.state.employeeDepartment.concat(e[0].get("user").attributes.posisi),jamTotal:r,minutesTotal:o}),console.log(!0),(l+=1)===t.length&&n.setState({loading:!1})})).catch((function(e){return console.log(e.message),n.setState({loading:!1}),!1}))}))}else if(5===parseInt(n.state.status)){var i=[],c=[],m=[];t.map((function(e){var s,r,o=O.a.Object.extend("Absence"),u=new O.a.Query(o);new Date;(s=new N.a(n.state.startDate)).startOf("week"),(r=new N.a(s)).add(1,"week"),u.equalTo("user",{__type:"Pointer",className:"_User",objectId:e}),u.ascending("createdAt"),u.greaterThanOrEqualTo("createdAt",s.toDate()),u.lessThan("createdAt",r.toDate()),u.include("user"),u.find().then((function(e){console.log("user",e);var s=[],r=[],o=[],u=[],d=[],g=[],p=[],h=[];e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,t){s.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),r.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",s)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){o.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),u.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",o)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){d.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),g.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),e.map((function(e,t){h.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),p.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),console.log("total menit",h),console.log("total jam",p),console.log(o),console.log(u),console.log(d),console.log(g);var f=r.reduce((function(e,t){return e+t}),0);console.log("total overtime",f);var v=p.reduce((function(e,t){return e+t})),E=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}));if(console.log(v+Math.floor(E/60)),console.log(E%60),1===s.length){var b=s.reduce((function(e,t){return e+t}),0),y=Object(Oe.a)(n.state.sisaJam);y.splice(l,0,Math.floor(b/60));var S=Object(Oe.a)(n.state.minutesEarly);S.splice(l,0,b%60),n.setState({sisaJam:y,minutesEarly:S})}else if(s.length>1){var k=s.reduce((function(e,t){return e+t}),0),j=Object(Oe.a)(n.state.sisaJam);j.splice(l,0,Math.floor(k/60));var M=Object(Oe.a)(n.state.minutesEarly);M.splice(l,0,k%60),n.setState({sisaJam:j,minutesEarly:M})}else n.setState({minutesEarly:0,sisaJam:0});if(1===r.length){var w=r.reduce((function(e,t){return e+t}),0),T=Object(Oe.a)(n.state.jamEarly);T.splice(l,0,w+n.state.sisaJam[l]),n.setState({jamEarly:T})}else if(r.length>1){var H=r.reduce((function(e,t){return e+t}),0),O=Object(Oe.a)(n.state.jamEarly);O.splice(l,0,H+n.state.sisaJam[l]),n.setState({jamEarly:O})}else n.setState({jamEarly:0});if(console.log("late times ",u),1===o.length){var I=o.reduce((function(e,t){return e+t}),0),D=Object(Oe.a)(n.state.sisaJamLate);D.splice(l,0,Math.floor(I/60));var C=Object(Oe.a)(n.state.minutesLate);C.splice(l,0,I%60),n.setState({sisaJamLate:D,minutesLate:C})}else if(o.length>1){var A=o.reduce((function(e,t){return e+t}),0),L=Object(Oe.a)(n.state.sisaJamLate);L.splice(l,0,Math.floor(A/60));var x=Object(Oe.a)(n.state.minutesLate);x.splice(l,0,A%60),n.setState({sisaJamLate:L,minutesLate:x})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===u.length){var K=u.reduce((function(e,t){return e+t}),0),P=Object(Oe.a)(n.state.hoursLate);P.splice(l,0,K+n.state.sisaJamLate[l]),n.setState({hoursLate:P})}else if(u.length>1){var J=u.reduce((function(e,t){return e+t}),0),F=Object(Oe.a)(n.state.hoursLate);F.splice(l,0,J+n.state.sisaJamLate[l]),n.setState({hoursLate:F})}else n.setState({hoursLate:0});if(console.log(d),1===d.length){var z=d.reduce((function(e,t){return e+t}),0),U=Object(Oe.a)(n.state.sisaJamOvertime);U.splice(l,0,Math.floor(z/60));var B=Object(Oe.a)(n.state.minutesOvertime);B.splice(l,0,z%60),n.setState({sisaJamOvertime:U,minutesOvertime:B},(function(){return console.log(n.state.minutesOvertime)}))}else if(d.length>1){var R=d.reduce((function(e,t){return e+t}),0),Q=Object(Oe.a)(n.state.sisaJamOvertime);Q.splice(l,0,Math.floor(R/60));var Y=Object(Oe.a)(n.state.minutesOvertime);Y.splice(l,0,R%60),n.setState({sisaJamOvertime:Q,minutesOvertime:Y},(function(){return console.log(n.state.minutesOvertime)}))}else 0===d.length&&n.setState({minutesOvertime:n.state.minutesOvertime.concat("0"),sisaJam:n.state.sisaJam.concat(0)});if(1===g.length){var G=g.reduce((function(e,t){return e+t}),0),_=Object(Oe.a)(n.state.jamOvertime);_.splice(l,0,G+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:_})}else if(g.length>1){var W=g.reduce((function(e,t){return e+t}),0),V=Object(Oe.a)(n.state.jamOvertime);V.splice(l,0,W+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:V})}else 0===g.length&&n.setState({jamOvertime:n.state.jamOvertime.concat("0")});if(1===h.length){p.reduce((function(e,t){return e+t}),0);var Z=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(Z/60)),i.push(Math.floor(Z/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,Z%60),m.splice(l,0,Z%60),n.setState({sisaJamTotalMinutes:i,minutesTotal:m},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)})),console.log("total minutes",h),console.log("total data",l),console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("sisa jam 2",i),console.log("total minutes2",n.state.minutesTotal[l])}if(h.length>1){var X=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(X/60)),i.push(Math.floor(X/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,X%60),m.splice(l,0,X%60),n.setState({sisaJamTotalMinutes:i,minutesTotal:m},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)}))}else n.setState({minutesTotal:n.state.minutesTotal.concat("0"),sisaJamTotalMinutes:n.state.sisaJamTotalMinutes.concat("0")});if(1===p.length){console.log(p),console.log("sisa jam",n.state.sisaJamTotalMinutes[l]),console.log("sisa jam 2",i[l]);var $=p.reduce((function(e,t){return e+t}));Object(Oe.a)(n.state.jamTotal).splice(l,0,$+i[l]),c.splice(l,0,$+i[l]),n.setState({jamTotal:c})}if(p.length>1){console.log(p),console.log("sisa jam 2",i[l]);var ee=p.reduce((function(e,t){return e+t}),0);Object(Oe.a)(n.state.jamTotal).splice(l,0,ee+i[l]),c.splice(l,0,ee+i[l]),n.setState({jamTotal:c})}else 0===p.length&&n.setState({jamTotal:0});var te=Object(Oe.a)(n.state.absence);te.splice(l,0,e);var ae=Object(Oe.a)(n.state.tableData);ae.splice(l,0,{fileName:Ee.a.isEmpty(e[0])?n.state.fileData[l].fileName:e[0].get("fullname"),tableId:"ekspor".concat(l)}),n.setState({absence:te,tableData:ae,employeeName:Ee.a.isEmpty(e)?n.state.employeeName.concat(a):n.state.employeeName.concat(e[0].get("fullname")),employeeID:Ee.a.isEmpty(e)?n.state.employeeID.concat(a):n.state.employeeID.concat(e[0].get("user").attributes.nik),employeeTitle:Ee.a.isEmpty(e)?n.state.employeeTitle.concat(a):n.state.employeeTitle.concat(e[0].get("user").attributes.level),employeeDepartment:Ee.a.isEmpty(e)?n.state.employeeDepartment.concat(a):n.state.employeeDepartment.concat(e[0].get("user").attributes.posisi),jamTotal:c,minutesTotal:m}),console.log(!0),(l+=1)===t.length&&n.setState({loading:!1})})).catch((function(e){return console.log(e.message),n.setState({loading:!1}),!1}))}))}else if(6===parseInt(n.state.status)){var u=[],d=[],g=[];t.map((function(e){var s,r,o=O.a.Object.extend("Absence"),i=new O.a.Query(o);new Date;(s=new N.a(n.state.startDate)).startOf("month"),(r=new N.a(s)).add(1,"month"),i.equalTo("user",{__type:"Pointer",className:"_User",objectId:e}),i.ascending("createdAt"),i.greaterThanOrEqualTo("createdAt",s.toDate()),i.lessThan("createdAt",r.toDate()),i.include("user"),i.find().then((function(e){console.log("user",e);var s=[],r=[],o=[],i=[],c=[],m=[],p=[],h=[];e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,t){s.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),r.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",s)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){o.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),i.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",o)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){c.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),m.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),e.map((function(e,t){h.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),p.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),console.log("total menit",h),console.log("total jam",p),console.log(o),console.log(i),console.log(c),console.log(m);var f=r.reduce((function(e,t){return e+t}),0);console.log("total overtime",f);var v=p.reduce((function(e,t){return e+t})),E=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}));if(console.log(v+Math.floor(E/60)),console.log(E%60),1===s.length){var b=s.reduce((function(e,t){return e+t}),0),y=Object(Oe.a)(n.state.sisaJam);y.splice(l,0,Math.floor(b/60));var S=Object(Oe.a)(n.state.minutesEarly);S.splice(l,0,b%60),n.setState({sisaJam:y,minutesEarly:S})}else if(s.length>1){var k=s.reduce((function(e,t){return e+t}),0),j=Object(Oe.a)(n.state.sisaJam);j.splice(l,0,Math.floor(k/60));var M=Object(Oe.a)(n.state.minutesEarly);M.splice(l,0,k%60),n.setState({sisaJam:j,minutesEarly:M})}else n.setState({minutesEarly:0,sisaJam:0});if(1===r.length){var w=r.reduce((function(e,t){return e+t}),0),T=Object(Oe.a)(n.state.jamEarly);T.splice(l,0,w+n.state.sisaJam[l]),n.setState({jamEarly:T})}else if(r.length>1){var H=r.reduce((function(e,t){return e+t}),0),O=Object(Oe.a)(n.state.jamEarly);O.splice(l,0,H+n.state.sisaJam[l]),n.setState({jamEarly:O})}else n.setState({jamEarly:0});if(console.log("late times ",i),1===o.length){var I=o.reduce((function(e,t){return e+t}),0),D=Object(Oe.a)(n.state.sisaJamLate);D.splice(l,0,Math.floor(I/60));var C=Object(Oe.a)(n.state.minutesLate);C.splice(l,0,I%60),n.setState({sisaJamLate:D,minutesLate:C})}else if(o.length>1){var A=o.reduce((function(e,t){return e+t}),0),L=Object(Oe.a)(n.state.sisaJamLate);L.splice(l,0,Math.floor(A/60));var x=Object(Oe.a)(n.state.minutesLate);x.splice(l,0,A%60),n.setState({sisaJamLate:L,minutesLate:x})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===i.length){var K=i.reduce((function(e,t){return e+t}),0),P=Object(Oe.a)(n.state.hoursLate);P.splice(l,0,K+n.state.sisaJamLate[l]),n.setState({hoursLate:P})}else if(i.length>1){var J=i.reduce((function(e,t){return e+t}),0),F=Object(Oe.a)(n.state.hoursLate);F.splice(l,0,J+n.state.sisaJamLate[l]),n.setState({hoursLate:F})}else n.setState({hoursLate:0});if(console.log(c),1===c.length){var z=c.reduce((function(e,t){return e+t}),0),U=Object(Oe.a)(n.state.sisaJamOvertime);U.splice(l,0,Math.floor(z/60));var B=Object(Oe.a)(n.state.minutesOvertime);B.splice(l,0,z%60),n.setState({sisaJamOvertime:U,minutesOvertime:B},(function(){return console.log(n.state.minutesOvertime)}))}else if(c.length>1){var R=c.reduce((function(e,t){return e+t}),0),Q=Object(Oe.a)(n.state.sisaJamOvertime);Q.splice(l,0,Math.floor(R/60));var Y=Object(Oe.a)(n.state.minutesOvertime);Y.splice(l,0,R%60),n.setState({sisaJamOvertime:Q,minutesOvertime:Y},(function(){return console.log(n.state.minutesOvertime)}))}else 0===c.length&&n.setState({minutesOvertime:n.state.minutesOvertime.concat("0"),sisaJam:n.state.sisaJam.concat(0)});if(1===m.length){var G=m.reduce((function(e,t){return e+t}),0),_=Object(Oe.a)(n.state.jamOvertime);_.splice(l,0,G+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:_})}else if(m.length>1){var W=m.reduce((function(e,t){return e+t}),0),V=Object(Oe.a)(n.state.jamOvertime);V.splice(l,0,W+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:V})}else 0===m.length&&n.setState({jamOvertime:n.state.jamOvertime.concat("0")});if(1===h.length){p.reduce((function(e,t){return e+t}),0);var Z=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(Z/60)),u.push(Math.floor(Z/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,Z%60),g.splice(l,0,Z%60),n.setState({sisaJamTotalMinutes:u,minutesTotal:g},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)})),console.log("total minutes",h),console.log("total data",l),console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("sisa jam 2",u),console.log("total minutes2",n.state.minutesTotal[l])}if(h.length>1){var X=h.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(X/60)),u.push(Math.floor(X/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,X%60),g.splice(l,0,X%60),n.setState({sisaJamTotalMinutes:u,minutesTotal:g},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)}))}else n.setState({minutesTotal:n.state.minutesTotal.concat("0"),sisaJamTotalMinutes:n.state.sisaJamTotalMinutes.concat("0")});if(1===p.length){console.log(p),console.log("sisa jam",n.state.sisaJamTotalMinutes[l]),console.log("sisa jam 2",u[l]);var $=p.reduce((function(e,t){return e+t}));Object(Oe.a)(n.state.jamTotal).splice(l,0,$+u[l]),d.splice(l,0,$+u[l]),n.setState({jamTotal:d})}if(p.length>1){console.log(p),console.log("sisa jam 2",u[l]);var ee=p.reduce((function(e,t){return e+t}),0);Object(Oe.a)(n.state.jamTotal).splice(l,0,ee+u[l]),d.splice(l,0,ee+u[l]),n.setState({jamTotal:d})}else 0===p.length&&n.setState({jamTotal:0});var te=Object(Oe.a)(n.state.absence);te.splice(l,0,e);var ae=Object(Oe.a)(n.state.tableData);ae.splice(l,0,{fileName:Ee.a.isEmpty(e[0])?n.state.fileData[l].fileName:e[0].get("fullname"),tableId:"ekspor".concat(l)}),n.setState({absence:te,tableData:ae,employeeName:Ee.a.isEmpty(e)?n.state.employeeName.concat(a):n.state.employeeName.concat(e[0].get("fullname")),employeeID:Ee.a.isEmpty(e)?n.state.employeeID.concat(a):n.state.employeeID.concat(e[0].get("user").attributes.nik),employeeTitle:Ee.a.isEmpty(e)?n.state.employeeTitle.concat(a):n.state.employeeTitle.concat(e[0].get("user").attributes.level),employeeDepartment:Ee.a.isEmpty(e)?n.state.employeeDepartment.concat(a):n.state.employeeDepartment.concat(e[0].get("user").attributes.posisi),jamTotal:d,minutesTotal:g}),console.log(!0),(l+=1)===t.length&&n.setState({loading:!1})})).catch((function(e){return console.log(e.message),n.setState({loading:!1}),!1}))}))}else if(7===parseInt(n.state.status)){var p=[],h=[],f=[];t.map((function(e){var s,r,o=O.a.Object.extend("Absence"),i=new O.a.Query(o);new Date;s=new N.a(n.state.startDate),r=new N.a(n.state.endDate),i.equalTo("user",{__type:"Pointer",className:"_User",objectId:e}),i.ascending("createdAt"),i.greaterThanOrEqualTo("createdAt",s.toDate()),i.lessThan("createdAt",r.toDate()),i.include("user"),i.find().then((function(e){console.log("user",e);var s=[],r=[],o=[],i=[],c=[],m=[],u=[],d=[];e.filter((function(e){return void 0!==e.get("earlyTimes")})).map((function(e,t){s.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),r.push(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",s)})),e.filter((function(e){return void 0!==e.get("lateTimes")})).map((function(e,t){o.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),i.push(N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",o)})),e.filter((function(e){return void 0!==e.get("overtimeOut")})).map((function(e,t){c.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),m.push(N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())})),e.map((function(e,t){d.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),u.push(N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):q(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())})),console.log("total menit",d),console.log("total jam",u),console.log(o),console.log(i),console.log(c),console.log(m);var g=r.reduce((function(e,t){return e+t}),0);console.log("total overtime",g);var v=u.reduce((function(e,t){return e+t})),E=d.reduce((function(e,t){return parseInt(e)+parseInt(t)}));if(console.log(v+Math.floor(E/60)),console.log(E%60),1===s.length){var b=s.reduce((function(e,t){return e+t}),0),y=Object(Oe.a)(n.state.sisaJam);y.splice(l,0,Math.floor(b/60));var S=Object(Oe.a)(n.state.minutesEarly);S.splice(l,0,b%60),n.setState({sisaJam:y,minutesEarly:S})}else if(s.length>1){var k=s.reduce((function(e,t){return e+t}),0),j=Object(Oe.a)(n.state.sisaJam);j.splice(l,0,Math.floor(k/60));var M=Object(Oe.a)(n.state.minutesEarly);M.splice(l,0,k%60),n.setState({sisaJam:j,minutesEarly:M})}else n.setState({minutesEarly:0,sisaJam:0});if(1===r.length){var w=r.reduce((function(e,t){return e+t}),0),T=Object(Oe.a)(n.state.jamEarly);T.splice(l,0,w+n.state.sisaJam[l]),n.setState({jamEarly:T})}else if(r.length>1){var H=r.reduce((function(e,t){return e+t}),0),O=Object(Oe.a)(n.state.jamEarly);O.splice(l,0,H+n.state.sisaJam[l]),n.setState({jamEarly:O})}else n.setState({jamEarly:0});if(console.log("late times ",i),1===o.length){var I=o.reduce((function(e,t){return e+t}),0),D=Object(Oe.a)(n.state.sisaJamLate);D.splice(l,0,Math.floor(I/60));var C=Object(Oe.a)(n.state.minutesLate);C.splice(l,0,I%60),n.setState({sisaJamLate:D,minutesLate:C})}else if(o.length>1){var A=o.reduce((function(e,t){return e+t}),0),L=Object(Oe.a)(n.state.sisaJamLate);L.splice(l,0,Math.floor(A/60));var x=Object(Oe.a)(n.state.minutesLate);x.splice(l,0,A%60),n.setState({sisaJamLate:L,minutesLate:x})}else n.setState({sisaJamLate:0,minutesLate:0});if(1===i.length){var K=i.reduce((function(e,t){return e+t}),0),P=Object(Oe.a)(n.state.hoursLate);P.splice(l,0,K+n.state.sisaJamLate[l]),n.setState({hoursLate:P})}else if(i.length>1){var J=i.reduce((function(e,t){return e+t}),0),F=Object(Oe.a)(n.state.hoursLate);F.splice(l,0,J+n.state.sisaJamLate[l]),n.setState({hoursLate:F})}else n.setState({hoursLate:0});if(console.log(c),1===c.length){var z=c.reduce((function(e,t){return e+t}),0),U=Object(Oe.a)(n.state.sisaJamOvertime);U.splice(l,0,Math.floor(z/60));var B=Object(Oe.a)(n.state.minutesOvertime);B.splice(l,0,z%60),n.setState({sisaJamOvertime:U,minutesOvertime:B},(function(){return console.log(n.state.minutesOvertime)}))}else if(c.length>1){var R=c.reduce((function(e,t){return e+t}),0),Q=Object(Oe.a)(n.state.sisaJamOvertime);Q.splice(l,0,Math.floor(R/60));var Y=Object(Oe.a)(n.state.minutesOvertime);Y.splice(l,0,R%60),n.setState({sisaJamOvertime:Q,minutesOvertime:Y},(function(){return console.log(n.state.minutesOvertime)}))}else 0===c.length&&n.setState({minutesOvertime:n.state.minutesOvertime.concat("0"),sisaJam:n.state.sisaJam.concat(0)});if(1===m.length){var G=m.reduce((function(e,t){return e+t}),0),_=Object(Oe.a)(n.state.jamOvertime);_.splice(l,0,G+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:_})}else if(m.length>1){var W=m.reduce((function(e,t){return e+t}),0),V=Object(Oe.a)(n.state.jamOvertime);V.splice(l,0,W+n.state.sisaJamOvertime[l]),n.setState({jamOvertime:V})}else 0===m.length&&n.setState({jamOvertime:n.state.jamOvertime.concat("0")});if(1===d.length){u.reduce((function(e,t){return e+t}),0);var Z=d.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(Z/60)),p.push(Math.floor(Z/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,Z%60),f.splice(l,0,Z%60),n.setState({sisaJamTotalMinutes:p,minutesTotal:f},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)})),console.log("total minutes",d),console.log("total data",l),console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("sisa jam 2",p),console.log("total minutes2",n.state.minutesTotal[l])}if(d.length>1){var X=d.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);Object(Oe.a)(n.state.sisaJamTotalMinutes).splice(l,0,Math.floor(X/60)),p.push(Math.floor(X/60)),Object(Oe.a)(n.state.minutesTotal).splice(l,0,X%60),f.splice(l,0,X%60),n.setState({sisaJamTotalMinutes:p,minutesTotal:f},(function(){console.log("sisa jam",n.state.sisaJamTotalMinutes),console.log("menit total",n.state.minutesTotal)}))}else n.setState({minutesTotal:n.state.minutesTotal.concat("0"),sisaJamTotalMinutes:n.state.sisaJamTotalMinutes.concat("0")});if(1===u.length){console.log(u),console.log("sisa jam",n.state.sisaJamTotalMinutes[l]),console.log("sisa jam 2",p[l]);var $=u.reduce((function(e,t){return e+t}));Object(Oe.a)(n.state.jamTotal).splice(l,0,$+p[l]),h.splice(l,0,$+p[l]),n.setState({jamTotal:h})}if(u.length>1){console.log(u),console.log("sisa jam 2",p[l]);var ee=u.reduce((function(e,t){return e+t}),0);Object(Oe.a)(n.state.jamTotal).splice(l,0,ee+p[l]),h.splice(l,0,ee+p[l]),n.setState({jamTotal:h})}else 0===u.length&&n.setState({jamTotal:0});var te=Object(Oe.a)(n.state.absence);te.splice(l,0,e);var ae=Object(Oe.a)(n.state.tableData);ae.splice(l,0,{fileName:Ee.a.isEmpty(e[0])?n.state.fileData[l].fileName:e[0].get("fullname"),tableId:"ekspor".concat(l)}),n.setState({absence:te,tableData:ae,employeeName:Ee.a.isEmpty(e)?n.state.employeeName.concat(a):n.state.employeeName.concat(e[0].get("fullname")),employeeID:Ee.a.isEmpty(e)?n.state.employeeID.concat(a):n.state.employeeID.concat(e[0].get("user").attributes.nik),employeeTitle:Ee.a.isEmpty(e)?n.state.employeeTitle.concat(a):n.state.employeeTitle.concat(e[0].get("user").attributes.level),employeeDepartment:Ee.a.isEmpty(e)?n.state.employeeDepartment.concat(a):n.state.employeeDepartment.concat(e[0].get("user").attributes.posisi),jamTotal:h,minutesTotal:f}),console.log(!0),(l+=1)===t.length&&n.setState({loading:!1})})).catch((function(e){return console.log(e.message),n.setState({loading:!1}),!1}))}))}},n.subtractHourLate=function(e,t,a){var n;return"Late"===a&&t>e&&(n=t-e),"Overtime"===a&&t>e&&(n=t-e),"EarlyLeave"===a&&t<e&&(n=e-t),n},n.rejectChecked=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=n.state.checkId,a=0;t.map((function(e){var l=O.a.Object.extend("Izin");new O.a.Query(l).get(e).then((function(e){e.set("status",1),e.set("alasanReject",n.state.reason),e.save().then((function(){if((a+=1)===t.length)return alert("Berhasil reject"),window.location.reload(!1)}))}))}))},n.state={daftarStaff:[],absence:[],tableData:[],fileData:[],daftarLevel:[],daftarPosisi:[],searchBy:"all",searchValue:"",excelMode:!1,loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],approveAllMode:!1,rejectAllMode:!1,deleteCounter:0,searchBy:"all",searchValue:"",resPerPage:20,page:1,totalData:0,employeeName:[],employeeID:[],employeeDepartment:[],employeeTitle:[],sisaJam:[],sisaJamLate:[],sisaJamOvertime:[],sisaJamTotalMinutes:[],minutesEarly:[],minutesTotal:[],jamEarly:[],minutesLate:[],hoursLate:[],minutesOvertime:[],jamOvertime:[],jamTotal:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDataByLevel(),this.getPosisi()}},{key:"render",value:function(){var e=this,t=this.state,a=t.daftarStaff,n=t.daftarLevel,s=(t.daftarPosisi,t.loading),r=t.approvalMode,o=t.rejectMode,i=t.loadingModal,c=t.fullnames,m=t.counter,u=t.approveAllMode,d=t.rejectAllMode,p=l.a.createElement(f.a,{controlId:"formlvl"},l.a.createElement(y.a,{className:"form-control-alternative",type:"select",required:!0,onChange:function(t){return e.setState({searchValue:t.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih ",this.state.searchBy),"leader"===this.state.searchBy?n.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))})):this.state.daftarPosisi.map((function(e,t){return l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))})))),S=l.a.createElement(f.a,null,l.a.createElement(y.a,{type:"text",className:"form-control-alternative",disabled:"all"===this.state.searchBy,placeholder:"all"===this.state.searchBy?"":"Masukkan ".concat(this.state.searchBy),onChange:function(t){return e.setState({searchValue:t.target.value})}}));return console.log(this.state.jamTotal),l.a.createElement(l.a.Fragment,null,l.a.createElement(ft,{izin:m}),l.a.createElement(g.a,{className:"mt--7",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-2"},"Export data karyawan"),l.a.createElement(h.a,{onSubmit:this.handleFilter,className:!0},l.a.createElement(F.a,null,l.a.createElement(z.a,{lg:2},"Search by"),l.a.createElement(z.a,{lg:2},l.a.createElement(f.a,{controlId:"formHorizontalEmails"},l.a.createElement(y.a,{className:"form-control-alternative",type:"select",onChange:function(t){return e.setState({searchBy:t.target.value,searchValue:""})}},["all","nik","name","leader","divisi"].map((function(e){return l.a.createElement("option",{value:e},e)}))))),l.a.createElement(z.a,{lg:4},"level"==this.state.searchBy||"divisi"==this.state.searchBy?p:S),l.a.createElement(z.a,{sm:2},l.a.createElement(ae.a,{color:"primary",type:"submit",disable:this.state.loadingFilter?"true":"false"},l.a.createElement("i",{className:"fa fa-search"})," ",this.state.loadingFilter?"Fetching...":"Search")))),0===a.length||0===this.state.checkId.length?"":l.a.createElement(z.a,{sm:{span:0},className:"float-none"},l.a.createElement(ae.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:s?"true":"false",onClick:function(){return e.setState({excelMode:!0})}},l.a.createElement("i",{className:"ni ni-single-copy-04"})," Export to excel"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0,id:"ekspor"},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck})),l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Level"),l.a.createElement("th",{scope:"col"},"Divisi"))),l.a.createElement("tbody",null,s?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",value:t.id,checked:t.select,onChange:e.handleChildCheck})),l.a.createElement("td",null,t.get("nik")),l.a.createElement("td",null,t.get("fullname")),l.a.createElement("td",null,t.get("level")),l.a.createElement("td",null,t.get("posisi")))}))))),l.a.createElement(ee.a,null,this.state.absence.map((function(t,a){return l.a.createElement(ne.a,{responsive:!0,className:"mt-4",id:"ekspor".concat(a),hidden:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Fingerprint ID"),l.a.createElement("th",{scope:"col",style:{border:"none"}},e.state.employeeID[a]))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Name"),l.a.createElement("th",{scope:"col",style:{border:"none"}},e.state.employeeName[a]))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Title"),l.a.createElement("th",{scope:"col",style:{border:"none"}},e.state.employeeTitle[a]))),l.a.createElement("thead",{className:"border-0 mb-2"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Department Title"),l.a.createElement("th",{scope:"col",className:"mb-2",style:{border:"none"}},e.state.employeeDepartment[a]))),l.a.createElement("thead",{className:"thead-light",style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",rowSpan:"2"},"Day"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Date"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Working Hour"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Duty On"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Duty Off"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Late In"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Early Departure"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Over Time"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Total Hour"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Notes")),l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"))),l.a.createElement("tbody",null,t.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:14,style:{textAlign:"center"}},"Data absen tidak ditemukan")):t.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,q(e.get("createdAt"),"ddd")),l.a.createElement("td",null,q(e.get("createdAt"),"DD/MM/YYYY")),l.a.createElement("td",null,"".concat(e.get("user").attributes.jamMasuk<10?"0":"").concat(e.get("user").attributes.jamMasuk,":00")+" - "+"".concat(e.get("user").attributes.jamKeluar,":00")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"k"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"m"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"m"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"k"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"k"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"m"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"m"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"m"):""),l.a.createElement("td",{className:"lateInHours"},void 0===e.get("lateTimes")?"":N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),l.a.createElement("td",null,void 0===e.get("lateTimes")?"":N.a.duration(q(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("earlyTimes")?"":N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",{className:"earlyminutes"},void 0===e.get("earlyTimes")?"":N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(N.a.duration(q(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0!==e.get("overtimeOut")?N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours():""),l.a.createElement("td",null,void 0!==e.get("overtimeOut")?N.a.duration(q(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(N.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes():""),l.a.createElement("td",null,N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):void 0!==e.get("absenMasuk")?q(e.get("absenMasuk"),"HH:mm"):"","HH:mm")).hours()),l.a.createElement("td",null,N.a.duration(void 0!==e.get("earlyTimes")?q(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?q(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?q(e.get("absenKeluar"),"HH:mm"):"","HH:mm").subtract(N.a.duration(void 0!==e.get("lateTimes")?q(e.get("lateTimes"),"HH:mm"):q(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0!==e.get("overtimeOut")?"Working Overtime":void 0!==e.get("lateTimes")?"Late":void 0!==e.get("earlyTimes")?"EarlyLeave":"Working Hour"))})),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"7"},"Total"),l.a.createElement("td",null,e.state.hoursLate[a]),l.a.createElement("td",null,e.state.minutesLate[a]),l.a.createElement("td",null,e.state.jamEarly[a]),l.a.createElement("td",null,e.state.minutesEarly[a]),l.a.createElement("td",null,e.state.jamOvertime[a]),l.a.createElement("td",null,e.state.minutesOvertime[a]),l.a.createElement("td",null,e.state.jamTotal[a]),l.a.createElement("td",null,e.state.minutesTotal[a]),l.a.createElement("td",null))))})))))),l.a.createElement(Ce,{size:"lg",show:this.state.excelMode,loading:i,footer:!0,disabled:this.state.tableData.length<1,handleHide:function(){e.toggle("excelMode"),e.setState({tableData:[]})},title:"Export ".concat(this.state.checkId.length," data to excel"),body:l.a.createElement("div",null,l.a.createElement(h.a,{role:"form",onSubmit:this.getDataAbsen,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",required:!0,onChange:function(t){e.setState({status:t.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6,7].map((function(e){return l.a.createElement("option",{value:e},P(e))})))))),l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"".concat(7===parseInt(this.state.status)?"Set start date":"Set tanggal"),required:!0,readOnly:!0},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:this.state.startDate,onChange:function(t){e.setState({startDate:t.toDate()})}})))),7===parseInt(this.state.status)?l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Set end date",required:!0,readOnly:!0},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:this.state.endDate,onChange:function(t){e.setState({endDate:t.toDate()})}})))):"",l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement(ae.a,{className:"my-4",color:"primary",type:"submit",disabled:s},s?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),l.a.createElement(F.a,null,this.state.tableData.length>0?l.a.createElement(ct.a,{id:"test-table-xls-button",className:"btn btn-primary ml-2",table:"ekspor1",multipleTables:this.state.tableData,filename:"tablexls",sheet:"tablexls",buttonText:"Data siap di export"}):"")),handleSubmit:function(t){return e.handleApproval(t,!0)}}),l.a.createElement(Ce,{show:r,loading:i,footer:!0,handleHide:function(){return e.toggle("approvalMode")},title:"Approval Confirmation",body:"Approve izin ".concat(c," ?"),handleSubmit:function(t){return e.handleApproval(t,!0)}}),l.a.createElement(Ce,{show:o,loading:i,footer:!1,handleHide:function(){return e.toggle("rejectMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject izin ".concat(c," ?")),l.a.createElement(h.a,{onSubmit:function(t){return e.handleApproval(t,!1)}},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},i?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleApproval(t,!1)}}),l.a.createElement(Ce,{show:u,loading:i,footer:!0,handleHide:function(){return e.toggle("approveAllMode")},title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve izin ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(Ce,{show:d,loading:i,footer:!1,handleHide:function(){return e.toggle("rejectAllMode")},title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject izin ".concat(this.state.checkId.length," data ?")),l.a.createElement(h.a,{onSubmit:function(t){return e.rejectChecked(t)}},l.a.createElement(f.a,null,l.a.createElement(y.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:function(t){return e.setState({reason:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectAllMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},i?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}]),a}(l.a.Component),Pt=a(213),Jt=a(567).MarkerClusterer,Ft=Object(V.a)(Object(V.c)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyC8Y7yv06FxuwUhb0zPbCepVrgROQQzADQ&v=3.exp&libraries=geometry,drawing,places",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:"400px"}}),mapElement:l.a.createElement("div",{style:{height:"100%"}})}),Object(V.b)({onMarkerClustererClick:function(){return function(e){var t=e.getMarkers();console.log("Current clicked markers length: ".concat(t.length)),console.log(t)}}}),Z.withScriptjs,Z.withGoogleMap)((function(e){return l.a.createElement(Z.GoogleMap,{defaultZoom:12,defaultCenter:{lat:-6.2242898,lng:106.8331518}},l.a.createElement(Jt,{onClick:e.onMarkerClustererClick,averageCenter:!0,enableRetinaIcons:!0,gridSize:60},l.a.createElement(Z.Marker,{position:{lat:e.latitude,lng:e.longitude}})))})),zt=[{path:"/index",name:"Dashboard",icon:"ni ni-tv-2 text-primary",component:St,layout:"/leader"},{path:"/maps/:id",name:"Tracking",icon:"ni ni-pin-3 text-red",component:Et,layout:"/leader",invisible:!0},{path:"/exportexcelid/:id",name:"exportexcelid",icon:"ni ni-pin-3 text-red",component:qt,layout:"/leader",invisible:!0},{path:"/todolist",name:"Todo List",icon:"ni ni-settings text-yellow",component:function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getData=function(){n.setState({loading:!0});var e=new O.a.Object.extend("TodoList"),t=new O.a.Query(e);new Date,new N.a;t.equalTo("status",1),"staff"===C()?(t.equalTo("delegasi",{__type:"Pointer",className:"_User",objectId:L()}),t.include("delegasi")):(t.equalTo("taskFrom",{__type:"Pointer",className:"_User",objectId:L()}),t.include("taskFrom")),t.descending("createdAt"),t.find().then((function(e){n.setState({todoList:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.queryStaffByLevel=function(e,t){var a=new O.a.User,l=new O.a.Query(a);l.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),l.ascending("roles"),l.containedIn("roles",t),l.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e})})).catch((function(e){alert(e.message)}))},n.getDaftarAbsenByLevel=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C();switch(n.setState({loading:!0}),e){case"leader":n.queryStaffByLevel("leaderIdNew",["staff"]);break;case"supervisor":n.queryStaffByLevel("supervisorID",["staff","leader"]);break;case"manager":n.queryStaffByLevel("managerID",["staff","leader","supervisor"]);break;case"head":n.queryStaffByLevel("headID",["staff","leader","supervisor","manager"]);break;case"gm":n.queryStaffByLevel("headID",["staff","leader","supervisor","manager","head"])}},n.handleAdd=function(e){e.preventDefault(),console.log("idds",n.state.multiDelegasi);var t=n.state,a=t.inputDept,l=t.tglWaktu,s=t.deskripsi,r=(t.delegasi,t.titleUrl,t.formUrl);n.setState({loadingModal:!0}),n.state.multiDelegasi.map((function(e){var t=new(O.a.Object.extend("TodoList"));new(O.a.Object.extend("Messaging"));t.set("namaTugas",a),t.set("tglWaktu",l),t.set("deskripsi",s),""!==r?(t.set("googleFormUrl",r),t.set("taskType",1)):(t.set("googleFormUrl","-"),t.set("taskType",0)),t.set("lokasi","Juara Coding"),t.set("latitude","-6.2407504"),t.set("longitude","106.8535896"),t.set("fullname",e.fullname),t.set("delegasi",{__type:"Pointer",className:"_User",objectId:e.id}),t.set("statusTodo",0),t.set("status",1),t.set("taskFrom",{__type:"Pointer",className:"_User",objectId:L()}),t.save().then((function(t){var l=new(O.a.Object.extend("Messaging"));l.set("judul",a),""!==r?l.set("messageType",1):l.set("messageType",0),l.set("status",0),l.set("objecIdItem",t.id),l.set("dari",{__type:"Pointer",className:"_User",objectId:L()}),l.set("ke",{__type:"Pointer",className:"_User",objectId:e.id}),l.save().then((function(e){O.a.Cloud.run("notif",{title:"New Task",priority:"high"}).then((function(e){console.log("response",e)})),n.setState({addMode:!1,loadingModal:!1,message:"Berhasil tambah data",multiDelegasi:[],visible:!0,color:"success"}),window.location.href="/leader/todolist"}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})}))}))},n.getDetail=function(e,t){e.preventDefault();var a=O.a.Object.extend("TodoList"),l=new O.a.Query(a);l.include("delegasi"),l.get(t).then((function(e){var t=e.attributes;n.setState({inputDept:t.namaTugas,deskripsi:t.deskripsi,tglWaktu:t.tglWaktu,delegasi:t.delegasi.id,latitude:t.latitude,longitude:t.longitude,placeName:t.lokasi,formUrl:t.googleFormUrl,editMode:!0})})).catch((function(e){alert(e.message),n.setState({loadingModal:!1})}))},n.handleUpdate=function(e){e.preventDefault();var t=n.state,a=t.inputDept,l=t.tglWaktu,s=t.deskripsi,r=t.delegasi,o=t.formUrl;t.fullnameEdit;n.setState({loadingModal:!0}),console.log("titleUpdate",n.state.titleUpdate);var i=O.a.Object.extend("TodoList"),c=new O.a.Query(i);c.equalTo("status",1),c.include("delegasi"),c.include("taskFrom"),c.equalTo("namaTugas",n.state.titleUpdate),c.find().then((function(e){e.map((function(e){console.log("y",e),e.set("namaTugas",a),e.set("deskripsi",s),e.set("tglWaktu",l),""!==o&&e.set("googleFormUrl",o),""!==n.state.inputAddress&&e.set("lokasi","Juara Coding"),e.set("latitude","-6.2407504"),e.set("longitude","106.8535896"),e.id===n.state.userId&&e.set("delegasi",{__type:"Pointer",className:"_User",objectId:r}),e.save().then((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"}),window.location.href="/leader/todolist"})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))},n.handleRemove=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=O.a.Object.extend("TodoList"),a=new O.a.Query(t),l=O.a.Object.extend("Messaging");new O.a.Query(l);a.equalTo("namaTugas",n.state.fullnames),a.find().then((function(e){e.map((function(e){e.set("status",0),e.save().then((function(e){var t=Object(Oe.a)(n.state.todoList);t.splice(n.state.userIndex,1),n.setState({deleteMode:!1,loadingModal:!1,todoList:t})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))},n.handleSendMessage=function(e){e.preventDefault();var t=n.state,a=t.inputDept,l=(t.tglWaktu,t.deskripsi);t.delegasi;n.setState({loadingModal:!0}),n.state.multiDelegasi.map((function(e){var t=new(O.a.Object.extend("Messaging"));t.set("judul",a),t.set("deskripsi",l),t.set("messageType",parseInt(n.state.inputAddress)),t.set("messagingType",parseInt(n.state.inputAddress)),t.set("status",0),t.set("objecIdItem",e.id),t.set("dari",{__type:"Pointer",className:"_User",objectId:L()}),t.set("ke",{__type:"Pointer",className:"_User",objectId:e.id}),t.save().then((function(t){O.a.Cloud.run("notif",{title:"New Task",delegasi:e,priority:"high"}).then((function(e){console.log("response",e)})),n.setState({sendMessageMode:!1,loadingModal:!1,message:"Berhasil send message",multiDelegasi:[],visible:!0,color:"success"})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})}))}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.getLocationGeopoint=function(){n.setState({loadingGeocode:!0});var e=n.state.inputAddress;Re.a.fromAddress(e).then((function(e){var t=e.results[0].geometry.location,a=t.lat,l=t.lng;console.log(a,l),n.setState({latitude:a,longitude:l,loadingGeocode:!1})}),(function(e){console.error(e),n.setState({loadingGeocode:!1})}))},n.beforeDates=function(e){var t=N()().subtract(1,"day");return e.isAfter(t)},n.handleMultiSelect=function(e){var t=e.target.value;n.state.selectedOption.push(t),n.setState({multiDelegasi:n.state.selectedOption})},n.onSelect=function(e,t){n.state.multiDelegasi.push(t),n.setState({multiDelegasi:e})},n.onRemove=function(e,t){n.state.multiDelegasi.slice(1,t),n.setState({multiDelegasi:e})},n.state={todoList:[],daftarStaff:[],inputDept:"",deskripsi:"",tglWaktu:"",delegasi:"",latitude:"",longitude:"",inputAddress:"",titleUrl:"",formUrl:"",detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",fullnameEdit:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,deleteMode:!1,editMode:!1,deleteCounter:0,message:"",color:"danger",visible:!1,multiDelegasi:[],selectedOption:[],sendMessageMode:!1,titleUpdate:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData(),this.getDaftarAbsenByLevel(),Re.a.setApiKey("AIzaSyC8Y7yv06FxuwUhb0zPbCepVrgROQQzADQ"),Re.a.setRegion("es")}},{key:"render",value:function(){var e=this,t=this.state,a=t.todoList,n=t.loading,s=(t.inputDept,t.tglWaktu,t.deskripsi,t.delegasi,t.rejectMode,t.loadingModal),r=t.fullnames,o=t.daftarStaff,i=t.addMode,c=t.deleteMode,m=(t.selectedOption,t.editMode),u=t.sendMessageMode,d=[];return o.map((function(e){d.push({id:e.id,fullname:e.get("fullname")})})),l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}}),l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(F.a,null,l.a.createElement(ae.a,{className:"ml-2",color:"primary","data-dismiss":"modal",type:"button",onClick:function(){return e.setState({addMode:!0})}},l.a.createElement("i",{className:"fa fa-plus"})," Tambah"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Nama Tugas"),l.a.createElement("th",{scope:"col"},"Description"),l.a.createElement("th",{scope:"col"},"Tanggal Dan Jam Tugas"),l.a.createElement("th",{scope:"col"},"Lokasi"),l.a.createElement("th",{scope:"col"},"staff"===C()?"Task From":"Delegasi"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,console.log("todoList",a),n?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):a.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("td",null,t.get("namaTugas")),l.a.createElement("td",null,t.get("deskripsi")),l.a.createElement("td",null,q(t.get("tglWaktu"),"DD/MM/YYYY HH:mm")),l.a.createElement("td",null,t.get("lokasi")),l.a.createElement("td",null,void 0!==t.get("fullname")?t.get("fullname"):"-"),0===parseInt(t.get("statusTodo"))?l.a.createElement("td",null,l.a.createElement(ae.a,{id:"t1",color:"primary",className:"btn-circle",onClick:function(n){e.setState({titleUpdate:t.get("namaTugas"),userId:t.id,userIndex:a}),e.getDetail(n,t.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t1"},"Ubah data"),l.a.createElement(ae.a,{id:"t2",className:"btn-circle btn-danger",onClick:function(n){e.setState({deleteMode:!0,userId:t.id,userIndex:a,fullnames:t.get("namaTugas")})}},l.a.createElement("i",{className:"fa fa-trash"})),l.a.createElement(Ie.a,{delay:0,placement:"top",target:"t2"},"Hapus data")):1===parseInt(t.get("statusTodo"))?l.a.createElement("td",null,"Sudah di baca"):2===parseInt(t.get("statusTodo"))?l.a.createElement("td",null,"Sedang di kerjakan"):3===parseInt(t.get("statusTodo"))?l.a.createElement("td",null,"Selesai"):l.a.createElement("td",null,"Waktu Habis"))})))))))),l.a.createElement(Ce,{size:"col-md-12",show:i,loading:s,footer:!1,handleHide:function(){return e.toggle("addMode")},title:"Tambah Data",body:l.a.createElement("div",null,l.a.createElement(h.a,{onSubmit:function(t){return e.handleAdd(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Nama Tugas"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan nama tugas",type:"text",required:!0,onChange:function(t){return e.setState({inputDept:t.target.value})}})),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Deskripsi"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan deskripsi",type:"textarea",required:!0,onChange:function(t){return e.setState({deskripsi:t.target.value})}})),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Tanggal dan jam"),l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Masukkan tanggal dan jam",required:""===this.state.tglWaktu,readOnly:""!==this.state.tglWaktu},timeFormat:"HH:mm",value:this.state.tglWaktu,onChange:function(t){e.setState({tglWaktu:t.toDate()})},isValidDate:this.beforeDates,viewMode:"time"}))),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Delegasi Ke"),l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(Pt.Multiselect,{options:d,displayValue:"fullname",onSelect:this.onSelect,onRemove:this.onRemove}))),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Nama Tempat"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan Alamat Lokasi",className:"form-control-alternitive",type:"text",required:!0,onChange:function(t){return e.setState({placeName:t.target.value})}})),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Search Geopoint Alamat"),l.a.createElement(y.a,{id:"zz1",placeholder:"Ex: PT DIKA",className:"form-control-alternitive",required:!0,type:"text",onChange:function(t){return e.setState({inputAddress:t.target.value})}})),l.a.createElement(f.a,{hidden:!0},l.a.createElement(Ne.a,null,"Latitude"),l.a.createElement(y.a,{id:"zz2",placeholder:"0",type:"text",value:"-6.2407504",required:!0,onChange:function(t){return e.setState({latitude:t.target.value})}})),l.a.createElement(f.a,{hidden:!0},l.a.createElement(Ne.a,null,"Longitude"),l.a.createElement(y.a,{id:"zz3",placeholder:"0",type:"text",value:"106.8535896",required:!0,onChange:function(t){return e.setState({longitude:t.target.value})}})),l.a.createElement(f.a,null,l.a.createElement(Ft,{latitude:parseFloat("-6.2407504"),longitude:parseFloat("106.8535896")})),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Google Form Url"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan Url",type:"text",onChange:function(t){return e.setState({formUrl:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("addMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleAdd(t)}}),l.a.createElement(Ce,{show:m,loading:s,footer:!1,handleHide:function(){return e.toggle("editMode")},title:"Edit Data",body:l.a.createElement(h.a,{onSubmit:function(t){return e.handleUpdate(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Nama Tugas"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan nama tugas",value:this.state.inputDept,type:"text",required:!0,onChange:function(t){return e.setState({inputDept:t.target.value})}})),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Deskripsi"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan deskripsi",value:this.state.deskripsi,type:"textarea",required:!0,onChange:function(t){return e.setState({deskripsi:t.target.value})}})),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Tanggal dan jam"),l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(E.a,{addonType:"prepend"},l.a.createElement(b.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(ot.a,{inputProps:{placeholder:"Masukkan tanggal dan jam",required:""===this.state.tglWaktu,readOnly:""!==this.state.tglWaktu},timeFormat:"HH:mm",value:this.state.tglWaktu,onChange:function(t){e.setState({tglWaktu:t.toDate()})},isValidDate:this.beforeDates,viewMode:"time"}))),l.a.createElement(f.a,null,l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(y.a,{type:"select",className:"fa-pull-right",required:!0,onChange:function(t){e.setState({delegasi:t.target.value})}},"// ",l.a.createElement("option",{value:""},"Delagasi Staff"),o.map((function(t){return l.a.createElement("option",{selected:e.state.delegasi===t.id,value:t.id},t.get("fullname"))}))))),l.a.createElement(y.a,{hidden:!0,type:"select",className:"fa-pull-right",required:!0,onChange:function(t){e.setState({fullnameEdit:t.target.value})}},"// ",l.a.createElement("option",{value:""},"Delagasi Staff"),o.map((function(t){return l.a.createElement("option",{selected:e.state.delegasi===t.id,value:t.get("fullname")},t.get("fullname"))}))),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Nama Tempat"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan Alamat Lokasi",className:"form-control-alternitive",type:"text",value:this.state.placeName,required:!0,onChange:function(t){return e.setState({placeName:t.target.value})}})),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Search Geopoint Alamat"),l.a.createElement(y.a,{id:"zz1",placeholder:"Ex: PT DIKA",className:"form-control-alternitive",type:"text",onChange:function(t){return e.setState({inputAddress:t.target.value})}}),l.a.createElement("h6",{style:{color:"red"}},"Silahkan di isi jika ingin merubah titik lokasi")),l.a.createElement(f.a,{hidden:!0},l.a.createElement(Ne.a,null,"Latitude"),l.a.createElement(y.a,{id:"zz2",placeholder:"0",type:"text",value:"-6.2407504",required:!0,onChange:function(t){return e.setState({latitude:t.target.value})}})),l.a.createElement(f.a,{hidden:!0},l.a.createElement(Ne.a,null,"Longitude"),l.a.createElement(y.a,{id:"zz3",placeholder:"0",type:"text",value:"106.8535896",required:!0,onChange:function(t){return e.setState({longitude:t.target.value})}})),l.a.createElement(f.a,null,l.a.createElement(Ft,{latitude:parseFloat("-6.2407504"),longitude:parseFloat("106.8535896")})),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Google Form Url"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan Url",type:"text",value:this.state.formUrl,onChange:function(t){return e.setState({formUrl:t.target.value})}})),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("editMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")),handleSubmit:function(t){return e.handleUpdate(t)}}),l.a.createElement(Ce,{show:c,loading:s,footer:!0,handleHide:function(){return e.toggle("deleteMode")},title:"Remove Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Remove Tugas ".concat(r," ?"))),handleSubmit:function(t){return e.handleRemove(t)}}),l.a.createElement(Ce,{size:"col-md-12",show:u,loading:s,footer:!1,handleHide:function(){return e.toggle("sendMessageMode")},title:"Send Message",body:l.a.createElement("div",null,l.a.createElement(h.a,{onSubmit:function(t){return e.handleSendMessage(t)}},l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Judul"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan Judul",type:"text",required:!0,onChange:function(t){return e.setState({inputDept:t.target.value})}})),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Deskripsi"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan deskripsi",type:"textarea",required:!0,onChange:function(t){return e.setState({deskripsi:t.target.value})}})),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Delegasi Ke"),l.a.createElement(v.a,{className:"input-group-alternative"},l.a.createElement(Pt.Multiselect,{options:d,displayValue:"fullname",onSelect:this.onSelect,onRemove:this.onRemove}))),l.a.createElement(f.a,null,l.a.createElement(Ne.a,null,"Message Type"),l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan Alamat Lokasi",className:"form-control-alternitive",type:"select",required:!0,onChange:function(t){return e.setState({inputAddress:t.target.value})}},l.a.createElement("option",{value:""},"Message Type"),l.a.createElement("option",{value:0},"Default"),l.a.createElement("option",{value:1},"Peringatan"))),l.a.createElement(ae.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:function(){return e.toggle("rejectMode")}},"Close"),l.a.createElement(ae.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:function(t){return e.handleSendMessage(t)}}))}}]),a}(l.a.Component),layout:"/leader"},{path:"/sendmessage",name:"Message Center",icon:"ni ni-send text-info",component:function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getData=function(){n.setState({loading:!0});var e=new O.a.Object.extend("Messaging"),t=new O.a.Query(e);new Date,new N.a;"staff"===C()?(t.equalTo("ke",{__type:"Pointer",className:"_User",objectId:L()}),t.include("ke")):(t.equalTo("dari",{__type:"Pointer",className:"_User",objectId:L()}),t.include("dari")),t.descending("createdAt"),t.find().then((function(e){n.setState({todoList:e,loading:!1})})).catch((function(e){alert(e.message),n.setState({loading:!1})}))},n.queryStaffByLevel=function(e,t){var a=new O.a.User,l=new O.a.Query(a);l.equalTo(e,{__type:"Pointer",className:"_User",objectId:L()}),l.ascending("roles"),l.containedIn("roles",t),l.find({useMasterKey:!0}).then((function(e){n.setState({daftarStaff:e})})).catch((function(e){alert(e.message)}))},n.getDaftarAbsenByLevel=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C();switch(n.setState({loading:!0}),e){case"leader":n.queryStaffByLevel("leaderIdNew",["staff"]);break;case"supervisor":n.queryStaffByLevel("supervisorID",["staff","leader"]);break;case"manager":n.queryStaffByLevel("managerID",["staff","leader","supervisor"]);break;case"head":n.queryStaffByLevel("headID",["staff","leader","supervisor","manager"]);break;case"gm":n.queryStaffByLevel("headID",["staff","leader","supervisor","manager","head"])}},n.getDetail=function(e,t){e.preventDefault();var a=O.a.Object.extend("Messaging"),l=new O.a.Query(a);l.include("ke"),l.get(t).then((function(e){var t=e.attributes;n.setState({inputDept:t.judul,deskripsi:t.deskripsi,messageType:t.messageType,delegasi:t.ke.id,editMode:!0})})).catch((function(e){alert(e.message),n.setState({loadingModal:!1})}))},n.handleUpdate=function(e){e.preventDefault();var t=n.state,a=t.inputDept,l=t.messageType,s=t.deskripsi,r=t.delegasi;n.setState({loadingModal:!0});var o=O.a.Object.extend("Messaging"),i=new O.a.Query(o);i.equalTo("status",0),i.include("ke"),i.include("dari"),i.equalTo("judul",n.state.titleUpdate),i.find().then((function(e){e.map((function(e){e.set("judul",a),e.set("deskripsi",s),e.set("messageType",l),e.id===n.state.userId&&e.set("ke",{__type:"Pointer",className:"_User",objectId:r}),e.save().then((function(e){n.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"}),window.location.href="/leader/sendMessage"})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})}))},n.handleRemove=function(e){e.preventDefault(),n.setState({loadingModal:!0});var t=O.a.Object.extend("Messaging"),a=new O.a.Query(t);a.equalTo("judul",n.state.fullnames),a.find().then((function(e){e.map((function(e){e.set("status",1),e.save().then((function(e){var t=Object(Oe.a)(n.state.todoList);t.splice(n.state.userIndex,1),n.setState({deleteMode:!1,loadingModal:!1,todoList:t})})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))}))})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})}))},n.handleSendMessage=function(e){e.preventDefault();var t=n.state,a=t.inputDept,l=(t.tglWaktu,t.deskripsi),s=(t.delegasi,t.messageType);n.setState({loadingModal:!0}),n.state.multiDelegasi.map((function(e){var t=new(O.a.Object.extend("Messaging"));t.set("judul",a),t.set("deskripsi",l),""!==s?t.set("messageType",parseInt(s)):t.set("messageType",100),t.set("status",0),t.set("dari",{__type:"Pointer",className:"_User",objectId:L()}),t.set("ke",{__type:"Pointer",className:"_User",objectId:e.id}),t.save().then((function(e){O.a.Cloud.run("notif",{title:"Message",alert:a,priority:"high"}).then((function(e){console.log("response")})),n.setState({sendMessageMode:!1,loadingModal:!1,message:"Berhasil send message",multiDelegasi:[],visible:!0,color:"success"}),window.location.reload(!1)})).catch((function(e){console.log(e.message),n.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})}))}))},n.toggle=function(e){n.setState({[e]:!n.state[e]})},n.getLocationGeopoint=function(){n.setState({loadingGeocode:!0});var e=n.state.inputAddress;Re.a.fromAddress(e).then((function(e){var t=e.results[0].geometry.location,a=t.lat,l=t.lng;console.log(a,l),n.setState({latitude:a,longitude:l,loadingGeocode:!1})}),(function(e){console.error(e),n.setState({loadingGeocode:!1})}))},n.beforeDates=function(e){var t=N()().subtract(1,"day");return e.isAfter(t)},n.handleMultiSelect=function(e){var t=e.target.value;n.state.selectedOption.push(t),n.setState({multiDelegasi:n.state.selectedOption})},n.onSelect=function(e,t){n.state.multiDelegasi.push(t),n.setState({multiDelegasi:e})},n.onRemove=function(e,t){n.state.multiDelegasi.slice(1,t),n.setState({multiDelegasi:e})},n.state={todoList:[],daftarStaff:[],inputDept:"",deskripsi:"",tglWaktu:"",delegasi:"",latitude:"",longitude:"",inputAddress:"",detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,deleteMode:!1,editMode:!1,deleteCounter:0,message:"",color:"danger",messageType:100,visible:!1,multiDelegasi:[],selectedOption:[],sendMessageMode:!1,titleUpdate:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData(),this.getDaftarAbsenByLevel()}},{key:"render",value:function(){var e=this,t=this.state,a=t.todoList,n=t.loading,s=(t.inputDept,t.tglWaktu,t.deskripsi,t.delegasi,t.rejectMode,t.loadingModal),r=(t.fullnames,t.daftarStaff),o=(t.addMode,t.deleteMode,t.messageType,t.selectedOption,t.editMode,t.sendMessageMode,[]);return r.map((function(e){o.push({id:e.id,fullname:e.get("fullname")})})),l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(g.a,{className:"mt--8",fluid:!0},l.a.createElement(F.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(ce,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:function(){return e.toggle("visible")}}),l.a.createElement(ee.a,{className:"shadow"},l.a.createElement(te.a,{className:"border-0"},l.a.createElement(h.a,{onSubmit:function(t){return e.handleSendMessage(t)}},l.a.createElement(f.a,{row:!0},l.a.createElement(Ne.a,{sm:2},"Penerima"),l.a.createElement(z.a,{sm:10},l.a.createElement(Pt.Multiselect,{options:o,displayValue:"fullname",onSelect:this.onSelect,onRemove:this.onRemove}))),l.a.createElement(f.a,{row:!0},l.a.createElement(Ne.a,{sm:2},"Judul"),l.a.createElement(z.a,{sm:10},l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan Judul",type:"text",required:!0,onChange:function(t){return e.setState({inputDept:t.target.value})}}))),l.a.createElement(f.a,{row:!0},l.a.createElement(Ne.a,{sm:2},"Pesan"),l.a.createElement(z.a,{sm:10},l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan pesan",type:"textarea","aria-rowspan":10,required:!0,onChange:function(t){return e.setState({deskripsi:t.target.value})}}))),l.a.createElement(f.a,{row:!0},l.a.createElement(Ne.a,{sm:2},"Message Type"),l.a.createElement(z.a,{sm:10},l.a.createElement(y.a,{id:"zz1",placeholder:"Masukkan Judul",type:"select",onChange:function(t){return e.setState({messageType:t.target.value})}},l.a.createElement("option",{value:100},"Information"),l.a.createElement("option",{value:101},"Warning")))),l.a.createElement(ae.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),l.a.createElement(ne.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Judul"),l.a.createElement("th",{scope:"col"},"Tanggal"),l.a.createElement("th",{scope:"col"},"Status"),l.a.createElement("th",{scope:"col"},"Tanggal di baca"))),l.a.createElement("tbody",null,console.log("todoList",a),n?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(le.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(le.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):a.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):a.map((function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null,void 0===e.get("ke")?"-":e.get("ke").attributes.fullname),l.a.createElement("td",{style:{fontWeight:0===e.get("status")?"bold":"normal"}},e.get("judul")),l.a.createElement("td",null,q(e.get("createdAt"),"DD/MM/YYYY HH:mm")),l.a.createElement("td",null,0===parseInt(e.get("status"))?"belum di baca":"dibaca"),l.a.createElement("td",null,void 0!==e.get("readOn")?q(e.get("readOn"),"DD/MM/YYYY HH:mm"):"-"))})))))))))}}]),a}(l.a.Component),layout:"/leader"},{path:"/staff",name:"Staff",icon:"ni ni-single-02 text-yellow",component:kt,layout:"/leader"},{path:"/data-absen",name:"Absen",icon:"ni ni-bullet-list-67 text-red",component:Mt,layout:"/leader"},{path:"/request-cuti",name:"Request Cuti",icon:"ni ni-key-25 text-info",component:Ht,layout:"/leader"},{path:"/request-izin",name:"Request Izin",icon:"ni ni-spaceship text-warning",component:Ot,layout:"/leader"},{path:"/request-pulang",name:"Request Pulang",icon:"ni ni-watch-time text-primary",component:It,layout:"/leader"},{path:"/request-lembur",name:"Request Lembur",icon:"ni ni-time-alarm text-yellow",component:Nt,layout:"/leader"},{path:"/request-terlambat",name:"Request Terlambat",icon:"ni ni-user-run text-danger",component:Dt,layout:"/leader"},{path:"/change-request",name:"Change Request",icon:"ni ni-archive-2 text-info",component:Ct,layout:"/leader"},{path:"/status-request",name:"Status Request",icon:"ni ni-archive-2 text-danger",component:At,layout:"/leader"},{path:"/export-data",name:"Export Data",icon:"ni ni-single-copy-04 text-primary",component:Kt,layout:"/leader"},{path:"/view-history/:id",name:"History",icon:"ni ni-user-run text-primary",component:Lt,layout:"/leader",invisible:!0},{path:"/login",name:"Login",icon:"ni ni-circle-08 text-pink",component:He,layout:"/auth",invisible:!0}],Ut=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).getRoutes=function(e){return"admin"===a.state.roles||"leader"===a.state.roles?e.map((function(e,t){return"/admin"===e.layout||"/leader"===e.layout?l.a.createElement(i.b,{path:e.layout+e.path,component:e.component,key:t}):void 0})):void 0},a.getBrandText=function(e){if("admin"===a.state.roles){for(var t=0;t<ht.length;t++)if(-1!==a.props.location.pathname.indexOf(ht[t].layout+ht[t].path))return ht[t].name;return ht[1].name}if("leader"===a.state.roles){for(var n=0;n<zt.length;n++)if(-1!==a.props.location.pathname.indexOf(zt[n].layout+zt[n].path))return zt[n].name;return zt[1].name}},a.state={loading:!1,roles:""},a}return Object(m.a)(n,[{key:"componentWillMount",value:function(){this.setState({roles:window.localStorage.getItem("roles")})}},{key:"componentDidMount",value:function(){this.setState({roles:window.localStorage.getItem("roles")})}},{key:"componentDidUpdate",value:function(e){document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,this.refs.mainContent.scrollTop=0}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(W,Object.assign({},this.props,{routes:"admin"===this.state.roles?ht:"leader"===this.state.roles?zt:"",logo:{innerLink:"".concat(this.state.roles,"/index"),imgSrc:a(1260),imgAlt:"..."}})),l.a.createElement("div",{className:"main-content",ref:"mainContent"},l.a.createElement(J,Object.assign({},this.props,{brandText:this.getBrandText(this.props.location.pathname)})),l.a.createElement(i.d,null,this.getRoutes("admin"===this.state.roles?ht:zt),l.a.createElement(i.a,{from:"*",to:"/".concat(this.state.roles,"/index")})),l.a.createElement(g.a,{fluid:!0},l.a.createElement(U,null))))}}]),n}(l.a.Component),Bt=a(1295),Rt=(l.a.Component,function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("footer",{className:"py-4 mt-2"},l.a.createElement(g.a,null,l.a.createElement(F.a,{className:"align-items-center justify-content-xl-between"},l.a.createElement(z.a,{xl:"6"},l.a.createElement("div",{className:"copyright text-center text-xl-left text-muted"},"\xa9 2018"," ",l.a.createElement("a",{className:"font-weight-bold ml-1",href:"https://www.creative-tim.com?ref=adr-auth-footer",target:"_blank"},"Creative Tim"))),l.a.createElement(z.a,{xl:"6"},l.a.createElement(S.a,{className:"nav-footer justify-content-center justify-content-xl-end"},l.a.createElement(R.a,null,l.a.createElement(Q.a,{href:"https://www.creative-tim.com?ref=adr-auth-footer",target:"_blank"},"Creative Tim")),l.a.createElement(R.a,null,l.a.createElement(Q.a,{href:"https://www.creative-tim.com/presentation?ref=adr-auth-footer",target:"_blank"},"About Us")),l.a.createElement(R.a,null,l.a.createElement(Q.a,{href:"http://blog.creative-tim.com?ref=adr-auth-footer",target:"_blank"},"Blog")),l.a.createElement(R.a,null,l.a.createElement(Q.a,{href:"https://github.com/creativetimofficial/argon-dashboard/blob/master/LICENSE.md?ref=adr-auth-footer",target:"_blank"},"MIT License"))))))))}}]),a}(l.a.Component)),Qt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).getRoutes=function(e){return e.map((function(e,t){return"/auth"===e.layout?l.a.createElement(i.b,{path:e.layout+e.path,component:e.component,key:t}):null}))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){document.body.classList.add("bg-default")}},{key:"componentWillUnmount",value:function(){document.body.classList.remove("bg-default")}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content"},l.a.createElement("div",{className:"header bg-gradient-info py-5 py-lg-5 mb-2"},l.a.createElement(g.a,null,l.a.createElement("div",{className:"header-body text-center mb-7"},l.a.createElement(F.a,{className:"justify-content-center"},l.a.createElement(z.a,{lg:"5",md:"6"},l.a.createElement("h1",{className:"text-white"},"HADIR"),l.a.createElement("p",{className:"text-lead text-white"},"Selamat datang, silahkan login terlebih dahulu"))))),l.a.createElement("div",{className:"separator separator-bottom separator-skew zindex-100"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 2560 100",x:"0",y:"0"},l.a.createElement("polygon",{className:"fill-default",points:"2560 0 2560 100 0 100"})))),l.a.createElement(g.a,{className:"mt--8"},l.a.createElement(F.a,{className:"justify-content-center"},l.a.createElement(i.d,null,this.getRoutes(ht),l.a.createElement(i.a,{from:"*",to:"/auth/login"}))))),l.a.createElement(Rt,null))}}]),a}(l.a.Component),Yt=a(179);O.a.initialize(Yt.APPLICATION_ID,Yt.JAVASCRIPT_KEY,Yt.MASTER_KEY),O.a.serverURL=Yt.SERVER_URL,O.a.masterKey=Yt.MASTER_KEY,r.a.render(l.a.createElement(o.a,null,l.a.createElement(i.d,null,l.a.createElement(i.b,{path:"/".concat(window.localStorage.getItem("roles")),render:function(e){return D()?l.a.createElement(Ut,e):l.a.createElement(i.a,{to:"/auth"})}}),l.a.createElement(i.b,{path:"/auth",render:function(e){return D()?l.a.createElement(i.a,{to:"/".concat(window.localStorage.getItem("roles"),"/index")}):l.a.createElement(Qt,e)}}),null===localStorage.getItem("roles")?l.a.createElement(i.a,{from:"/",to:"/auth/login"}):l.a.createElement(i.a,{from:"/",to:"/".concat(localStorage.getItem("roles"),"/index")}))),document.getElementById("root"))},174:function(e,t,a){var n={"./blue-dot.png":1154,"./green-dot.png":1155,"./pink-dot.png":1156,"./purple-dot.png":1157,"./red-dot.png":1158,"./yellow-dot.png":1159};function l(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}l.keys=function(){return Object.keys(n)},l.resolve=s,e.exports=l,l.id=174},179:function(e,t){e.exports={APPLICATION_ID:"U9V8AUIeeKnZR69BsyAn1YLUJK23624VStPczr7F",JAVASCRIPT_KEY:"g8dSIJSCMlQtxp4OXjk3oSr3lCY8AI9A4fZl3ZSj",MASTER_KEY:"iPxOg59nb3mozQjUCM6K6XPWTrUEgALKI1UXZ8Ks",SERVER_URL:"https://parseapi.back4app.com/"}},580:function(e,t,a){e.exports=a(1262)},585:function(e,t,a){},587:function(e,t,a){},588:function(e,t,a){},81:function(e,t,a){var n=a(66);n.elements.Rectangle.prototype.draw=function(){var e,t,a,n,l,s,r,o=this._chart.ctx,i=this._view,c=i.borderWidth;if(i.horizontal?(e=i.base,t=i.x,a=i.y-i.height/2,n=i.y+i.height/2,l=t>e?1:-1,s=1,r=i.borderSkipped||"left"):(e=i.x-i.width/2,t=i.x+i.width/2,a=i.y,l=1,s=(n=i.base)>a?1:-1,r=i.borderSkipped||"bottom"),c){var m=Math.min(Math.abs(e-t),Math.abs(a-n)),u=(c=c>m?m:c)/2,d=e+("left"!==r?u*l:0),g=t+("right"!==r?-u*l:0),p=a+("top"!==r?u*s:0),h=n+("bottom"!==r?-u*s:0);d!==g&&(a=p,n=h),p!==h&&(e=d,t=g)}o.beginPath(),o.fillStyle=i.backgroundColor,o.strokeStyle=i.borderColor,o.lineWidth=c;var f=[[e,n],[e,a],[t,a],[t,n]],v=["bottom","left","top","right"].indexOf(r,0);function E(e){return f[(v+e)%4]}-1===v&&(v=0);var b=E(0);o.moveTo(b[0],b[1]);for(var y=1;y<4;y++){b=E(y);var S=y+1;4===S&&(S=0);var k,j=f[2][0]-f[1][0],M=f[0][1]-f[1][1],w=f[1][0],T=f[1][1];(k=6)>M/2&&(k=M/2),k>j/2&&(k=j/2),o.moveTo(w+k,T),o.lineTo(w+j-k,T),o.quadraticCurveTo(w+j,T,w+j,T+k),o.lineTo(w+j,T+M-k),o.quadraticCurveTo(w+j,T+M,w+j-k,T+M),o.lineTo(w+k,T+M),o.quadraticCurveTo(w,T+M,w,T+M-k),o.lineTo(w,T+k),o.quadraticCurveTo(w,T,w+k,T)}o.fill(),c&&o.stroke()};var l="Open Sans",s={100:"#f6f9fc",200:"#e9ecef",300:"#dee2e6",400:"#ced4da",500:"#adb5bd",600:"#8898aa",700:"#525f7f",800:"#32325d",900:"#212529"},r={default:"#172b4d",primary:"#5e72e4",secondary:"#f4f5f7",info:"#11cdef",success:"#2dce89",danger:"#f5365c",warning:"#fb6340"},o="#FFFFFF",i="transparent";function c(){for(var e,t=["January","February","March","April","May","June","July","August","September","October","November","December"],a=new Date,n=[],l=6;l>0;l-=1)e=t[new Date(a.getFullYear(),a.getMonth()-l,1).getMonth()+1],n.push(e.substring(0,3));return n}var m={options:{scales:{yAxes:[{gridLines:{color:s[900],zeroLineColor:s[900]},ticks:{callback:function(e){if(!(e%10))return e+"%"}}}]},tooltips:{callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].label||"",n=e.yLabel,l="";return t.datasets.length>1&&(l+=a),l+=n+"%"}}}},data1:function(e){return{labels:c(),datasets:[{label:"Performance",data:[0,20,10,30,15,100]}]}},data2:function(e){return{labels:c(),datasets:[{label:"Performance",data:[0,20,5,25,10,30,15,40,40]}]}}},u={options:{scales:{yAxes:[{ticks:{callback:function(e){if(!(e%10))return e}}}]},tooltips:{callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].label||"",n=e.yLabel,l="";return t.datasets.length>1&&(l+=a),l+=n}}}},data:{labels:c(),datasets:[{label:"Sales",data:[25,20,30,22,17,29],maxBarThickness:10}]}};e.exports={chartOptions:function(){var e={defaults:{global:{responsive:!0,maintainAspectRatio:!1,defaultColor:s[600],defaultFontColor:s[600],defaultFontFamily:l,defaultFontSize:13,layout:{padding:0},legend:{display:!1,position:"bottom",labels:{usePointStyle:!0,padding:16}},elements:{point:{radius:0,backgroundColor:r.primary},line:{tension:.4,borderWidth:4,borderColor:r.primary,backgroundColor:i,borderCapStyle:"rounded"},rectangle:{backgroundColor:r.warning},arc:{backgroundColor:r.primary,borderColor:o,borderWidth:4}},tooltips:{enabled:!0,mode:"index",intersect:!1}},doughnut:{cutoutPercentage:83,legendCallback:function(e){var t=e.data,a="";return t.labels.forEach((function(e,n){var l=t.datasets[0].backgroundColor[n];a+='<span class="chart-legend-item">',a+='<i class="chart-legend-indicator" style="background-color: '+l+'"></i>',a+=e,a+="</span>"})),a}}}};return n.scaleService.updateScaleDefaults("linear",{gridLines:{borderDash:[2],borderDashOffset:[2],color:s[300],drawBorder:!1,drawTicks:!1,lineWidth:0,zeroLineWidth:0,zeroLineColor:s[300],zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2]},ticks:{beginAtZero:!0,padding:10,callback:function(e){if(!(e%10))return e}}}),n.scaleService.updateScaleDefaults("category",{gridLines:{drawBorder:!1,drawOnChartArea:!1,drawTicks:!1},ticks:{padding:20}}),e},parseOptions:function e(t,a){for(var n in a)"object"!==typeof a[n]?t[n]=a[n]:e(t[n],a[n])},chartExample1:m,chartExample2:u}},813:function(e,t){},815:function(e,t){},825:function(e,t){},827:function(e,t){},854:function(e,t){},856:function(e,t){},857:function(e,t){},862:function(e,t){},864:function(e,t){},871:function(e,t){},873:function(e,t){},891:function(e,t){},893:function(e,t){},905:function(e,t){},908:function(e,t){}},[[580,1,2]]]);
//# sourceMappingURL=main.ed056a62.chunk.js.map