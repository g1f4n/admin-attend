/*! For license information please see main.f5339103.chunk.js.LICENSE.txt */
(this["webpackJsonpargon-dashboard-react"]=this["webpackJsonpargon-dashboard-react"]||[]).push([[0],{1140:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAANbY1E9YMgAABPNJREFUWMO1lwtMm1UUx29pWYUCC21nVhzvxyaP8iqUMh6jDygwSikC5SlvRFgmgmOgA1Y2trn5ntscTKZxGh9TMVt0WUQzpqjRqclMJJnJ3Ey2+VhMjBI24Hjut6RA+1XZnTb55cv9er9z//fcc8+5lwAA4cPS8ysp7r1OTF2XSFbtaZJS/DKJNQwJg+Nr1N6y0F6BQDBCCDlKn96ykG2BMaWp8ca9ohTLKNlQ8wExdf7IfU/tuBqDQv5NQGHXZaJv+oTEaPvjJT5+p0Qi91mZXzyEJtbDuvUdEKpqANkaFeD7OYmPYjwqs0etazjDCf9PBFiQqIyt9+NsZwKiLGBs+xasg/NQtRvslO+Yh7xN30GQ0ooWyey61Ida7d/fiYDS/hmSkPtEnUBAQG0Zhao9ABVDAFbbPJRtn13ANse9p/+nlr4Gbm5uoNQNttHvmQWYu6+QzOoTKhz8hqb4KFTvBRxsbunATsxBDfZLs75JPTGfZn0r3dx9lU1ATus54quIPeWPbq/es5zBF6h+HACDFXzkERPZLV+ImATEZu9Od3MTQm77N1CxE5Y9OKUc+xd0TIFQ6A7RWdtymARIFfGP+SqUnDHH2RuaP8VdUAseEhn3pG3HpaAxsSpATb1gYxKAv+EgZRkX5Y4zpIOKRCI7tO3YhwZkmKqeGhphFTAaltTIGXI0Tme+WABt8wm4F/MEtcMkAKP/UEC05Y48EBJfDQJCDjMJuDsoo2ulPByTzhy3z283BmjsSBWxILsn8VEmAaqNzydgnp8xNJ2ByqHb2wU0AI1tX4JA4DafYNyXxiRA33QWvZD+KgKVu3iynyvQW3TZ/CKMOHvVmB7rApOAIsxg6NpQobv4ulJnW3Yyov0wfWM6Fv2ha/gosqj7Gmst+I2UYS7XFL+kx0ieTsx/hndHOAae2nKERv7NJNPBgtKBG5wdZgGcCDSiNg8Xo1HYUHOCd1dQ6DIZmidw3QXUA3WlA7cKEXsx2nLFTkn/NIlIaR8QS+Rg6bmK5XepCCvmurKBv8BbGgrBsVX7qeiinl9I0dafOZgEFDx80Y6p8xIpfOQnoY987WRwXKWTF2g7WtsHYg/fH/I2nV9Z0HmRbOy4YIdJgPHBr5eQv3mKJJuHtXQpctvO2QuUdRDQK9dAtMITYrQD9XTAHOy/GCYB2vpxJwwtn2GJjjsZGLNQI+gzLnsXiD2lU/rGs2JD8yR3hFsMcx5wJKf1K5KY97RBKBJD4ZbLt2LBNgte0mAIS2rppJ7SN044wSQgo2LMmcr38Pmu+wqx94Vk82Go2YeR3zKJdV80nV45Fmho+dxp9sweWF/2Bi+ZVSfJ6hDtczTT1T4F9MABXr5BE9q6cTyOv88LkwB10Yu8aO47RtZqNud6eK3CGLiJhw4NrIk096ZXvENSS47xwiQAI54XddERkpD3pMJdLPlT1/AxeHqvhqjM3rTUklcIvZTwwSQgRrfdBTai1A8SD4n8+8iMbrhLIvtdlf+sLIV6yDzCC5sAbb9LYg07iY8s5EO5fzKuf8D55MIXSJLpEHKQFyYBYUnNLsG0THzk4a+vEEvw0Bl+WqnfQaKz+lzyvwjAO8MBmhW9pcHH8ehF8FrmEiYBSaYDLqGB5R9Z2EcFKMIM+/E65nLXUJgEuNpSlPTyt0l48gM1VADegNrTKo4TDe4CV/yTgL8Bg0AIlCA8gh8AAAAASUVORK5CYII="},1141:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAANbY1E9YMgAABHxJREFUWIWtl3ls1EUUx9+8mW5rty6llW53W+i2225Lr92eC/Sk0XiLsanxQLQGY4yYKJcKUlASRcshoRICjUgwGkKqrUpC09A/ROIVz0KiiUgEbyMSj5Aq8nzz21hKf7+fwOAf30xmfzvvfWbmvTczQETgJBiZAXCI9V49iJcrADeWAD6SL2VHIC5D3mUKsVeBeEEJbvO8K+QN/lm4okCJ9cUgXiwHeLc+MZ7tuPmw/JwXQH8UcGGoSmVfMqg86pSs8JG8JUB4Ty7hrQGSsUmkPEl/8/dhfCAvLvoqrXH/D8ChmYALpt3Jsx2V12SRGKom+KaJ4HgLwc8tiZb7YriG8EY/KcBTOD/3vrHxFwXwZQNgV7iTjRIvbcLZD80ERxsJvhon3de//9JKYvN04u0hXBq6X483B/goDmJHeS3P/E98lp3/2mp3PFH6O/9PbC3llRCnuW2Cj+NmAGJvNciySwfltVOsmf2n44k60UrYkU0q7N0v9sSUEQA+mt+kpCSxr4bg++YLA/iumcSBOlJJkvDBvCuNAFS57zFZ5mNjTbalF/0xkjcHSE1Otlrdt0H82EyyJp1UQdoTZgCA2yRHtRV4E4xbzpUak+7bAHgc3hbUWdFrCADbcW6Q998OoGc+HkD3HQHunUrajiGA3CKvy0rkuukKdAT0Cmw1ApAzJi+W4TSCrw1i4GgiEHUMqUrfcrMseLKoWqEc5TJsBdQFZQEXJTFYzQVJnsaugkazOvBqFGQ8/SUWwU8McOw8nevZ87bJ2Rmkor4B8UrUsBJyBYOBWFgly+O4JMTFxR4LrkVoZZhjA38TuytLjSshHOSz4EgDiI3Fl3NZPYmrC89dEfk78pnB//8L1xRdr8drO+YA/0J0R9rZKImdFY5ZYYm3SbwWI74fkFgZ7rScj1zMafhh/IwOzwLszFmlMjzEBgm+bTrb+THuH+H0DKWSvMnfYzn/lJ1/kpBZEL5Tf0b6cvF+XKpC79uy3W9fBZ3zi0Kk0j2HYbhmknUbOlA3JjOAweqz9WYtYHekzdqKoXEHlL6cjMwklao0xN3irTrbWDOA3ZV2vRHTR/QeOWdchdSzX17ARcnzOadushiIWle48TID6LcbEnurAB8vvEIlK4IP4olY4LyXeamEdwQXWTPmvJ8oM4Dny+zabrVJKs3zBa6NEPw+m8TrHPlKnuTf8/QKOYGbAWyZ7qwdZSAbMjbJtkyC0TbChzj4pqbuF7sqQOwsd5QRAK6LOGtTCcj5uVery1ISy1+bTvKqKctEbykI/uYkM4DuiLPWFQOuCgeU1/OH6IuSykohfgs0Ws70o8RBZgCLQ+5aEgKVmfIZvxdIZSSfEKsLM8X6CIi1zjIDWBhy18P5wM+zfbKKX0S5qQfxmSLAp1lrnGUGMDfors4c4MvKLt4GkgVpQ7g0HzgYXWUGcHvQXXcxQKlvs34xyWnePmzPBpzjd5VZGj5V5K4NxcCR38UXTpItmT3iOQ5AzhA3mQH0lLiLUw7n5czTAPwCWiC2uafgudLwHy3o6Qne/mPvAAAAAElFTkSuQmCC"},1142:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAANbY1E9YMgAABPxJREFUWIWll3lMVEccxwfecsmuspwix3IZBASEBZd7hYJcRdhdLiuWu9aIUQQscmkwxquIXMYighQrRWuF3sRo0tjG0KYNrZq0SS2p9rBtSu0Vo7X++vstZoPLPo/xj29e5r03M5/5ze+YYQDATOlSRje7ktnDPkk9wIZjt7IO5QusPihPyFPEqRRSlwYzM7M+xtgxhk+F1Lk5y10V07S0UHIgvIIdj61lE6lt+v40jtgcJNEPeoCMGYDRhCZWHZAT5mIjH7cQJHeD5V5Q4JUAlX5pUOilhlB7H7CQSP5zmSc/X+WfpTod36DvR/2fDgBXcCXzEKvyf7YYV3s73S0CzibthB9yBmFaN2zQj5pBOP/MLsj2iMIR2d0Kv9T1lzJ6nt4CU6v6WEvw6lI0M7SFl8N07jD8rD0O17IH4LvsfoOoTe9v5r4OPZHrwdzcHOoCdRu+xf7cAJ+nd7DB6OoIZsbutCsr4c+8kzhR/wMTG4u+03+vqKoA+93rVVXFT+I4XADvJ7ayQDvP8Qy3SPgdV/awiY31R+4IoLOCj8z1wjsrtku4ALYF5ccLaMpzuLc3tENPBPCT5lX4OGUfSAQBNi/JTuUCCLJTNKEF9IMZm35U3QT5XvEgt5bpn9Q2hvgFfULp4EdWaOUCwD08Ql5NXm48OE0qkUgMorbxP7Rtq73VFBV9fACMDazxTjS5/7Ty2QDUNv6HImbd4nQaaIDXAocz3SO5LUAAueiICNDLBaBy8q/1me8K3+ccmxP3j/KBa/cdkXwIs2YjF8Cu0LXhmO9vYxpGh3rtiaKAktJ4Yitg/3vNwYVxXABnEhrZckf/EypHf/gVAa7nDDzW5GQt2rbEhSEQIvceo7rABTCZ1snG1E2+VoLFdG2gVp9mHweA/sP0DYK58NepuPrAyfROPoDLWEyoFhxUViajI93aGVr0yIxI37Eck+P9u3tZcdbUqqP6cTgBuvWiQfaHleowKmAopgZ+050wOTlt05i6mfadLFA6db8Q8RejtA6DrmYdYaW+KTvkVjLAAfXld/bk1zFSprKPgpfUBbQeMd0E/WVGF/sifUZcABdXvmzQBB4uPk1rF3xlrhe1njFzrEBOtyVAAwssba9i7VgwgX2wFhjEBfABVsPZ+jB5D9sXVpaE+6s/lNzQzBQoOpyQVWwkVlAToCn7CCc07ssFcDKufo7eVrdgkfJ8N9tdZbACrb4xqADsrKRfv5nQaDWqbsYQbnpA3HnAWO8l7mA7QtakWAoW8FnaQfQFrJSYHzxtnaDIO7GGVktxbywugP6oTXM0ELWZnhZSS5tv9oeXwd/5pwCtAoIg3OpXbVK8hRYyXj23BQ4v32BSg9FbWIxzYFcSZro7BWegekkOeEidLozEvsSGomtMigsAD6Em1RWxjpX7rUx3tJ6vT7sRDoshdVF4Q59qo/6bKXEBoIlNqk1ZwbaHPOc6z8L6nzfit4GzjR1s9M+Ko4noUmJKXAC1ARpR1QVomb217Cu8LwA+b7aGFjm0KctFobkA8CYkqq1BOqaQuZwLs/cFN1vHy3vDStieZcVst4i4APA4JqoS3xSGh80R3Abwli08WxeoZXj6FRUnwApRlfgm053hEGVFT6nzaZ0iluEBVlRcAGLmJLWjI6YtUrYQQILL0m68jolGDYkLoDviRVFRyK31SXqeAPDgWdWL7U6MAjE9DOB/ACYAniv5fpoAAAAASUVORK5CYII="},1143:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAANbY1E9YMgAABQNJREFUWMOtl3lMm2Ucxx/6trScBUtBjjCuArMD2gJtgUIHLZSOs9ByjbuwgTgEOWa4jzExRoluWeaGO7K4aJYZp5mGqNOMOeIVjFEjyZboJNF5TBOjc+P4+TxvtsrgrbJH//ikefq+7/P7Pr/ndzwPAgDERW/xz2iv5RfUWfAtqt3+NirVnkLZiklGFVmvkfrI+hiGN40QOsFjXKal4qjB+LCK1Fzl03yL5gSq0c+gzvxr7PdkHmc2COjfBSwiu/EyyoobUfp6hcwIhaLlEGkSJEbZIW1rFyRFNUOovxpchaIV/PyCXt6vacy6yAr/XwQQMuR9dS4MurVtixVaTZ/BSPkqTFSCg1E8bsv9EhLCq8CFh5ZTYztb737/nwQMWG+jXNVUA3Y3YNfCRBXAeAXAsG0VhmzLDoZtK+z/+/FzW+pLwDAMGOIn2sj31AK6C79HOzPeSOLxXG6XaE/CEzsBG1u5x/BGVtj3ynVniCdWy3Vn07uLrtMJaMmZR0ES5Yw8tBT2b8r43xARyog6kPrEzO7K/ohPJSBH8WQ6X8CHh3M/hbEK2LRxwmg5wKN5CyBwFUJm3LCJSkCwn2ogSKJgJ1u/ervhMl5hPXi4SdhfMl6/FSQmtgSkgL9v7BiVAB6DjiaEV7KBt36FxCifz3dAxuvfId8lyZoAZ880lQDkgo6rZbs4BZCVrxVAxlwCdLhOkHmoBDB83uG4MCub57QeUEXWAfbkESoBEQ/qu/H+wUjZCpvn9xsDYzh2gv0UECJN7qcSkJ90SMXwmVt2w0U2oO4nC0jWtJo+Bvz9Ku4POioBdsP7KCwg43RYgB724W0YLlvdlHHiLbJt0UFmCPFLPkf6ApWAHlwJm4xzka4CtxuG+HG2zG6mGJH3zKpncGwIfmvIeu+hHtpK2Ft8g+0FJdpTRsRDN/MSn7sjwrlxEngWzTES+UsFyc8XDFqX2HmoBRDIJEXq6VJc26FGf57dDi7jJE6ajJeANK5c5VTD3UZE3Yy6Cr9jIU2pv/RPpI1pH/F0k8Jey/U71XHNvpcBDNr+AD9vGSjCaw4O2ojxn1BP0Y8sVAI68r920FlwDT1WsMhIfbbOKcKrNxQnMsY1HzxED1xtM38h7sj/BrXnXXVA3Q3XsmfHAtmKLLIVraZ5R4MawavvLf4BhK6ekBU32tiedwW1mObvgUpAfea7G2g2fkha9Hl8/nNUSLL6HMUkeLpLFuyGS8ImwxybwmuhrgPr2Z3zCdqR+Gy2q6sIugoX2VgYxiIk3hGglrV0kdU2GmY3QCWgMv21DVSlv05+Be5u4itF6qMwWQ3QnD2H+77gZlX6uS3Nxg84hVMJKEs7wwk+pqGoQMOBmBAzPFVLgm8IJOKI2brMC6ha/yYnVAKKNcc5KU05jVJjO8zeHgHY/Uv40JEG8lBLX6XuVWTFz7igEoAjnpNizTFkVk0Fuom8fselFsSegaDfNqCzpryIyKWECyoBhvgxJ4wjY/w+5O3h/1WG/HHw8vD/NS/xgMRCPKR+gRMqAfgm5JTshAmEr2fvhPprcQaEf16oPoJw7ccc5oRKgDq6xSkpse0owDf2ZXeRNz50xrxlxIJwJXQKnQDZbqekxOzBp2blIXzcAj9x5FllZB3C1zKnUAlw5k6CRXsSyUNLhvDtGKKDTQfxdQyRGHAGlQBnKUWo0L2CNNGttUQAvq4/QsYkC5zxTwL+Ar0YBcupztWoAAAAAElFTkSuQmCC"},1144:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAANbY1E9YMgAABPBJREFUWIWtl3tMW1Ucxw+0hfEorwIDhdFSKJRnaSnl0ZZXKa9CC4wCo1RhPESWuUQTFd2cuKiJ07hItrnBmFFnXOaymZllWZwic1uMYzGZyZZgMrc/xCnExCjh1Z+/c90qwr0Tj5J8cnO59/zO9/7O9/x+pwQACB8/dzjIrLuB3G6zkfM1xeSdEgN5WZ8lcicrDIkhwYM+Pj4jhJCjxIeMKEKCdzoT4wtfM2SLjxTnkbPVZvI9jqPjaRyhOSiCD+4LuIOBvqwvJ7u06TmxQYHnxL6+SzmR4dCZkgg7MlTQhVddVASIRaLl2KCAC89q1IZxWykn/H8RMOt2kGc06kfwa+cbFHHwTaMVPD1OgMe2ePH0tMC3TVXQqkzAiGTpiQxV/8y98f9JwHzXZrI3X9OJQeGIOQ+gHyfsawXPVicsbW32sozQ/9PnH5QVAC4PvJSbOUDHMwv4wVVPzlSacnHyhaMlBoCBdm6ipQfACRlwwXFLIc2E54Sl0DSNcZgEXG2wkmxZ2LlGTDv0//PkK4HH28GtUoAqVDrxld0iZhLwqj7LJPL1hWtNlQC9reuenBPQ2wI3W2pBIvKFndq0SiYBmsjw5zNl4Vyw1V9/qb4cHkX3ywIDuCu95/OEIToSkkOlQ0wC8O+wE11NjbX6C+mkYrHYC71fkwUc15WaSAONsAoY605V8gqgX75SAL3nE7AjK4UGGmMVcLBBEc/tc9YMuFRyGugQkwBTbNRTyWFSWO52snkAvZOFHtJGRTzHJGC4SKfFgjI/XleOhmr7d7sADfh1g5UWJM/e/Gwjk4CLdWXEGBN1zBQThcvQBp5u57omX+7+M/1V8bG0R5wet5WxFaLpdjvB1Cr9RaLZodwMLuh6ihEtWq/nawBryK+f2UrT7mIcJgEzXC9opm3Ygkaa21eo5d0Rq403WpxHjbd4wKirW8BeMMPaC+hAygKKOGTSN9GGdKbKzC0H/7q3wQSakTYizEDn/UbE3oza673MdW4m29KTd8s2+MN0hwMA2+/fJkd//N7VDMqQYGhPShimon9yOchdl52DScCtVpuX22115M6WOlFKWMjl9iT5mtpAU48HFgj39/vuelNV6K3WWjLVUuOFScAkdsOV3GiupktRRpdisvGvBgV4OPkRsxKIBWm3LqNryllDruH7K2EScKG2ZA1X7BaikYV/4lRu8maBfv0redkQ4e93E7eu/2V8hx7hVsJcB1Zz1VFB3izIqcCtCbgknBcWcd8rpEHQp1Y+OdloJV/ge6thEnDaalzDx8gpq1Ei9ZNM4XJwp59Ldgvd83OnrEUJVxzl5GJ92RqYBBwvL+AFj2mk9KHot2ilg+1uPHCkg1waNEGX6GyVmRcmAaNmPS/vlRrI9gxVdVTABlhEDxRsjAS7/OHBkxVF+CyfFyYBh016XkbNeeSN/JzYQIn4t89tpbARO+KgJs34Pk40hj9K+GAS8KIug5ehe2BRuvG0Rg14/WVfgVZGhQmJZhLwgjZdkD25mSQxRPqpPloGm4KDrr+Np/eDRh05IACTgF61UhAsywQPmx8GSSSQFCo9jz9CCJpRECYBPalKQQbSkkmWLGw/rYrykOCPXMly0qLcJAiTgP2YOiGosezyuF1UQEVczPAxNKDQrqEwCaCuFuKkpYj0qZPcVECHSr7tREUheRe3pxAPEvAHoSjT1B9h9DoAAAAASUVORK5CYII="},1145:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAANbY1E9YMgAABPRJREFUWMOtlwtQVFUYgA/sIggstQtoNMpzVxritbwfuymPFTSUh/F+KGRRQeVMNCUCPkdp1AolRCCQSbDIGGh0yBCUUMAKHGdoBgonETOyJBwfxGv//nMpBPZu4qGd+Wbn3r33/N899z//f5YAAOHjjxtRZOjmBnL9x/Wk8XQAqSzzIXt3ughSEm28bW1E2To6OmWEkGNImY21cW5MlKXf/r2uwvKj3qShfhXp713P3U/H0RaDQh4lMPBTOLnYHEzysh3lFk8ZnhEKBRNyFwmkJtvClkx7SNtoB+5yU8Dzk/h789asZ71bGoM48f9FYOhmFHk3y2EjPuloZPhyuHIpFNQjcXhJ0jTqv+Lhh861EBdthSOSiTcz7F+9/c/9CxIYHY4lB/LlqTgolBd7TwWcSAD1vTiYuBs7zeS9WIDxBPw9GU5U+gG+Htid55wxOhzDLvDrzxHkVO1KDww+dqzUB0+lcIFmBp4LJ4LX1VQp6EyoT1YrlIP9EWwCnW0hxMVJfCYqYjn3ZI8KPhN6PSYrrJCZtH7bulrIJJC/20Up0NWFy9+t4aZ3vsE5gbF46O0OAz2hLuRudQxhEnB1Fuc4OYoBRuM1nr7tnAo2JduBqWQx902PZ70KKoG54u1lBjKpaBeTAH5KY16w4hJv7hPSoEKhcBp6rPkakrglSusEq0DF5lQprwB98pkC9JhPYMvrz9CBKlgFiiMjLBc0A0kJNnSgEiYBpf+SLJnMBCax6Dx2DtDlOJYAzk5icJNLtjEJFH7g7oYFZbSlKRhgMvHxVgEm4PcdobQgqQ/skyuYBC6cDSYKf/Nqpb85J6C+Hzev4FPFKAlCVRbYIyT1tC8wCQxeiyQ4tXb6+oKhXblOU8VonkXoYL4cBALdu+e+CnS41R/JJnD7F+wFd2JJZalPMCbSSMFBd96EnJt4H2PPwOvHjxzyXDeG99NxmAUodJCSj7w20IZ0qm6VVglQJ0IrJqMO0aEzkDp6Z6oRLagZ/cvIn9Ek85UVO0wl+jA4EAWA7XdW8Adx8GA4BuxsRZAYZ11IpX8fiCS3rk/BJHCtZ900dHMx0BcusJeZtGMAjVmgx3nbHEH85KKr3Z1rn6D39HWHTcMk0NUeOoueK8/TVxFIX0XXpYcNCrBO/HYjEgwNhbAjxymNBrzcHjILJoHmhkANOlpUtEmdjol+2CPo9749riAR6/deaArWbz+v4rZwM2GrA03BGnReDCEf7ndT6S8SwMDVcK5TjuPuCDelkP6i9K2ujhDyzdkgDZgE6muUGnz5uZLU1Sj1RMZ6fSVFXtzup61FRdf8CJ63ojPEJ84kUHPcnxfcppGA55YeDl39NF62iW44wNrSqLW5IYA01K3khUkACwovx8t9yRuv2a8xNzPA6Y8FX28zCA9bll37qYL7jQ8mgdIiL16oxPvvuVlg1t8//3UQLF2yGLLfdlBUYaAK/FPCB5PAzhwnXrAvIM7EVGLQ806WA7Zkg2Es06ZUTJs0k8D2bEet7NnuTGytRU2eHmZgucyo++hhL1J8yJMcKeCHSeDlNKlWsCwTmdTkMyNDPZDaiRrxTwjBZNQKk8BLqXZayUiXEWdHcRGtitZWxl/g1ovERltphUmgqMBDKzSxMPPzqIAq0KKwutJP66qhMAlUVfhqpfaEgqRvlqZQgeQEm8yTePwJrgJt/JfA31YevDW0y0E4AAAAAElFTkSuQmCC"},1148:function(e,t,a){e.exports=a.p+"static/media/profile-cover.e2582654.jpg"},1241:function(e,t,a){e.exports=a.p+"static/media/github.4ffd4fe7.svg"},1242:function(e,t,a){e.exports=a.p+"static/media/google.87be59a1.svg"},1246:function(e,t,a){"use strict";a.r(t);var s=a(0),l=a.n(s),n=a(76),r=a.n(n),i=a(19),o=a(115),c=(a(568),a(569),a(570),a(571),a(1249)),m=a(1248),d=a(1250),u=a(1251),h=a(1252),g=a(1253),p=a(552),E=a(1254),b=a(1255),f=a(1281),v=a(1282),y=a(1256),S=a(1257),k=a(1258),w=a(2),M=a.n(w),I=a(3),T=a.n(I);const N=()=>{const e=M.a.User.current();return!!e&&(console.log("Ada user"),console.log(e),!0)},j=()=>{const e=M.a.User.current();return!!e&&(console.log(e.get("roles").toLowerCase()),e.get("roles").toLowerCase())},H=()=>{const e=M.a.User.current();return console.log(e),!!e&&e.get("username").split(" ")[0]},D=()=>M.a.User.current().id,C=()=>M.a.User.current(),A=(e,t)=>T()(e).format(t),x=e=>{switch(e){case"Absen":return"Absence";case"Izin":case"Cuti":return"Izin";case"Terlambat":return"Late";case"Lembur":return"Overtime";case"Pulang Cepat":return"EarlyLeave"}},L=e=>{switch(e){case 0:return"Rejected";case 1:return"Approved";case 3:return"Belum Terproses";case 4:return"DAILY";case 5:return"WEEKLY";case 6:return"MONTHLY";case 7:return"RANGE"}};class O extends l.a.Component{constructor(...e){super(...e),this.handleLogout=e=>{e.preventDefault(),window.confirm("Anda akan logout dari sistem")&&M.a.User.logOut().then(()=>(localStorage.removeItem("roles"),this.props.history.push("/auth/login")))}}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a,{className:"navbar-top navbar-dark",expand:"md",id:"navbar-main"},l.a.createElement(c.a,{fluid:!0},l.a.createElement(i.b,{className:"h4 mb-0 text-white text-uppercase d-none d-lg-inline-block",to:"/"},this.props.brandText),l.a.createElement(d.a,{className:"navbar-search navbar-search-dark form-inline mr-3 d-none d-md-flex ml-lg-auto"},l.a.createElement(u.a,{className:"mb-0"},l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"fas fa-search"}))),l.a.createElement(E.a,{placeholder:"Search",type:"text"})))),l.a.createElement(b.a,{className:"align-items-center d-none d-md-flex",navbar:!0},l.a.createElement(f.a,{nav:!0},l.a.createElement(v.a,{className:"pr-0",nav:!0},l.a.createElement(y.a,{className:"align-items-center"},l.a.createElement("span",{className:"avatar avatar-sm rounded-circle"},l.a.createElement("img",{alt:"...",width:37,height:37,src:C().get("fotoWajah").url()})),l.a.createElement(y.a,{className:"ml-2 d-none d-lg-block"},l.a.createElement("span",{className:"mb-0 text-sm font-weight-bold"},H()?H():"")))),l.a.createElement(S.a,{className:"dropdown-menu-arrow",right:!0},l.a.createElement(k.a,{className:"noti-title",header:!0,tag:"div"},l.a.createElement("h6",{className:"text-overflow m-0"},"Welcome!")),"admin"===window.localStorage.getItem("roles")?l.a.createElement(k.a,{to:"/admin/user-profile",tag:i.b},l.a.createElement("i",{className:"ni ni-settings-gear-65"}),l.a.createElement("span",null,"Settings")):"",l.a.createElement(k.a,{divider:!0}),l.a.createElement(k.a,{href:"#pablo",onClick:this.handleLogout},l.a.createElement("i",{className:"ni ni-user-run"}),l.a.createElement("span",null,"Logout"))))))))}}var K=O,q=a(1259),P=a(1260),F=a(1261),z=a(1262);class J extends l.a.Component{render(){return l.a.createElement("footer",{className:"footer"},l.a.createElement(q.a,{className:"align-items-center justify-content-xl-between"},l.a.createElement(P.a,{xl:"6"},l.a.createElement("div",{className:"copyright text-center text-xl-left text-muted"},"\xa9 2018"," ",l.a.createElement("a",{className:"font-weight-bold ml-1",href:"https://www.creative-tim.com?ref=adr-admin-footer",rel:"noopener noreferrer",target:"_blank"},"Creative Tim"))),l.a.createElement(P.a,{xl:"6"},l.a.createElement(b.a,{className:"nav-footer justify-content-center justify-content-xl-end"},l.a.createElement(F.a,null,l.a.createElement(z.a,{href:"https://www.creative-tim.com?ref=adr-admin-footer",rel:"noopener noreferrer",target:"_blank"},"Creative Tim")),l.a.createElement(F.a,null,l.a.createElement(z.a,{href:"https://www.creative-tim.com/presentation?ref=adr-admin-footer",rel:"noopener noreferrer",target:"_blank"},"About Us")),l.a.createElement(F.a,null,l.a.createElement(z.a,{href:"http://blog.creative-tim.com?ref=adr-admin-footer",rel:"noopener noreferrer",target:"_blank"},"Blog")),l.a.createElement(F.a,null,l.a.createElement(z.a,{href:"https://github.com/creativetimofficial/argon-dashboard/blob/master/LICENSE.md?ref=adr-admin-footer",rel:"noopener noreferrer",target:"_blank"},"MIT License"))))))}}var R=J,B=a(1263),Y=a(557);class U extends l.a.Component{constructor(e){super(e),this.state={collapseOpen:!1},this.handleLogout=e=>{e.preventDefault(),window.confirm("Anda akan logout dari sistem")&&M.a.User.logOut().then(()=>(localStorage.removeItem("roles"),this.props.history.push("/auth/login")))},this.toggleCollapse=()=>{this.setState({collapseOpen:!this.state.collapseOpen})},this.closeCollapse=()=>{this.setState({collapseOpen:!1})},this.createLinks=e=>e.map((e,t)=>e.invisible?null:l.a.createElement(F.a,{key:t},l.a.createElement(z.a,{to:e.layout+e.path,tag:i.c,onClick:this.closeCollapse,activeClassName:"active"},l.a.createElement("i",{className:e.icon}),e.name))),this.activeRoute.bind(this)}activeRoute(e){return this.props.location.pathname.indexOf(e)>-1?"active":""}render(){const e=this.props,t=(e.bgColor,e.routes),a=e.logo;let s;return a&&a.innerLink?s={to:a.innerLink,tag:i.b}:a&&a.outterLink&&(s={href:a.outterLink,target:"_blank"}),l.a.createElement(m.a,{className:"navbar-vertical fixed-left navbar-light bg-white",expand:"md",id:"sidenav-main"},l.a.createElement(c.a,{fluid:!0},l.a.createElement("button",{className:"navbar-toggler",type:"button",onClick:this.toggleCollapse},l.a.createElement("span",{className:"navbar-toggler-icon"})),a?l.a.createElement(B.a,Object.assign({className:"pt-0"},s),l.a.createElement("img",{alt:a.imgAlt,className:"navbar-brand-img",src:a.imgSrc})):null,l.a.createElement(b.a,{className:"align-items-center d-md-none"},l.a.createElement(f.a,{nav:!0},l.a.createElement(v.a,{nav:!0,className:"nav-link-icon"},l.a.createElement("i",{className:"ni ni-bell-55"})),l.a.createElement(S.a,{"aria-labelledby":"navbar-default_dropdown_1",className:"dropdown-menu-arrow",right:!0},l.a.createElement(k.a,null,"Action"),l.a.createElement(k.a,null,"Another action"),l.a.createElement(k.a,{divider:!0}),l.a.createElement(k.a,null,"Something else here"))),l.a.createElement(f.a,{nav:!0},l.a.createElement(v.a,{nav:!0},l.a.createElement(y.a,{className:"align-items-center"},l.a.createElement("span",{className:"avatar avatar-sm rounded-circle"},l.a.createElement("img",{alt:"...",width:37,height:37,src:C().get("fotoWajah").url()})))),l.a.createElement(S.a,{className:"dropdown-menu-arrow",right:!0},l.a.createElement(k.a,{className:"noti-title",header:!0,tag:"div"},l.a.createElement("h6",{className:"text-overflow m-0"},"Welcome!")),"admin"===window.localStorage.getItem("roles")?l.a.createElement(k.a,{to:"/admin/user-profile",tag:i.b},l.a.createElement("i",{className:"ni ni-settings-gear-65"}),l.a.createElement("span",null,"Settings")):"",l.a.createElement(k.a,{divider:!0}),l.a.createElement(k.a,{href:"#pablo",onClick:this.handleLogout},l.a.createElement("i",{className:"ni ni-user-run"}),l.a.createElement("span",null,"Logout"))))),l.a.createElement(Y.a,{navbar:!0,isOpen:this.state.collapseOpen},l.a.createElement("div",{className:"navbar-collapse-header d-md-none"},l.a.createElement(q.a,null,a?l.a.createElement(P.a,{className:"collapse-brand",xs:"6"},a.innerLink?l.a.createElement(i.b,{to:a.innerLink},l.a.createElement("img",{alt:a.imgAlt,src:a.imgSrc})):l.a.createElement("a",{href:a.outterLink},l.a.createElement("img",{alt:a.imgAlt,src:a.imgSrc}))):null,l.a.createElement(P.a,{className:"collapse-close",xs:"6"},l.a.createElement("button",{className:"navbar-toggler",type:"button",onClick:this.toggleCollapse},l.a.createElement("span",null),l.a.createElement("span",null))))),l.a.createElement(d.a,{className:"mt-4 mb-3 d-md-none"},l.a.createElement(h.a,{className:"input-group-rounded input-group-merge"},l.a.createElement(E.a,{"aria-label":"Search",className:"form-control-rounded form-control-prepended",placeholder:"Search",type:"search"}),l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("span",{className:"fa fa-search"}))))),l.a.createElement(b.a,{navbar:!0},this.createLinks(t)))))}}U.defaultProps={routes:[{}]};var Q=U,W=a(61),_=a(18),G=(a(7),a(60)),V=a.n(G),Z=(a(245),a(1264)),X=a(1267),$=a(553),ee=a(1268),te=a(1269),ae=a(77),se=a(1265),le=a(1266),ne=a(560);var re=({color:e,message:t,open:a,togglez:s})=>l.a.createElement(l.a.Fragment,null,l.a.createElement(ne.a,{color:e,isOpen:a,toggle:s,fade:!1},l.a.createElement("span",{className:"alert-inner--text"},t)));class ie extends l.a.Component{constructor(e){super(e),this.getTotalStaff=()=>{const e=new M.a.User,t=new M.a.Query(e);t.notContainedIn("roles",["admin","leader"]),t.count().then(e=>{this.setState({totalStaff:e})}).catch(e=>{alert(e.message)})},this.toggleNavs=(e,t)=>{e.preventDefault(),this.setState({activeNav:t,chartExample1Data:"data1"===this.state.chartExample1Data?"data2":"data1"})},this.getTotalLeader=()=>{const e=new M.a.User,t=new M.a.Query(e);t.equalTo("roles","leader"),t.count().then(e=>{this.setState({totalLeader:e})}).catch(e=>{console.log(e.message)})},this.getTotalRequest=()=>{const e=M.a.Object.extend("ChangeRequest"),t=new M.a.Query(e);t.equalTo("statusApprove",3),t.count().then(e=>{this.setState({totalRequest:e})}).catch(({message:e})=>{this.setState({loading:!1,message:e,visible:!0}),alert(e)})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.state={activeNav:1,chartExample1Data:"data1",loading:!1,totalRequest:0,daftarLeader:[],leave:0,totalLeader:0,totalStaff:0,message:"",visible:!1,color:"danger"}}componentDidMount(){this.getTotalLeader(),this.getTotalRequest(),this.getTotalStaff()}render(){this.props.totalAbsen,this.props.totalStaff;const e=this.state,t=e.totalLeader,a=e.totalRequest,s=e.totalStaff;e.daftarLeader;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"header bg-gradient-info pb-8 pt-5 pt-md-8"},l.a.createElement(c.a,{fluid:!0},l.a.createElement(re,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:()=>this.toggle("visible")}),l.a.createElement("div",{className:"header-body"},l.a.createElement(q.a,null,l.a.createElement(P.a,{lg:"6",xl:"4"},l.a.createElement(i.b,{to:"/admin/staff",style:{color:"inherit"}},l.a.createElement(Z.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(se.a,null,l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(le.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Staff"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},s)),l.a.createElement(P.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-danger text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-chart-bar"})))))))),l.a.createElement(P.a,{lg:"6",xl:"4"},l.a.createElement(i.b,{to:"/admin/leader",style:{color:"inherit"}},l.a.createElement(Z.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(se.a,null,l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(le.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Leader"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},t)),l.a.createElement(P.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-warning text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-chart-pie"})))))))),l.a.createElement(P.a,{lg:"6",xl:"4"},l.a.createElement(i.b,{to:"/admin/request-izin",style:{color:"inherit"}},l.a.createElement(Z.a,{className:"card-stats mb-4 mb-xl-0"},l.a.createElement(se.a,null,l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(le.a,{tag:"h5",className:"text-uppercase text-muted mb-0"},"Change request"),l.a.createElement("span",{className:"h2 font-weight-bold mb-0"},a)),l.a.createElement(P.a,{className:"col-auto"},l.a.createElement("div",{className:"icon icon-shape bg-yellow text-white rounded-circle shadow"},l.a.createElement("i",{className:"fas fa-users"})))))))))))))}}var oe=ie;const ce=e=>e.split(" ").slice(0,2).join(" "),me=Object(W.a)(Object(W.b)(()=>({isOpen:!1,id:""}),{onToggleOpen:({isOpen:e,id:t})=>t=>({isOpen:!e,id:t})}),_.withScriptjs,_.withGoogleMap)(e=>l.a.createElement(_.GoogleMap,{defaultZoom:12,zoom:e.defaultZoom,defaultCenter:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},center:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},defaultOptions:{scrollwheel:!1}},e.userPosition.map(t=>l.a.createElement(_.Marker,{key:t.id,onClick:a=>{console.log(t.id),e.onToggleOpen(t.id)},icon:{labelOrigin:new window.google.maps.Point(11,50),url:a(164)("./".concat(void 0===t.get("user").attributes.color?"red":t.get("user").attributes.color,"-dot.png")),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(11,40)},title:"".concat(t.get("fullname")," absen masuk: ").concat(A(t.get("absenMasuk"),"HH:mm:ss")),position:{lat:parseFloat(t.get("latitude")),lng:parseFloat(t.get("longitude"))},label:{text:ce(t.get("fullname")),fontWeight:"bold"}},t.id===e.id&&l.a.createElement(_.InfoWindow,{onCloseClick:e.onToggleOpen},l.a.createElement("div",null,l.a.createElement("img",{src:void 0==t.get("selfieImage")?"":t.get("selfieImage").url(),height:100,width:100}),l.a.createElement("br",null),l.a.createElement("br",null),"Late"===t.className&&l.a.createElement("p",null,"Terlambat"),l.a.createElement("p",null,"Absen masuk:"," ",l.a.createElement("span",{style:{color:"Late"===t.className?"red":"blue"}},A(t.get("absenMasuk"),"HH:mm:ss")))))))));Object(_.withScriptjs)(Object(_.withGoogleMap)(e=>l.a.createElement(_.GoogleMap,{defaultZoom:12,defaultCenter:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},center:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},defaultOptions:{scrollwheel:!1}},e.userPosition.map(e=>l.a.createElement(_.Marker,{icon:{labelOrigin:new window.google.maps.Point(11,50),url:a(164)("./".concat(void 0===e.get("user").attributes.color?"red":e.get("user").attributes.color,"-dot.png")),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(11,40)},title:"".concat(e.get("fullname")," absen masuk: ").concat(A(e.get("absenMasuk"),"HH:mm:ss")),position:{lat:parseFloat(e.get("latitude")),lng:parseFloat(e.get("longitude"))},label:{text:ce(e.get("fullname")),fontWeight:"bold"}})))));class de extends l.a.Component{constructor(e){super(e),this.scrollToMyRef=()=>window.scrollTo(0,this.lcoationRef.offsetTop),this.getCenterAverage=e=>{this.setState({loading:!0});let t=e.reduce((e,t)=>e+parseFloat(t.get("latitude")),0),a=e.reduce((e,t)=>e+parseFloat(t.get("longitude")),0);console.log(t+" "+a),this.setState({avgLat:t/e.length,avgLng:a/e.length,loading:!1})},this.toggleNavs=(e,t)=>{e.preventDefault(),this.setState({activeNav:t,chartExample1Data:"data1"===this.state.chartExample1Data?"data2":"data1"})},this.getDaftarLeader=()=>{this.setState({loading:!0});const e=new M.a.User,t=new M.a.Query(e);t.equalTo("roles","leader"),t.find({useMasterKey:!0}).then(e=>{this.setState({daftarLeader:e})}).catch(e=>{console.log(e.message)})},this.getDaftarRequest=()=>{const e=M.a.Object.extend("ChangeRequest"),t=new M.a.Query(e);t.equalTo("statusApprove",3),t.exclude("createdAt"),t.exclude("updatedAt"),t.include("userId"),t.find().then(e=>{this.setState({daftarRequest:e})}).catch(({message:e})=>{this.setState({loading:!1}),console.log(e)})},this.getDataTerlambat=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Late"),t=new M.a.Query(e),a=new Date,s=new T.a(a);s.startOf("day");const l=new T.a(s);l.add(1,"day"),t.equalTo("status",3),t.greaterThanOrEqualTo("time",s.toDate()),t.lessThan("time",l.toDate()),t.include("user"),t.find().then(e=>{e.map(e=>e.select=!1),console.log(e),this.setState({late:e})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getLeaderStaff=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Absence"),t=new M.a.Query(e),a=new Date,s=new T.a(a);s.startOf("day");const l=new T.a(s);l.add(1,"day"),t.greaterThanOrEqualTo("absenMasuk",s.toDate()),t.lessThan("absenMasuk",l.toDate()),t.include("user"),t.find().then(e=>{e.map(e=>e.select=!1),console.log(e),this.setState({dataAbsen:e})}).catch(e=>{console.log(e),this.setState({loading:!1})})},this.setCenterMaps=(e,t)=>{this.setState({avgLat:parseFloat(e),avgLng:parseFloat(t)})},this.lcoationRef=l.a.createRef(),this.state={activeNav:1,chartExample1Data:"data1",loading:!1,totalStaff:0,daftarRequest:[],daftarLeader:[],dataAbsen:[],late:[],avgLat:0,avgLng:0,defaultZoom:12},window.Chart&&Object(ae.parseOptions)(V.a,Object(ae.chartOptions)())}componentDidMount(){this.getDaftarRequest(),this.getDaftarLeader(),this.getLeaderStaff(),this.getDataTerlambat()}componentDidUpdate(e,t){t.late!==this.state.late&&(console.log(this.state.dataAbsen),this.getCenterAverage(this.state.dataAbsen.concat(this.state.late)))}render(){const e=this.state,t=e.daftarRequest,a=e.loading;e.daftarLeader;return console.log(this.state.dataAbsen.concat(this.state.late)),l.a.createElement(l.a.Fragment,null,l.a.createElement(oe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,{className:"mt-5"},l.a.createElement(P.a,{className:"mb-5 mb-xl-0",xl:"12"},l.a.createElement(Z.a,{className:"shadow mb-5",ref:this.lcoationRef},this.state.loading?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Loading map..."):0===this.state.dataAbsen.concat(this.state.late).length?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Tidak ada data absen hari ini"):l.a.createElement(me,{userPosition:this.state.dataAbsen.concat(this.state.late),avgLat:this.state.avgLat,avgLng:this.state.avgLng,defaultZoom:this.state.defaultZoom,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyC5tj-2X6b7kwGTqGZkB7sofZdMhpyE75Q",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:"500px"},className:"map-canvas",id:"map-canvas"}),mapElement:l.a.createElement("div",{style:{height:"100%",borderRadius:"inherit"}})}))),l.a.createElement(P.a,{xl:"6",className:"mb-5"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h3",{className:"mb-0"},"Change request")),l.a.createElement("div",{className:"col text-right"},l.a.createElement(i.b,{to:"/admin/status-request"},l.a.createElement($.a,{color:"primary",size:"sm"},"See all"))))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Status"))),l.a.createElement("tbody",null,a?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):t.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found...")):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,e.get("userId").attributes.nik),l.a.createElement("td",null,e.get("userId").attributes.fullname),l.a.createElement("td",{style:{color:"".concat(3===e.attributes.statusApprove?"blue":"".concat(1===e.attributes.statusApprove?"green":"red"))}},l.a.createElement("strong",null,3===e.get("statusApprove")?"Waiting":1===e.get("statusApprove")?"Approved".toUpperCase():"Rejected".toUpperCase())))))))),l.a.createElement(P.a,{xl:"6"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h3",{className:"mb-0"},"Data absen hari ini")))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Absen masuk"))),l.a.createElement("tbody",null,a?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):this.state.dataAbsen.concat(this.state.late).length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},"No data found...")):this.state.dataAbsen.concat(this.state.late).map((e,t)=>l.a.createElement("tr",{onClick:()=>{this.setCenterMaps(e.get("latitude"),e.get("longitude")),this.setState({defaultZoom:22}),this.scrollToMyRef()}},l.a.createElement("td",null,e.get("user").attributes.nik),l.a.createElement("td",null,e.get("user").attributes.fullname),l.a.createElement("td",null,"Late"===e.className?l.a.createElement("div",null,l.a.createElement("span",{style:{color:"red"}},A(e.get("time"),"HH:mm:ss"))):A(e.get("absenMasuk"),"HH:mm:ss")))))))))))}}l.a.memo(de);var ue=a(203),he=a.n(ue);class ge extends l.a.Component{render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"header pb-2 pt-5 pt-lg-8 d-flex align-items-center",style:{minHeight:"100px",backgroundImage:"url("+a(1148)+")",backgroundSize:"cover",backgroundPosition:"center top"}},l.a.createElement("span",{className:"mask bg-gradient-default opacity-8"})))}}var pe=ge,Ee=a(15),be=a.n(Ee),fe=a(1270),ve=a(1271),ye=a(1272);var Se=({resPerPage:e,totalPosts:t})=>{const a=[];for(let s=1;s<=Math.ceil(t/e);s++)a.push(s);return l.a.createElement(l.a.Fragment,null,l.a.createElement("nav",{"aria-label":"Page navigation example"},l.a.createElement(fe.a,{className:"pagination justify-content-end p-4",listClassName:"justify-content-end"},a.map(e=>l.a.createElement(ve.a,null,l.a.createElement(ye.a,{href:"#pablo",onClick:e=>e.preventDefault(),tabIndex:"-1"},e,l.a.createElement("span",{className:"sr-only"},e)))))))};a(1273),a(1274),a(1275);class ke extends l.a.Component{constructor(e){super(e),this.getData=(e=1)=>{this.setState({loading:!0,page:e});const t=this.state,a=t.resPerPage,s=(t.page,new M.a.User),l=new M.a.Query(s);l.notContainedIn("roles",["admin","leader","Admin","Leader"]),l.skip(a*e-a),l.limit(a),l.withCount(),l.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loading:!1,toast:!0,message:"Halo"})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.getPosisi=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("Position"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarPosisi:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getLeader=()=>{this.setState({loading:!0});const e=new M.a.User,t=new M.a.Query(e);t.equalTo("roles","leader"),t.find({useMasterKey:!0}).then(e=>{this.setState({daftarLeader:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.handleFilter=(e,t=1)=>{e.preventDefault(),this.setState({loadingFilter:!0});const a=this.state,s=a.searchBy,l=a.searchValue,n=this.state,r=n.resPerPage,i=(n.page,new M.a.User),o=new M.a.Query(i);switch(o.notContainedIn("roles",["admin","leader","Admin","Leader"]),o.skip(r*t-r),o.limit(r),o.withCount(),s){case"all":o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"name":o.matches("fullname",l,"i"),o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"nik":o.equalTo("nik",l),o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"divisi":o.matches("posisi",l,"i"),o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"leader":const e=new M.a.User,t=new M.a.Query(e);t.matches("fullname",l,"i"),o.matchesQuery("leaderIdNew",t),o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")})}},this.handleFilterPagination=(e=1)=>{this.setState({loadingFilter:!0});const t=this.state,a=t.searchBy,s=t.searchValue,l=this.state,n=l.resPerPage,r=(l.page,new M.a.User),i=new M.a.Query(r);switch(i.notContainedIn("roles",["admin","leader","Admin","Leader"]),i.skip(n*e-n),i.limit(n),i.withCount(),a){case"all":i.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"name":i.matches("fullname",s,"i"),i.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"nik":i.equalTo("nik",s),i.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"divisi":i.matches("posisi",s,"i"),i.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"leader":const e=new M.a.User,t=new M.a.Query(e);t.matches("fullname",s,"i"),i.matchesQuery("leaderIdNew",t),i.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")})}},this.state={daftarStaff:[],daftarLevel:[],daftarPosisi:[],loading:!1,searchBy:"all",searchValue:"",resPerPage:20,page:1,totalData:0,loadingFilter:!1,toast:!1}}componentDidMount(){this.getPosisi(),this.getLeader(),this.handleFilterPagination()}getAbsenStaff(){const e=new M.a.User,t=new M.a.Query(e);t.notContainedIn("roles",["admin","leader","Admin","Leader"]),t.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e})}).catch(e=>{alert(e.message)})}render(){const e=this.state,t=e.daftarStaff,a=e.daftarLevel,s=e.loading,n=l.a.createElement(u.a,{controlId:"formlvl"},l.a.createElement(E.a,{className:"form-control-alternative",type:"select",required:!0,onChange:e=>this.setState({searchValue:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih ",this.state.searchBy),"leader"===this.state.searchBy?a.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))):this.state.daftarPosisi.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))))),r=l.a.createElement(u.a,null,l.a.createElement(E.a,{type:"text",className:"form-control-alternative",disabled:"all"===this.state.searchBy,placeholder:"all"===this.state.searchBy?"":"Masukkan ".concat(this.state.searchBy),onChange:e=>this.setState({searchValue:e.target.value})}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(pe,null),l.a.createElement(c.a,{className:"mt-2",fluid:!0},l.a.createElement(Z.a,{className:"shadow p-2 pt-4"},l.a.createElement(X.a,{className:"border-0 p-1 ml-2"},l.a.createElement(d.a,{onSubmit:this.handleFilter,className:!0},l.a.createElement(q.a,null,l.a.createElement(P.a,{lg:2},"Search by"),l.a.createElement(P.a,{lg:2},l.a.createElement(u.a,{controlId:"formHorizontalEmails"},l.a.createElement(E.a,{className:"form-control-alternative",type:"select",onChange:e=>this.setState({searchBy:e.target.value,searchValue:""})},["all","nik","name","leader","divisi"].map(e=>l.a.createElement("option",{value:e},e))))),l.a.createElement(P.a,{lg:4},"level"==this.state.searchBy||"divisi"==this.state.searchBy?n:r),l.a.createElement(P.a,{sm:2},l.a.createElement($.a,{color:"primary",type:"submit",disable:this.state.loadingFilter?"true":"false"},l.a.createElement("i",{className:"fa fa-search"})," ",this.state.loadingFilter?"Fetching...":"Search"))))),l.a.createElement(q.a,null,s?l.a.createElement(P.a,{lg:12,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement(P.a,{lg:12,style:{textAlign:"center"}},"No staff found"):t.map(e=>l.a.createElement(P.a,{md:3,className:"mt-2"},l.a.createElement(Z.a,{className:"card-profile shadow"},l.a.createElement(q.a,{className:"justify-content-center"},l.a.createElement(P.a,{className:"text-center p-2",lg:""},l.a.createElement("div",{className:""},l.a.createElement("a",{href:e.get("fotoWajah").url()},l.a.createElement("img",{alt:"...",style:{height:"150px",width:"150px"},className:"rounded-circle",src:e.get("fotoWajah").url()}))))),l.a.createElement(se.a,{className:"pt-0 pt-md-4",style:{height:"200px",borderRadius:"50px 20px 20px 20px",borderColor:"#fc032d"}},l.a.createElement("div",{className:"text-center mt-md-2"},l.a.createElement("h3",null,ce(e.get("fullname"))),l.a.createElement("div",{className:"h5 font-weight-300"},l.a.createElement("i",{className:"ni location_pin mr-2"}),e.get("nik")),l.a.createElement("div",{className:"h5"},l.a.createElement("i",{className:"ni business_briefcase-24 mr-2"}),be.a.isEmpty(e.get("email"))?"-":e.get("email")),l.a.createElement("div",{className:"mt-2"},l.a.createElement(i.b,{color:"inherit",to:"/admin/export-absen/".concat(e.id)},l.a.createElement($.a,{size:"sm",color:"primary",outline:!0},l.a.createElement("i",{className:"ni ni-spaceship mr-2"}),"View history"))))))))),l.a.createElement(he.a,{activePage:this.state.page,itemsCountPerPage:this.state.resPerPage,totalItemsCount:this.state.totalData,pageRangeDisplayed:5,onChange:e=>this.handleFilterPagination(e),innerClass:"pagination justify-content-end p-4",itemClass:"page-item mt-2",linkClass:"page-link",prevPageText:"<",nextPageText:">"}))))}}var we=ke,Me=a(1276),Ie=a(54),Te=a.n(Ie);class Ne extends l.a.Component{constructor(e){super(e),this.handleSubmit=e=>{e.preventDefault(),this.setState({loading:!0});const t=this.state,a=t.username,s=t.password;M.a.User.logIn(a,Te()(s)).then(e=>{console.log(e.get("roles")),"admin"!==e.get("roles")?(console.log("leader"),window.localStorage.setItem("roles","leader"),this.setState({loading:!1}),window.location.replace("/leader/index"),this.props.history.push("/leader/index")):"admin"===e.get("roles")?(window.localStorage.setItem("roles","admin"),this.setState({loading:!1}),window.location.replace("/admin/index"),this.props.history.push("/admin/index")):(M.a.User.logOut(),this.setState({error:"Maaf anda dilarang login ke sistem",loading:!1}))}).catch(e=>{console.log(e),this.setState({error:e.message,loading:!1})})},this.state={loading:!1,username:"",password:"",error:""}}componentDidMount(){console.log("mounted")}render(){const e=this.state,t=e.loading,a=e.error;return l.a.createElement(l.a.Fragment,null,l.a.createElement(P.a,{lg:"5",md:"7"},l.a.createElement(Z.a,{className:"bg-secondary shadow border-0"},l.a.createElement(se.a,{className:"px-lg-5 py-lg-5"},l.a.createElement("div",{className:"text-center text-muted mb-4"},""!==a?l.a.createElement(Me.a,{color:"danger",fade:!1},l.a.createElement("span",{className:"alert-inner--text"},a)):l.a.createElement("small",null,"Masukkan username dan password")),l.a.createElement(d.a,{role:"form",onSubmit:this.handleSubmit},l.a.createElement(u.a,{className:"mb-3"},l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-circle-08"}))),l.a.createElement(E.a,{placeholder:"Username",type:"text",autoComplete:"new-email",required:!0,onChange:e=>this.setState({username:e.target.value})}))),l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-lock-circle-open"}))),l.a.createElement(E.a,{placeholder:"Password",type:"password",autoComplete:"new-password",required:!0,onChange:e=>this.setState({password:e.target.value})}))),l.a.createElement("div",{className:"text-center"},l.a.createElement($.a,{className:"my-4",color:"primary",type:"submit",disabled:t},t?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Signing in..."):"Sign in")))))))}}var je=Ne,He=a(1280),De=a(1277),Ce=a(1283);class Ae extends s.Component{render(){return l.a.createElement(Ce.a,{size:this.props.size,scrollable:!1,className:"modal-dialog-centered",isOpen:this.props.show,toggle:this.props.handleHide},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h3",{className:"modal-title",id:"exampleModalLabel"},this.props.title),l.a.createElement("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:this.props.handleHide},l.a.createElement("span",{"aria-hidden":!0},"\xd7"))),l.a.createElement("div",{className:"modal-body text-danger"},this.props.body),this.props.footer?l.a.createElement("div",{className:"modal-footer"},l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:this.props.handleHide},"Close"),l.a.createElement($.a,{color:"primary",type:"button",onClick:this.props.handleSubmit,disabled:this.props.disabled||!1},this.props.loading?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")):"")}}var xe=Ae,Le=a(70),Oe=a.n(Le);class Ke extends l.a.Component{constructor(e){super(e),this.state={activeNav:1,chartExample1Data:"data1"}}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"header bg-gradient-info pb-8 pt-5 pt-md-8"},l.a.createElement(c.a,{fluid:!0},l.a.createElement("div",{className:"header-body"}))))}}var qe=Ke;class Pe extends l.a.Component{constructor(e){super(e),this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.getDetail=(e,t)=>{e.preventDefault();const a=M.a.Object.extend("ChangeRequest"),s=new M.a.Query(a);s.equalTo("userId",{__type:"Pointer",className:"_User",objectId:t}),s.include("userId"),s.include("shifting"),s.first().then(e=>{console.log(e.attributes),console.log("shifting",e.get("shifting")),this.setState({detailMode:!0,detail:e.attributes,shifting:e.get("shifting").attributes,loading:!1})}).catch(e=>{alert(e.message)})},this.handleReject=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=M.a.Object.extend("ChangeRequest");new M.a.Query(t).get(this.state.idUser).then(e=>{e.set("statusApprove",0),e.set("alasanReject",this.state.reason),e.save().then(()=>{const e=[...this.state.staff];e.splice(this.state.userIndex,1),this.setState({message:"Berhasil reject",color:"success",visible:!0,staff:e,rejectMode:!1,loading:!1})})})},this.handleApproval=(e,t)=>{e.preventDefault(),this.setState({loadingModal:!0});const a=new M.a.User;new M.a.Query(a).get(this.state.userId).then(e=>{const a=M.a.Object.extend("ChangeRequest"),s=new M.a.Query(a);s.exclude("createdAt"),s.exclude("updatedAt"),s.include("userId"),s.get(this.state.idUser).then(a=>{let s=a.attributes;for(var l in console.log(a),s)"statusApprove"!==l&&"leaderId"!==l&&"idUser"!==l&&"userId"!==l&&e.set(l,s[l]);e.save(null,{useMasterKey:!0}).then(e=>{a.set("statusApprove",t?1:0),t||a.set("alasanReject",this.state.reason),a.save().then(e=>{const t=[...this.state.staff];t.splice(this.state.userIndex,1),this.setState({message:"Berhasil approve",color:"success",staff:t,approvalMode:!1,loadingModal:!1,visible:!0})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Terjadi kesalahan",color:"danger",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Terjadi kesalahan",color:"danger"})})}).catch(({message:e})=>{this.setState({loadingModal:!1,message:"Terjadi kesalahan",color:"danger",visible:!0}),console.log(e)})}).catch(e=>{console.log(e.message),this.setState({loading:!1,message:"Terjadi kesalahan",color:"danger",visible:!0})})},this.state={staff:[],shifting:{},loading:!1,requestMode:!1,userIndex:0,loadingModal:!1,approvalMode:!1,rejectMode:!1,userId:"",fullnames:"",reason:"",checkId:[],loadingReco:!1,detail:{},detailMode:!1,message:"",color:"danger",visible:!1,idUser:""}}componentDidMount(){this.getData()}getData(){this.setState({loading:!0});const e=M.a.Object.extend("ChangeRequest"),t=new M.a.Query(e);t.equalTo("statusApprove",3),t.include("userId"),t.find().then(e=>{console.log(e),this.setState({staff:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}render(){const e=this.state,t=e.staff,a=e.loading,s=e.loadingModal,n=e.fullnames,r=e.approvalMode,i=e.rejectMode,o=e.detailMode,m=e.detail;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-2"},"Change request status"),l.a.createElement(re,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:()=>this.toggle("visible")})),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Status"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,e.get("userId").attributes.nik),l.a.createElement("td",null,e.get("userId").attributes.fullname),l.a.createElement("td",{style:{color:"".concat(3===e.attributes.statusApprove?"blue":"".concat(2===e.attributes.statusApprove?"green":"red"))}},l.a.createElement("strong",null,3===e.get("statusApprove")?"Belum diproses":2===e.get("statusApprove")?"Approved".toUpperCase():"Rejected".toUpperCase())),l.a.createElement("td",null,l.a.createElement($.a,{id:"t4",color:"secondary",className:"btn-circle",onClick:a=>{this.setState({userId:e.get("userId").id,userIndex:t,fullnames:e.get("userId").attributes.fullname}),this.getDetail(a,e.get("userId").id)}},l.a.createElement("i",{className:"fa fa-eye"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t4"},"Detail"),l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:()=>{this.setState({approvalMode:!0,userId:e.get("userId").id,idUser:e.id,userIndex:t,fullnames:e.get("userId").attributes.fullname})}},l.a.createElement("i",{className:"fa fa-check"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Approve"),l.a.createElement($.a,{id:"t2",className:"btn-circle btn-danger",onClick:a=>{this.setState({rejectMode:!0,userId:e.get("userId").id,idUser:e.id,userIndex:t,fullnames:e.get("userId").attributes.fullname})}},l.a.createElement("i",{className:"fa fa-times"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t2"},"Reject")))))))))),l.a.createElement(xe,{show:o,loading:s,footer:!1,handleHide:()=>{this.toggle("detailMode"),this.setState({detail:{}})},title:"".concat(n," change request data"),body:l.a.createElement("div",null,l.a.createElement(d.a,{className:"text-dark"},void 0!==m.fotoWajah?l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Foto Wajah"),l.a.createElement(q.a,{className:"ml-1"},l.a.createElement("img",{height:100,width:100,src:void 0!==m.fotoWajah?m.fotoWajah.url():"",alt:"foto"}))):"",l.a.createElement(u.a,{controlId:"formShifting"},l.a.createElement(De.a,null,"Shifting"),l.a.createElement(E.a,{type:"number",disabled:!0,placeholder:this.state.shifting.tipeShift})),l.a.createElement(u.a,{controlId:"formCuti"},l.a.createElement(De.a,null,"Jumlah cuti"),l.a.createElement(E.a,{type:"number",disabled:!0,placeholder:m.jumlahCuti})),l.a.createElement(u.a,{controlId:"formLembut"},l.a.createElement(De.a,null,"Lembur"),l.a.createElement(E.a,{className:"text-dark",type:"text",disabled:!0,placeholder:m.lembur})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"))),handleSubmit:this.rejectChecked}),l.a.createElement(xe,{show:r,loading:s,footer:!0,handleHide:()=>this.toggle("approvalMode"),title:"Approval Confirmation",body:"Approve change request ".concat(n," ?"),handleSubmit:e=>this.handleApproval(e,!0)}),l.a.createElement(xe,{show:i,loading:s,handleHide:()=>this.toggle("rejectMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject change request ".concat(n," ?")),l.a.createElement(d.a,{onSubmit:e=>this.handleReject(e)},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleReject(e)}))}}var Fe=Pe,ze=a(1278);class Je extends l.a.Component{constructor(e){super(e),this.getPoint=()=>{const e=new M.a.Object.extend("ValidGeopoint"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarPoint:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getTipe=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("EmployeeType"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarTipe:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getPosisi=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("Position"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarPosisi:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getLevel=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("Level"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarLevel:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getStaff=()=>{this.setState({loading:!0});const e=new M.a.User;new M.a.Query(e).find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.getData=()=>{this.setState({loading:!0});const e=new M.a.User;new M.a.Query(e).find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.handleFilter=e=>{e.preventDefault(),this.setState({loadingFilter:!0});const t=this.state,a=t.searchBy,s=t.searchValue,l=this.state,n=l.resPerPage,r=l.page,i=new M.a.User,o=new M.a.Query(i);switch(o.skip(n*r-n),o.limit(n),o.withCount(),a){case"all":o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"name":o.matches("fullname",s,"i"),o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"nik":o.equalTo("nik",s),o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"divisi":o.matches("posisi",s,"i"),o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")});break;case"level":o.matches("level",s,"i"),o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"leader":const e=new M.a.User,t=new M.a.Query(e);t.matches("fullname",s,"i"),o.matchesQuery("leaderIdNew",t),o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")})}},this.handleFilterPagination=(e=1)=>{this.setState({loading:!0,page:e});const t=this.state,a=t.searchBy,s=t.searchValue,l=this.state,n=l.resPerPage,r=(l.page,new M.a.User),i=new M.a.Query(r);switch(i.skip(n*e-n),i.limit(n),i.withCount(),a){case"all":i.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")});break;case"divisi":i.matches("posisi",s,"i"),i.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")});break;case"name":i.matches("fullname",s,"i"),i.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")});break;case"nik":i.equalTo("nik",s),i.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")});break;case"level":i.matches("level",s,"i"),i.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")});break;case"leader":const e=new M.a.User,t=new M.a.Query(e);t.matches("fullname",s,"i"),i.matchesQuery("leaderIdNew",t),i.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})}},this.getShifting=()=>{const e=M.a.Object.extend("Shifting"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarShifting:e})}).catch(e=>{alert("cek koneksi anda")})},this.getLeader=()=>{this.setState({loading:!0});const e=new M.a.User,t=new M.a.Query(e);t.equalTo("roles","leader"),t.find({useMasterKey:!0}).then(e=>{this.setState({daftarLeader:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.getSupervisor=()=>{this.setState({loading:!0});const e=new M.a.User,t=new M.a.Query(e);t.equalTo("roles","supervisor"),t.find({useMasterKey:!0}).then(e=>{this.setState({daftarSupervisor:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.getManager=()=>{this.setState({loading:!0});const e=new M.a.User,t=new M.a.Query(e);t.equalTo("roles","manager"),t.find({useMasterKey:!0}).then(e=>{this.setState({daftarManager:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.getHead=()=>{this.setState({loading:!0});const e=new M.a.User,t=new M.a.Query(e);t.equalTo("roles","head"),t.find({useMasterKey:!0}).then(e=>{this.setState({daftarHead:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.getGM=()=>{this.setState({loading:!0});const e=new M.a.User,t=new M.a.Query(e);t.equalTo("roles","gm"),t.find({useMasterKey:!0}).then(e=>{this.setState({daftarGM:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.hans=()=>{},this.handleFace=e=>{this.setState({loadingReco:!0,statusReco:0,fotoWajah:e.target.files[0]});const t=new FormData;t.append("knax",e.target.files[0]),Oe.a.post("http://34.126.96.126:4000/api/face-check",t,{headers:{"Content-Type":"multipart/form-data"}}).then(({data:e})=>1===e.status?this.setState({statusReco:1,message:"\u2714\ufe0f ".concat(e.message),loadingReco:!1}):this.setState({statusReco:0,message:"\u2716\ufe0f ".concat(e.message),loadingReco:!1})).catch(e=>alert("Terjadi error..."))},this.handleCheckImei=(e,t)=>{e.preventDefault(),this.setState({loadingModal:!0});const a=new M.a.User,s=new M.a.Query(a);s.equalTo("imei",t),s.first().then(e=>{e?this.setState({imeiMessage:"Imei telah terdaftar",loadingModal:!1}):this.handleSubmit()}).catch(e=>{console.log(e),this.setState({loadingModal:!1})})},this.handleSubmit=()=>{this.setState({loading:!0});const e=this.state,t=e.name,a=e.nik,s=e.tipeKaryawan,l=e.posisi,n=e.level,r=e.imei,i=e.jamKerja,o=e.lokasiKerja,c=e.jumlahCuti,m=e.lembur,d=e.fotoWajah,u=e.username,h=e.password,g=e.email,p=new M.a.User,E=(e,t)=>{p.set(e,{__type:"Pointer",className:"_User",objectId:this.state[t]})};"staff"===n.toLowerCase()&&(""!==this.state.selectLeader&&E("leaderIdNew","selectLeader"),""!==this.state.selectSupervisor&&E("supervisorID","selectSupervisor"),""!==this.state.selectManager&&E("managerID","selectManager"),""!==this.state.selectHead&&E("headID","selectHead"),""!==this.state.selectGM&&E("gmID","selectGM")),"leader"===n.toLowerCase()&&(""!==this.state.selectSupervisor&&E("supervisorID","selectSupervisor"),""!==this.state.selectManager&&E("managerID","selectManager"),""!==this.state.selectHead&&E("headID","selectHead"),""!==this.state.selectGM&&E("gmID","selectGM")),"supervisor"===n.toLowerCase()&&(""!==this.state.selectManager&&E("managerID","selectManager"),""!==this.state.selectHead&&E("headID","selectHead"),""!==this.state.selectGM&&E("gmID","selectGM")),"manager"===n.toLowerCase()&&(""!==this.state.selectHead&&E("headID","selectHead"),""!==this.state.selectGM&&E("gmID","selectGM")),"head"===n.toLowerCase()&&""!==this.state.selectGM&&E("gmID","selectGM"),p.set("absenPoint",{__type:"Pointer",className:"ValidGeopoint",objectId:this.state.idPoint}),p.set("fullname",t),p.set("email",g),p.set("username",u),p.set("password",Te()(h)),p.set("passwordClone",Te()(h)),p.set("nik",a.toUpperCase()),p.set("tipe",s),p.set("posisi",l),p.set("level",n.toLowerCase()),p.set("imei",r),p.set("jamKerja",i),p.set("lokasiKerja",o),0===this.state.jamMasuk?p.set("jamMasuk",8):p.set("jamMasuk",parseInt(this.state.jamMasuk)),0===this.state.jamKeluar?p.set("jamMasuk",17):p.set("jamKeluar",parseInt(this.state.jamKeluar)),p.set("jumlahCuti",parseInt(c)),p.set("lembur",m),p.set("roles",n.toLowerCase()),p.set("fotoWajah",new M.a.File("profile.jpg",d)),p.save().then(e=>{this.setState({daftarStaff:this.state.daftarStaff.concat(e),addMode:!1,loading:!1,message:"Berhasil tambah data",visible:!0,color:"success"})}).catch(e=>{this.setState({addMode:!1,loading:!1,message:"Gagal tambah data, coba lagi",visible:!0}),console.log(e.message)})},this.handleUpdate=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=this.state,a=(t.name,t.nik),s=t.tipeKaryawan,l=t.posisi,n=t.level,r=t.imei,i=t.jamKerja,o=t.lokasiKerja,c=t.jumlahCuti,m=t.lembur,d=t.fotoWajah,u=t.username,h=t.password,g=t.email,p=new M.a.User;new M.a.Query(p).get(this.state.userId).then(e=>{const t=(e,t)=>{p.set(e,{__type:"Pointer",className:"_User",objectId:this.state[t]})};"staff"===n.toLowerCase()&&(""!==this.state.selectLeader&&t("leaderIdNew","selectLeader"),""!==this.state.selectSupervisor&&t("supervisorID","selectSupervisor"),""!==this.state.selectManager&&t("managerID","selectManager"),""!==this.state.selectHead&&t("headID","selectHead"),""!==this.state.selectGM&&t("gmID","selectGM")),"leader"===n.toLowerCase()&&(""!==this.state.selectSupervisor&&t("supervisorID","selectSupervisor"),""!==this.state.selectManager&&t("managerID","selectManager"),""!==this.state.selectHead&&t("headID","selectHead"),""!==this.state.selectGM&&t("gmID","selectGM")),"supervisor"===n.toLowerCase()&&(""!==this.state.selectManager&&t("managerID","selectManager"),""!==this.state.selectHead&&t("headID","selectHead"),""!==this.state.selectGM&&t("gmID","selectGM")),"manager"===n.toLowerCase()&&(""!==this.state.selectHead&&t("headID","selectHead"),""!==this.state.selectGM&&t("gmID","selectGM")),"head"===n.toLowerCase()&&""!==this.state.selectGM&&t("gmID","selectGM"),""!==this.state.idPoint&&p.set("absenPoint",{__type:"Pointer",className:"ValidGeopoint",objectId:this.state.idPoint}),e.set("fullname",this.state.fullname),e.set("email",g),e.set("username",u),e.set("jamMasuk",this.state.jamMasuk),e.set("jamKeluar",this.state.jamKeluar),e.set("username",u),""!==h&&(e.set("password",Te()(h)),e.set("passwordClone",Te()(h))),e.set("nik",a.toUpperCase()),e.set("tipe",s),e.set("posisi",l),e.set("level",n.toLowerCase()),e.set("imei",r),e.set("jamKerja",i),e.set("lokasiKerja",o),e.set("jumlahCuti",parseInt(c)),e.set("lembur",m),e.set("roles",n.toLowerCase()),""!==d&&e.set("fotoWajah",new M.a.File("profile.jpg",d)),e.save(null,{useMasterKey:!0}).then(e=>{this.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})}).catch(e=>{this.setState({editMode:!1,loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0}),console.log(e.message)})}).catch(e=>{this.setState({editMode:!1,loadingModal:!1,message:e.message,visible:!0}),console.log(e.message)})},this.getDetail=(e,t)=>{e.preventDefault();const a=new M.a.User,s=new M.a.Query(a);s.include("leaderIdNew"),s.include("supervisorID"),s.include("managerID"),s.include("headID"),s.include("gmID"),s.include("absenPoint"),s.get(t,{useMasterKey:!0}).then(({attributes:e})=>{console.log(e),this.setState({nik:e.nik,name:e.fullname,username:e.username,imei:e.imei,email:e.email,tipeKaryawan:e.tipe,posisi:e.posisi,jamKerja:e.jamKerja,lokasiKerja:e.lokasiKerja,jumlahCuti:e.jumlahCuti,jamMasuk:void 0===e.jamMasuk?0:e.jamMasuk,jamKeluar:void 0===e.jamKeluar?0:e.jamKeluar,absenPointObject:void 0===e.absenPoint?"":e.absenPoint,shifting:void 0===e.shifting?"":e.shifting,lembur:e.lembur,level:e.roles.toLowerCase(),leader:void 0===e.leaderIdNew?"":e.leaderIdNew,supervisor:void 0===e.supervisorID?"":e.supervisorID,manager:void 0===e.managerID?"":e.managerID,head:void 0===e.headID?"":e.headID,gm:void 0===e.gmID?"":e.gmID,editMode:!0})}).catch(e=>{alert(e.message)})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.handleIdAbsen=e=>{var t=document.getElementById("myoptions"),a=document.getElementById("data").querySelector('[value="'.concat(t.value,'"]'));if(null!==a.getAttribute("data-key")){var s=a.getAttribute("data-key");console.log(s),console.log(e.target.value),this.setState({selectLeader:s})}},this.state={daftarStaff:[],daftarLeader:[],daftarTipe:[],daftarPosisi:[],daftarLevel:[],resPerPage:20,first:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",fullname:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,editMode:!1,deleteCounter:0,loadingReco:!1,message:"",level:"Leader",fotoWajah:"",message:"",loadingReco:!1,nama:"",nik:"",tipeKaryawan:"",posisi:"",imei:"",jamKerja:"",lokasiKerja:"",jumlahCuti:0,lembur:"ya",username:"",password:"",selectLeader:"",selectSupervisor:"",selectManager:"",selectHead:"",selectGM:"",statusReco:0,email:"",fotoWajahObject:{},daftarShifting:[],shifting:{},leader:{},absenPointObject:{},message:"",color:"",visible:!1,message:"",color:"danger",absenPoint:[],daftarPoint:[],idPoint:"",imeiMessage:"",searchBy:"all",searchValue:"",jamMasuk:0,jamKeluar:0}}componentDidMount(){this.handleFilterPagination(),this.getLeader(),this.getLevel(),this.getPosisi(),this.getTipe(),this.getShifting(),this.getPoint()}render(){const e=this.state,t=e.daftarStaff,a=e.loading,s=e.loadingReco,n=e.message,r=e.level,i=e.email,o=e.fullname,m=e.imei,h=e.jamKerja,g=e.jumlahCuti,p=e.lokasiKerja,b=(e.shifting,e.lembur),f=e.tipeKaryawan,v=e.nik,y=e.posisi,S=e.daftarPoint,k=e.loadingModal,w=(e.fullnames,e.addMode),M=e.leader,I=(e.photoMode,e.statusReco,e.daftarShifting,e.daftarLevel),T=e.daftarPosisi,N=e.daftarTipe,j=e.editMode,H=l.a.createElement(u.a,{controlId:"formlvl"},l.a.createElement(E.a,{className:"form-control-alternative",type:"select",required:!0,onChange:e=>this.setState({searchValue:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih ",this.state.searchBy),"leader"===this.state.searchBy?I.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))):this.state.daftarPosisi.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))))),D=l.a.createElement(u.a,null,l.a.createElement(E.a,{type:"text",className:"form-control-alternative",disabled:"all"===this.state.searchBy,placeholder:"all"===this.state.searchBy?"":"Masukkan ".concat(this.state.searchBy),onChange:e=>this.setState({searchValue:e.target.value})}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(re,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:()=>this.toggle("visible")}),l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,{className:"mb-4"},l.a.createElement($.a,{className:"ml-2",color:"primary","data-dismiss":"modal",type:"button",onClick:()=>this.setState({addMode:!0})},l.a.createElement("i",{className:"fa fa-plus"})," Register")),l.a.createElement(d.a,{onSubmit:this.handleFilter,className:!0},l.a.createElement(q.a,null,l.a.createElement(P.a,{lg:2},"Search by"),l.a.createElement(P.a,{lg:2},l.a.createElement(u.a,{controlId:"formHorizontalEmails"},l.a.createElement(E.a,{className:"form-control-alternative",type:"select",onChange:e=>this.setState({searchBy:e.target.value.toLowerCase(),searchValue:""})},["All","NIK","Name","Level","Leader","Divisi"].map(e=>l.a.createElement("option",{value:e},e))))),l.a.createElement(P.a,{lg:4},"level"===this.state.searchBy||"divisi"===this.state.searchBy?H:D),l.a.createElement(P.a,{sm:2},l.a.createElement($.a,{color:"primary",type:"submit",disable:this.state.loadingFilter?"true":"false"},l.a.createElement("i",{className:"fa fa-search"})," ",this.state.loadingFilter?"Fetching...":"Search"))))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Email"),l.a.createElement("th",{scope:"col"},"Tipe Karyawan"),l.a.createElement("th",{scope:"col"},"Posisi"),l.a.createElement("th",{scope:"col"},"Level"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,e.get("nik")),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,e.get("email")),l.a.createElement("td",null,e.get("tipe")),l.a.createElement("td",null,e.get("posisi")),l.a.createElement("td",null,e.get("level")),l.a.createElement("td",null,l.a.createElement($.a,{id:"t4",color:"yellow",className:"btn-circle",onClick:()=>{this.setState({viewPhoto:!0})}},l.a.createElement("i",{className:"fa fa-eye"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t4"},"Lihat detail"),l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:a=>{this.setState({approvalMode:!0,userId:e.id,userIndex:t,fullname:e.get("fullname")}),this.getDetail(a,e.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Ubah data")))))),l.a.createElement(he.a,{activePage:this.state.page,itemsCountPerPage:this.state.resPerPage,totalItemsCount:this.state.totalData,pageRangeDisplayed:5,onChange:e=>this.handleFilterPagination(e),innerClass:"pagination justify-content-end p-4",itemClass:"page-item mt-2",linkClass:"page-link",prevPageText:"<",nextPageText:">"}))))),l.a.createElement(xe,{show:w,loading:k,footer:!1,handleHide:()=>this.toggle("addMode"),title:"Tambah Data",body:l.a.createElement(d.a,{onSubmit:e=>this.handleCheckImei(e,this.state.imei),autoComplete:"off"},l.a.createElement(u.a,{controlId:"formCategory"},l.a.createElement(De.a,null,"Foto wajah"),l.a.createElement(E.a,{type:"file",label:"Foto wajah",onChange:this.handleFace,required:!0}),l.a.createElement(ze.a,{className:s?"text-muted":"",style:{color:"".concat(0==this.state.statusReco?"red":"green")}},s?"processing...":n)),l.a.createElement(u.a,{controlId:"formNama"},l.a.createElement(De.a,null,"Nama"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",required:!0,type:"text",placeholder:"Masukkan nama",onChange:e=>this.setState({name:e.target.value})})),l.a.createElement(u.a,{controlId:"formTipex"},l.a.createElement(De.a,null,"Level"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({level:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih level"),I.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))))),"Leader"!==this.state.level&&"Admin"!==this.state.level?l.a.createElement(u.a,{controlId:"formLeaders"},l.a.createElement(De.a,null,"Pilih leader"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>{this.setState({selectLeader:e.target.value})}},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih leader"),this.state.daftarLeader.map((e,t)=>l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))))):"",l.a.createElement(u.a,{controlId:"formEmail"},l.a.createElement(De.a,null,"Email"),l.a.createElement(E.a,{autoComplete:"off",required:!0,type:"email",placeholder:"Masukkan email",onChange:e=>this.setState({email:e.target.value})})),l.a.createElement(u.a,{controlId:"formx"},l.a.createElement(De.a,null,"Username"),l.a.createElement(E.a,{autoComplete:"off",required:!0,type:"text",placeholder:"Masukkan username",onChange:e=>this.setState({username:e.target.value})})),l.a.createElement(u.a,{controlId:"formz"},l.a.createElement(De.a,null,"Password"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"new-password",required:!0,type:"password",placeholder:"Masukkan password",onChange:e=>this.setState({password:e.target.value})})),l.a.createElement(u.a,{controlId:"formNik"},l.a.createElement(De.a,null,"NIK"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",required:!0,type:"text",placeholder:"Masukkan NIK",onChange:e=>this.setState({nik:e.target.value.toUpperCase()})})),l.a.createElement(u.a,{controlId:"formTipex"},l.a.createElement(De.a,null,"Tipe karyawan"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({tipeKaryawan:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih tipe karyawan"),N.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("tipe")},e.get("tipe"))))),l.a.createElement(u.a,{controlId:"formPosisi"},l.a.createElement(De.a,null,"Posisi"),l.a.createElement(E.a,{required:!0,type:"select",onChange:e=>this.setState({posisi:e.target.value.toUpperCase()})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih posisi"),T.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))))),l.a.createElement(u.a,{controlId:"formImei"},l.a.createElement(De.a,null,"IMEI"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",required:!0,type:"text",placeholder:"Masukkan imei hp",onChange:e=>this.setState({imei:e.target.value})}),l.a.createElement(ze.a,{className:"text-red",style:{color:"red"}},""!==this.state.imeiMessage?this.state.imeiMessage:"")),l.a.createElement(u.a,{controlId:"formJam"},l.a.createElement(De.a,null,"Jam kerja"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({jamKerja:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih jam kerja"),["Jam tetap","Jam fleksibel","Jam bebas"].map(e=>l.a.createElement("option",{value:e},e)))),""!==this.state.jamKerja&&"Jam bebas"!==this.state.jamKerja?l.a.createElement(u.a,{controlId:"formJam"},l.a.createElement(De.a,null,"Jam masuk dan keluar"),l.a.createElement(q.a,null,l.a.createElement(P.a,{md:6},l.a.createElement(E.a,{type:"number",required:!0,placeholder:"Jam Masuk",onChange:e=>this.setState({jamMasuk:e.target.value})})),l.a.createElement(P.a,{md:6},l.a.createElement(E.a,{type:"number",placeholder:"Jam Keluar",required:!0,onChange:e=>this.setState({jamKeluar:e.target.value})})))):"",l.a.createElement(u.a,{controlId:"formLokasi"},l.a.createElement(De.a,null,"Lokasi kerja"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({lokasiKerja:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lokasi kerja"),["Tetap","Bebas (mobile)"].map(e=>l.a.createElement("option",{value:e},e)))),"Tetap"===this.state.lokasiKerja?l.a.createElement(u.a,{controlId:"formPoint"},l.a.createElement(De.a,null,"Absen point"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({idPoint:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih absen point"),S.map(e=>l.a.createElement("option",{value:e.id},e.get("placeName"))))):"",l.a.createElement(u.a,{controlId:"formCuti"},l.a.createElement(De.a,null,"Jumlah cuti"),l.a.createElement(E.a,{type:"number",required:!0,placeholder:"Masukkan jumlah cuti",onChange:e=>this.setState({jumlahCuti:parseInt(e.target.value)})})),l.a.createElement(u.a,{controlId:"formLembut"},l.a.createElement(De.a,null,"Lembur"),l.a.createElement(E.a,{type:"select",defaultValue:"all",required:!0,onChange:e=>this.setState({lembur:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lembur"),["Ya","Tidak"].map(e=>l.a.createElement("option",{value:e},e)))),l.a.createElement(q.a,null,l.a.createElement(P.a,{lg:4,md:4},l.a.createElement($.a,{color:0===this.state.statusReco?"danger":"primary",type:"submit",disabled:0===this.state.statusReco},0===this.state.statusReco?"upload foto dahulu":this.state.loadingModal?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")),l.a.createElement(P.a,{lg:8,md:8},l.a.createElement("div",{className:"text-red",style:{color:"red"}},""!==this.state.imeiMessage?this.state.imeiMessage:"")))),handleSubmit:e=>this.handleAdd(e)}),l.a.createElement(xe,{show:j,loading:k,footer:!1,handleHide:()=>this.toggle("editMode"),title:"Edit Data",body:l.a.createElement(d.a,{onSubmit:this.handleUpdate,autoComplete:"off"},l.a.createElement(u.a,{controlId:"formCategory"},l.a.createElement(De.a,null,"Foto wajah"),l.a.createElement(E.a,{type:"file",label:"Foto wajah",onChange:this.handleFace}),l.a.createElement(ze.a,{className:s?"text-muted":"",style:{color:"".concat(0==this.state.statusReco?"red":"green")}},s?"processing...":n)),l.a.createElement(u.a,{controlId:"formNama"},l.a.createElement(De.a,null,"Nama"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",value:o,type:"text",placeholder:"Masukkan nama",onChange:e=>this.setState({fullname:e.target.value})})),l.a.createElement(u.a,{controlId:"formTipex"},l.a.createElement(De.a,null,"Level"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({level:e.target.value})},I.map((e,t)=>l.a.createElement("option",{selected:r.toLowerCase()===e.get("level").toLowerCase(),key:t,value:e.get("level")},e.get("level"))))),"leader"!==this.state.level&&"admin"!==this.state.level?l.a.createElement(u.a,{controlId:"formLeaders"},l.a.createElement(De.a,null,"Pilih leader"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({selectLeader:e.target.value})},this.state.daftarLeader.map((e,t)=>l.a.createElement("option",{selected:M.id===e.id,key:t,value:e.id},e.get("fullname"))))):"",l.a.createElement(u.a,{controlId:"formEmail"},l.a.createElement(De.a,null,"Email"),l.a.createElement(E.a,{autoComplete:"off",value:i,type:"email",placeholder:"Masukkan email",onChange:e=>this.setState({email:e.target.value})})),l.a.createElement(u.a,{controlId:"formz"},l.a.createElement(De.a,null,"Password"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"new-password",type:"password",placeholder:"Masukkan password jika ingin mengubah password",onChange:e=>this.setState({password:e.target.value})})),l.a.createElement(u.a,{controlId:"formNik"},l.a.createElement(De.a,null,"NIK"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",value:v,type:"text",placeholder:"Masukkan NIK",onChange:e=>this.setState({nik:e.target.value.toUpperCase()})})),l.a.createElement(u.a,{controlId:"formTipex"},l.a.createElement(De.a,null,"Tipe karyawan"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({tipeKaryawan:e.target.value})},N.map((e,t)=>l.a.createElement("option",{selected:f===e.get("tipe").toLowerCase(),key:t,value:e.get("tipe")},e.get("tipe"))))),l.a.createElement(u.a,{controlId:"formPosisi"},l.a.createElement(De.a,null,"Posisi"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({posisi:e.target.value.toUpperCase()})},T.map((e,t)=>l.a.createElement("option",{selected:y.toLowerCase()===e.get("position").toLowerCase(),key:t,value:e.get("position")},e.get("position"))))),l.a.createElement(u.a,{controlId:"formImei"},l.a.createElement(De.a,null,"IMEI"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",defaultValue:m,type:"text",placeholder:"Masukkan imei hp",onChange:e=>this.setState({imei:e.target.value})})),l.a.createElement(u.a,{controlId:"formJam"},l.a.createElement(De.a,null,"Jam kerja"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({jamKerja:e.target.value})},["Jam tetap","Jam fleksibel","Jam bebas"].map(e=>l.a.createElement("option",{selected:h.toLowerCase()===e.toLowerCase(),value:e},e)))),""!==this.state.jamKerja&&"Jam bebas"!==this.state.jamKerja?l.a.createElement(u.a,{controlId:"formJam"},l.a.createElement(De.a,null,"Jam masuk dan keluar"),l.a.createElement(q.a,null,l.a.createElement(P.a,{md:6},l.a.createElement(E.a,{type:"number",value:this.state.jamMasuk,placeholder:"Jam Masuk",onChange:e=>this.setState({jamMasuk:e.target.value})})),l.a.createElement(P.a,{md:6},l.a.createElement(E.a,{type:"number",value:this.state.jamKeluar,placeholder:"Jam Keluar",onChange:e=>this.setState({jamKeluar:e.target.value})})))):"",l.a.createElement(u.a,{controlId:"formLokasi"},l.a.createElement(De.a,null,"Lokasi kerja"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({lokasiKerja:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lokasi kerja"),["Tetap","Bebas (mobile)"].map(e=>l.a.createElement("option",{selected:p.toLowerCase()===e.toLowerCase(),value:e},e)))),"Tetap"===this.state.lokasiKerja?l.a.createElement(u.a,{controlId:"formPoint"},l.a.createElement(De.a,null,"Absen point"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({idPoint:e.target.value})},S.map(e=>l.a.createElement("option",{selected:this.state.absenPointObject.id===e.id,key:e.id,value:e.id},e.get("placeName"))))):"",l.a.createElement(u.a,{controlId:"formCuti"},l.a.createElement(De.a,null,"Jumlah cuti"),l.a.createElement(E.a,{type:"number",defaultValue:g,placeholder:"Masukkan jumlah cuti",onChange:e=>this.setState({jumlahCuti:parseInt(e.target.value)})})),l.a.createElement(u.a,{controlId:"formLembut"},l.a.createElement(De.a,null,"Lembur"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({lembur:e.target.value})},["Ya","Tidak"].map(e=>l.a.createElement("option",{selected:b.toLowerCase()===e.toLowerCase(),value:e},e)))),l.a.createElement($.a,{color:"primary",type:"submit",disabled:0===k},k?"Submitting...":"Submit")),handleSubmit:e=>this.handleUpdate(e)}))}}var Re=Je;class Be extends l.a.Component{constructor(e){super(e),this.getData=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("EmployeeType"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({tipe:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.handleAdd=e=>{e.preventDefault();const t=this.state.inputTipe;this.setState({loadingModal:!0});const a=new(M.a.Object.extend("EmployeeType"));a.set("tipe",t),a.save().then(e=>{this.setState({addMode:!1,loadingModal:!1,tipe:this.state.tipe.concat(e),message:"Berhasil tambah data",visible:!0,color:"success"})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})})},this.getDetail=(e,t)=>{e.preventDefault();const a=M.a.Object.extend("EmployeeType");new M.a.Query(a).get(t).then(({attributes:e})=>{this.setState({inputTipe:e.tipe,editMode:!0})}).catch(e=>{alert(e.message),this.setState({loadingModal:!1})})},this.handleUpdate=e=>{e.preventDefault();const t=this.state.inputTipe;this.setState({loadingModal:!0});const a=M.a.Object.extend("EmployeeType");new M.a.Query(a).get(this.state.userId).then(e=>{e.set("tipe",t),e.save().then(e=>{this.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})})},this.handleRemove=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=M.a.Object.extend("EmployeeType");new M.a.Query(t).get(this.state.userId).then(e=>{e.set("status",0),e.save().then(e=>{let t=[...this.state.tipe];t.splice(this.state.userIndex,1),this.setState({deleteMode:!1,loadingModal:!1,tipe:t,message:"Berhasil hapus data",visible:!0})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.state={tipe:[],inputTipe:"",detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,deleteMode:!1,editMode:!1,deleteCounter:0,message:"",color:"danger",visible:!1}}componentDidMount(){this.getData()}render(){const e=this.state,t=e.tipe,a=e.loading,s=e.inputTipe,n=(e.rejectMode,e.loadingModal),r=e.fullnames,i=e.addMode,o=e.deleteMode,m=e.editMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,null,l.a.createElement($.a,{className:"ml-2",color:"primary","data-dismiss":"modal",type:"button",onClick:()=>this.setState({addMode:!0})},l.a.createElement("i",{className:"fa fa-plus"})," Tambah")),l.a.createElement(re,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:()=>this.toggle("visible")})),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"No"),l.a.createElement("th",{scope:"col"},"Tipe"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,t+1),l.a.createElement("td",null,e.get("tipe")),l.a.createElement("td",null,l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:a=>{this.setState({userId:e.id,userIndex:t}),this.getDetail(a,e.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Ubah data"),l.a.createElement($.a,{id:"t2",className:"btn-circle btn-danger",onClick:a=>{this.setState({deleteMode:!0,userId:e.id,userIndex:t,fullnames:e.get("level")})}},l.a.createElement("i",{className:"fa fa-trash"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t2"},"Hapus data")))))))))),l.a.createElement(xe,{show:i,loading:n,footer:!1,handleHide:()=>this.toggle("addMode"),title:"Tambah Data",body:l.a.createElement("div",null,l.a.createElement(d.a,{onSubmit:e=>this.handleAdd(e)},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Tipe"),l.a.createElement(E.a,{id:"zz1",placeholder:"Masukkan tipe karyawan",type:"text",required:!0,onChange:e=>this.setState({inputTipe:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},n?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleAdd(e)}),l.a.createElement(xe,{show:m,loading:n,footer:!1,handleHide:()=>this.toggle("editMode"),title:"Edit Data",body:l.a.createElement(d.a,{onSubmit:e=>this.handleUpdate(e)},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Tipe"),l.a.createElement(E.a,{id:"zz1",placeholder:"Masukkan tipe karyawan",value:s,type:"text",required:!0,onChange:e=>this.setState({inputTipe:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("editMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},n?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")),handleSubmit:e=>this.handleUpdate(e)}),l.a.createElement(xe,{show:o,loading:n,footer:!0,handleHide:()=>this.toggle("deleteMode"),title:"Remove Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Remove tipe ".concat(r," ?"))),handleSubmit:e=>this.handleRemove(e)}))}}var Ye=Be;class Ue extends l.a.Component{constructor(e){super(e),this.getData=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("Position"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({posisi:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.handleAdd=e=>{e.preventDefault();const t=this.state.inputPosisi;this.setState({loadingModal:!0});const a=new(M.a.Object.extend("Position"));a.set("position",t),a.save().then(e=>{this.setState({addMode:!1,loadingModal:!1,posisi:this.state.posisi.concat(e),message:"Berhasil tambah data",visible:!0,color:"success"})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})})},this.getDetail=(e,t)=>{e.preventDefault();const a=M.a.Object.extend("Position");new M.a.Query(a).get(t).then(({attributes:e})=>{this.setState({inputPosisi:e.position,editMode:!0})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})})},this.handleUpdate=e=>{e.preventDefault();const t=this.state.inputPosisi;this.setState({loadingModal:!0});const a=M.a.Object.extend("Position");new M.a.Query(a).get(this.state.userId).then(e=>{e.set("position",t),e.save().then(e=>{this.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})},this.handleRemove=e=>{e.preventDefault();this.state.inputLevel;this.setState({loadingModal:!0});const t=M.a.Object.extend("Position");new M.a.Query(t).get(this.state.userId).then(e=>{e.set("status",0),e.save().then(e=>{let t=[...this.state.posisi];t.splice(this.state.userIndex,1),this.setState({deleteMode:!1,loadingModal:!1,posisi:t,message:"Berhasil hapus data",visible:!0,color:"success"})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.state={posisi:[],inputPosisi:"",detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,deleteMode:!1,editMode:!1,deleteCounter:0,message:"",color:"danger",visible:!1}}componentDidMount(){this.getData()}render(){const e=this.state,t=e.posisi,a=e.loading,s=(e.inputPosisi,e.rejectMode,e.loadingModal),n=e.fullnames,r=e.addMode,i=e.deleteMode,o=e.editMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,null,l.a.createElement($.a,{className:"ml-2",color:"primary","data-dismiss":"modal",type:"button",onClick:()=>this.setState({addMode:!0})},l.a.createElement("i",{className:"fa fa-plus"})," Tambah")),l.a.createElement(q.a,null,l.a.createElement(re,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:()=>this.toggle("visible")}))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"No"),l.a.createElement("th",{scope:"col"},"Posisi"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,t+1),l.a.createElement("td",null,e.get("position")),l.a.createElement("td",null,l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:a=>{this.setState({userId:e.id,userIndex:t}),this.getDetail(a,e.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Ubah data"),l.a.createElement($.a,{id:"t2",className:"btn-circle btn-danger",onClick:a=>{this.setState({deleteMode:!0,userId:e.id,userIndex:t,fullnames:e.get("posisi")})}},l.a.createElement("i",{className:"fa fa-trash"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t2"},"Hapus data")))))))))),l.a.createElement(xe,{show:r,loading:s,footer:!1,handleHide:()=>this.toggle("addMode"),title:"Tambah Data",body:l.a.createElement("div",null,l.a.createElement(d.a,{onSubmit:e=>this.handleAdd(e)},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Posisi"),l.a.createElement(E.a,{id:"zz1",placeholder:"Masukkan posisi",type:"text",required:!0,onChange:e=>this.setState({inputPosisi:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleAdd(e)}),l.a.createElement(xe,{show:o,loading:s,footer:!1,handleHide:()=>this.toggle("editMode"),title:"Edit Data",body:l.a.createElement(d.a,{onSubmit:e=>this.handleUpdate(e)},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Posisi"),l.a.createElement(E.a,{id:"zz1",placeholder:"Masukkan posisi",value:this.state.inputPosisi,type:"text",required:!0,onChange:e=>this.setState({inputPosisi:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("editMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")),handleSubmit:e=>this.handleUpdate(e)}),l.a.createElement(xe,{show:i,loading:s,footer:!0,handleHide:()=>this.toggle("deleteMode"),title:"Remove Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Remove level ".concat(n," ?"))),handleSubmit:e=>this.handleRemove(e)}))}}var Qe=Ue;class We extends l.a.Component{constructor(e){super(e),this.getData=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("Level"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({level:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.handleAdd=e=>{e.preventDefault();const t=this.state.inputLevel;this.setState({loadingModal:!0});const a=new(M.a.Object.extend("Level"));a.set("level",t),a.save().then(e=>{this.setState({addMode:!1,loadingModal:!1,level:this.state.level.concat(e),message:"Berhasil tambah data",visible:!0,color:"success"})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})})},this.getDetail=(e,t)=>{e.preventDefault();const a=M.a.Object.extend("Level");new M.a.Query(a).get(t).then(({attributes:e})=>{this.setState({inputLevel:e.level,editMode:!0})}).catch(e=>{alert(e.message),this.setState({loadingModal:!1})})},this.handleUpdate=e=>{e.preventDefault();const t=this.state.inputLevel;this.setState({loadingModal:!0});const a=M.a.Object.extend("Level");new M.a.Query(a).get(this.state.userId).then(e=>{e.set("level",t),e.save().then(e=>{this.setState({editMode:!1,loadingModal:!1})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})})},this.handleRemove=e=>{e.preventDefault();this.state.inputLevel;this.setState({loadingModal:!0});const t=M.a.Object.extend("Level");new M.a.Query(t).get(this.state.userId).then(e=>{e.set("status",0),e.save().then(e=>{let t=[...this.state.level];t.splice(this.state.userIndex,1),this.setState({deleteMode:!1,loadingModal:!1,level:t})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.state={level:[],inputLevel:"",detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,deleteMode:!1,editMode:!1,deleteCounter:0,message:"",color:"danger",visible:!1}}componentDidMount(){this.getData()}render(){const e=this.state,t=e.level,a=e.loading,s=e.inputLevel,n=(e.rejectMode,e.loadingModal),r=e.fullnames,i=e.addMode,o=e.deleteMode,m=e.editMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,null,l.a.createElement($.a,{className:"ml-2",color:"primary","data-dismiss":"modal",type:"button",onClick:()=>this.setState({addMode:!0})},l.a.createElement("i",{className:"fa fa-plus"})," Tambah")),l.a.createElement(q.a,null,l.a.createElement(re,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:()=>this.toggle("visible")}))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"No"),l.a.createElement("th",{scope:"col"},"Level"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,t+1),l.a.createElement("td",null,e.get("level")),l.a.createElement("td",null,l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:a=>{this.setState({userId:e.id,userIndex:t}),this.getDetail(a,e.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Ubah data"),l.a.createElement($.a,{id:"t2",className:"btn-circle btn-danger",onClick:a=>{this.setState({deleteMode:!0,userId:e.id,userIndex:t,fullnames:e.get("level")})}},l.a.createElement("i",{className:"fa fa-trash"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t2"},"Hapus data")))))))))),l.a.createElement(xe,{show:i,loading:n,footer:!1,handleHide:()=>this.toggle("addMode"),title:"Tambah Data",body:l.a.createElement("div",null,l.a.createElement(d.a,{onSubmit:e=>this.handleAdd(e)},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Level"),l.a.createElement(E.a,{id:"zz1",placeholder:"Masukkan level",type:"text",required:!0,onChange:e=>this.setState({inputLevel:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},n?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleAdd(e)}),l.a.createElement(xe,{show:m,loading:n,footer:!1,handleHide:()=>this.toggle("editMode"),title:"Edit Data",body:l.a.createElement(d.a,{onSubmit:e=>this.handleUpdate(e)},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Level"),l.a.createElement(E.a,{id:"zz1",placeholder:"Masukkan level",value:s,type:"text",required:!0,onChange:e=>this.setState({inputLevel:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("editMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},n?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")),handleSubmit:e=>this.handleUpdate(e)}),l.a.createElement(xe,{show:o,loading:n,footer:!0,handleHide:()=>this.toggle("deleteMode"),title:"Remove Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Remove level ".concat(r," ?"))),handleSubmit:e=>this.handleRemove(e)}))}}var _e=We;class Ge extends l.a.Component{constructor(e){super(e),this.getData=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("Departemen"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({dept:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.handleAdd=e=>{e.preventDefault();const t=this.state.inputDept;this.setState({loadingModal:!0});const a=new(M.a.Object.extend("Departemen"));a.set("deptName",t),a.save().then(e=>{this.setState({addMode:!1,loadingModal:!1,dept:this.state.dept.concat(e)})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})})},this.getDetail=(e,t)=>{e.preventDefault();const a=M.a.Object.extend("Departemen");new M.a.Query(a).get(t).then(({attributes:e})=>{this.setState({inputDept:e.deptName,editMode:!0})}).catch(e=>{alert(e.message),this.setState({loadingModal:!1})})},this.handleUpdate=e=>{e.preventDefault();const t=this.state.inputDept;this.setState({loadingModal:!0});const a=M.a.Object.extend("Departemen");new M.a.Query(a).get(this.state.userId).then(e=>{e.set("deptName",t),e.save().then(e=>{this.setState({editMode:!1,loadingModal:!1})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})})},this.handleRemove=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=M.a.Object.extend("Departemen");new M.a.Query(t).get(this.state.userId).then(e=>{e.set("status",0),e.save().then(e=>{let t=[...this.state.dept];t.splice(this.state.userIndex,1),this.setState({deleteMode:!1,loadingModal:!1,dept:t})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.state={dept:[],inputDept:"",detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,deleteMode:!1,editMode:!1,deleteCounter:0,message:"",color:"danger",visible:!1}}componentDidMount(){this.getData()}render(){const e=this.state,t=e.dept,a=e.loading,s=(e.inputDept,e.rejectMode,e.loadingModal),n=e.fullnames,r=e.addMode,i=e.deleteMode,o=e.editMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,null,l.a.createElement($.a,{className:"ml-2",color:"primary","data-dismiss":"modal",type:"button",onClick:()=>this.setState({addMode:!0})},l.a.createElement("i",{className:"fa fa-plus"})," Tambah")),l.a.createElement(re,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:()=>this.toggle("visible")})),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"No"),l.a.createElement("th",{scope:"col"},"Departemen"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,t+1),l.a.createElement("td",null,e.get("deptName")),l.a.createElement("td",null,l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:a=>{this.setState({userId:e.id,userIndex:t}),this.getDetail(a,e.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Ubah data"),l.a.createElement($.a,{id:"t2",className:"btn-circle btn-danger",onClick:a=>{this.setState({deleteMode:!0,userId:e.id,userIndex:t,fullnames:e.get("level")})}},l.a.createElement("i",{className:"fa fa-trash"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t2"},"Hapus data")))))))))),l.a.createElement(xe,{show:r,loading:s,footer:!1,handleHide:()=>this.toggle("addMode"),title:"Tambah Data",body:l.a.createElement("div",null,l.a.createElement(d.a,{onSubmit:e=>this.handleAdd(e)},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Departemen"),l.a.createElement(E.a,{id:"zz1",placeholder:"Masukkan departemen",type:"text",required:!0,onChange:e=>this.setState({inputDept:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleAdd(e)}),l.a.createElement(xe,{show:o,loading:s,footer:!1,handleHide:()=>this.toggle("editMode"),title:"Edit Data",body:l.a.createElement(d.a,{onSubmit:e=>this.handleUpdate(e)},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Departemen"),l.a.createElement(E.a,{id:"zz1",placeholder:"Masukkan departemen",value:this.state.inputDept,type:"text",required:!0,onChange:e=>this.setState({inputDept:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("editMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")),handleSubmit:e=>this.handleUpdate(e)}),l.a.createElement(xe,{show:i,loading:s,footer:!0,handleHide:()=>this.toggle("deleteMode"),title:"Remove Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Remove departemen ".concat(n," ?"))),handleSubmit:e=>this.handleRemove(e)}))}}var Ve=Ge;class Ze extends l.a.Component{constructor(e){super(e),this.getData=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("ValidGeopoint"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({point:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.handleAdd=e=>{e.preventDefault();const t=this.state,a=t.placeName,s=t.latitude,l=t.longitude;this.setState({loadingModal:!0});const n=new(M.a.Object.extend("ValidGeopoint"));n.set("placeName",a),n.set("latitude",s),n.set("longitude",l),n.save().then(e=>{this.setState({addMode:!1,loadingModal:!1,point:this.state.point.concat(e)})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})})},this.getDetail=(e,t)=>{e.preventDefault();const a=M.a.Object.extend("ValidGeopoint");new M.a.Query(a).get(t).then(({attributes:e})=>{this.setState({placeName:e.placeName,latitude:e.latitude,longitude:e.longitude,editMode:!0})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.handleUpdate=e=>{e.preventDefault();const t=this.state,a=t.placeName,s=t.latitude,l=t.longitude;this.setState({loadingModal:!0});const n=M.a.Object.extend("ValidGeopoint");new M.a.Query(n).get(this.state.userId).then(e=>{e.set("placeName",a),e.set("latitude",s),e.set("longitude",l),e.save().then(e=>{this.setState({editMode:!1,loadingModal:!1})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingMModal:!1,message:"Gagal update data, coba lagi",visible:!0})})},this.handleRemove=e=>{e.preventDefault();this.state.placeName;this.setState({loadingModal:!0});const t=M.a.Object.extend("ValidGeopoint");new M.a.Query(t).get(this.state.userId).then(e=>{e.set("status",0),e.save().then(e=>{let t=[...this.state.point];t.splice(this.state.userIndex,1),this.setState({deleteMode:!1,loadingModal:!1,point:t})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.state={point:[],placeName:"",detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,editMode:!1,deleteMode:!1,deleteCounter:0,latitude:0,longitude:0,message:"",color:"danger",visible:!1}}componentDidMount(){this.getData()}render(){const e=this.state,t=e.point,a=e.loading,s=e.addMode,n=e.editMode,r=e.loadingModal,i=e.fullnames,o=(e.detail,e.deleteMode);e.approveAllMode,e.rejectAllMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,null,l.a.createElement($.a,{className:"ml-2",color:"primary","data-dismiss":"modal",type:"button",onClick:()=>this.setState({addMode:!0})},l.a.createElement("i",{className:"fa fa-plus"})," Tambah")),l.a.createElement(re,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:()=>this.toggle("visible")})),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"No"),l.a.createElement("th",{scope:"col"},"Place Name"),l.a.createElement("th",{scope:"col"},"Latitude"),l.a.createElement("th",{scope:"col"},"Longitude"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,t+1),l.a.createElement("td",null,e.get("placeName")),l.a.createElement("td",null,e.get("latitude")),l.a.createElement("td",null,e.get("longitude")),l.a.createElement("td",null,l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:a=>{this.setState({userId:e.id,userIndex:t}),this.getDetail(a,e.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Ubah data"),l.a.createElement($.a,{id:"t2",className:"btn-circle btn-danger",onClick:a=>{this.setState({deleteMode:!0,userId:e.id,userIndex:t,fullnames:e.get("placeName")})}},l.a.createElement("i",{className:"fa fa-trash"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t2"},"Hapus data")))))))))),l.a.createElement(xe,{show:s,loading:r,footer:!1,handleHide:()=>this.toggle("addMode"),title:"Tambah Absen Point",body:l.a.createElement("div",null,l.a.createElement(d.a,{onSubmit:e=>this.handleAdd(e)},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Tempat absen"),l.a.createElement(E.a,{id:"zz1",placeholder:"Masukkan tempat absen",type:"text",required:!0,onChange:e=>this.setState({placeName:e.target.value})})),l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Latitude"),l.a.createElement(E.a,{id:"zz2",placeholder:"Masukkan latitude absen point",type:"text",required:!0,onChange:e=>this.setState({latitude:e.target.value})})),l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Longitude"),l.a.createElement(E.a,{id:"zz3",placeholder:"Masukkan longitude absen point",type:"text",required:!0,onChange:e=>this.setState({longitude:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleAdd(e)}),l.a.createElement(xe,{show:n,loading:r,footer:!1,handleHide:()=>this.toggle("editMode"),title:"Edit Absen Point",body:l.a.createElement("div",null,l.a.createElement(d.a,{onSubmit:e=>this.handleUpdate(e)},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Tempat absen"),l.a.createElement(E.a,{id:"zz1",placeholder:"Masukkan tempat absen",type:"text",value:this.state.placeName,required:!0,onChange:e=>this.setState({placeName:e.target.value})})),l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Latitude"),l.a.createElement(E.a,{id:"zz2",placeholder:"Masukkan latitude absen point",type:"text",value:this.state.latitude,required:!0,onChange:e=>this.setState({latitude:e.target.value})})),l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Longitude"),l.a.createElement(E.a,{id:"zz3",placeholder:"Masukkan longitude absen point",type:"text",value:this.state.longitude,required:!0,onChange:e=>this.setState({longitude:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("editMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleUpdate(e)}),l.a.createElement(xe,{show:o,loading:r,footer:!0,handleHide:()=>this.toggle("deleteMode"),title:"Remove Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Remove absen point ".concat(i," ?"))),handleSubmit:e=>this.handleRemove(e)}))}}var Xe=Ze,$e=a(250),et=a.n($e);class tt extends l.a.Component{constructor(e){super(e),this.getPoint=()=>{const e=new M.a.Object.extend("ValidGeopoint"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarPoint:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.sendEmail=e=>{et.a.sendForm("gmail","template_N8cRQk3D",e.target,"user_h2fWwDoztgEPcKNQ9vadt").then(e=>{console.log(e.text)},e=>{console.log(e.text)})},this.getTipe=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("EmployeeType"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarTipe:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getPosisi=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("Position"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarPosisi:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getLevel=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("Level"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarLevel:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getStaff=()=>{this.setState({loading:!0});const e=M.a.Object.extend("SelfRegist"),t=new M.a.Query(e);t.equalTo("status",3),t.find().then(e=>{this.setState({selfRegist:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.getDetail=(e,t,a)=>{e.preventDefault();const s=M.a.Object.extend("SelfRegist");new M.a.Query(s).get(t).then(({attributes:e})=>{console.log(e),this.setState({nik:e.nik,name:e.fullname,username:e.usernameClone,imei:e.imei,email:e.email,fotoWajah:void 0===e.fotoWajah?"":e.fotoWajah.url(),fotoWajahObj:e.fotoWajah,password:e.passwordClone,loading:!1,[a]:!0},()=>console.log(this.state.fotoWajah))}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.getShifting=()=>{const e=M.a.Object.extend("Shifting"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarShifting:e})}).catch(e=>{alert("cek koneksi anda")})},this.getLeader=()=>{this.setState({loading:!0});const e=new M.a.User,t=new M.a.Query(e);t.equalTo("roles","leader"),t.find({useMasterKey:!0}).then(e=>{this.setState({daftarLeader:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.handleFace=e=>{this.setState({loadingReco:!0,statusReco:0,fotoWajah:e.target.files[0]});const t=new FormData;t.append("knax",e.target.files[0]),Oe.a.post("http://35.247.147.177:4000/api/face-check",t,{headers:{"Content-Type":"multipart/form-data"}}).then(({data:e})=>1===e.status?this.setState({statusReco:1,message:"\u2714\ufe0f ".concat(e.message),loadingReco:!1}):this.setState({statusReco:0,message:"\u2716\ufe0f ".concat(e.message),loadingReco:!1})).catch(e=>alert("Terjadi error..."))},this.handleSendEmail=(e,t,a,s,l,n,r)=>{var i={to_email:e,from_name:t,to_name:a,message_html:s,alasan:l};et.a.send("gmail","template_N8cRQk3D",i).then(()=>{this.setState({[n]:!1,loadingModal:!1,message:r,visible:!0,color:"success"}),console.log("sukses"),window.location.reload(!1)}).catch(e=>{this.setState({[n]:!1,loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0}),console.log(e),window.location.reload(!1)})},this.handleReject=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=M.a.Object.extend("SelfRegist");new M.a.Query(t).get(this.state.userId).then(e=>{e.set("status",0),e.set("alasanReject",this.state.reason),e.save().then(()=>{this.handleSendEmail(this.state.email,"KTA Team",this.state.name,"Maaf self registration kamu ditolak dengan alasan:",this.state.reason,"rejectMode","Berhasil reject")}).catch(e=>{alert(e.message),this.setState({loadingModal:!1,rejectMode:!1,message:"Gagal reject data",visible:!0})})})},this.handleCheckImei=(e,t)=>{e.preventDefault();const a=new M.a.User,s=new M.a.Query(a);s.equalTo("imei",t),s.first().then(e=>{e?this.setState({imeiMessage:"Imei telah terdaftar",loadingModal:!1}):this.handleSubmit()}).catch(e=>{console.log(e),this.setState({loadingModal:!1})})},this.handleSubmit=()=>{this.setState({loadingModal:!0});const e=this.state,t=e.name,a=e.nik,s=e.tipeKaryawan,l=e.posisi,n=e.level,r=e.imei,i=e.jamKerja,o=e.lokasiKerja,c=e.jumlahCuti,m=e.lembur,d=(e.fotoWajah,e.username,e.password),u=e.email,h=(e.absenPoint,new M.a.User);h.set("leaderIdNew",{__type:"Pointer",className:"_User",objectId:this.state.selectLeader}),h.set("fullname",t),h.set("email",u),h.set("username",a.toUpperCase()),h.set("password",d),h.set("absenPoint",this.state.absenPoint),h.set("passwordClone",d),h.set("nik",a.toUpperCase()),h.set("tipe",s),h.set("posisi",l),h.set("level",n),h.set("imei",r),h.set("jamKerja",i),h.set("lokasiKerja",o),h.set("jumlahCuti",parseInt(c)),h.set("lembur",m),h.set("roles",n),h.set("fotoWajah",this.state.fotoWajahObj),h.save().then(e=>{const t=M.a.Object.extend("SelfRegist");new M.a.Query(t).get(this.state.userId).then(e=>{e.set("status",1),e.save().then(()=>{this.handleSendEmail(this.state.email,"KTA Team",this.state.name,"Selamat kamu berhasil melakukan self registration! Silahkan login menggunakan NIK dan password yang sudah kamu buat, terimakasih!","","addMode","Berhasil approve data")}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,rejectMode:!1,message:"Gagal tambah data, coba lagi",visible:!0})})})}).catch(e=>{this.setState({addMode:!1,loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0}),console.log(e.message)})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.state={selfRegist:[],daftarLeader:[],daftarTipe:[],daftarPosisi:[],daftarLevel:[],daftarShifting:[],detail:{},loading:!1,approvalMode:!1,rejectMode:!1,detailMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,photoMode:!1,deleteCounter:0,loadingReco:!1,message:"",level:"Leader",fotoWajah:"",message:"",loadingReco:!1,name:"",nik:"",tipeKaryawan:"",posisi:"",imei:"",jamKerja:"",lokasiKerja:"",jumlahCuti:0,lembur:"ya",username:"",password:"",selectLeader:"",statusReco:0,email:"",fotoWajahObj:{},message:"",color:"danger",visible:!1,daftarPoint:[],jamMasuk:0,jamKeluar:0,absenPoint:[],imeiMessage:""}}componentDidMount(){this.getStaff(),this.getLeader(),this.getLevel(),this.getPosisi(),this.getTipe(),this.getPoint(),this.getShifting(),et.a.init("user_h2fWwDoztgEPcKNQ9vadt")}render(){const e=this.state,t=e.selfRegist,a=e.loading,s=(e.loadingReco,e.message,e.approvalMode,e.daftarPoint),n=e.rejectMode,r=e.detailMode,i=e.loadingModal,o=e.fullnames,m=e.addMode,h=(e.photoMode,e.username,e.statusReco,e.imei),g=e.nik,p=e.daftarLevel,b=e.daftarPosisi,f=e.daftarTipe,v=e.email,y=e.fotoWajah,S=e.name;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",null,"Data self registration"),l.a.createElement(q.a,null,l.a.createElement(re,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:()=>this.toggle("visible")}))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Email"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found...")):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,e.get("nik")),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,e.get("email")),l.a.createElement("td",null,l.a.createElement($.a,{id:"t4",color:"yellow",className:"btn-circle",onClick:a=>{this.setState({userId:e.id,userIndex:t,fullnames:e.get("fullname")}),this.getDetail(a,e.id,"detailMode")}},l.a.createElement("i",{className:"fa fa-eye"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t4"},"Lihat detail"),l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:a=>{this.setState({userId:e.id,userIndex:t,fullnames:e.get("fullname")}),this.getDetail(a,e.id,"addMode")}},l.a.createElement("i",{className:"fa fa-check"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Registrasi"),l.a.createElement($.a,{id:"t2",className:"btn-circle btn-danger",onClick:a=>{this.setState({rejectMode:!0,userId:e.id,userIndex:t,email:e.get("email"),fullnames:e.get("fullname")})}},l.a.createElement("i",{className:"fa fa-times"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t2"},"Reject")))))))))),l.a.createElement(xe,{show:r,loading:i,footer:!1,handleHide:()=>this.toggle("detailMode"),title:"Details",body:l.a.createElement(d.a,{onSubmit:e=>e.preventDefault()},""!==y?l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Foto Wajah"),l.a.createElement(q.a,{className:"ml-1"},l.a.createElement("img",{height:100,width:100,src:""===y?"":y,alt:"foto"}))):"",l.a.createElement(u.a,{controlId:"formNama"},l.a.createElement(De.a,null,"Nama"),l.a.createElement(E.a,{name:"to_name",autoCapitalize:"true",autoComplete:"false",required:!0,value:S,type:"text",placeholder:"Masukkan nama",onChange:e=>this.setState({name:e.target.value})})),l.a.createElement(u.a,{controlId:"formEmail"},l.a.createElement(De.a,null,"Email"),l.a.createElement(E.a,{name:"to_email",autoComplete:"off",required:!0,type:"email",value:v,placeholder:"Masukkan email",onChange:e=>this.setState({email:e.target.value})})),l.a.createElement(u.a,{controlId:"formNik"},l.a.createElement(De.a,null,"NIK"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",required:!0,value:g,type:"text",placeholder:"Masukkan NIK",onChange:e=>this.setState({nik:e.target.value})})),l.a.createElement(u.a,{controlId:"formImei"},l.a.createElement(De.a,null,"IMEI"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",required:!0,value:h,type:"text",placeholder:"Masukkan imei hp",onChange:e=>this.setState({imei:e.target.value})})))}),l.a.createElement(xe,{show:m,loading:i,footer:!1,handleHide:()=>this.toggle("addMode"),title:"Tambah Data",body:l.a.createElement(d.a,{onSubmit:e=>this.handleCheckImei(e,this.state.imei)},l.a.createElement(u.a,{controlId:"formNama"},l.a.createElement(De.a,null,"Nama"),l.a.createElement(E.a,{name:"to_name",autoCapitalize:"true",autoComplete:"false",required:!0,value:S,type:"text",placeholder:"Masukkan nama",onChange:e=>this.setState({name:e.target.value})})),l.a.createElement(u.a,{controlId:"formTipex"},l.a.createElement(De.a,null,"Level"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({level:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih level"),p.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))))),"Leader"!==this.state.level&&"Admin"!==this.state.level?l.a.createElement(u.a,{controlId:"formLeaders"},l.a.createElement(De.a,null,"Pilih leader"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({selectLeader:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih leader"),this.state.daftarLeader.map((e,t)=>l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))))):"",l.a.createElement(u.a,{controlId:"formEmail"},l.a.createElement(De.a,null,"Email"),l.a.createElement(E.a,{name:"to_email",required:!0,type:"email",value:v,placeholder:"Masukkan email",onChange:e=>this.setState({email:e.target.value})})),l.a.createElement(u.a,{controlId:"formNik"},l.a.createElement(De.a,null,"NIK"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",required:!0,value:g,type:"text",placeholder:"Masukkan NIK",onChange:e=>this.setState({nik:e.target.value})})),l.a.createElement(u.a,{controlId:"formTipex"},l.a.createElement(De.a,null,"Tipe karyawan"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({tipeKaryawan:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih tipe karyawan"),f.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("tipe")},e.get("tipe"))))),l.a.createElement(u.a,{controlId:"formPosisi"},l.a.createElement(De.a,null,"Posisi"),l.a.createElement(E.a,{required:!0,type:"select",onChange:e=>this.setState({posisi:e.target.value.toUpperCase()})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih posisi"),b.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))))),""!==y?l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Foto Wajah"),l.a.createElement(q.a,{className:"ml-1"},l.a.createElement("img",{height:100,width:100,src:""===y?"":y,alt:"foto"}))):"",l.a.createElement(u.a,{controlId:"formImei"},l.a.createElement(De.a,null,"IMEI"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",required:!0,value:h,type:"text",placeholder:"Masukkan imei hp",onChange:e=>this.setState({imei:e.target.value})}),l.a.createElement(ze.a,{className:"text-muted",style:{color:"red"}},""!==this.state.imeiMessage?this.state.imeiMessage:"")),l.a.createElement(u.a,{controlId:"formJam"},l.a.createElement(De.a,null,"Jam kerja"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({jamKerja:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih jam kerja"),["Jam tetap","Jam fleksibel","Jam bebas"].map(e=>l.a.createElement("option",{value:e},e)))),""!==this.state.jamKerja&&"Jam bebas"!==this.state.jamKerja?l.a.createElement(u.a,{controlId:"formJam"},l.a.createElement(De.a,null,"Jam masuk dan keluar"),l.a.createElement(q.a,null,l.a.createElement(P.a,{md:6},l.a.createElement(E.a,{type:"number",required:!0,placeholder:"Jam Masuk",onChange:e=>this.setState({jamMasuk:e.target.value})})),l.a.createElement(P.a,{md:6},l.a.createElement(E.a,{type:"number",placeholder:"Jam Keluar",required:!0,onChange:e=>this.setState({jamKeluar:e.target.value})})))):"",l.a.createElement(u.a,{controlId:"formLokasi"},l.a.createElement(De.a,null,"Lokasi kerja"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({lokasiKerja:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lokasi kerja"),["Tetap","Bebas (mobile)"].map(e=>l.a.createElement("option",{value:e},e)))),"Tetap"===this.state.lokasiKerja?l.a.createElement(u.a,{controlId:"formPoint"},l.a.createElement(De.a,null,"Absen point"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({absenPoint:e.target.value.split(",")},()=>this.state.absenPoint.map(e=>{console.log(parseFloat(e))}))},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih absen point"),s.map(e=>l.a.createElement("option",{value:[parseFloat(e.get("latitude")),parseFloat(e.get("longitude"))]},e.get("placeName"))))):"",l.a.createElement(u.a,{controlId:"formCuti"},l.a.createElement(De.a,null,"Jumlah cuti"),l.a.createElement(E.a,{type:"number",required:!0,placeholder:"Masukkan jumlah cuti",onChange:e=>this.setState({jumlahCuti:parseInt(e.target.value)})})),l.a.createElement(u.a,{controlId:"formLembut"},l.a.createElement(De.a,null,"Lembur"),l.a.createElement(E.a,{type:"select",defaultValue:"all",required:!0,onChange:e=>this.setState({lembur:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lembur"),["Ya","Tidak"].map(e=>l.a.createElement("option",{value:e},e)))),l.a.createElement($.a,{color:"primary",type:"submit",disabled:i},i?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")),handleSubmit:e=>this.handleCheckImei(e,this.state.imei)}),l.a.createElement(xe,{show:n,loading:i,handleHide:()=>this.toggle("rejectMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject self registration ".concat(o," ?")),l.a.createElement(d.a,{onSubmit:e=>this.handleReject(e)},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},i?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleReject(e)}))}}var at=tt,st=a(57),lt=a.n(st);class nt extends l.a.Component{constructor(e){super(e),this.getTipe=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("EmployeeType"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarTipe:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getPosisi=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("Position"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarPosisi:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getLevel=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("Level"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarLevel:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getStaff=()=>{this.setState({loading:!0});const e=new M.a.User;new M.a.Query(e).find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.getData=()=>{this.setState({loading:!0});const e=new M.a.User;new M.a.Query(e).find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.getShifting=()=>{const e=M.a.Object.extend("Shifting"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarShifting:e})}).catch(e=>{alert("cek koneksi anda")})},this.getLeader=()=>{this.setState({loading:!0});const e=new M.a.User,t=new M.a.Query(e);t.equalTo("roles","leader"),t.find({useMasterKey:!0}).then(e=>{this.setState({daftarLeader:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.handleFace=e=>{this.setState({loadingReco:!0,statusReco:0,fotoWajah:e.target.files[0]});const t=new FormData;t.append("knax",e.target.files[0]),Oe.a.post("http://35.247.149.107:4000/api/face-check",t,{headers:{"Content-Type":"multipart/form-data"}}).then(({data:e})=>1===e.status?this.setState({statusReco:1,message:"\u2714\ufe0f ".concat(e.message),loadingReco:!1}):this.setState({statusReco:0,message:"\u2716\ufe0f ".concat(e.message),loadingReco:!1})).catch(e=>alert("Terjadi error..."))},this.handleSubmit=e=>{e.preventDefault(),this.setState({loading:!0});const t=this.state,a=t.name,s=t.nik,l=t.tipeKaryawan,n=t.posisi,r=t.level,i=t.imei,o=t.jamKerja,c=t.lokasiKerja,m=t.jumlahCuti,d=t.lembur,u=t.fotoWajah,h=t.username,g=t.password,p=t.email,E=new M.a.User,b=new M.a.Object.extend("Shifting");E.set("leaderIdNew",{__type:"Pointer",className:"_User",objectId:this.state.selectLeader}),E.set("shifting",b.createWithoutData(this.state.shifting)),E.set("fullname",a),E.set("email",p),E.set("username",h),E.set("password",Te()(g)),E.set("passwordClone",Te()(g)),E.set("nik",s.toUpperCase()),E.set("tipe",l),E.set("posisi",n),E.set("level",r),E.set("imei",i),E.set("jamKerja",o),E.set("lokasiKerja",c),E.set("jumlahCuti",parseInt(m)),E.set("lembur",d),E.set("roles",r),E.set("fotoWajah",new M.a.File("profile.jpg",u)),E.save().then(e=>{this.setState({daftarStaff:this.state.daftarStaff.concat(e),addMode:!1,loading:!1})}).catch(e=>{this.setState({addMode:!1,loading:!1}),alert(e.message)})},this.handleUpdate=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=this.state,a=(t.name,t.nik),s=t.tipeKaryawan,l=t.posisi,n=t.level,r=t.imei,i=t.jamKerja,o=t.lokasiKerja,c=t.jumlahCuti,m=t.lembur,d=t.fotoWajah,u=t.username,h=t.password,g=t.email,p=new M.a.User,E=new M.a.Query(p);new M.a.Object.extend("Shifting").id=this.state.selectLeader,E.get(this.state.userId).then(e=>{""!==this.state.selectLeader&&e.set("leaderIdNew",{__type:"Pointer",className:"_User",objectId:this.state.selectLeader}),""!==this.state.shifting&&e.set("shifting",{__type:"Pointer",className:"Shifting",objectId:this.state.shifting}),e.set("fullname",this.state.fullname),e.set("email",g),e.set("username",u),""!==h&&(e.set("password",Te()(h)),e.set("passwordClone",Te()(h))),e.set("nik",a.toUpperCase()),e.set("tipe",s),e.set("posisi",l),e.set("level",n),e.set("imei",r),e.set("jamKerja",i),e.set("lokasiKerja",o),e.set("jumlahCuti",parseInt(c)),e.set("lembur",m),e.set("roles",n),""!==d&&e.set("fotoWajah",new M.a.File("profile.jpg",d)),e.save(null,{useMasterKey:!0}).then(e=>{this.setState({editMode:!1,loadingModal:!1}),alert("Sukses")}).catch(e=>{this.setState({editMode:!1,loadingModal:!1}),alert(e.message)})}).catch(e=>{})},this.getDetail=(e,t)=>{e.preventDefault();const a=new M.a.User,s=new M.a.Query(a);s.include("shifting"),s.include("leaderIdNew"),s.get(t,{useMasterKey:!0}).then(({attributes:e})=>{console.log(e),this.setState({nik:e.nik,name:e.fullname,username:e.username,imei:e.imei,email:e.email,tipeKaryawan:e.tipe,posisi:e.posisi,jamKerja:e.jamKerja,lokasiKerja:e.lokasiKerja,jumlahCuti:e.jumlahCuti,shifting:void 0===e.shifting?"":e.shifting,lembur:e.lembur,level:e.level.toLowerCase(),leader:void 0===e.leaderIdNew?"":e.leaderIdNew,editMode:!0})}).catch(e=>{alert(e.message)})},this.handleFilter=e=>{e.preventDefault(),this.setState({loadingFilter:!0});const t=this.state,a=t.searchBy,s=t.searchValue,l=this.state,n=(l.resPerPage,l.page,new M.a.User),r=new M.a.Query(n);switch(r.withCount(),a){case"all":r.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"name":r.matches("fullname",s,"i"),r.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"nik":r.equalTo("nik",s),r.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"level":r.matches("level",s,"i"),r.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"leader":const e=new M.a.User,t=new M.a.Query(e);t.matches("fullname",s,"i"),r.matchesQuery("leaderIdNew",t),r.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")})}},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.state={daftarStaff:[],daftarLeader:[],daftarTipe:[],daftarPosisi:[],daftarLevel:[],resPerPage:25,first:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",fullname:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,editMode:!1,deleteCounter:0,loadingReco:!1,message:"",level:"Leader",fotoWajah:"",message:"",loadingReco:!1,nama:"",nik:"",tipeKaryawan:"Karyawan tetap",posisi:"",imei:"",jamKerja:"Jam tetap",lokasiKerja:"Tetap",jumlahCuti:0,lembur:"ya",username:"",password:"",selectLeader:"",statusReco:0,email:"",fotoWajahObject:{},daftarShifting:[],shifting:{},leader:{},message:"",color:"",visible:!1,searchBy:"all",searchValue:""}}componentDidMount(){this.getStaff(),this.getLeader(),this.getLevel(),this.getPosisi(),this.getTipe(),this.getShifting()}render(){const e=this.state,t=e.daftarStaff,a=e.loading,s=e.loadingReco,n=e.message,r=e.level,i=e.email,o=e.fullname,m=e.imei,h=e.jamKerja,g=e.jumlahCuti,p=e.lokasiKerja,b=e.shifting,f=e.lembur,v=e.tipeKaryawan,y=e.nik,S=e.posisi,k=(e.leaderIdNew,e.approvalMode,e.rejectMode,e.loadingModal),w=(e.fullnames,e.addMode),M=e.leader,I=(e.photoMode,e.statusReco,e.daftarShifting),T=e.daftarLevel,N=e.daftarPosisi,j=e.daftarTipe,H=e.editMode,D=l.a.createElement(u.a,{controlId:"formlvl"},l.a.createElement(E.a,{className:"form-control-alternative",type:"select",required:!0,onChange:e=>this.setState({searchValue:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih level"),T.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))))),C=l.a.createElement(u.a,null,l.a.createElement(E.a,{type:"text",className:"form-control-alternative",disabled:"all"===this.state.searchBy,placeholder:"all"===this.state.searchBy?"":"Masukkan ".concat(this.state.searchBy),onChange:e=>this.setState({searchValue:e.target.value})}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,{className:"mb-4"},l.a.createElement(lt.a,{id:"test-table-xls-button",className:"btn btn-primary ml-2",table:"e1",filename:"tablexls",sheet:"tablexls",buttonText:"Export to .xls"})),l.a.createElement(d.a,{onSubmit:this.handleFilter,className:!0},l.a.createElement(q.a,null,l.a.createElement(P.a,{lg:2},"Search by"),l.a.createElement(P.a,{lg:2},l.a.createElement(u.a,{controlId:"formHorizontalEmails"},l.a.createElement(E.a,{className:"form-control-alternative",type:"select",onChange:e=>this.setState({searchBy:e.target.value,searchValue:""})},["all","nik","name","level","leader"].map(e=>l.a.createElement("option",{value:e},e))))),l.a.createElement(P.a,{lg:4},"level"===this.state.searchBy?D:C),l.a.createElement(P.a,{sm:2},l.a.createElement($.a,{color:"primary",type:"submit",disable:this.state.loadingFilter?"true":"false"},l.a.createElement("i",{className:"fa fa-search"})," ",this.state.loadingFilter?"Fetching...":"Search"))))),l.a.createElement(ee.a,{className:"align-items-center table-flush",id:"e1",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Email"),l.a.createElement("th",{scope:"col"},"Tipe Karyawan"),l.a.createElement("th",{scope:"col"},"Posisi"),l.a.createElement("th",{scope:"col"},"Level"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,e.get("nik")),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,e.get("email")),l.a.createElement("td",null,e.get("tipe")),l.a.createElement("td",null,e.get("posisi")),l.a.createElement("td",null,e.get("level")))))),l.a.createElement(Se,{resPerPage:this.state.resPerPage,totalPosts:20}))))),l.a.createElement(xe,{show:w,loading:k,footer:!1,handleHide:()=>this.toggle("addMode"),title:"Tambah Data",body:l.a.createElement(d.a,{onSubmit:this.handleSubmit,autoComplete:"off"},l.a.createElement(u.a,{controlId:"formCategory"},l.a.createElement(De.a,null,"Foto wajah"),l.a.createElement(E.a,{type:"file",label:"Foto wajah",onChange:this.handleFace,required:!0}),l.a.createElement(ze.a,{className:s?"text-muted":"",style:{color:"".concat(0==this.state.statusReco?"red":"green")}},s?"processing...":n)),l.a.createElement(u.a,{controlId:"formNama"},l.a.createElement(De.a,null,"Nama"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",required:!0,type:"text",placeholder:"Masukkan nama",onChange:e=>this.setState({name:e.target.value})})),l.a.createElement(u.a,{controlId:"formTipex"},l.a.createElement(De.a,null,"Level"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({level:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih level"),T.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))))),"Leader"!==this.state.level&&"Admin"!==this.state.level?l.a.createElement(u.a,{controlId:"formLeaders"},l.a.createElement(De.a,null,"Pilih leader"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({selectLeader:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih leader"),this.state.daftarLeader.map((e,t)=>l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))))):"",l.a.createElement(u.a,{controlId:"formEmail"},l.a.createElement(De.a,null,"Email"),l.a.createElement(E.a,{autoComplete:"off",required:!0,type:"email",placeholder:"Masukkan email",onChange:e=>this.setState({email:e.target.value})})),l.a.createElement(u.a,{controlId:"formx"},l.a.createElement(De.a,null,"Username"),l.a.createElement(E.a,{autoComplete:"off",required:!0,type:"text",placeholder:"Masukkan username",onChange:e=>this.setState({username:e.target.value})})),l.a.createElement(u.a,{controlId:"formz"},l.a.createElement(De.a,null,"Password"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"new-password",required:!0,type:"password",placeholder:"Masukkan password",onChange:e=>this.setState({password:e.target.value})})),l.a.createElement(u.a,{controlId:"formNik"},l.a.createElement(De.a,null,"NIK"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",required:!0,type:"text",placeholder:"Masukkan NIK",onChange:e=>this.setState({nik:e.target.value.toUpperCase()})})),l.a.createElement(u.a,{controlId:"formTipex"},l.a.createElement(De.a,null,"Tipe karyawan"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({tipeKaryawan:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih tipe karyawan"),j.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("tipe")},e.get("tipe"))))),l.a.createElement(u.a,{controlId:"formPosisi"},l.a.createElement(De.a,null,"Posisi"),l.a.createElement(E.a,{required:!0,type:"select",onChange:e=>this.setState({posisi:e.target.value.toUpperCase()})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih posisi"),N.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))))),l.a.createElement(u.a,{controlId:"formImei"},l.a.createElement(De.a,null,"IMEI"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",required:!0,type:"text",placeholder:"Masukkan imei hp",onChange:e=>this.setState({imei:e.target.value})})),l.a.createElement(u.a,{controlId:"formJam"},l.a.createElement(De.a,null,"Jam kerja"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({jamKerja:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih jam kerja"),["Jam tetap","Jam fleksibel","Jam bebas"].map(e=>l.a.createElement("option",{value:e},e)))),l.a.createElement(u.a,{controlId:"formShifting"},l.a.createElement(De.a,null,"Shifting"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({shifting:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih shifting"),I.map(e=>l.a.createElement("option",{value:e.id},e.get("tipeShift"))))),l.a.createElement(u.a,{controlId:"formLokasi"},l.a.createElement(De.a,null,"Lokasi kerja"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({lokasiKerja:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lokasi kerja"),["Tetap","Bebas (mobile)"].map(e=>l.a.createElement("option",{value:e},e)))),l.a.createElement(u.a,{controlId:"formCuti"},l.a.createElement(De.a,null,"Jumlah cuti"),l.a.createElement(E.a,{type:"number",required:!0,placeholder:"Masukkan jumlah cuti",onChange:e=>this.setState({jumlahCuti:parseInt(e.target.value)})})),l.a.createElement(u.a,{controlId:"formLembut"},l.a.createElement(De.a,null,"Lembur"),l.a.createElement(E.a,{type:"select",defaultValue:"all",required:!0,onChange:e=>this.setState({lembur:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lembur"),["Ya","Tidak"].map(e=>l.a.createElement("option",{value:e},e)))),l.a.createElement($.a,{color:0===this.state.statusReco?"danger":"primary",type:"submit",disabled:0===this.state.statusReco},0===this.state.statusReco?"upload foto dahulu":this.state.loading?"Please wait..":"Submit")),handleSubmit:e=>this.handleAdd(e)}),l.a.createElement(xe,{show:H,loading:k,footer:!1,handleHide:()=>this.toggle("editMode"),title:"Edit Data",body:l.a.createElement(d.a,{onSubmit:this.handleUpdate,autoComplete:"off"},l.a.createElement(u.a,{controlId:"formCategory"},l.a.createElement(De.a,null,"Foto wajah"),l.a.createElement(E.a,{type:"file",label:"Foto wajah",onChange:this.handleFace}),l.a.createElement(ze.a,{className:s?"text-muted":"",style:{color:"".concat(0==this.state.statusReco?"red":"green")}},s?"processing...":n)),l.a.createElement(u.a,{controlId:"formNama"},l.a.createElement(De.a,null,"Nama"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",value:o,type:"text",placeholder:"Masukkan nama",onChange:e=>this.setState({fullname:e.target.value})})),l.a.createElement(u.a,{controlId:"formTipex"},l.a.createElement(De.a,null,"Level"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({level:e.target.value})},T.map((e,t)=>l.a.createElement("option",{selected:r.toLowerCase()===e.get("level").toLowerCase(),key:t,value:e.get("level")},e.get("level"))))),"leader"!==this.state.level&&"admin"!==this.state.level?l.a.createElement(u.a,{controlId:"formLeaders"},l.a.createElement(De.a,null,"Pilih leader"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({selectLeader:e.target.value})},this.state.daftarLeader.map((e,t)=>l.a.createElement("option",{selected:M.id===e.id,key:t,value:e.id},e.get("fullname"))))):"",l.a.createElement(u.a,{controlId:"formEmail"},l.a.createElement(De.a,null,"Email"),l.a.createElement(E.a,{autoComplete:"off",value:i,type:"email",placeholder:"Masukkan email",onChange:e=>this.setState({email:e.target.value})})),l.a.createElement(u.a,{controlId:"formz"},l.a.createElement(De.a,null,"Password"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"new-password",type:"password",placeholder:"Masukkan password jika ingin mengubah password",onChange:e=>this.setState({password:e.target.value})})),l.a.createElement(u.a,{controlId:"formNik"},l.a.createElement(De.a,null,"NIK"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",value:y,type:"text",placeholder:"Masukkan NIK",onChange:e=>this.setState({nik:e.target.value.toUpperCase()})})),l.a.createElement(u.a,{controlId:"formTipex"},l.a.createElement(De.a,null,"Tipe karyawan"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({tipeKaryawan:e.target.value})},j.map((e,t)=>l.a.createElement("option",{selected:v===e.get("tipe").toLowerCase(),key:t,value:e.get("tipe")},e.get("tipe"))))),l.a.createElement(u.a,{controlId:"formPosisi"},l.a.createElement(De.a,null,"Posisi"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({posisi:e.target.value.toUpperCase()})},N.map((e,t)=>l.a.createElement("option",{selected:S.toLowerCase()===e.get("position").toLowerCase(),key:t,value:e.get("position")},e.get("position"))))),l.a.createElement(u.a,{controlId:"formImei"},l.a.createElement(De.a,null,"IMEI"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",defaultValue:m,type:"text",placeholder:"Masukkan imei hp",onChange:e=>this.setState({imei:e.target.value})})),l.a.createElement(u.a,{controlId:"formJam"},l.a.createElement(De.a,null,"Jam kerja"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({jamKerja:e.target.value})},["Jam tetap","Jam fleksibel","Jam bebas"].map(e=>l.a.createElement("option",{selected:h.toLowerCase()===e.toLowerCase(),value:e},e)))),l.a.createElement(u.a,{controlId:"formShifting"},l.a.createElement(De.a,null,"Shifting"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({shifting:e.target.value})},I.map(e=>l.a.createElement("option",{selected:b.id===e.id,value:e.id},e.get("tipeShift"))))),l.a.createElement(u.a,{controlId:"formLokasi"},l.a.createElement(De.a,null,"Lokasi kerja"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({lokasiKerja:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lokasi kerja"),["Tetap","Bebas (mobile)"].map(e=>l.a.createElement("option",{selected:p.toLowerCase()===e.toLowerCase(),value:e},e)))),l.a.createElement(u.a,{controlId:"formCuti"},l.a.createElement(De.a,null,"Jumlah cuti"),l.a.createElement(E.a,{type:"number",defaultValue:g,placeholder:"Masukkan jumlah cuti",onChange:e=>this.setState({jumlahCuti:parseInt(e.target.value)})})),l.a.createElement(u.a,{controlId:"formLembut"},l.a.createElement(De.a,null,"Lembur"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({lembur:e.target.value})},["Ya","Tidak"].map(e=>l.a.createElement("option",{selected:f.toLowerCase()===e.toLowerCase(),value:e},e)))),l.a.createElement($.a,{color:"primary",type:"submit",disabled:0===k},k?"Submitting...":"Submit")),handleSubmit:e=>this.handleUpdate(e)}))}}var rt=nt,it=a(561),ot=a.n(it);class ct extends l.a.Component{constructor(e){super(e),this.getData=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("AppSetting");new M.a.Query(e).find().then(e=>{console.log(e),this.setState({posisi:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.handleAdd=e=>{e.preventDefault();const t=this.state,a=t.inputRadius,s=t.inputTimer;this.setState({loadingModal:!0});const l=new(M.a.Object.extend("AppSetting"));l.set("validationTimer",parseInt(a)),l.set("radiusAbsen",parseInt(s)),l.save().then(e=>{this.setState({addMode:!1,loadingModal:!1,posisi:this.state.posisi.concat(e),message:"Berhasil tambah data",visible:!0,color:"success"})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})})},this.getDetail=(e,t)=>{e.preventDefault();const a=M.a.Object.extend("AppSetting");new M.a.Query(a).get(t).then(({attributes:e})=>{this.setState({inputTimer:e.validationTimer,inputRadius:e.radiusAbsen,editMode:!0})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})})},this.handleUpdate=e=>{e.preventDefault();const t=this.state,a=t.inputTimer,s=t.inputRadius;this.setState({loadingModal:!0});const l=M.a.Object.extend("AppSetting");new M.a.Query(l).get(this.state.userId).then(e=>{e.set("validationTimer",a),e.set("radiusAbsen",s),e.save().then(e=>{this.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})},this.handleLivenessToggle=e=>{const t=M.a.Object.extend("AppSetting");new M.a.Query(t).get(this.state.posisi[0].id).then(t=>{t.set("liveness",e),t.save().then(e=>{this.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})},this.handleRemove=e=>{e.preventDefault();this.state.inputLevel;this.setState({loadingModal:!0});const t=M.a.Object.extend("AppSetting");new M.a.Query(t).get(this.state.userId).then(e=>{e.set("status",0),e.save().then(e=>{let t=[...this.state.posisi];t.splice(this.state.userIndex,1),this.setState({deleteMode:!1,loadingModal:!1,posisi:t,message:"Berhasil hapus data",visible:!0,color:"success"})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.state={posisi:[],inputTimer:0,inputRadius:0,detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,deleteMode:!1,editMode:!1,deleteCounter:0,message:"",color:"danger",visible:!1}}componentDidMount(){this.getData()}render(){const e=this.state,t=e.posisi,a=e.loading,s=(e.inputPosisi,e.rejectMode,e.loadingModal),n=e.fullnames,r=e.addMode,i=e.deleteMode,o=e.editMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,null,l.a.createElement("h3",{className:"ml-2"},"Manage Setting")),l.a.createElement(re,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:()=>this.toggle("visible")})),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"No"),l.a.createElement("th",{scope:"col"},"Validation Timer (Detik)"),l.a.createElement("th",{scope:"col"},"Radius Absen (Meter)"),l.a.createElement("th",{scope:"col"},"Liveness"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,t+1),l.a.createElement("td",null,e.get("validationTimer")),l.a.createElement("td",null,e.get("radiusAbsen")),l.a.createElement("td",null,l.a.createElement(ot.a,{value:this.state.livenessToggle||!1,onToggle:e=>{console.log(!e),this.setState({livenessToggle:!e}),this.handleLivenessToggle(!e)}})),l.a.createElement("td",null,l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:a=>{this.setState({userId:e.id,userIndex:t}),this.getDetail(a,e.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Ubah data")))))))))),l.a.createElement(xe,{show:r,loading:s,footer:!1,handleHide:()=>this.toggle("addMode"),title:"Tambah Data",body:l.a.createElement("div",null,l.a.createElement(d.a,{onSubmit:e=>this.handleAdd(e)},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Posisi"),l.a.createElement(E.a,{id:"zz1",placeholder:"Masukkan posisi",type:"text",required:!0,onChange:e=>this.setState({inputPosisi:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleAdd(e)}),l.a.createElement(xe,{show:o,loading:s,footer:!1,handleHide:()=>this.toggle("editMode"),title:"Edit Data",body:l.a.createElement(d.a,{onSubmit:e=>this.handleUpdate(e)},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Validation Timer"),l.a.createElement(E.a,{id:"zz1",placeholder:"Masukkan validation timer",value:this.state.inputTimer,type:"text",required:!0,onChange:e=>this.setState({inputTimer:e.target.value})})),l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Radius Absen"),l.a.createElement(E.a,{id:"zz1",placeholder:"Masukkan radius absen",value:this.state.inputRadius,type:"text",required:!0,onChange:e=>this.setState({inputRadius:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("editMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")),handleSubmit:e=>this.handleUpdate(e)}),l.a.createElement(xe,{show:i,loading:s,footer:!0,handleHide:()=>this.toggle("deleteMode"),title:"Remove Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Remove level ".concat(n," ?"))),handleSubmit:e=>this.handleRemove(e)}))}}var mt=ct;const dt=Object(W.a)(Object(W.b)(()=>({isOpen:!1,id:""}),{onToggleOpen:({isOpen:e,id:t})=>t=>({isOpen:!e,id:t})}),_.withScriptjs,_.withGoogleMap)(e=>l.a.createElement(_.GoogleMap,{defaultZoom:12,defaultCenter:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},center:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},defaultOptions:{scrollwheel:!1}},e.userPosition.map(t=>l.a.createElement(_.Marker,{onClick:()=>e.onToggleOpen(t.id),icon:{labelOrigin:new window.google.maps.Point(11,50),url:a(164)("./".concat(void 0===t.get("user").attributes.color?"red":t.get("user").attributes.color,"-dot.png")),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(11,40)},title:"".concat(t.get("fullname")," absen masuk: ").concat(A(t.get("absenMasuk"),"HH:mm:ss")),position:{lat:parseFloat(t.get("latitude")),lng:parseFloat(t.get("longitude"))},label:{text:ce(t.get("fullname")),fontWeight:"bold"}},e.id===t.id&&l.a.createElement(_.InfoWindow,{onCloseClick:e.onToggleOpen},l.a.createElement("div",null,l.a.createElement("img",{src:t.get("selfieImage").url(),height:100,width:100}),l.a.createElement("br",null),l.a.createElement("br",null),"Late"===t.className&&l.a.createElement("p",null,"Terlambat"),l.a.createElement("p",null,"Absen masuk:"," ",l.a.createElement("span",{style:{color:"Late"===t.className?"red":"blue"}},A(t.get("absenMasuk"),"HH:mm:ss")))))))));class ut extends l.a.Component{constructor(e){super(e),this.getLeaderStaff=()=>{this.setState({loading:!0});const e=this.props.match.params.id;console.log(e);const t=M.a.Object.extend("Absence"),a=new M.a.Query(t),s=new Date,l=new T.a(s);l.startOf("day");const n=new T.a(l);n.add(1,"day"),a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:e}),a.greaterThanOrEqualTo("absenMasuk",l.toDate()),a.lessThan("absenMasuk",n.toDate()),a.include("user"),a.find().then(e=>{console.log(e),this.setState({userLocation:e},()=>console.log(this.state.userLocation))}).catch(e=>{console.log(e),this.setState({loading:!1})})},this.getCenterAverage=e=>{this.setState({loading:!0});let t=e.reduce((e,t)=>(console.log(e+parseFloat(t.attributes.latitude)),e+parseFloat(t.attributes.latitude)),0),a=e.reduce((e,t)=>(console.log(e+parseFloat(t.attributes.longitude)),e+parseFloat(t.attributes.longitude)),0);console.log(t+" "+a),this.setState({avgLat:t/e.length,avgLng:a/e.length,loading:!1})},this.getDataTerlambat=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Late"),t=new M.a.Query(e),a=new Date,s=new T.a(a);s.startOf("day");const l=new T.a(s);l.add(1,"day"),t.equalTo("status",3),t.greaterThanOrEqualTo("time",s.toDate()),t.lessThan("time",l.toDate()),t.include("user"),t.find().then(e=>{console.log(e),this.setState({late:e})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.setCenterMaps=(e,t)=>{this.setState({avgLat:parseFloat(e),avgLng:parseFloat(t)})},this.state={locationArr:[[-6.2407535,106.8558205],[-6.2128274,106.8100491],[-6.2028274,106.8000491]],userLocation:[],avgLat:0,avgLng:0,loading:!1,late:[]}}componentDidMount(){this.getLeaderStaff(),this.getDataTerlambat()}componentDidUpdate(e,t){t.late!==this.state.late&&(console.log(this.state.userLocation),console.log("updated"),this.getCenterAverage(this.state.userLocation.concat(this.state.late)))}render(){this.state.locationArr;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},this.state.loading?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Loading map..."):0===this.state.userLocation.length?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Tidak ada data absen hari ini"):l.a.createElement(q.a,null,l.a.createElement(P.a,{lg:6,className:"mb-5"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(dt,{userPosition:this.state.userLocation.concat(this.state.late),avgLat:this.state.avgLat,avgLng:this.state.avgLng,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyC5tj-2X6b7kwGTqGZkB7sofZdMhpyE75Q",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:"500px"},className:"map-canvas",id:"map-canvas"}),mapElement:l.a.createElement("div",{style:{height:"100%",borderRadius:"inherit"}})}))),l.a.createElement(P.a,{lg:6,className:""},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",null,"Data absen hari ini")),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0,style:{borderRadius:"inherit"}},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Absen Masuk"))),l.a.createElement("tbody",null,this.state.userLocation.concat(this.state.late).map((e,t)=>l.a.createElement("tr",{onClick:()=>this.setCenterMaps(e.get("latitude"),e.get("longitude"))},l.a.createElement("td",null,e.get("user").attributes.nik),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,"Late"===e.className?l.a.createElement("div",null,l.a.createElement("span",{style:{color:"red"}},A(e.get("time"),"HH:mm:ss"))," "):A(e.get("absenMasuk"),"HH:mm:ss")))))))))))))}}var ht=ut;class gt extends l.a.Component{constructor(e){super(e),this.getTipe=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("EmployeeType"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarTipe:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getPosisi=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("Position"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarPosisi:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getLevel=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("Level"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarLevel:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getStaff=()=>{this.setState({loading:!0});const e=new M.a.User;new M.a.Query(e).find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.getData=()=>{this.setState({loading:!0});const e=new M.a.User;new M.a.Query(e).find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.handleFilter=e=>{e.preventDefault(),this.setState({loadingFilter:!0});const t=this.state,a=t.searchBy,s=t.searchValue,l=this.state,n=(l.resPerPage,l.page,new M.a.User),r=new M.a.Query(n);switch(r.withCount(),a){case"all":r.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"name":r.matches("fullname",s,"i"),r.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"nik":r.equalTo("nik",s),r.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"level":r.matches("level",s,"i"),r.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"leader":const e=new M.a.User,t=new M.a.Query(e);t.matches("fullname",s,"i"),r.matchesQuery("leaderIdNew",t),r.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")})}},this.getShifting=()=>{const e=M.a.Object.extend("Shifting"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarShifting:e})}).catch(e=>{alert("cek koneksi anda")})},this.getLeader=()=>{this.setState({loading:!0});const e=new M.a.User,t=new M.a.Query(e);t.equalTo("roles","leader"),t.find({useMasterKey:!0}).then(e=>{this.setState({daftarLeader:e,loading:!1})}).catch(e=>{this.setState({loading:!1}),alert("cek koneksi anda")})},this.handleFace=e=>{this.setState({loadingReco:!0,statusReco:0,fotoWajah:e.target.files[0]});const t=new FormData;t.append("knax",e.target.files[0]),Oe.a.post("http://35.247.149.107:4000/api/face-check",t,{headers:{"Content-Type":"multipart/form-data"}}).then(({data:e})=>1===e.status?this.setState({statusReco:1,message:"\u2714\ufe0f ".concat(e.message),loadingReco:!1}):this.setState({statusReco:0,message:"\u2716\ufe0f ".concat(e.message),loadingReco:!1})).catch(e=>alert("Terjadi error..."))},this.handleSubmit=e=>{e.preventDefault(),this.setState({loading:!0});const t=this.state,a=t.name,s=t.nik,l=t.tipeKaryawan,n=t.posisi,r=t.level,i=t.imei,o=t.jamKerja,c=t.lokasiKerja,m=t.jumlahCuti,d=t.lembur,u=t.fotoWajah,h=t.username,g=t.password,p=t.email,E=new M.a.User,b=new M.a.Object.extend("Shifting");E.set("leaderIdNew",{__type:"Pointer",className:"_User",objectId:this.state.selectLeader}),E.set("shifting",b.createWithoutData(this.state.shifting)),E.set("fullname",a),E.set("email",p),E.set("username",h),E.set("password",Te()(g)),E.set("passwordClone",Te()(g)),E.set("nik",s.toUpperCase()),E.set("tipe",l),E.set("posisi",n),E.set("level",r),E.set("imei",i),E.set("jamKerja",o),E.set("lokasiKerja",c),E.set("jumlahCuti",parseInt(m)),E.set("lembur",d),E.set("roles",r),E.set("fotoWajah",new M.a.File("profile.jpg",u)),E.save().then(e=>{this.setState({daftarStaff:this.state.daftarStaff.concat(e),addMode:!1,loading:!1,message:"Berhasil tambah data",visible:!0,color:"success"})}).catch(e=>{this.setState({addMode:!1,loading:!1,message:"Gagal tambah data, coba lagi",visible:!0}),console.log(e.message)})},this.handleUpdate=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=this.state,a=(t.name,t.nik),s=t.tipeKaryawan,l=t.posisi,n=t.level,r=t.imei,i=t.jamKerja,o=t.lokasiKerja,c=t.jumlahCuti,m=t.lembur,d=t.fotoWajah,u=t.username,h=t.password,g=t.email,p=new M.a.User,E=new M.a.Query(p);new M.a.Object.extend("Shifting").id=this.state.selectLeader,E.get(this.state.userId).then(e=>{""!==this.state.selectLeader&&e.set("leaderIdNew",{__type:"Pointer",className:"_User",objectId:this.state.selectLeader}),""!==this.state.shifting&&e.set("shifting",{__type:"Pointer",className:"Shifting",objectId:this.state.shifting}),e.set("fullname",this.state.fullname),e.set("email",g),e.set("username",u),""!==h&&(e.set("password",Te()(h)),e.set("passwordClone",Te()(h))),e.set("nik",a.toUpperCase()),e.set("tipe",s),e.set("posisi",l),e.set("level",n),e.set("imei",r),e.set("jamKerja",i),e.set("lokasiKerja",o),e.set("jumlahCuti",parseInt(c)),e.set("lembur",m),e.set("roles",n),""!==d&&e.set("fotoWajah",new M.a.File("profile.jpg",d)),e.save(null,{useMasterKey:!0}).then(e=>{this.setState({editMode:!1,loadingModal:!1,message:"Berhasil update data",visible:!0,color:"success"})}).catch(e=>{this.setState({editMode:!1,loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0}),console.log(e.message)})}).catch(e=>{this.setState({editMode:!1,loadingModal:!1,message:e.message,visible:!0}),console.log(e.message)})},this.getDetail=(e,t)=>{e.preventDefault();const a=new M.a.User,s=new M.a.Query(a);s.include("shifting"),s.include("leaderIdNew"),s.get(t,{useMasterKey:!0}).then(({attributes:e})=>{console.log(e),this.setState({nik:e.nik,name:e.fullname,username:e.username,imei:e.imei,email:e.email,tipeKaryawan:e.tipe,posisi:e.posisi,jamKerja:e.jamKerja,lokasiKerja:e.lokasiKerja,jumlahCuti:e.jumlahCuti,shifting:void 0===e.shifting?"":e.shifting,lembur:e.lembur,level:e.level.toLowerCase(),leader:void 0===e.leaderIdNew?"":e.leaderIdNew,editMode:!0})}).catch(e=>{alert(e.message)})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.getLeaderStaff=(e,t)=>{e.preventDefault();const a=M.a.Object.extend("Absence"),s=new M.a.Query(a),l=new Date,n=new T.a(l);n.startOf("day");const r=new T.a(n);r.add(1,"day"),s.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:t}),s.greaterThanOrEqualTo("absenMasuk",n.toDate()),s.lessThan("absenMasuk",r.toDate()),s.find().then(e=>{e.map(e=>{console.log(e.get("latitude")+" "+e.get("longitude"))})}).catch(e=>{console.log(e)})},this.state={daftarStaff:[],daftarLeader:[],daftarTipe:[],daftarPosisi:[],daftarLevel:[],resPerPage:25,first:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",fullname:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,editMode:!1,deleteCounter:0,loadingReco:!1,message:"",level:"Leader",fotoWajah:"",message:"",loadingReco:!1,nama:"",nik:"",tipeKaryawan:"Karyawan tetap",posisi:"",imei:"",jamKerja:"Jam tetap",lokasiKerja:"Tetap",jumlahCuti:0,lembur:"ya",username:"",password:"",selectLeader:"",statusReco:0,email:"",fotoWajahObject:{},daftarShifting:[],shifting:{},leader:{},message:"",color:"",visible:!1,message:"",color:"danger",visible:!1,searchBy:"all",searchValue:""}}componentDidMount(){this.getStaff(),this.getLeader(),this.getLevel(),this.getPosisi(),this.getTipe(),this.getShifting()}render(){const e=this.state,t=(e.daftarStaff,e.loading),a=e.loadingReco,s=e.message,n=e.level,r=e.email,o=e.fullname,m=e.imei,h=e.jamKerja,g=e.jumlahCuti,p=e.lokasiKerja,b=e.shifting,f=e.lembur,v=e.tipeKaryawan,y=e.nik,S=e.posisi,k=e.daftarLeader,w=e.loadingModal,M=(e.fullnames,e.addMode),I=e.leader,T=(e.photoMode,e.statusReco,e.daftarShifting),N=e.daftarLevel,j=e.daftarPosisi,H=e.daftarTipe,D=e.editMode;u.a,E.a,N.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))),u.a,E.a,this.state.searchBy,"all"===this.state.searchBy||"Masukkan ".concat(this.state.searchBy);return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(re,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:()=>this.toggle("visible")}),l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",null,"Data leader")),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Email"),l.a.createElement("th",{scope:"col"},"Tipe Karyawan"),l.a.createElement("th",{scope:"col"},"Posisi"),l.a.createElement("th",{scope:"col"},"Level"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,t?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):k.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):k.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,e.get("nik")),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,e.get("email")),l.a.createElement("td",null,e.get("tipe")),l.a.createElement("td",null,e.get("posisi")),l.a.createElement("td",null,e.get("level")),l.a.createElement("td",null,l.a.createElement(i.b,{className:"mr-2",to:"/admin/view-absen/".concat(e.id)},l.a.createElement($.a,{id:"t4",color:"primary",className:"btn-circle"},l.a.createElement("i",{className:"fa fa-eye"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t4"},"Lihat absen staff"))))))),l.a.createElement(Se,{resPerPage:this.state.resPerPage,totalPosts:20}))))),l.a.createElement(xe,{show:M,loading:w,footer:!1,handleHide:()=>this.toggle("addMode"),title:"Tambah Data",body:l.a.createElement(d.a,{onSubmit:this.handleSubmit,autoComplete:"off"},l.a.createElement(u.a,{controlId:"formCategory"},l.a.createElement(De.a,null,"Foto wajah"),l.a.createElement(E.a,{type:"file",label:"Foto wajah",onChange:this.handleFace,required:!0}),l.a.createElement(ze.a,{className:a?"text-muted":"",style:{color:"".concat(0==this.state.statusReco?"red":"green")}},a?"processing...":s)),l.a.createElement(u.a,{controlId:"formNama"},l.a.createElement(De.a,null,"Nama"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",required:!0,type:"text",placeholder:"Masukkan nama",onChange:e=>this.setState({name:e.target.value})})),l.a.createElement(u.a,{controlId:"formTipex"},l.a.createElement(De.a,null,"Level"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({level:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih level"),N.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))))),"Leader"!==this.state.level&&"Admin"!==this.state.level?l.a.createElement(u.a,{controlId:"formLeaders"},l.a.createElement(De.a,null,"Pilih leader"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({selectLeader:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih leader"),this.state.daftarLeader.map((e,t)=>l.a.createElement("option",{key:t,value:e.id},e.get("fullname"))))):"",l.a.createElement(u.a,{controlId:"formEmail"},l.a.createElement(De.a,null,"Email"),l.a.createElement(E.a,{autoComplete:"off",required:!0,type:"email",placeholder:"Masukkan email",onChange:e=>this.setState({email:e.target.value})})),l.a.createElement(u.a,{controlId:"formx"},l.a.createElement(De.a,null,"Username"),l.a.createElement(E.a,{autoComplete:"off",required:!0,type:"text",placeholder:"Masukkan username",onChange:e=>this.setState({username:e.target.value})})),l.a.createElement(u.a,{controlId:"formz"},l.a.createElement(De.a,null,"Password"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"new-password",required:!0,type:"password",placeholder:"Masukkan password",onChange:e=>this.setState({password:e.target.value})})),l.a.createElement(u.a,{controlId:"formNik"},l.a.createElement(De.a,null,"NIK"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",required:!0,type:"text",placeholder:"Masukkan NIK",onChange:e=>this.setState({nik:e.target.value.toUpperCase()})})),l.a.createElement(u.a,{controlId:"formTipex"},l.a.createElement(De.a,null,"Tipe karyawan"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({tipeKaryawan:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih tipe karyawan"),H.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("tipe")},e.get("tipe"))))),l.a.createElement(u.a,{controlId:"formPosisi"},l.a.createElement(De.a,null,"Posisi"),l.a.createElement(E.a,{required:!0,type:"select",onChange:e=>this.setState({posisi:e.target.value.toUpperCase()})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih posisi"),j.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))))),l.a.createElement(u.a,{controlId:"formImei"},l.a.createElement(De.a,null,"IMEI"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",required:!0,type:"text",placeholder:"Masukkan imei hp",onChange:e=>this.setState({imei:e.target.value})})),l.a.createElement(u.a,{controlId:"formJam"},l.a.createElement(De.a,null,"Jam kerja"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({jamKerja:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih jam kerja"),["Jam tetap","Jam fleksibel","Jam bebas"].map(e=>l.a.createElement("option",{value:e},e)))),l.a.createElement(u.a,{controlId:"formShifting"},l.a.createElement(De.a,null,"Shifting"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({shifting:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih shifting"),T.map(e=>l.a.createElement("option",{value:e.id},e.get("tipeShift"))))),l.a.createElement(u.a,{controlId:"formLokasi"},l.a.createElement(De.a,null,"Lokasi kerja"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({lokasiKerja:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lokasi kerja"),["Tetap","Bebas (mobile)"].map(e=>l.a.createElement("option",{value:e},e)))),l.a.createElement(u.a,{controlId:"formCuti"},l.a.createElement(De.a,null,"Jumlah cuti"),l.a.createElement(E.a,{type:"number",required:!0,placeholder:"Masukkan jumlah cuti",onChange:e=>this.setState({jumlahCuti:parseInt(e.target.value)})})),l.a.createElement(u.a,{controlId:"formLembut"},l.a.createElement(De.a,null,"Lembur"),l.a.createElement(E.a,{type:"select",defaultValue:"all",required:!0,onChange:e=>this.setState({lembur:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lembur"),["Ya","Tidak"].map(e=>l.a.createElement("option",{value:e},e)))),l.a.createElement($.a,{color:0===this.state.statusReco?"danger":"primary",type:"submit",disabled:0===this.state.statusReco},0===this.state.statusReco?"upload foto dahulu":this.state.loading?"Please wait..":"Submit")),handleSubmit:e=>this.handleAdd(e)}),l.a.createElement(xe,{show:D,loading:w,footer:!1,handleHide:()=>this.toggle("editMode"),title:"Edit Data",body:l.a.createElement(d.a,{onSubmit:this.handleUpdate,autoComplete:"off"},l.a.createElement(u.a,{controlId:"formCategory"},l.a.createElement(De.a,null,"Foto wajah"),l.a.createElement(E.a,{type:"file",label:"Foto wajah",onChange:this.handleFace}),l.a.createElement(ze.a,{className:a?"text-muted":"",style:{color:"".concat(0==this.state.statusReco?"red":"green")}},a?"processing...":s)),l.a.createElement(u.a,{controlId:"formNama"},l.a.createElement(De.a,null,"Nama"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",value:o,type:"text",placeholder:"Masukkan nama",onChange:e=>this.setState({fullname:e.target.value})})),l.a.createElement(u.a,{controlId:"formTipex"},l.a.createElement(De.a,null,"Level"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({level:e.target.value})},N.map((e,t)=>l.a.createElement("option",{selected:n.toLowerCase()===e.get("level").toLowerCase(),key:t,value:e.get("level")},e.get("level"))))),"leader"!==this.state.level&&"admin"!==this.state.level?l.a.createElement(u.a,{controlId:"formLeaders"},l.a.createElement(De.a,null,"Pilih leader"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({selectLeader:e.target.value})},this.state.daftarLeader.map((e,t)=>l.a.createElement("option",{selected:I.id===e.id,key:t,value:e.id},e.get("fullname"))))):"",l.a.createElement(u.a,{controlId:"formEmail"},l.a.createElement(De.a,null,"Email"),l.a.createElement(E.a,{autoComplete:"off",value:r,type:"email",placeholder:"Masukkan email",onChange:e=>this.setState({email:e.target.value})})),l.a.createElement(u.a,{controlId:"formz"},l.a.createElement(De.a,null,"Password"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"new-password",type:"password",placeholder:"Masukkan password jika ingin mengubah password",onChange:e=>this.setState({password:e.target.value})})),l.a.createElement(u.a,{controlId:"formNik"},l.a.createElement(De.a,null,"NIK"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",value:y,type:"text",placeholder:"Masukkan NIK",onChange:e=>this.setState({nik:e.target.value.toUpperCase()})})),l.a.createElement(u.a,{controlId:"formTipex"},l.a.createElement(De.a,null,"Tipe karyawan"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({tipeKaryawan:e.target.value})},H.map((e,t)=>l.a.createElement("option",{selected:v===e.get("tipe").toLowerCase(),key:t,value:e.get("tipe")},e.get("tipe"))))),l.a.createElement(u.a,{controlId:"formPosisi"},l.a.createElement(De.a,null,"Posisi"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({posisi:e.target.value.toUpperCase()})},j.map((e,t)=>l.a.createElement("option",{selected:S.toLowerCase()===e.get("position").toLowerCase(),key:t,value:e.get("position")},e.get("position"))))),l.a.createElement(u.a,{controlId:"formImei"},l.a.createElement(De.a,null,"IMEI"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",defaultValue:m,type:"text",placeholder:"Masukkan imei hp",onChange:e=>this.setState({imei:e.target.value})})),l.a.createElement(u.a,{controlId:"formJam"},l.a.createElement(De.a,null,"Jam kerja"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({jamKerja:e.target.value})},["Jam tetap","Jam fleksibel","Jam bebas"].map(e=>l.a.createElement("option",{selected:h.toLowerCase()===e.toLowerCase(),value:e},e)))),l.a.createElement(u.a,{controlId:"formShifting"},l.a.createElement(De.a,null,"Shifting"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({shifting:e.target.value})},T.map(e=>l.a.createElement("option",{selected:b.id===e.id,value:e.id},e.get("tipeShift"))))),l.a.createElement(u.a,{controlId:"formLokasi"},l.a.createElement(De.a,null,"Lokasi kerja"),l.a.createElement(E.a,{type:"select",onChange:e=>this.setState({lokasiKerja:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih lokasi kerja"),["Tetap","Bebas (mobile)"].map(e=>l.a.createElement("option",{selected:p.toLowerCase()===e.toLowerCase(),value:e},e)))),l.a.createElement(u.a,{controlId:"formCuti"},l.a.createElement(De.a,null,"Jumlah cuti"),l.a.createElement(E.a,{type:"number",defaultValue:g,placeholder:"Masukkan jumlah cuti",onChange:e=>this.setState({jumlahCuti:parseInt(e.target.value)})})),l.a.createElement(u.a,{controlId:"formLembut"},l.a.createElement(De.a,null,"Lembur"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({lembur:e.target.value})},["Ya","Tidak"].map(e=>l.a.createElement("option",{selected:f.toLowerCase()===e.toLowerCase(),value:e},e)))),l.a.createElement($.a,{color:"primary",type:"submit",disabled:0===w},w?"Submitting...":"Submit")),handleSubmit:e=>this.handleUpdate(e)}))}}var pt=gt;const Et=Object(W.a)(Object(W.b)(()=>({isOpen:!1,id:""}),{onToggleOpen:({isOpen:e,id:t})=>t=>({isOpen:!e,id:t})}),_.withScriptjs,_.withGoogleMap)(e=>l.a.createElement(_.GoogleMap,{defaultZoom:12,zoom:e.defaultZoom,defaultCenter:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},center:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},defaultOptions:{scrollwheel:!1}},e.userPosition.map(t=>l.a.createElement(_.Marker,{key:t.id,onClick:a=>{console.log(t.id),e.onToggleOpen(t.id)},icon:{labelOrigin:new window.google.maps.Point(11,50),url:a(164)("./".concat(void 0===t.get("user").attributes.color?"red":t.get("user").attributes.color,"-dot.png")),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(11,40)},title:"".concat(t.get("fullname")," absen masuk: ").concat(A(t.get("absenMasuk"),"HH:mm:ss")),position:{lat:parseFloat(t.get("latitude")),lng:parseFloat(t.get("longitude"))},label:{text:ce(t.get("fullname")),fontWeight:"bold"}},t.id===e.id&&l.a.createElement(_.InfoWindow,{onCloseClick:e.onToggleOpen},l.a.createElement("div",null,l.a.createElement("img",{src:void 0==t.get("selfieImage")?"":t.get("selfieImage").url(),height:100,width:100}),l.a.createElement("br",null),l.a.createElement("br",null),"Late"===t.className&&l.a.createElement("p",null,"Terlambat"),l.a.createElement("p",null,"Absen masuk:"," ",l.a.createElement("span",{style:{color:"Late"===t.className?"red":"blue"}},A(t.get("absenMasuk"),"HH:mm:ss")))))))));class bt extends l.a.Component{constructor(e){super(e),this.scrollToMyRef=()=>window.scrollTo(0,this.lcoationRef.offsetTop),this.getCenterAverage=e=>{this.setState({loading:!0});let t=e.reduce((e,t)=>e+parseFloat(t.get("latitude")),0),a=e.reduce((e,t)=>e+parseFloat(t.get("longitude")),0);console.log(t+" "+a),this.setState({avgLat:t/e.length,avgLng:a/e.length,loading:!1})},this.toggleNavs=(e,t)=>{e.preventDefault(),this.setState({activeNav:t,chartExample1Data:"data1"===this.state.chartExample1Data?"data2":"data1"})},this.getDaftarLeader=()=>{this.setState({loading:!0});const e=new M.a.User,t=new M.a.Query(e);t.equalTo("roles","leader"),t.find({useMasterKey:!0}).then(e=>{this.setState({daftarLeader:e})}).catch(e=>{console.log(e.message)})},this.getDaftarRequest=()=>{const e=M.a.Object.extend("ChangeRequest"),t=new M.a.Query(e);t.equalTo("statusApprove",3),t.exclude("createdAt"),t.exclude("updatedAt"),t.include("userId"),t.find().then(e=>{this.setState({daftarRequest:e})}).catch(({message:e})=>{this.setState({loading:!1}),console.log(e)})},this.getDataTerlambat=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Late"),t=new M.a.Query(e),a=new Date,s=new T.a(a);s.startOf("day");const l=new T.a(s);l.add(1,"day"),t.equalTo("status",3),t.greaterThanOrEqualTo("time",s.toDate()),t.lessThan("time",l.toDate()),t.include("user"),t.find().then(e=>{e.map(e=>e.select=!1),console.log(e),this.setState({late:e})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getLeaderStaff=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Absence"),t=new M.a.Query(e),a=new Date,s=new T.a(a);s.startOf("day");const l=new T.a(s);l.add(1,"day"),t.greaterThanOrEqualTo("absenMasuk",s.toDate()),t.lessThan("absenMasuk",l.toDate()),t.include("user"),t.find().then(e=>{e.map(e=>e.select=!1),console.log(e),this.setState({dataAbsen:e})}).catch(e=>{console.log(e),this.setState({loading:!1})})},this.setCenterMaps=(e,t)=>{this.setState({avgLat:parseFloat(e),avgLng:parseFloat(t)})},this.lcoationRef=l.a.createRef(),this.state={activeNav:1,chartExample1Data:"data1",loading:!1,totalStaff:0,daftarRequest:[],daftarLeader:[],dataAbsen:[],late:[],avgLat:0,avgLng:0,defaultZoom:12},window.Chart&&Object(ae.parseOptions)(V.a,Object(ae.chartOptions)())}componentDidMount(){this.getDaftarRequest(),this.getDaftarLeader(),this.getLeaderStaff(),this.getDataTerlambat()}componentDidUpdate(e,t){t.late!==this.state.late&&(console.log(this.state.dataAbsen),this.getCenterAverage(this.state.dataAbsen.concat(this.state.late)))}render(){const e=this.state,t=e.daftarRequest,a=e.loading;e.daftarLeader;return console.log(this.state.dataAbsen.concat(this.state.late)),l.a.createElement(l.a.Fragment,null,l.a.createElement(oe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,{className:"mt-5"},l.a.createElement(P.a,{className:"mb-5 mb-xl-0",xl:"12"},l.a.createElement(Z.a,{className:"shadow mb-5",ref:this.lcoationRef},this.state.loading?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Loading map..."):0===this.state.dataAbsen.concat(this.state.late).length?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Tidak ada data absen hari ini"):l.a.createElement(Et,{userPosition:this.state.dataAbsen.concat(this.state.late),avgLat:this.state.avgLat,avgLng:this.state.avgLng,defaultZoom:this.state.defaultZoom,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyC5tj-2X6b7kwGTqGZkB7sofZdMhpyE75Q",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:"500px"},className:"map-canvas",id:"map-canvas"}),mapElement:l.a.createElement("div",{style:{height:"100%",borderRadius:"inherit"}})}))),l.a.createElement(P.a,{xl:"6",className:"mb-5"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h3",{className:"mb-0"},"Change request")),l.a.createElement("div",{className:"col text-right"},l.a.createElement(i.b,{to:"/admin/status-request"},l.a.createElement($.a,{color:"primary",size:"sm"},"See all"))))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Status"))),l.a.createElement("tbody",null,a?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):t.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found...")):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,e.get("userId").attributes.nik),l.a.createElement("td",null,e.get("userId").attributes.fullname),l.a.createElement("td",{style:{color:"".concat(3===e.attributes.statusApprove?"blue":"".concat(1===e.attributes.statusApprove?"green":"red"))}},l.a.createElement("strong",null,3===e.get("statusApprove")?"Waiting":1===e.get("statusApprove")?"Approved".toUpperCase():"Rejected".toUpperCase())))))))),l.a.createElement(P.a,{xl:"6"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h3",{className:"mb-0"},"Data absen hari ini")))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Absen masuk"))),l.a.createElement("tbody",null,a?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):this.state.dataAbsen.concat(this.state.late).length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},"No data found...")):this.state.dataAbsen.concat(this.state.late).map((e,t)=>l.a.createElement("tr",{onClick:()=>{this.setCenterMaps(e.get("latitude"),e.get("longitude")),this.setState({defaultZoom:22}),this.scrollToMyRef()}},l.a.createElement("td",null,e.get("user").attributes.nik),l.a.createElement("td",null,e.get("user").attributes.fullname),l.a.createElement("td",null,"Late"===e.className?l.a.createElement("div",null,l.a.createElement("span",{style:{color:"red"}},A(e.get("time"),"HH:mm:ss"))):A(e.get("absenMasuk"),"HH:mm:ss")))))))))))}}const ft=l.a.memo(bt);var vt=a(20),yt=a.n(vt);class St extends l.a.Component{constructor(e){super(e),this.handleFilter=e=>{e.preventDefault(),this.setState({loading:!0,exportButton:!0});const t=M.a.Object.extend("Absence"),a=new M.a.Query(t),s=this.props.match.params.id;if(4===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("day");const t=new T.a(e);t.add(1,"day"),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:s}),a.ascending("absenMasuk"),a.greaterThanOrEqualTo("absenMasuk",e.toDate()),a.lessThan("absenMasuk",t.toDate()),a.include("user"),a.find().then(e=>{console.log("user",e),this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}else if(5===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("week");const t=new T.a(e);t.add(1,"week"),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:s}),a.ascending("absenMasuk"),a.greaterThanOrEqualTo("absenMasuk",e.toDate()),a.lessThan("absenMasuk",t.toDate()),a.include("user"),a.find().then(e=>{console.log("user",e),this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}else if(6===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("month");const t=new T.a(e);t.add(1,"month"),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:s}),a.ascending("absenMasuk"),a.greaterThanOrEqualTo("absenMasuk",e.toDate()),a.lessThan("absenMasuk",t.toDate()),a.include("user"),a.find().then(e=>{console.log("user",e),this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}else if(7===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate),t=new T.a(this.state.endDate);a.equalTo("user",{__type:"Pointer",className:"_User",objectId:s}),a.ascending("absenMasuk"),a.greaterThanOrEqualTo("absenMasuk",e.toDate()),a.lessThan("absenMasuk",t.toDate()),a.include("user"),a.find().then(e=>{console.log("user",e),this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}},this.subtractHourLate=(e,t,a)=>{let s;return"Late"===a&&t>e&&(s=t-e),"Overtime"===a&&t>e&&(s=t-e),"EarlyLeave"===a&&t<e&&(s=e-t),s},this.getDaftarAbsen=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Absence"),t=(new(M.a.Object.extend("Leader")),new M.a.Query(e)),a=this.props.match.params.id,s="Data tidak ditemukan",l=new Date,n=new T.a(l);n.startOf("day");new T.a(n).add(1,"day"),t.equalTo("user",{__type:"Pointer",className:"_User",objectId:a}),t.ascending("absenMasuk"),t.exists("absenMasuk"),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("user"),t.find().then(e=>{console.log("user",e);let t=[],a=[],l=[],n=[],r=[],i=[],o=[],c=[];if(e.filter(e=>void 0!==e.get("earlyTimes")).map((e,s)=>{t.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)}),e.filter(e=>void 0!==e.get("lateTimes")).map((e,t)=>{l.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),n.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",l)}),e.filter(e=>void 0!==e.get("overtimeOut")).map((e,t)=>{r.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),i.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())}),e.map((e,t)=>{c.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),o.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())}),1===t.length){let e=t.reduce((e,t)=>e+t,0);const a=e%60,s=Math.floor(e/60);this.setState({sisaJam:s,minutesEarly:a}),console.log("reduce baru menit",a),console.log("reduce baru jam sisa",s)}else if(t.length>1){let e=t.reduce((e,t)=>e+t,0);const a=e%60,s=Math.floor(e/60);this.setState({sisaJam:s,minutesEarly:a})}else this.setState({minutesEarly:0,sisaJam:0});if(1===a.length){const e=a.reduce((e,t)=>e+t,0)+this.state.sisaJam;this.setState({jamEarly:e})}else if(a.length>1){const e=a.reduce((e,t)=>e+t,0)+this.state.sisaJam;this.setState({jamEarly:e})}else this.setState({jamEarly:0});if(console.log("late times ",n),1===l.length){let e=l.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamLate:a,minutesLate:t})}else if(l.length>1){let e=l.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamLate:a,minutesLate:t})}else this.setState({sisaJamLate:0,minutesLate:0});if(1===n.length){const e=n.reduce((e,t)=>e+t,0)+this.state.sisaJamLate;this.setState({hoursLate:e})}else if(n.length>1){const e=n.reduce((e,t)=>e+t,0)+this.state.sisaJamLate;this.setState({hoursLate:e})}else this.setState({hoursLate:0});if(1===r.length){let e=r.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamOvertime:a,minutesOvertime:t})}else if(r.length>1){let e=r.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamOvertime:a,minutesOvertime:t})}else this.setState({minutesOvertime:0,sisaJam:0});if(1===i.length){const e=i.reduce((e,t)=>e+t,0)+this.state.sisaJamOvertime;this.setState({jamOvertime:e})}else if(i.length>1){const e=i.reduce((e,t)=>e+t,0)+this.state.sisaJamOvertime;this.setState({jamOvertime:e})}else this.setState({jamOvertime:"0"});if(1===c.length){let e=c.reduce((e,t)=>parseInt(e)+parseInt(t),0);const t=Math.floor(e/60),a=e%60;this.setState({sisaJamTotalMinutes:t,minutesTotal:a})}else if(c.length>1){let e=c.reduce((e,t)=>parseInt(e)+parseInt(t),0);const t=Math.floor(e/60),a=e%60;this.setState({sisaJamTotalMinutes:t,minutesTotal:a})}else this.setState({minutesTotal:0,sisaJamTotalMinutes:0});if(1===o.length){const e=o.reduce((e,t)=>e+t,0)+this.state.sisaJamTotalMinutes;this.setState({jamTotal:e})}else if(o.length>1){const e=o.reduce((e,t)=>e+t,0)+this.state.sisaJamTotalMinutes;this.setState({jamTotal:e})}else this.setState({jamTotal:"0"});this.setState({absence:e,loading:!1,employeeName:be.a.isEmpty(e)?s:e[0].get("fullname"),employeeID:be.a.isEmpty(e)?s:e[0].get("user").attributes.nik,employeeTitle:be.a.isEmpty(e)?s:e[0].get("user").attributes.level,employeeDepartment:be.a.isEmpty(e)?s:e[0].get("user").attributes.posisi})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.state={absence:[],loading:!1,startDate:"",employeeName:"",employeeID:"",sisaJam:0,sisaJamLate:0,sisaJamOvertime:0,sisaJamTotalMinutes:0,minutesEarly:0,minutesTotal:0,jamEarly:0,minutesLate:0,hoursLate:0,minutesOvertime:0,jamOvertime:0,jamTotal:0}}componentDidMount(){this.getDaftarAbsen()}shouldComponentUpdate(e,t){return console.log(t),t.absence.length>0}render(){const e=this.state,t=e.absence,a=e.loading,s=e.startDate,n=e.endDate;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Reporting"),l.a.createElement(d.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",required:!0,onChange:e=>{this.setState({status:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6,7].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"".concat(7===parseInt(this.state.status)?"Set start date":"Set tanggal"),required:!0,readOnly:!0},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:s,onChange:e=>{this.setState({startDate:e.toDate()})}})))),7===parseInt(this.state.status)?l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Set end date",required:!0,readOnly:!0},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:n,onChange:e=>{this.setState({endDate:e.toDate()})}})))):"",l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement($.a,{className:"my-4",color:"primary",type:"submit",disabled:a},a?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),this.state.exportButton&!this.state.loading?l.a.createElement(lt.a,{id:"eskport",className:"btn btn-primary",table:"ekspor",filename:this.state.employeeName,sheet:"Absensi",buttonText:" Ekspor Excel",multipleTables:["ekspor","ekspor1"]}):""),l.a.createElement(ee.a,{className:"align-items-center table-flush",id:"ekspor",responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Fingerprint ID"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeID))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Name"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeName))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Title"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeTitle))),l.a.createElement("thead",{className:"border-0 mb-2"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Department Title"),l.a.createElement("th",{scope:"col",className:"mb-2",style:{border:"none"}},this.state.employeeDepartment))),l.a.createElement("thead",{className:"thead-light",style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",rowSpan:"2"},"Day"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Date"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Working Hour"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty On"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty Off"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Late In"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Early Derparture"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Over Time"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Total Hour"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Notes")),l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"))),l.a.createElement("tbody",{style:{textAlign:"center"}},a?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):t.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:14,style:{textAlign:"center"}},"No data found...")):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,A(e.get("absenMasuk"),"ddd")),l.a.createElement("td",null,A(e.get("createdAt"),"DD/MM/YYYY")),l.a.createElement("td",null,"".concat(e.get("user").attributes.jamMasuk<10?"0":"").concat(e.get("user").attributes.jamMasuk,":00")+" - "+"".concat(e.get("user").attributes.jamKeluar,":00")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"k"):void 0!==e.get("absenMasuk")?A(e.get("absenMasuk"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"m"):void 0!==e.get("absenMasuk")?A(e.get("absenMasuk"),"m"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"k"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"m"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"m"):""),l.a.createElement("td",{className:"lateInHours"},void 0===e.get("lateTimes")?"":T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),l.a.createElement("td",null,void 0===e.get("lateTimes")?"":T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("earlyTimes")?"":T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",{className:"earlyminutes"},void 0===e.get("earlyTimes")?"":T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("absenKeluar")?"":void 0!==e.get("overtimeOut")?T.a.duration(A(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours():""),l.a.createElement("td",null,void 0===e.get("absenKeluar")?"":void 0!==e.get("overtimeOut")?T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes():""),l.a.createElement("td",null,void 0===e.get("absenKeluar")?0:T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",null,T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0!==e.get("overtimeIn")?"Working Overtime":"Working Hour"))),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"7"},"Total"),l.a.createElement("td",null,this.state.hoursLate),l.a.createElement("td",null,this.state.minutesLate),l.a.createElement("td",null,this.state.jamEarly),l.a.createElement("td",null,this.state.minutesEarly),l.a.createElement("td",null,this.state.jamOvertime.toString()),l.a.createElement("td",null,this.state.minutesOvertime.toString()),l.a.createElement("td",null,this.state.jamTotal),l.a.createElement("td",null,this.state.minutesTotal),l.a.createElement("td",null)))))))))}}const kt=l.a.memo(St);class wt extends l.a.Component{constructor(e){super(e),this.getData=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("HariCuti"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({data:e,loading:!1})}).catch(e=>{console.log(e.message),this.setState({loading:!1,message:"Gagal memuat data",visible:!0})})},this.handleAdd=e=>{e.preventDefault();const t=this.state.hariCuti;this.setState({loadingModal:!0});const a=new(M.a.Object.extend("HariCuti"));a.set("hariCuti",T()(t).add(10,"h").toDate()),a.save().then(e=>{this.setState({addMode:!1,loadingModal:!1,data:this.state.data.concat(e)})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal tambah data, coba lagi",visible:!0})})},this.getDetail=(e,t)=>{e.preventDefault();const a=M.a.Object.extend("HariCuti");new M.a.Query(a).get(t).then(({attributes:e})=>{this.setState({hariCuti:e.hariCuti,editMode:!0})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.handleUpdate=e=>{e.preventDefault();const t=this.state.hariCuti;this.setState({loadingModal:!0});const a=M.a.Object.extend("HariCuti");new M.a.Query(a).get(this.state.userId).then(e=>{e.set("hariCuti",t),e.save().then(e=>{this.setState({editMode:!1,loadingModal:!1})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal update data, coba lagi",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingMModal:!1,message:"Gagal update data, coba lagi",visible:!0})})},this.handleRemove=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=M.a.Object.extend("HariCuti");new M.a.Query(t).get(this.state.userId).then(e=>{e.set("status",0),e.save().then(e=>{let t=[...this.state.data];t.splice(this.state.userIndex,1),this.setState({deleteMode:!1,loadingModal:!1,point:t})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})}).catch(e=>{console.log(e.message),this.setState({loadingModal:!1,message:"Gagal hapus data, coba lagi",visible:!0})})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.state={data:[],hariCuti:null,detail:{},loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],addMode:!1,editMode:!1,deleteMode:!1,deleteCounter:0,latitude:0,longitude:0,message:"",color:"danger",visible:!1}}componentDidMount(){this.getData()}render(){const e=this.state,t=e.data,a=e.loading,s=e.addMode,n=e.editMode,r=e.loadingModal,i=e.fullnames,o=(e.detail,e.deleteMode);e.approveAllMode,e.rejectAllMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,null,l.a.createElement($.a,{className:"ml-2",color:"primary","data-dismiss":"modal",type:"button",onClick:()=>this.setState({addMode:!0})},l.a.createElement("i",{className:"fa fa-plus"})," Tambah")),l.a.createElement(re,{color:this.state.color,message:this.state.message,open:this.state.visible,togglez:()=>this.toggle("visible")})),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"No"),l.a.createElement("th",{scope:"col"},"Hari Cuti"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,t+1),l.a.createElement("td",null,A(e.get("hariCuti"),"DD/MM/YYYY")),l.a.createElement("td",null,l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:a=>{this.setState({userId:e.id,userIndex:t}),this.getDetail(a,e.id)}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Ubah data"),l.a.createElement($.a,{id:"t2",className:"btn-circle btn-danger",onClick:a=>{this.setState({deleteMode:!0,userId:e.id,userIndex:t,fullnames:e.get("placeName")})}},l.a.createElement("i",{className:"fa fa-trash"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t2"},"Hapus data")))))))))),l.a.createElement(xe,{show:s,loading:r,footer:!1,handleHide:()=>this.toggle("addMode"),title:"Tambah Daftar Hari Cuti",body:l.a.createElement("div",null,l.a.createElement(d.a,{onSubmit:e=>this.handleAdd(e)},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Set Hari Cuti"),l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Set hari cuti disini"},timeFormat:!1,dateFormat:"DD/MM/YYYY",value:this.state.hariCuti,onChange:e=>{this.setState({hariCuti:e.toDate()}),console.log(e.toDate())}}))),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleAdd(e)}),l.a.createElement(xe,{show:n,loading:r,footer:!1,handleHide:()=>this.toggle("editMode"),title:"Edit Hari Cuti",body:l.a.createElement("div",null,l.a.createElement(d.a,{onSubmit:e=>this.handleUpdate(e)},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Set hari cuti"),l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Set hari cuti disini"},timeFormat:!1,dateFormat:"DD/MM/YYYY",value:this.state.hariCuti,onChange:e=>{this.setState({hariCuti:e.toDate()}),console.log(e.toDate())}}))),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("editMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleUpdate(e)}),l.a.createElement(xe,{show:o,loading:r,footer:!0,handleHide:()=>this.toggle("deleteMode"),title:"Remove Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Remove absen point ".concat(i," ?"))),handleSubmit:e=>this.handleRemove(e)}))}}var Mt=wt;class It extends l.a.Component{constructor(e){super(e),this.handleFilter=e=>{e.preventDefault(),this.setState({loading:!0});const t=M.a.Object.extend("Absence"),a=(new(M.a.Object.extend("Leader")),new M.a.Query(t));if(4===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("day");const t=new T.a(e);t.add(1,"day"),a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),a.ascending("absenMasuk"),a.greaterThanOrEqualTo("createdAt",e.toDate()),a.lessThan("createdAt",t.toDate()),a.include("user"),a.find().then(e=>{console.log("user",e),this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}else if(5===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("week");const t=new T.a(e);t.add(1,"week"),a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),a.ascending("absenMasuk"),a.greaterThanOrEqualTo("createdAt",e.toDate()),a.lessThan("createdAt",t.toDate()),a.include("user"),a.find().then(e=>{console.log("user",e),this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}else if(6===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("month");const t=new T.a(e);t.add(1,"month"),a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),a.ascending("absenMasuk"),a.greaterThanOrEqualTo("createdAt",e.toDate()),a.lessThan("createdAt",t.toDate()),a.include("user"),a.find().then(e=>{console.log("user",e),this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}},this.subtractHourLate=(e,t,a)=>{let s;return"Late"===a&&t>e&&(s=t-e),"Overtime"===a&&t>e&&(s=t-e),"EarlyLeave"===a&&t<e&&(s=e-t),s},this.getDaftarAbsen=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Absence"),t=(new(M.a.Object.extend("Leader")),new M.a.Query(e)),a=(this.props.match.params.id,"Data tidak ditemukan"),s=new Date,l=new T.a(s);l.startOf("day");const n=new T.a(l);n.add(1,"day"),t.ascending("absenMasuk"),t.greaterThanOrEqualTo("absenMasuk",l.toDate()),t.lessThan("absenMasuk",n.toDate()),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("user"),t.find().then(e=>{console.log("user",e),this.setState({absence:e,loading:!1,employeeName:be.a.isEmpty(e)?a:e[0].get("fullname"),employeeID:be.a.isEmpty(e)?a:e[0].get("user").attributes.nik,employeeTitle:be.a.isEmpty(e)?a:e[0].get("user").attributes.level,employeeDepartment:be.a.isEmpty(e)?a:e[0].get("user").attributes.posisi})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.state={absence:[],loading:!1,startDate:"",employeeName:"",employeeID:""}}componentDidMount(){this.getDaftarAbsen()}shouldComponentUpdate(e,t){return console.log(t),t.absence.length>0}render(){const e=this.state,t=e.absence,a=e.loading,s=e.startDate;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Reporting"),l.a.createElement(d.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",required:!0,onChange:e=>{this.setState({status:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Date Picker Here",required:!0,readOnly:!0},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:s,onChange:e=>{this.setState({startDate:e.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement($.a,{className:"my-4",color:"primary",type:"submit",disabled:a},a?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),l.a.createElement(lt.a,{id:"eskport",className:"btn btn-primary",table:"ekspor",filename:"Absensi",sheet:"Absensi",buttonText:"Ekspor Excel"})),l.a.createElement(ee.a,{className:"align-items-center table-flush",id:"ekspor",responsive:!0},l.a.createElement("thead",{className:"thead-light",style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",rowSpan:"2"},"Name"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Day"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Date"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Working Hour"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty On"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty Off"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Late In"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Early Derparture"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Over Time"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Total Hour"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Notes")),l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"))),l.a.createElement("tbody",{style:{textAlign:"center"}},a?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):t.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:14,style:{textAlign:"center"}},"No data found...")):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",{style:{textAlign:"start"}},e.get("fullname")),l.a.createElement("td",null,A(e.get("absenMasuk"),"ddd")),l.a.createElement("td",null,A(e.get("absenMasuk"),"DD/MM/YYYY")),l.a.createElement("td",null,"".concat(e.get("user").attributes.jamMasuk<10?"0":"").concat(e.get("user").attributes.jamMasuk,":00")+" - "+"".concat(e.get("user").attributes.jamKeluar,":00")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"k"):A(e.get("absenMasuk"),"k")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"m"):A(e.get("absenMasuk"),"m")),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"k"):A(e.get("absenKeluar"),"k")),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"m"):A(e.get("absenKeluar"),"m")),l.a.createElement("td",null,void 0===e.get("lateTimes")?"":this.subtractHourLate(e.get("user").attributes.jamMasuk,A(e.get("lateTimes"),"k"),"Late")),l.a.createElement("td",null,void 0===e.get("lateTimes")?"":this.subtractHourLate(0,A(e.get("lateTimes"),"m"),"Late")),l.a.createElement("td",null,void 0===e.get("earlyTimes")?"":this.subtractHourLate(e.get("user").attributes.jamKeluar,A(e.get("earlyTimes"),"k"),"EarlyLeave")),l.a.createElement("td",null,void 0===e.get("earlyTimes")?"":this.subtractHourLate(0,A(e.get("earlyTimes"),"m"),"EarlyLeave")),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null,"Working OverTime"))),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"7"},"Total"),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null)))))))))}}const Tt=l.a.memo(It);class Nt extends l.a.Component{constructor(e){super(e),this.getPosisi=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("Position"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{this.setState({daftarPosisi:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getData=(e=1)=>{this.setState({loadingFilter:!0});const t=this.state,a=t.searchBy,s=t.searchValue,l=this.state,n=l.resPerPage,r=(l.page,new M.a.User),i=new M.a.Query(r);switch(i.notContainedIn("roles",["admin","leader","Admin","Leader"]),i.skip(n*e-n),i.limit(n),i.withCount(),a){case"all":i.find({useMasterKey:!0}).then(e=>{e.results.map(e=>e.select=!1),this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"name":i.matches("fullname",s,"i"),i.find({useMasterKey:!0}).then(e=>{e.results.map(e=>e.select=!1),this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"nik":i.equalTo("nik",s),i.find({useMasterKey:!0}).then(e=>{e.results.map(e=>e.select=!1),this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"divisi":i.matches("posisi",s,"i"),i.find({useMasterKey:!0}).then(e=>{e.results.map(e=>e.select=!1),this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"leader":const e=new M.a.User,t=new M.a.Query(e);t.matches("fullname",s,"i"),i.matchesQuery("leaderIdNew",t),i.find({useMasterKey:!0}).then(e=>{e.results.map(e=>e.select=!1),this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")})}},this.closeLoading=()=>{this.setState({loadingModal:!1})},this.handleChildCheck=e=>{let t=this.state.daftarStaff;const a=this.state,s=a.checkId,l=a.fileData;let n=e.target.value;t.map((t,a)=>{if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)this.setState(e=>({checkId:[...this.state.checkId,n],fileData:[...this.state.fileData,{fileName:t.get("fullname"),tableId:"ekspor".concat(a)}]}),()=>{console.log(this.state.checkId),console.log(this.state.fileData)});else{const e=s.indexOf(n),a=l.map(e=>e.fileName).indexOf(t.get("fullname"));(e>-1||a>-1)&&(s.splice(e,1),l.splice(a,1),this.setState(e=>({checkId:s,fileData:l}),()=>{console.log(this.state.checkId),console.log(this.state.fileData)}))}}),this.setState({daftarStaff:t})},this.handleAllCheck=e=>{let t=this.state.daftarStaff,a=[],s=[];t.map((t,l)=>(t.select=e.target.checked,t.select?(a.push(t.id),s.push({fileName:t.get("fullname"),tableId:"ekspor".concat(l)})):(a=[],s=[]),t)),this.setState({daftarStaff:t,checkId:a,fileData:s},()=>console.log(this.state.checkId))},this.handleApproval=(e,t)=>{e.preventDefault(),this.setState({loadingModal:!0});const a=M.a.Object.extend("Izin");new M.a.Query(a).get(this.state.userId).then(e=>{e.set("status",t?1:0),t||e.set("alasanReject",this.state.reason),e.save().then(()=>{let e=[...this.state.izin];e.splice(this.state.userIndex,1),this.setState({counter:this.state.counter+1,izin:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1}),alert("Berhasil ".concat(t?"approve":"reject"))}).catch(e=>{alert(e.message),this.closeLoading()})}).catch(e=>{alert(e.message),this.closeLoading()})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.handleFilter=(e,t=1)=>{e.preventDefault(),this.setState({loadingFilter:!0});const a=this.state,s=a.searchBy,l=a.searchValue,n=this.state,r=n.resPerPage,i=(n.page,new M.a.User),o=new M.a.Query(i);switch(o.notContainedIn("roles",["admin","leader","Admin","Leader"]),o.skip(r*t-r),o.limit(r),o.withCount(),s){case"all":o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"name":o.matches("fullname",l,"i"),o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"nik":o.equalTo("nik",l),o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"divisi":o.matches("posisi",l,"i"),o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"leader":const e=new M.a.User,t=new M.a.Query(e);t.matches("fullname",l,"i"),o.matchesQuery("leaderIdNew",t),o.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")})}},this.queryAbsen=(e,t,a,s)=>{const l=M.a.Object.extend("Absence"),n=new M.a.Query(l),r=(new Date,this.state.checkId),i="DATA TIDAK DITEMUKAN";let o,c;a?(o=new T.a(this.state.startDate),c=new T.a(this.state.endDate)):(o=new T.a(this.state.startDate),o.startOf(e),c=new T.a(o),c.add(1,e)),n.equalTo("user",{__type:"Pointer",className:"_User",objectId:t}),n.ascending("absenMasuk"),n.greaterThanOrEqualTo("absenMasuk",o.toDate()),n.lessThan("absenMasuk",c.toDate()),n.include("user"),n.find().then(e=>{console.log("user",e);let t=[],a=[],l=[],n=[],o=[],c=[],m=[],d=[];e.filter(e=>void 0!==e.get("earlyTimes")).map((e,s)=>{t.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)}),e.filter(e=>void 0!==e.get("lateTimes")).map((e,t)=>{l.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),n.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",l)}),e.filter(e=>void 0!==e.get("overtimeOut")).map((e,t)=>{o.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),c.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())}),console.log("overtime hours",c),e.map((e,t)=>{d.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),m.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())}),console.log("total menit",d),console.log("total jam",m),console.log(l),console.log(n),console.log(o),console.log(c);let u=a.reduce((e,t)=>e+t,0);console.log("total overtime",u);let h=m.reduce((e,t)=>e+t),g=d.reduce((e,t)=>parseInt(e)+parseInt(t));if(console.log(h+Math.floor(g/60)),console.log(g%60),1===t.length){let e=t.reduce((e,t)=>e+t,0);const a=[...this.state.sisaJam];a.splice(s,0,Math.floor(e/60));const l=[...this.state.minutesEarly];l.splice(s,0,e%60),this.setState({sisaJam:a,minutesEarly:l})}else if(t.length>1){let e=t.reduce((e,t)=>e+t,0);const a=[...this.state.sisaJam];a.splice(s,0,Math.floor(e/60));const l=[...this.state.minutesEarly];l.splice(s,0,e%60),this.setState({sisaJam:a,minutesEarly:l})}else this.setState({minutesEarly:0,sisaJam:0});if(1===a.length){let e=a.reduce((e,t)=>e+t,0),t=[...this.state.jamEarly];t.splice(s,0,e+this.state.sisaJam[s]),this.setState({jamEarly:t})}else if(a.length>1){let e=a.reduce((e,t)=>e+t,0);const t=[...this.state.jamEarly];t.splice(s,0,e+this.state.sisaJam[s]),this.setState({jamEarly:t})}else this.setState({jamEarly:0});if(console.log("late times ",n),1===l.length){let e=l.reduce((e,t)=>e+t,0);const t=[...this.state.sisaJamLate];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesLate];a.splice(s,0,e%60),this.setState({sisaJamLate:t,minutesLate:a})}else if(l.length>1){let e=l.reduce((e,t)=>e+t,0);const t=[...this.state.sisaJamLate];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesLate];a.splice(s,0,e%60),this.setState({sisaJamLate:t,minutesLate:a})}else this.setState({sisaJamLate:0,minutesLate:0});if(1===n.length){let e=n.reduce((e,t)=>e+t,0);const t=[...this.state.hoursLate];t.splice(s,0,e+this.state.sisaJamLate[s]),this.setState({hoursLate:t})}else if(n.length>1){let e=n.reduce((e,t)=>e+t,0);const t=[...this.state.hoursLate];t.splice(s,0,e+this.state.sisaJamLate[s]),this.setState({hoursLate:t})}else this.setState({hoursLate:0});if(console.log(o),1===o.length){let e=o.reduce((e,t)=>e+t,0);const t=[...this.state.sisaJamOvertime];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesOvertime];a.splice(s,0,e%60),this.setState({sisaJamOvertime:t,minutesOvertime:a},()=>console.log(this.state.minutesOvertime))}else if(o.length>1){let e=o.reduce((e,t)=>e+t,0);const t=[...this.state.sisaJamOvertime];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesOvertime];a.splice(s,0,e%60),this.setState({sisaJamOvertime:t,minutesOvertime:a},()=>console.log(this.state.minutesOvertime))}else 0===o.length&&this.setState({minutesOvertime:"0",sisaJam:"0"});if(1===c.length){let e=c.reduce((e,t)=>e+t,0);const t=[...this.state.jamOvertime];t.splice(s,0,e+this.state.sisaJamOvertime[s]),this.setState({jamOvertime:t})}else if(c.length>1){let e=c.reduce((e,t)=>e+t,0);const t=[...this.state.jamOvertime];t.splice(s,0,e+this.state.sisaJamOvertime[s]),this.setState({jamOvertime:t})}else 0===c.length&&this.setState({jamOvertime:this.state.jamOvertime.concat("0")});if(1===d.length){m.reduce((e,t)=>e+t,0);let e=d.reduce((e,t)=>parseInt(e)+parseInt(t),0);const t=[...this.state.sisaJamTotalMinutes];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesTotal];a.splice(s,0,e%60),this.setState({sisaJamTotalMinutes:t,minutesTotal:a},()=>{console.log("sisa jam",this.state.sisaJamTotalMinutes),console.log("menit total",this.state.minutesTotal)}),console.log("total minutes",d),console.log("total minutes2",this.state.minutesTotal)}if(d.length>1){let e=d.reduce((e,t)=>parseInt(e)+parseInt(t),0);const t=[...this.state.sisaJamTotalMinutes];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesTotal];a.splice(s,0,e%60),this.setState({sisaJamTotalMinutes:t,minutesTotal:a},()=>{console.log("sisa jam",this.state.sisaJamTotalMinutes),console.log("menit total",this.state.minutesTotal)})}else this.setState({minutesTotal:this.state.minutesTotal.concat("0"),sisaJamTotalMinutes:this.state.sisaJamTotalMinutes.concat("0")});if(1===m.length){console.log(m);let e=m.reduce((e,t)=>e+t,0);const t=[...this.state.jamTotal];t.splice(s,0,e+this.state.sisaJamTotalMinutes[s]),this.setState({jamTotal:t}),console.log("jam total 1",this.state.jamTotal)}if(m.length>1){console.log(m);let e=m.reduce((e,t)=>e+t,0);const t=[...this.state.jamTotal];t.splice(s,0,e+this.state.sisaJamTotalMinutes[s]),this.setState({jamTotal:t})}else this.setState({jamTotal:0});let p=[...this.state.absence];p.splice(s,0,e);let E=[...this.state.tableData];E.splice(s,0,{fileName:be.a.isEmpty(e[0])?this.state.fileData[s].fileName:e[0].get("fullname"),tableId:"ekspor".concat(s)}),this.setState({absence:p,tableData:E,employeeName:be.a.isEmpty(e)?this.state.employeeName.concat(i):this.state.employeeName.concat(e[0].get("fullname")),employeeID:be.a.isEmpty(e)?this.state.employeeID.concat(i):this.state.employeeID.concat(e[0].get("user").attributes.nik),employeeTitle:be.a.isEmpty(e)?this.state.employeeTitle.concat(i):this.state.employeeTitle.concat(e[0].get("user").attributes.level),employeeDepartment:be.a.isEmpty(e)?this.state.employeeDepartment.concat(i):this.state.employeeDepartment.concat(e[0].get("user").attributes.posisi)}),console.log(!0),(s+=1)===r.length&&this.setState({loading:!1})}).catch(e=>(console.log(e.message),this.setState({loading:!1}),!1))},this.getDataAbsen=e=>{e.preventDefault(),this.setState({loading:!0}),this.setState({absence:[],tableData:[],tableData:[],sisaJam:[],sisaJamLate:[],sisaJamOvertime:[],sisaJamTotalMinutes:[],minutesEarly:[],minutesTotal:[],jamEarly:[],minutesLate:[],hoursLate:[],minutesOvertime:[],jamOvertime:[],jamTotal:[]});const t=this.state.checkId,a="DATA TIDAK DITEMUKAN";let s=0;if(4===parseInt(this.state.status))t.map(e=>{this.queryAbsen("day",e,!1,s)});else if(5===parseInt(this.state.status))t.map(e=>{this.queryAbsen("week",e,!1,s)});else if(6===parseInt(this.state.status)){let e=[],l=[],n=[];t.map(r=>{const i=M.a.Object.extend("Absence"),o=new M.a.Query(i);new Date;let c,m;c=new T.a(this.state.startDate),c.startOf("month"),m=new T.a(c),m.add(1,"month"),o.equalTo("user",{__type:"Pointer",className:"_User",objectId:r}),o.ascending("absenMasuk"),o.greaterThanOrEqualTo("absenMasuk",c.toDate()),o.lessThan("absenMasuk",m.toDate()),o.include("user"),o.find().then(r=>{console.log("user",r);let i=[],o=[],c=[],m=[],d=[],u=[],h=[],g=[];r.filter(e=>void 0!==e.get("earlyTimes")).map((e,t)=>{i.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),o.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",i)}),r.filter(e=>void 0!==e.get("lateTimes")).map((e,t)=>{c.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),m.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",c)}),r.filter(e=>void 0!==e.get("overtimeOut")).map((e,t)=>{d.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),u.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())}),r.map((e,t)=>{g.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),h.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())}),console.log("total menit",g),console.log("total jam",h),console.log(c),console.log(m),console.log(d),console.log(u);let p=o.reduce((e,t)=>e+t,0);console.log("total overtime",p);let E=h.reduce((e,t)=>e+t),b=g.reduce((e,t)=>parseInt(e)+parseInt(t));if(console.log(E+Math.floor(b/60)),console.log(b%60),1===i.length){let e=i.reduce((e,t)=>e+t,0);const t=[...this.state.sisaJam];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesEarly];a.splice(s,0,e%60),this.setState({sisaJam:t,minutesEarly:a})}else if(i.length>1){let e=i.reduce((e,t)=>e+t,0);const t=[...this.state.sisaJam];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesEarly];a.splice(s,0,e%60),this.setState({sisaJam:t,minutesEarly:a})}else this.setState({minutesEarly:0,sisaJam:0});if(1===o.length){let e=o.reduce((e,t)=>e+t,0),t=[...this.state.jamEarly];t.splice(s,0,e+this.state.sisaJam[s]),this.setState({jamEarly:t})}else if(o.length>1){let e=o.reduce((e,t)=>e+t,0);const t=[...this.state.jamEarly];t.splice(s,0,e+this.state.sisaJam[s]),this.setState({jamEarly:t})}else this.setState({jamEarly:0});if(console.log("late times ",m),1===c.length){let e=c.reduce((e,t)=>e+t,0);const t=[...this.state.sisaJamLate];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesLate];a.splice(s,0,e%60),this.setState({sisaJamLate:t,minutesLate:a})}else if(c.length>1){let e=c.reduce((e,t)=>e+t,0);const t=[...this.state.sisaJamLate];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesLate];a.splice(s,0,e%60),this.setState({sisaJamLate:t,minutesLate:a})}else this.setState({sisaJamLate:0,minutesLate:0});if(1===m.length){let e=m.reduce((e,t)=>e+t,0);const t=[...this.state.hoursLate];t.splice(s,0,e+this.state.sisaJamLate[s]),this.setState({hoursLate:t})}else if(m.length>1){let e=m.reduce((e,t)=>e+t,0);const t=[...this.state.hoursLate];t.splice(s,0,e+this.state.sisaJamLate[s]),this.setState({hoursLate:t})}else this.setState({hoursLate:0});if(console.log(d),1===d.length){let e=d.reduce((e,t)=>e+t,0);const t=[...this.state.sisaJamOvertime];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesOvertime];a.splice(s,0,e%60),this.setState({sisaJamOvertime:t,minutesOvertime:a},()=>console.log(this.state.minutesOvertime))}else if(d.length>1){let e=d.reduce((e,t)=>e+t,0);const t=[...this.state.sisaJamOvertime];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesOvertime];a.splice(s,0,e%60),this.setState({sisaJamOvertime:t,minutesOvertime:a},()=>console.log(this.state.minutesOvertime))}else 0===d.length&&this.setState({minutesOvertime:this.state.minutesOvertime.concat("0"),sisaJam:this.state.sisaJam.concat(0)});if(1===u.length){let e=u.reduce((e,t)=>e+t,0);const t=[...this.state.jamOvertime];t.splice(s,0,e+this.state.sisaJamOvertime[s]),this.setState({jamOvertime:t})}else if(u.length>1){let e=u.reduce((e,t)=>e+t,0);const t=[...this.state.jamOvertime];t.splice(s,0,e+this.state.sisaJamOvertime[s]),this.setState({jamOvertime:t})}else 0===u.length&&this.setState({jamOvertime:this.state.jamOvertime.concat("0")});if(1===g.length){h.reduce((e,t)=>e+t,0);let t=g.reduce((e,t)=>parseInt(e)+parseInt(t),0);[...this.state.sisaJamTotalMinutes].splice(s,0,Math.floor(t/60)),e.push(Math.floor(t/60));[...this.state.minutesTotal].splice(s,0,t%60),n.splice(s,0,t%60),this.setState({sisaJamTotalMinutes:e,minutesTotal:n},()=>{console.log("sisa jam",this.state.sisaJamTotalMinutes),console.log("menit total",this.state.minutesTotal)}),console.log("total minutes",g),console.log("total data",s),console.log("sisa jam",this.state.sisaJamTotalMinutes),console.log("sisa jam 2",e),console.log("total minutes2",this.state.minutesTotal[s])}if(g.length>1){let t=g.reduce((e,t)=>parseInt(e)+parseInt(t),0);[...this.state.sisaJamTotalMinutes].splice(s,0,Math.floor(t/60)),e.push(Math.floor(t/60));[...this.state.minutesTotal].splice(s,0,t%60),n.splice(s,0,t%60),this.setState({sisaJamTotalMinutes:e,minutesTotal:n},()=>{console.log("sisa jam",this.state.sisaJamTotalMinutes),console.log("menit total",this.state.minutesTotal)})}else this.setState({minutesTotal:this.state.minutesTotal.concat("0"),sisaJamTotalMinutes:this.state.sisaJamTotalMinutes.concat("0")});if(1===h.length){console.log(h),console.log("sisa jam",this.state.sisaJamTotalMinutes[s]),console.log("sisa jam 2",e[s]);let t=h.reduce((e,t)=>e+t);[...this.state.jamTotal].splice(s,0,t+e[s]),l.splice(s,0,t+e[s]),this.setState({jamTotal:l})}if(h.length>1){console.log(h),console.log("sisa jam 2",e[s]);let t=h.reduce((e,t)=>e+t,0);[...this.state.jamTotal].splice(s,0,t+e[s]),l.splice(s,0,t+e[s]),this.setState({jamTotal:l})}else 0===h.length&&this.setState({jamTotal:0});let f=[...this.state.absence];f.splice(s,0,r);let v=[...this.state.tableData];v.splice(s,0,{fileName:be.a.isEmpty(r[0])?this.state.fileData[s].fileName:r[0].get("fullname"),tableId:"ekspor".concat(s)}),this.setState({absence:f,tableData:v,employeeName:be.a.isEmpty(r)?this.state.employeeName.concat(a):this.state.employeeName.concat(r[0].get("fullname")),employeeID:be.a.isEmpty(r)?this.state.employeeID.concat(a):this.state.employeeID.concat(r[0].get("user").attributes.nik),employeeTitle:be.a.isEmpty(r)?this.state.employeeTitle.concat(a):this.state.employeeTitle.concat(r[0].get("user").attributes.level),employeeDepartment:be.a.isEmpty(r)?this.state.employeeDepartment.concat(a):this.state.employeeDepartment.concat(r[0].get("user").attributes.posisi),jamTotal:l,minutesTotal:n}),console.log(!0),s+=1,s===t.length&&this.setState({loading:!1})}).catch(e=>(console.log(e.message),this.setState({loading:!1}),!1))})}else 7===parseInt(this.state.status)&&t.map(e=>{this.queryAbsen("range",e,!0,s)})},this.subtractHourLate=(e,t,a)=>{let s;return"Late"===a&&t>e&&(s=t-e),"Overtime"===a&&t>e&&(s=t-e),"EarlyLeave"===a&&t<e&&(s=e-t),s},this.rejectChecked=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=this.state.checkId;let a=0;t.map(e=>{const s=M.a.Object.extend("Izin");new M.a.Query(s).get(e).then(e=>{e.set("status",1),e.set("alasanReject",this.state.reason),e.save().then(()=>{if(a+=1,a===t.length)return alert("Berhasil reject"),window.location.reload(!1)})})})},this.state={daftarStaff:[],absence:[],tableData:[],fileData:[],daftarLevel:[],daftarPosisi:[],searchBy:"all",searchValue:"",excelMode:!1,loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],approveAllMode:!1,rejectAllMode:!1,deleteCounter:0,searchBy:"all",searchValue:"",resPerPage:20,page:1,totalData:0,employeeName:[],employeeID:[],employeeDepartment:[],employeeTitle:[],sisaJam:[],sisaJamLate:[],sisaJamOvertime:[],sisaJamTotalMinutes:[],minutesEarly:[],minutesTotal:[],jamEarly:[],minutesLate:[],hoursLate:[],minutesOvertime:[],jamOvertime:[],jamTotal:[]}}componentDidMount(){this.getData(),this.getPosisi()}render(){const e=this.state,t=e.daftarStaff,a=e.daftarLevel,s=(e.daftarPosisi,e.loading),n=e.approvalMode,r=e.rejectMode,i=e.loadingModal,o=e.fullnames,m=e.counter,b=e.approveAllMode,f=e.rejectAllMode,v=l.a.createElement(u.a,{controlId:"formlvl"},l.a.createElement(E.a,{className:"form-control-alternative",type:"select",required:!0,onChange:e=>this.setState({searchValue:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih ",this.state.searchBy),"leader"===this.state.searchBy?a.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("level")},e.get("level"))):this.state.daftarPosisi.map((e,t)=>l.a.createElement("option",{key:t,value:e.get("position")},e.get("position"))))),y=l.a.createElement(u.a,null,l.a.createElement(E.a,{type:"text",className:"form-control-alternative",disabled:"all"===this.state.searchBy,placeholder:"all"===this.state.searchBy?"":"Masukkan ".concat(this.state.searchBy),onChange:e=>this.setState({searchValue:e.target.value})}));return console.log(this.state.jamTotal),l.a.createElement(l.a.Fragment,null,l.a.createElement(oe,{izin:m}),l.a.createElement(c.a,{className:"mt--7",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-2"},"Export data karyawan"),l.a.createElement(d.a,{onSubmit:this.handleFilter,className:!0},l.a.createElement(q.a,null,l.a.createElement(P.a,{lg:2},"Search by"),l.a.createElement(P.a,{lg:2},l.a.createElement(u.a,{controlId:"formHorizontalEmails"},l.a.createElement(E.a,{className:"form-control-alternative",type:"select",onChange:e=>this.setState({searchBy:e.target.value,searchValue:""})},["all","nik","name","leader","divisi"].map(e=>l.a.createElement("option",{value:e},e))))),l.a.createElement(P.a,{lg:4},"level"==this.state.searchBy||"divisi"==this.state.searchBy?v:y),l.a.createElement(P.a,{sm:2},l.a.createElement($.a,{color:"primary",type:"submit",disable:this.state.loadingFilter?"true":"false"},l.a.createElement("i",{className:"fa fa-search"})," ",this.state.loadingFilter?"Fetching...":"Search")))),0===t.length||0===this.state.checkId.length?"":l.a.createElement(P.a,{sm:{span:0},className:"float-none"},l.a.createElement($.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:s?"true":"false",onClick:()=>this.setState({excelMode:!0})},l.a.createElement("i",{className:"ni ni-single-copy-04"})," Export to excel"))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0,id:"ekspor"},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck})),l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Level"),l.a.createElement("th",{scope:"col"},"Divisi"))),l.a.createElement("tbody",null,s?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",value:e.id,checked:e.select,onChange:this.handleChildCheck})),l.a.createElement("td",null,e.get("nik")),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,e.get("level")),l.a.createElement("td",null,e.get("posisi"))))))),l.a.createElement(Z.a,null,this.state.absence.map((e,t)=>l.a.createElement(ee.a,{responsive:!0,className:"mt-4",id:"ekspor".concat(t),hidden:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Fingerprint ID"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeID[t]))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Name"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeName[t]))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Title"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeTitle[t]))),l.a.createElement("thead",{className:"border-0 mb-2"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Department Title"),l.a.createElement("th",{scope:"col",className:"mb-2",style:{border:"none"}},this.state.employeeDepartment[t]))),l.a.createElement("thead",{className:"thead-light",style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",rowSpan:"2"},"Day"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Date"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Working Hour"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Duty On"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Duty Off"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Late In"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Early Departure"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Over Time"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Total Hour"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Notes")),l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"))),l.a.createElement("tbody",null,e.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:14,style:{textAlign:"center"}},"Data absen tidak ditemukan")):e.map(e=>l.a.createElement("tr",null,l.a.createElement("td",null,A(e.get("absenMasuk"),"ddd")),l.a.createElement("td",null,A(e.get("createdAt"),"DD/MM/YYYY")),l.a.createElement("td",null,"".concat(e.get("user").attributes.jamMasuk<10?"0":"").concat(e.get("user").attributes.jamMasuk,":00")+" - "+"".concat(e.get("user").attributes.jamKeluar,":00")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"k"):void 0!==e.get("absenMasuk")?A(e.get("absenMasuk"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"m"):void 0!==e.get("absenMasuk")?A(e.get("absenMasuk"),"m"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"k"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"m"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"m"):""),l.a.createElement("td",{className:"lateInHours"},void 0===e.get("lateTimes")?"":T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),l.a.createElement("td",null,void 0===e.get("lateTimes")?"":T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("earlyTimes")?"":T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",{className:"earlyminutes"},void 0===e.get("earlyTimes")?"":T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("absenKeluar")?"":void 0!==e.get("overtimeOut")?T.a.duration(A(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours():""),l.a.createElement("td",null,void 0===e.get("absenKeluar")?"":void 0!==e.get("overtimeOut")?T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes():""),l.a.createElement("td",null,void 0===e.get("absenKeluar")?0:T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",null,T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0!==e.get("overtimeIn")?"Working Overtime":"Working Hour"))),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"7"},"Total"),l.a.createElement("td",null,this.state.hoursLate[t]),l.a.createElement("td",null,this.state.minutesLate[t]),l.a.createElement("td",null,this.state.jamEarly[t]),l.a.createElement("td",null,this.state.minutesEarly[t]),l.a.createElement("td",null,this.state.jamOvertime[t]),l.a.createElement("td",null,this.state.minutesOvertime[t]),l.a.createElement("td",null,this.state.jamTotal[t]),l.a.createElement("td",null,this.state.minutesTotal[t]),l.a.createElement("td",null))))))))),l.a.createElement(xe,{size:"lg",show:this.state.excelMode,loading:i,footer:!0,disabled:this.state.tableData.length<1,handleHide:()=>{this.toggle("excelMode"),this.setState({tableData:[]})},title:"Export ".concat(this.state.checkId.length," data to excel"),body:l.a.createElement("div",null,l.a.createElement(d.a,{role:"form",onSubmit:this.getDataAbsen,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",required:!0,onChange:e=>{this.setState({status:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6,7].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"".concat(7===parseInt(this.state.status)?"Set start date":"Set tanggal"),required:!0,readOnly:!0},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:this.state.startDate,onChange:e=>{this.setState({startDate:e.toDate()})}})))),7===parseInt(this.state.status)?l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Set end date",required:!0,readOnly:!0},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:this.state.endDate,onChange:e=>{this.setState({endDate:e.toDate()})}})))):"",l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement($.a,{className:"my-4",color:"primary",type:"submit",disabled:s},s?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),l.a.createElement(q.a,null,this.state.tableData.length>0?l.a.createElement(lt.a,{id:"test-table-xls-button",className:"btn btn-primary ml-2",table:"ekspor1",multipleTables:this.state.tableData,filename:"tablexls",sheet:"tablexls",buttonText:"Data siap di export"}):"")),handleSubmit:e=>this.handleApproval(e,!0)}),l.a.createElement(xe,{show:n,loading:i,footer:!0,handleHide:()=>this.toggle("approvalMode"),title:"Approval Confirmation",body:"Approve izin ".concat(o," ?"),handleSubmit:e=>this.handleApproval(e,!0)}),l.a.createElement(xe,{show:r,loading:i,footer:!1,handleHide:()=>this.toggle("rejectMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject izin ".concat(o," ?")),l.a.createElement(d.a,{onSubmit:e=>this.handleApproval(e,!1)},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},i?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleApproval(e,!1)}),l.a.createElement(xe,{show:b,loading:i,footer:!0,handleHide:()=>this.toggle("approveAllMode"),title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve izin ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(xe,{show:f,loading:i,footer:!1,handleHide:()=>this.toggle("rejectAllMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject izin ".concat(this.state.checkId.length," data ?")),l.a.createElement(d.a,{onSubmit:e=>this.rejectChecked(e)},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectAllMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},i?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}var jt=[{path:"/index",name:"Dashboard",icon:"ni ni-tv-2 text-primary",component:ft,layout:"/admin"},{path:"/view-absen/:id",name:"User Location",icon:"ni ni-tv-2 text-danger",component:ht,layout:"/admin",invisible:!0},{path:"/leader",name:"Leader",icon:"ni ni-pin-3 text-yellow",component:pt,layout:"/admin"},{path:"/export-absen/:id",name:"Absen",icon:"ni ni-pin-3 text-danger",component:kt,layout:"/admin",invisible:!0},{path:"/staff",name:"Staff",icon:"ni ni-single-02 text-yellow",component:we,layout:"/admin"},{path:"/register",name:"Register",icon:"ni ni-bullet-list-67 text-red",component:Re,layout:"/admin"},{path:"/tes-eksport",name:"Reporting karyawan",icon:"ni ni-bullet-list-67 text-green",component:Nt,layout:"/admin"},{path:"/self-regist",name:"Self Registration",icon:"ni ni-bullet-list-67 text-primary",component:at,layout:"/admin"},{path:"/status-request",name:"Status Request",icon:"ni ni-archive-2 text-info",component:Fe,layout:"/admin"},{path:"/tipe",name:"Manage Tipe",icon:"ni ni-archive-2 text-danger",component:Ye,layout:"/admin"},{path:"/haricuti",name:"Manage Hari Cuti",icon:"ni ni-calendar-grid-58 text-primary",component:Mt,layout:"/admin"},{path:"/point",name:"Manage Absen Point",icon:"ni ni-bullet-list-67 text-primary",component:Xe,layout:"/admin"},{path:"/posisi",name:"Manage Posisi",icon:"ni ni-archive-2 text-green",component:Qe,layout:"/admin"},{path:"/level",name:"Manage Level",icon:"ni ni-spaceship text-red",component:_e,layout:"/admin"},{path:"/appsetting",name:"Manage Setting",icon:"ni ni-settings text-blue",component:mt,layout:"/admin"},{path:"/departemen",name:"Manage Departemen",icon:"ni ni-folder-17 text-primary",component:Ve,layout:"/admin"},{path:"/reporting",name:"Reporting",icon:"ni ni-key-25 text-danger",component:Tt,layout:"/admin"},{path:"/eksport",name:"Eksport Data",icon:"ni ni-key-25 text-primary",component:rt,layout:"/admin"},{path:"/login",name:"Login",icon:"ni ni-circle-08 text-pink",component:je,layout:"/auth",invisible:!0}];const Ht=Object(W.a)(Object(W.b)(()=>({isOpen:!1,markerId:""}),{onToggleOpen:({isOpen:e,markerId:t})=>t=>({isOpen:!e,markerId:t})}),_.withScriptjs,_.withGoogleMap)(e=>l.a.createElement(_.GoogleMap,{defaultZoom:12,defaultCenter:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},center:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},defaultOptions:{scrollwheel:!1}},e.userPosition.map(t=>l.a.createElement(_.Marker,{onClick:()=>e.onToggleOpen(t.id),icon:{labelOrigin:new window.google.maps.Point(11,50),url:a(164)("./".concat(void 0===t.get("user").attributes.color?"red":t.get("user").attributes.color,"-dot.png")),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(11,40)},title:"".concat(t.get("fullname")," absen masuk: ").concat(A(t.get("absenMasuk"),"HH:mm")),position:{lat:parseFloat(t.get("latitude")),lng:parseFloat(t.get("longitude"))},label:{text:ce(t.get("fullname")),fontWeight:"bold"}},e.markerId===t.id&&e.isOpen&&l.a.createElement(_.InfoWindow,{onCloseClick:e.onToggleOpen},l.a.createElement("div",null,l.a.createElement("img",{src:t.get("selfieImage").url(),height:100,width:100}),l.a.createElement("br",null),l.a.createElement("br",null),void 0===t.get("lateTimes")?"":l.a.createElement("p",null,"Terlambat"),l.a.createElement("p",null,"Absen masuk:"," ",l.a.createElement("span",{style:{color:void 0===t.get("lateTimes")?"red":"blue"}},void 0!==t.get("lateTimes")?A(t.get("lateTimes"),"HH:mm"):A(t.get("absenMasuk"),"HH:mm")))))))));Object(_.withScriptjs)(Object(_.withGoogleMap)(e=>l.a.createElement(_.GoogleMap,{defaultZoom:12,defaultCenter:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},center:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},defaultOptions:{scrollwheel:!1}},e.userPosition.map(e=>l.a.createElement(_.Marker,{icon:{labelOrigin:new window.google.maps.Point(11,50),url:"Late"===e.className?"https://maps.gstatic.com/mapfiles/ms2/micons/red-dot.png":"https://maps.gstatic.com/mapfiles/ms2/micons/green-dot.png",origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(11,40)},title:"".concat(e.get("fullname")," absen masuk: ").concat(A(e.get("absenMasuk"),"HH:mm:ss")),position:{lat:parseFloat(e.get("latitude")),lng:parseFloat(e.get("longitude"))},label:{text:ce(e.get("fullname")),fontWeight:"bold"}})))));class Dt extends l.a.Component{constructor(e){super(e),this.scrollToMyRef=()=>window.scrollTo(0,this.lcoationRef.offsetTop),this.getCenterAverage=e=>{let t=e.reduce((e,t)=>e+parseFloat(t.get("latitude")),0),a=e.reduce((e,t)=>e+parseFloat(t.get("longitude")),0);console.log(t+" "+a),this.setState({avgLat:t/e.length,avgLng:a/e.length})},this.toggleNavs=(e,t)=>{e.preventDefault(),this.setState({activeNav:t,chartExample1Data:"data1"===this.state.chartExample1Data?"data2":"data1"})},this.getDataTerlambat=()=>{this.setState({loading:!0});const e=this.props.match.params.id,t=M.a.Object.extend("Late"),a=new M.a.Query(t),s=new Date,l=new T.a(s);l.startOf("day");const n=new T.a(l);n.add(1,"day"),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:e}),a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),a.greaterThanOrEqualTo("time",l.toDate()),a.lessThan("time",n.toDate()),a.include("user"),a.find().then(e=>{e.map(e=>e.isOpen=!1),console.log(e),this.setState({late:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getLeaderStaff=()=>{this.setState({loading:!0});const e=this.props.match.params.id,t=M.a.Object.extend("Absence"),a=new M.a.Query(t),s=new Date,l=new T.a(s);l.startOf("day");const n=new T.a(l);n.add(1,"day"),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:e}),a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),a.greaterThanOrEqualTo("createdAt",l.toDate()),a.lessThan("createdAt",n.toDate()),a.include("user"),a.find().then(e=>{e.map(e=>e.isOpen=!1),console.log(e),this.setState({dataAbsen:e,loading:!1})}).catch(e=>{console.log(e),this.setState({loading:!1})})},this.getDaftarAbsenByLevel=()=>{this.setState({loading:!0});const e=j(),t=this.props.match.params.id;switch(e){case"leader":const e=new M.a.User,a=new M.a.Query(e);a.containedIn("roles",["staff","Staff"]),a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()});const s=M.a.Object.extend("Absence"),l=new M.a.Query(s),n=new Date,r=new T.a(n);r.startOf("day");const i=new T.a(r);i.add(1,"day"),l.ascending("absenMasuk"),l.greaterThanOrEqualTo("createdAt",r.toDate()),l.lessThan("createdAt",i.toDate()),l.matchesQuery("user",a),l.include("user"),l.equalTo("user",{__type:"Pointer",className:"_User",objectId:t}),l.find().then(e=>{console.log("user",e),this.setState({dataAbsen:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}},this.setCenterMaps=(e,t)=>{this.setState({avgLat:parseFloat(e),avgLng:parseFloat(t)})},this.lcoationRef=l.a.createRef(),this.state={activeNav:1,chartExample1Data:"data1",loading:!1,totalStaff:0,daftarRequest:[],daftarLeader:[],dataAbsen:[],late:[],avgLat:0,avgLng:0},window.Chart&&Object(ae.parseOptions)(V.a,Object(ae.chartOptions)())}componentDidMount(){this.getDaftarAbsenByLevel()}componentDidUpdate(e,t){t.dataAbsen!==this.state.dataAbsen&&(console.log(this.state.dataAbsen),this.getCenterAverage(this.state.dataAbsen))}render(){const e=this.state,t=(e.daftarRequest,e.loading);e.daftarLeader;return console.log(this.state.dataAbsen.concat(this.state.late)),l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,{className:"mt-5"},l.a.createElement(P.a,{className:"mb-5 mb-xl-0",xl:"12"},l.a.createElement(Z.a,{className:"shadow mb-5",ref:this.lcoationRef},this.state.loading?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Loading map..."):0===this.state.dataAbsen.concat(this.state.late).length?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Tidak ada data absen hari ini"):l.a.createElement(Ht,{userPosition:this.state.dataAbsen,avgLat:this.state.avgLat,avgLng:this.state.avgLng,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyC5tj-2X6b7kwGTqGZkB7sofZdMhpyE75Q",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:"500px"},className:"map-canvas",id:"map-canvas"}),mapElement:l.a.createElement("div",{style:{height:"100%",borderRadius:"inherit"}})}))),l.a.createElement(P.a,{xl:"6"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h3",{className:"mb-0"},"Data absen hari ini")))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Absen masuk"))),l.a.createElement("tbody",null,t?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):this.state.dataAbsen.map<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},"No data found...")):this.state.dataAbsen.concat(this.state.late).map((e,t)=>l.a.createElement("tr",{onClick:()=>{this.setCenterMaps(e.get("latitude"),e.get("longitude")),this.scrollToMyRef()}},l.a.createElement("td",null,e.get("user").attributes.nik),l.a.createElement("td",null,e.get("user").attributes.fullname),l.a.createElement("td",null,void 0!==e.get("lateTimes")?l.a.createElement("div",null,l.a.createElement("span",{style:{color:"red"}},A(e.get("lateTimes"),"HH:mm"))):A(e.get("absenMasuk"),"HH:mm")))))))))))}}var Ct=Dt;a(201);a(1239).MarkerClusterer;const At=Object(W.a)(Object(W.b)(()=>({isOpen:!1,markerId:""}),{onToggleOpen:({isOpen:e,markerId:t})=>t=>({isOpen:!e,markerId:t})}),_.withScriptjs,_.withGoogleMap)(e=>l.a.createElement(_.GoogleMap,{defaultZoom:12,defaultCenter:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},center:{lat:parseFloat(e.avgLat),lng:parseFloat(e.avgLng)},defaultOptions:{scrollwheel:!1}},e.userPosition.map(t=>l.a.createElement(_.Marker,{onClick:()=>e.onToggleOpen(t.id),icon:{labelOrigin:new window.google.maps.Point(11,50),url:a(164)("./".concat(void 0===t.get("user").attributes.color?"red":t.get("user").attributes.color,"-dot.png")),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(11,40)},title:"".concat(t.get("fullname")," absen masuk: ").concat(A(t.get("absenMasuk"),"HH:mm")),position:{lat:parseFloat(t.get("latitude")),lng:parseFloat(t.get("longitude"))},label:{text:ce(t.get("fullname")),fontWeight:"bold"}},e.markerId===t.id&&e.isOpen&&l.a.createElement(_.InfoWindow,{onCloseClick:e.onToggleOpen},l.a.createElement("div",null,l.a.createElement("img",{src:t.get("selfieImage").url(),height:100,width:100,alt:"tidak Ada Gambar"}),l.a.createElement("br",null),l.a.createElement("br",null),void 0!==t.get("lateTimes")?l.a.createElement("p",null,"Terlambat"):"",l.a.createElement("p",null,"Absen masuk:"," ",l.a.createElement("span",{style:{color:"Late"===t.get("lateTimes")?"red":"blue"}},void 0!==t.get("lateTimes")?A(t.get("lateTimes"),"HH:mm"):A(t.get("absenMasuk"),"HH:mm")))))))));[[{lat:-6.2407857,lng:106.854221},{lat:-6.2407857,lng:106.854221},{lat:-6.2407857,lng:106.854221},{lat:-6.2407857,lng:106.854221}],[{lat:-6.2607535,lng:106.8558205},{lat:-6.2428274,lng:106.8100491},{lat:-6.2328274,lng:106.8000491},{lat:-6.1903274,lng:106.7600491}]].map((e,t)=>{console.log("lat",e[t].lat),console.log("long",e[t].lng)});class xt extends l.a.Component{constructor(e){super(e),this.getDaftarAbsenByLevel=()=>{this.setState({loading:!0});switch(j()){case"leader":const e=new M.a.User,t=new M.a.Query(e);t.containedIn("roles",["staff","Staff"]),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()});const a=M.a.Object.extend("Absence"),s=new M.a.Query(a),l=new Date,n=new T.a(l);n.startOf("day");const r=new T.a(n);r.add(1,"day"),s.ascending("absenMasuk"),s.greaterThanOrEqualTo("createdAt",n.toDate()),s.lessThan("createdAt",r.toDate()),s.matchesQuery("user",t),s.include("user"),s.find().then(e=>{console.log("user",e),this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}},this.getDataLate=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Late"),t=new M.a.Query(e),a=new Date,s=new T.a(a);s.startOf("day");const l=new T.a(s);l.add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.notContainedIn("roles",["admin","Admin","Leader","leader"]),t.greaterThanOrEqualTo("createdAt",s.toDate()),t.lessThan("createdAt",l.toDate()),t.include("user"),t.ascending("createdAt"),t.find().then(e=>{e.map(e=>e.select=!1),console.log(e),this.setState({late:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getDaftarAbsen=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Absence"),t=(new(M.a.Object.extend("Leader")),new M.a.Query(e)),a=new Date,s=new T.a(a);s.startOf("day");const l=new T.a(s);l.add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.ascending("createdAt"),t.greaterThanOrEqualTo("createdAt",s.toDate()),t.lessThan("createdAt",l.toDate()),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("Late"),t.include("user"),t.find().then(e=>{console.log("user",e),this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.handleToggleOpen=(e,t)=>{this.setState({isOpen:!0})},this.handleToggleClose=()=>{this.setState({isOpen:!1})},this.getLocation=()=>{this.state.locationArr.map((e,t)=>{console.log(),console.log(e[0])})},this.scrollToMyRef=()=>window.scrollTo(0,this.lcoationRef.offsetTop),this.getCenterAverage=e=>{let t=e.reduce((e,t)=>e+parseFloat(t.get("latitude")),0),a=e.reduce((e,t)=>e+parseFloat(t.get("longitude")),0);console.log(t+" "+a),this.setState({avgLat:t/e.length,avgLng:a/e.length})},this.state={locationArr:[[-6.2407535,106.8558205],[-6.2128274,106.8100491],[-6.2028274,106.8000491]],absence:[],late:[],loading:!1,isOpen:!1,avgLat:0,avgLng:0}}componentDidMount(){this.getLocation(),this.getDaftarAbsenByLevel()}componentDidUpdate(e,t){t.absence!==this.state.absence&&(console.log(this.state.absence),this.getCenterAverage(this.state.absence))}render(){const e=this.state,t=(e.locationArr,e.absence),a=e.late;return l.a.createElement(l.a.Fragment,null,l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow border-0 pl--5"},this.state.loading?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Loading map..."):t.concat(a).length<1?l.a.createElement("div",{style:{height:"100%",textAlign:"center"}},"Tidak ada data absen hari ini"):l.a.createElement(At,{userPosition:this.state.absence,avgLat:this.state.avgLat,avgLng:this.state.avgLng,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyC5tj-2X6b7kwGTqGZkB7sofZdMhpyE75Q",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:"600px"},className:"map-canvas",id:"map-canvas"}),mapElement:l.a.createElement("div",{style:{height:"100%",borderRadius:"inherit"}})})))))}}var Lt=xt;class Ot extends l.a.Component{constructor(e){super(e),this.toggleNavs=(e,t)=>{e.preventDefault(),this.setState({activeNav:t,chartExample1Data:"data1"===this.state.chartExample1Data?"data2":"data1"})},this.getDaftarStaff=()=>{const e=new M.a.User,t=new M.a.Query(e);t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e})}).catch(e=>{alert(e.message)})},this.getDaftarAbsenByLevel=()=>{this.setState({loading:!0});switch(j()){case"leader":const e=new M.a.User,t=new M.a.Query(e);t.containedIn("roles",["staff","Staff"]),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()});const a=M.a.Object.extend("Absence"),s=new M.a.Query(a),l=new Date,n=new T.a(l);n.startOf("day");const r=new T.a(n);r.add(1,"day"),s.ascending("absenMasuk"),s.greaterThanOrEqualTo("createdAt",n.toDate()),s.lessThan("createdAt",r.toDate()),s.matchesQuery("user",t),s.include("user"),s.find().then(e=>{console.log("user",e),this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}},this.getDaftarAbsen=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("Absence"),t=new M.a.Query(e),a=new Date,s=new T.a(a);s.startOf("day");const l=new T.a(s);l.add(1,"day"),console.log("leaderid",D()),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.ascending("absenMasuk"),t.greaterThanOrEqualTo("createdAt",s.toDate()),t.lessThan("createdAt",l.toDate()),t.include("user"),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.find().then(e=>{console.log("user",e),this.setState({absence:e,loading:!1})}).catch(e=>{this.setState({loading:!1})})},this.getDaftarAbsenLate=()=>{this.setState({loading:!0});const e=new M.a.Object.extend("Late"),t=new M.a.Query(e),a=new Date,s=new T.a(a);s.startOf("day");const l=new T.a(s);l.add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.ascending("createdAt"),t.greaterThanOrEqualTo("createdAt",s.toDate()),t.lessThan("createdAt",l.toDate()),t.include("user"),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.find().then(e=>{console.log("lateeee",e),this.setState({late:e,loading:!1})}).catch(e=>{this.setState({loading:!1})})},this.state={activeNav:1,chartExample1Data:"data1",totalAbsen:0,totalTerlambat:0,totalIzin:0,totalSakit:0,totalOvertime:0,totalRequest:0,percentage:{},loading:!1,totalStaff:0,absence:[],daftarStaff:[],late:[]},window.Chart&&Object(ae.parseOptions)(V.a,Object(ae.chartOptions)())}componentDidMount(){this.getDaftarAbsenByLevel(),this.getDaftarStaff(),this.getDaftarAbsenLate()}render(){const e=this.state,t=e.absence,a=e.late,s=e.loading,n=e.daftarStaff;return console.log(t.concat(a)),l.a.createElement(l.a.Fragment,null,l.a.createElement(oe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,{className:"mt-5"},l.a.createElement(P.a,{xl:"5"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h3",{className:"mb-0"},"Staff saya")),l.a.createElement("div",{className:"col text-right"},l.a.createElement(i.b,{to:"/admin/staff"},l.a.createElement($.a,{color:"primary",size:"sm"},"See all"))))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Sisa cuti"),l.a.createElement("th",{scope:"col"},"Email"))),l.a.createElement("tbody",null,s?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):n.length<1?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found..."):n.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,e.get("nik")),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,e.get("jumlahCuti")),l.a.createElement("td",null,e.get("email")))))))),l.a.createElement(P.a,{className:"mb-5 mb-xl-0",xl:"7"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement(q.a,{className:"align-items-center"},l.a.createElement("div",{className:"col"},l.a.createElement("h3",{className:"mb-0"},"Data Absen")),l.a.createElement("div",{className:"col text-right"},l.a.createElement(i.b,{to:"/admin/data-absen"},l.a.createElement($.a,{color:"primary",size:"sm"},"See all")),console.log("leaderIdNewNew",D()),l.a.createElement(i.b,{to:"/admin/maps/iIoJF9pqc6",className:"ml-2"},l.a.createElement($.a,{color:"primary",size:"sm"},"View Location"))))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Absen Masuk"),l.a.createElement("th",{scope:"col"},"Keterangan"),l.a.createElement("th",{scope:"col"},"Lokasi"))),l.a.createElement("tbody",null,s?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,e.get("user").attributes.nik),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,void 0!==e.get("lateTimes")?"".concat(A(e.get("lateTimes"),"HH:mm")):void 0===e.get("absenMasuk")?"":A(e.get("absenMasuk"),"HH:mm")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":"green"}},void 0!==e.get("lateTimes")?"Terlambat":"Tepat Waktu"),l.a.createElement("td",null,l.a.createElement(i.b,{className:"mr-2",to:"/admin/maps/".concat(e.get("user").id)},l.a.createElement($.a,{id:"t4",color:"yellow",className:"btn-circle"},l.a.createElement("i",{className:"fa fa-eye"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t4"},"Lihat detail")))))))),t.length<10?l.a.createElement(Z.a,{className:"shadow mt-3"},l.a.createElement(Lt,null)):"")),t.length>=10?l.a.createElement(Z.a,{className:"shadow mt-3"},l.a.createElement(Lt,null)):""))}}var Kt=Ot;class qt extends l.a.Component{constructor(e){super(e),this.queryStaffByLevel=(e,t)=>{const a=new M.a.User,s=new M.a.Query(a);s.equalTo(e,{__type:"Pointer",className:"_User",objectId:D()}),s.ascending("roles"),s.containedIn("roles",t),s.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e})}).catch(e=>{alert(e.message)})},this.getDaftarAbsenByLevel=(e="today",t=j(),a="day")=>{switch(this.setState({loading:!0}),t){case"leader":this.queryStaffByLevel("leaderIdNew",["staff"]);break;case"supervisor":this.queryStaffByLevel("supervisorID",["staff","leader"]);break;case"manager":this.queryStaffByLevel("managerID",["staff","leader","supervisor"]);break;case"head":this.queryStaffByLevel("headID",["staff","leader","supervisor","manager"]);break;case"gm":this.queryStaffByLevel("headID",["staff","leader","supervisor","manager","head"])}},this.state={daftarStaff:[],loading:!1}}componentDidMount(){this.getDaftarAbsenByLevel()}getAbsenStaff(){const e=new M.a.User,t=new M.a.Query(e);t.equalTo("supervisorID",{__type:"Pointer",className:"_User",objectId:D()}),t.notContainedIn("roles",[j()]),t.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e})}).catch(e=>{alert(e.message)})}render(){const e=this.state.daftarStaff;return l.a.createElement(l.a.Fragment,null,l.a.createElement(pe,null),l.a.createElement(c.a,{className:"mt-2",fluid:!0},l.a.createElement(q.a,null,e.map(e=>l.a.createElement(P.a,{md:4,className:"mt-5"},l.a.createElement(Z.a,{className:"card-profile shadow"},l.a.createElement(q.a,{className:"justify-content-center"},l.a.createElement(P.a,{className:"order-lg-2",lg:"3"},l.a.createElement("div",{className:"card-profile-image"},l.a.createElement("a",{href:e.get("fotoWajah").url()},l.a.createElement("img",{alt:"...",style:{height:"150px",width:"150px"},className:"rounded-circle",src:e.get("fotoWajah").url()}))))),l.a.createElement(X.a,{className:"text-center border-0 pt-8 pt-md-4 pb-0 pb-md-4"}),l.a.createElement(se.a,{className:"pt-0 pt-md-4"},l.a.createElement("div",{className:"text-center mt-md-5"},l.a.createElement("h3",null,ce(e.get("fullname"))),l.a.createElement("h2",null,e.get("roles")),l.a.createElement("div",{className:"h5 font-weight-300"},l.a.createElement("i",{className:"ni location_pin mr-2"}),e.get("nik")),l.a.createElement("div",{className:"h5"},be.a.isEmpty(e.get("email"))?"-":e.get("email")),l.a.createElement(i.b,{to:"/admin/view-history/".concat(e.id)},l.a.createElement($.a,{outline:!0,color:"primary",size:"sm",className:""},l.a.createElement("i",{className:"ni ni-spaceship"})," View History")),l.a.createElement(i.b,{to:"/admin/exportexcelid/".concat(e.id)},l.a.createElement($.a,{outline:!0,color:"primary",size:"sm",className:"ml-1"},l.a.createElement("i",{className:"ni ni-single-copy-04"})," Report Data"))))))))))}}var Pt=qt;l.a.Component;class Ft extends s.Component{constructor(e){super(e),this.getdaftarStaff=()=>{const e=new M.a.User,t=new M.a.Query(e);t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.equalTo("objectId","aKyuHcDwSe"),t.notContainedIn("roles",["admin","leader"]),t.find({useMasterKey:!0}).then(e=>{this.setState({daftarStaff:e})}).catch(e=>{alert(e.message)})},this.getDaftarAbsen=()=>{this.setState({loading:!0}),console.log("idds",this.props.startDateExcelFrom),console.log("iddss",this.props.status);const e="Data tidak ditemukan",t=M.a.Object.extend("Absence"),a=(new(M.a.Object.extend("Leader")),new M.a.Query(t));if(6===parseInt(this.props.status)){new Date;const e=new T.a(this.props.startDateExcelFrom);e.startOf("month");const t=new T.a(e);t.add(1,"month"),a.greaterThanOrEqualTo("absenMasuk",e.toDate()),a.lessThan("absenMasuk",t.toDate())}else if(5===parseInt(this.props.status)){new Date;const e=new T.a(this.props.startDateExcelFrom);e.startOf("week");const t=new T.a(e);t.add(1,"week"),a.greaterThanOrEqualTo("absenMasuk",e.toDate()),a.lessThan("absenMasuk",t.toDate())}else if(4===parseInt(this.props.status)){new Date;const e=new T.a(this.props.startDateExcelFrom);e.startOf("day");const t=new T.a(e);t.add(1,"day"),a.greaterThanOrEqualTo("absenMasuk",e.toDate()),a.lessThan("absenMasuk",t.toDate())}else{const e=new Date,t=new T.a(e);t.startOf("day");new T.a(t).add(1,"day")}a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:this.props.userId}),a.descending("absenMasuk"),a.notContainedIn("roles",["admin","Admin","leader","Leader"]),a.include("user"),a.find().then(t=>{console.log("user",t),this.setState({data:t,loading:!1,employeeName:be.a.isEmpty(t)?e:t[0].get("fullname"),employeeID:be.a.isEmpty(t)?e:t[0].get("user").attributes.nik,employeeTitle:be.a.isEmpty(t)?e:t[0].get("user").attributes.level,employeeDepartment:be.a.isEmpty(t)?e:t[0].get("user").attributes.posisi})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getDaftarAbsenLate=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Late"),t=(new(M.a.Object.extend("Leader")),new M.a.Query(e)),a=new Date,s=new T.a(a);s.startOf("day");new T.a(s).add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.equalTo("user",{__type:"Pointer",className:"_User",objectId:"aKyuHcDwSe"}),t.descending("time"),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("user"),t.find().then(e=>{console.log("user",e),this.setState({dataLate:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getDaftarOvertime=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Overtime"),t=(new(M.a.Object.extend("Leader")),new M.a.Query(e)),a=new Date,s=new T.a(a);s.startOf("day");new T.a(s).add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.equalTo("user",{__type:"Pointer",className:"_User",objectId:"aKyuHcDwSe"}),t.descending("time"),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("user"),t.find().then(e=>{console.log("user",e),this.setState({dataOvertime:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getDaftarEarlyLeave=()=>{this.setState({loading:!0});const e=M.a.Object.extend("EarlyLeave"),t=(new(M.a.Object.extend("Leader")),new M.a.Query(e)),a=new Date,s=new T.a(a);s.startOf("day");new T.a(s).add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.equalTo("user",{__type:"Pointer",className:"_User",objectId:"aKyuHcDwSe"}),t.descending("time"),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("user"),t.find().then(e=>{console.log("user",e),this.setState({dataEarlyLeave:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.subtractHourLate=(e,t,a)=>{let s;return"Late"===a&&t>e&&(s=t-e),"Overtime"===a&&t>e&&(s=t-e),"EarlyLeave"===a&&t<e&&(s=e-t),s},this.subtractHour=(e,t,a,s)=>{let l;return"earlyDeparture"===a&&("Hours"===s&&(l=Math.floor((e-parseInt(t))/6e4/60)),"Minutes"===s&&(l=(e-parseInt(t))/6e4)),console.log("working hours",typeof e),console.log("attendance",typeof t),console.log("result",l),l},this.state={data:[],daftarStaff:[],dataLate:[],dataOvertime:[],dataEarlyLeave:[],loading:!1,employeeName:"",employeeID:""}}componentDidMount(){this.getDaftarAbsen(),this.getdaftarStaff(),this.getDaftarAbsenLate(),this.getDaftarOvertime(),this.getDaftarEarlyLeave()}render(){const e=this.state,t=e.data,a=(e.daftarStaff,e.loading);e.dataLate,e.dataOvertime,e.dataEarlyLeave;return l.a.createElement("div",null,l.a.createElement(ee.a,{className:"align-items-center table-flush",id:this.props.table,responsive:!0,hidden:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Fingerprint ID"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeID))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Name"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeName))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Title"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeTitle))),l.a.createElement("thead",{className:"border-0 mb-2"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Department Title"),l.a.createElement("th",{scope:"col",className:"mb-2",style:{border:"none"}},this.state.employeeDepartment))),l.a.createElement("thead",{className:"thead-light",style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",rowSpan:"2"},"Day"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Date"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Working Hour"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty On"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty Off"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Late In"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Early Derparture"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Over Time"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Total Hour"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Notes")),l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"))),l.a.createElement("tbody",{style:{textAlign:"center"}},a?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):t.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found...")):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,A(e.get("createdAt"),"ddd")),l.a.createElement("td",null,A(e.get("createdAt"),"DD/MM/YYYY")),l.a.createElement("td",null,"".concat(e.get("user").attributes.jamMasuk<10?"0":"").concat(e.get("user").attributes.jamMasuk,":00")+" - "+"".concat(e.get("user").attributes.jamKeluar,":00")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"k"):A(e.get("absenMasuk"),"k")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"m"):A(e.get("absenMasuk"),"m")),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"k"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"k"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"m"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"k"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"m"):""),l.a.createElement("td",null,void 0===e.get("lateTimes")?"":T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),l.a.createElement("td",null,void 0===e.get("lateTimes")?"":T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("earlyTimes")?"":T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",null,void 0===e.get("earlyTimes")?"":T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("overtimeIn")&&void 0===e.get("overtimeOut")?"":T.a.duration(A(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("overtimeIn"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",null,void 0===e.get("overtimeIn")&&void 0===e.get("overtimeOut")?"":T.a.duration(A(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("overtimeIn"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,T.a.duration(void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"HH:mm"):"","HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",null,T.a.duration(void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"HH:mm"):"","HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0!==e.get("overtimeIn")&&void 0!==e.get("overtimeOut")?"Work-Over Time":"Working Hour"))),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"7"},"Total"),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null)))))}}var zt=Ft;class Jt extends l.a.Component{constructor(e){super(e),this.queryAbsenByLevel=(e,t,a="today",s="day")=>{const l=M.a.Object.extend("Absence"),n=new M.a.Query(l),r=new M.a.User,i=new M.a.Query(r);let o,c;if("today"!==a){new Date;o=new T.a(a),o.startOf(s),c=new T.a(o),c.add(1,s)}else{const e=new Date;o=new T.a(e),o.startOf(s),c=new T.a(o),c.add(1,s)}i.containedIn("roles",t),i.equalTo(e,{__type:"Pointer",className:"_User",objectId:D()}),n.ascending("absenMasuk"),n.greaterThanOrEqualTo("absenMasuk",o.toDate()),n.lessThan("absenMasuk",c.toDate()),n.matchesQuery("user",i),n.include("user"),n.find().then(e=>{console.log("user",e),this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getDaftarAbsenByLevel=(e="today",t=j(),a="day")=>{switch(this.setState({loading:!0}),t){case"leader":this.queryAbsenByLevel("leaderIdNew",["staff"],e,a);break;case"supervisor":this.queryAbsenByLevel("supervisorID",["staff","leader"],e,a);break;case"manager":this.queryAbsenByLevel("managerID",["staff","leader","supervisor"],e,a);break;case"head":this.queryAbsenByLevel("headID",["staff","leader","supervisor","manager"],e,a);break;case"gm":this.queryAbsenByLevel("headID",["staff","leader","supervisor","manager","head"],e,a)}},this.handleFilter=e=>{e.preventDefault(),this.setState({loading:!0});const t=M.a.Object.extend("Absence");new M.a.Query(t);4===parseInt(this.state.status)?this.getDaftarAbsenByLevel(this.state.startDate,j(),"day"):5===parseInt(this.state.status)?this.getDaftarAbsenByLevel(this.state.startDate,j(),"week"):6===parseInt(this.state.status)&&this.getDaftarAbsenByLevel(this.state.startDate,j(),"month")},this.getDaftarAbsen=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Absence"),t=(new(M.a.Object.extend("Leader")),new M.a.Query(e)),a=new Date,s=new T.a(a);s.startOf("day");const l=new T.a(s);l.add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.ascending("absenMasuk"),t.greaterThanOrEqualTo("createdAt",s.toDate()),t.lessThan("createdAt",l.toDate()),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("user"),t.find().then(e=>{console.log("user",e),this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.state={absence:[],loading:!1,startDate:"",hitButtonExcel:!1},this.btnRef=l.a.createRef()}componentDidMount(){this.getDaftarAbsenByLevel()}render(){const e=this.state,t=e.absence,a=e.loading,s=e.startDate;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Absen hari ini"),l.a.createElement(d.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",required:!0,onChange:e=>{this.setState({status:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Date Picker Here",required:""===this.state.startDate,readOnly:""!==this.state.startDate},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:s,onChange:e=>{this.setState({startDate:e.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement($.a,{className:"my-4",color:"primary",type:"submit",disabled:a},a?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search"))))),l.a.createElement(ee.a,{className:"align-items-center table-flush",id:"ekspor",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Absen Masuk"),l.a.createElement("th",{scope:"col"},"Absen Keluar"))),l.a.createElement("tbody",null,a?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):t.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found...")):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,e.get("user").attributes.nik),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,void 0===e.get("absenMasuk")?"":A(e.get("absenMasuk"),"DD/MM/YYYY HH:mm:ss")),l.a.createElement("td",null,void 0===e.get("absenKeluar")?"":A(e.get("absenKeluar"),"DD/MM/YYYY HH:mm:ss")))))))))))}}var Rt=Jt;a(6);l.a.Component;class Bt extends l.a.Component{constructor(...e){super(...e),this.handleShow=()=>{this.setState({show:!0}),setTimeout(()=>{this.setState({show:!1})},300)}}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Me.a,{color:this.props.alert,fade:!1,show:this.handleShow},l.a.createElement("span",{className:"alert-inner--icon"},l.a.createElement("i",{className:this.props.icon}))," ",l.a.createElement("span",{className:"alert-inner--text"},l.a.createElement("strong",null,this.props.alert," !")," ",this.props.message)))}}var Yt=Bt;class Ut extends l.a.Component{constructor(e){super(e),this.getData=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Izin"),t=new M.a.Query(e),a=new Date,s=new T.a(a);s.startOf("day");new T.a(s).add(1,"day"),t.include("user"),t.greaterThanOrEqualTo("createdAt",s.toDate()),t.equalTo("statusIzin",2),t.equalTo("status",3),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.notContainedIn("roles",["admin","Admin","Leader","leader"]),t.descending("createdAt"),t.find().then(e=>{e.map(e=>e.select=!1),this.setState({cuti:e,loading:!1})}).catch(({message:e})=>{this.setState({loading:!1}),alert(e)})},this.getTotalIzin=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Izin"),t=new M.a.Query(e),a=new Date,s=new T.a(a);s.startOf("day");new T.a(s).add(1,"day"),t.include("user"),t.equalTo("statusIzin",1),t.greaterThanOrEqualTo("createdAt",s.toDate()),t.equalTo("status",3),t.descending("createdAt"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.notContainedIn("roles",["admin","Admin","Leader","leader"]),t.find().then(e=>{e.map(e=>e.select=!1),this.setState({cuti:e,loading:!1})}).catch(({message:e})=>{this.setState({loading:!1}),alert(e),window.location.reload(!1)})},this.queryLateByLevel=(e,t,a="today",s="day",l=this.state.status)=>{const n=new M.a.Object.extend("Izin"),r=new M.a.Query(n);if(r.equalTo("statusIzin",2),4===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("day");const t=new T.a(e);t.add(1,"day"),r.greaterThanOrEqualTo("createdAt",e.toDate()),r.lessThan("createdAt",t.toDate())}if(5===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("week");const t=new T.a(e);t.add(1,"week"),r.greaterThanOrEqualTo("createdAt",e.toDate()),r.lessThan("createdAt",t.toDate())}if(6===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("month");const t=new T.a(e);t.add(1,"month"),r.greaterThanOrEqualTo("createdAt",e.toDate()),r.lessThan("createdAt",t.toDate())}if(3===parseInt(this.state.status)||3===l)if("today"!==a);else if("today"===a){const e=new Date,t=new T.a(e);t.startOf(s);const a=new T.a(t);a.add(1,s),r.greaterThanOrEqualTo("createdAt",t.toDate()),r.lessThan("createdAt",a.toDate())}1!==parseInt(this.state.status)&&0!==parseInt(this.state.status)||r.descending("updatedAt"),r.equalTo(e,{__type:"Pointer",className:"_User",objectId:D()}),r.notContainedIn("roles",t),r.equalTo("status",l),r.notContainedIn("roles",["admin","Admin","Leader","leader"]),r.include("user"),r.find().then(e=>{e.map(e=>e.select=!1),console.log(e),this.setState({cuti:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getDataByLevel=(e="today",t=j(),a="day",s=this.state.status)=>{switch(t){case"leader":this.queryLateByLevel("leaderIdNew",["staff"],e,a,s);break;case"supervisor":this.queryLateByLevel("supervisorID",["staff","leader"],e,a,s);break;case"manager":this.queryLateByLevel("managerID",["staff","leader","supervisor"],e,a,s);break;case"head":this.queryLateByLevel("headID",["staff","leader","supervisor","manager"],e,a,s);break;case"gm":this.queryLateByLevel("headID",["staff","leader","supervisor","manager","head"],e,a,s)}},this.handleFilter=e=>{e.preventDefault(),this.setState({loading:!0}),this.getDataByLevel(this.state.startDate,j(),"fox",parseInt(this.state.status))},this.getHariCuti=()=>{this.setState({loading:!0});const e=M.a.Object.extend("HariCuti");new M.a.Query(e).find().then(e=>{e.map(e=>e.select=!1),this.setState({hariCuti:e,loading:!1})}).catch(({message:e})=>{this.setState({loading:!1}),alert(e)})},this.handleFilter=e=>{e.preventDefault(),this.setState({loading:!0});const t=M.a.Object.extend("Izin"),a=new M.a.Query(t);if(4===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("day");const t=new T.a(e);t.add(1,"day"),a.greaterThanOrEqualTo("createdAt",e.toDate()),a.lessThan("createdAt",t.toDate())}else if(5===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("week");const t=new T.a(e);t.add(1,"week"),a.greaterThanOrEqualTo("createdAt",e.toDate()),a.lessThan("createdAt",t.toDate())}else if(6===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("month");const t=new T.a(e);t.add(1,"month"),a.greaterThanOrEqualTo("createdAt",e.toDate()),a.lessThan("createdAt",t.toDate())}1!==parseInt(this.state.status)&&0!==parseInt(this.state.status)||a.descending("updatedAt"),3===parseInt(this.state.status)&&a.descending("createdAt"),a.include("user"),a.equalTo("statusIzin",2),a.equalTo("status",parseInt(this.state.status)),a.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),a.notContainedIn("roles",["admin","Admin","Leader","leader"]),a.find().then(e=>{e.map(e=>e.select=!1),this.setState({cuti:e,loading:!1})}).catch(({message:e})=>{this.setState({loading:!1}),alert(e)})},this.closeLoading=()=>{this.setState({loadingModal:!1})},this.countDays=(e,t)=>{let a=A(e,"YYYY/MM/DD"),s=A(t,"YYYY/MM/DD");e=T()(a);return(t=T()(s)).diff(e,"days")+1},this.handleApproval=(e,t)=>{console.log(this.state.user),console.log(this.state.userId),e.preventDefault(),this.setState({loadingModal:!0});const a=M.a.Object.extend("Izin"),s=new M.a.Query(a);let l=A(this.state.fromm,"YYYY/MM/DD"),n=A(this.state.too,"YYYY/MM/DD");var r=T()(l);const i=T()(n).diff(r,"days");s.get(this.state.userId).then(e=>{const a=new M.a.User;new M.a.Query(a).get(this.state.user).then(a=>{console.log("leaderId",this.state.userId),console.log("userId",this.state.user);let s=parseInt(a.get("jumlahCuti"));console.log("jumlah Cuti",s),console.log("jumlah hari",parseInt(i)),0!==a.get("jumlahCuti")?s<i?this.setState({loadingModal:!1,messageApprove:"Kouta Cuti Tidak Mencukupi"}):(e.set("status",t?1:0),t||e.set("alasanReject",this.state.reason),e.save().then(()=>{console.log(t),t?(console.log("Libur Nasional",this.getLiburNasional(e.get("dari"),e.get("sampai"),this.state.hariCuti)),a.set("jumlahCuti",parseInt(s)-parseInt(this.getLiburNasional(e.get("dari"),e.get("sampai"),this.state.hariCuti)))):a.set("jumlahCuti",parseInt(s)-0),a.save(null,{useMasterKey:!0}).then(()=>{let e=[...this.state.cuti];e.splice(this.state.userIndex,1),this.setState({counter:this.state.counter+1,cuti:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1,alerts:1,messageApprove:t?"approve":"reject"})})}).catch(e=>{alert(e.message),this.closeLoading()})):this.setState({loadingModal:!1,messageApprove:"Sisa Cuti Anda Telah Habis"})})}).catch(e=>{alert(e.message),this.closeLoading()})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.handleAllCheck=e=>{let t=this.state.cuti,a=[];t.map(t=>(t.select=e.target.checked,t.select?a.push(t.id):a=[],t)),this.setState({cuti:t,checkId:a},()=>console.log(this.state.checkId))},this.handleChildCheck=e=>{let t=this.state.cuti;const a=this.state.checkId;let s=e.target.value;t.map(t=>{if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)this.setState(e=>({checkId:[...this.state.checkId,s]}),()=>console.log(this.state.checkId));else{const e=a.indexOf(s);e>-1&&(a.splice(e,1),this.setState(e=>({checkId:a}),()=>console.log(this.state.checkId)))}}),this.setState({cuti:t})},this.handleApproveAll=e=>{this.setState({loading:!0});const t=M.a.Object.extend("Izin");new M.a.Query(t).get(e).then(e=>{e.set("status",1),e.save().then(()=>{const e=[...this.state.cuti];e.splice(this.state.userIndex,1),this.setState({cuti:e,approvalMode:!1,loading:!1})})})},this.handleRejectAll=e=>{this.setState({loading:!0});const t=M.a.Object.extend("Overtime");new M.a.Query(t).get(e).then(e=>{e.set("status",0),e.save().then(()=>{const e=[...this.state.cuti];e.splice(this.state.userIndex,1),this.setState({cuti:e,rejectMode:!1,loading:!1})})})},this.approveChecked=e=>{this.setState({loadingModal:!0});const t=this.state.checkId;let a=0;t.map(e=>{const s=M.a.Object.extend("Izin"),l=new M.a.Query(s);l.include("user"),l.get(e).then(e=>{let s=e.get("user").id,l=e.get("dari"),n=e.get("sampai"),r=A(l,"YYYY/MM/DD"),i=A(n,"YYYY/MM/DD");var o=T()(r);let c=T()(i).diff(o,"days");e.set("status",1),e.save().then(()=>{const l=new M.a.User;new M.a.Query(l).get(s).then(s=>{let l=s.get("jumlahCuti");console.log("sisa",parseInt(l)-parseInt(c)),s.set("jumlahCuti",parseInt(l)-this.getLiburNasional(e.get("dari"),e.get("sampai"),this.state.hariCuti)),s.save(null,{useMasterKey:!0}).then(()=>{if(a+=1,a===t.length)return this.setState({loadingModal:!1}),this.setState({messageApprove:"Approve "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)})})})})})},this.rejectChecked=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=this.state.checkId;let a=0;t.map(e=>{const s=M.a.Object.extend("Izin");new M.a.Query(s).get(e).then(e=>{e.set("status",1),e.save().then(()=>{if(a+=1,a===t.length)return this.setState({messageApprove:"Reject "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)})})})},this.getDatesBetweenDates=(e,t)=>{for(var a=[],s=T()(e),l=T()(t);s<=l;)a.push(T()(s).format("YYYY-MM-DD")),s=T()(s).add(1,"days");return a},this.getLiburNasional=(e,t,a)=>{let s,l,n=0;return l=this.getDatesBetweenDates(e,t),console.log("dates",l.length),a.map((e,t)=>{for(let a=0;a<=l.length;a++)l[a]===A(e.get("hariCuti"),"YYYY-MM-DD")?n+=1:n+=0,console.log("jumlah Libur libur",n)}),s=n>0?l.length-n:l.length,n=0,s},this.state={cuti:[],hariCuti:[],loading:!1,rejectMode:!1,approvalMode:!1,approveAllMode:!1,rejectAllMode:!1,fullnames:"",loadingModal:!1,userIndex:0,minus:!1,counter:0,userId:"",startDate:"",reason:"",checkId:[],messageApprove:"",alerts:2}}componentDidMount(){this.getDataByLevel(),this.getHariCuti()}render(){const e=this.state,t=e.cuti,a=(e.hariCuti,e.minus,e.rejectAllMode),s=e.approveAllMode,n=e.loading,r=e.loadingModal,i=e.approvalMode,o=e.rejectMode,m=e.fullnames,b=e.startDate,f=e.counter;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,{cuti:f}),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-2"},"Request cuti"),2===parseInt(this.state.alerts)?"":l.a.createElement(Yt,{show:!0,icon:"ni ni-like-2",alert:"success",message:"Berhasil ".concat(this.state.messageApprove)}),l.a.createElement(d.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",required:!0,onChange:e=>{this.setState({status:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Kategori"),[3,1,0].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",onChange:e=>{this.setState({statusWaktu:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Date Picker Here",required:!0,readOnly:!0},viewMode:6===parseInt(this.state.statusWaktu)?"months":"days",dateFormat:6===parseInt(this.state.statusWaktu)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,value:b,onChange:e=>{this.setState({startDate:e.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement($.a,{className:"my-4",color:"primary",type:"submit",disabled:n},n?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),0===t.length||0===this.state.checkId.length?"":l.a.createElement(P.a,{sm:{span:0},className:"float-none"},l.a.createElement($.a,{color:"primary",size:"sm",type:"submit",disable:n?"true":"false",className:"mr-2 m-1",onClick:()=>this.setState({approveAllMode:!0})},l.a.createElement("i",{className:"fa fa-check"})," ",n?"Fetching...":"Approve"),l.a.createElement($.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:n?"true":"false",onClick:()=>this.setState({rejectAllMode:!0})},l.a.createElement("i",{className:"fa fa-times"})," ",n?"Fetching...":"Reject"))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,1===parseInt(this.state.status)||0===parseInt(this.state.status)?l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck,disabled:"true"})):l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck})),l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Alasan"),l.a.createElement("th",{scope:"col"},"Tanggal Request"),l.a.createElement("th",{scope:"col"},"Dari"),l.a.createElement("th",{scope:"col"},"Sampai"),l.a.createElement("th",{scope:"col"},"Jumlah Hari"),l.a.createElement("th",{scope:"col"},"Sisa Cuti"),l.a.createElement("th",{scope:"col"},"Keterangan"),l.a.createElement("th",{scope:"col"},"Approve"))),l.a.createElement("tbody",null,n?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:9,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):t.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:9,style:{textAlign:"center"}},"No data found...")):t.map((e,t)=>l.a.createElement("tr",null,1===e.get("status")||0===e.get("status")?l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",disabled:"true",style:{color:"red"}})):l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",value:e.id,checked:e.select,onChange:this.handleChildCheck})),l.a.createElement("td",null,e.get("user").attributes.nik),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,e.get("alasanIzin")),l.a.createElement("td",null,A(e.get("createdAt"),"DD/MM/YYYY")),l.a.createElement("td",null,A(e.get("dari"),"DD/MM/YYYY")),l.a.createElement("td",null,A(e.get("sampai"),"DD/MM/YYYY")),l.a.createElement("td",null,this.countDays(e.get("dari"),e.get("sampai"))," ","Hari"),l.a.createElement("td",null,e.get("user").attributes.jumlahCuti," Hari"),l.a.createElement("td",null,e.get("descIzin")),1===e.get("status")?l.a.createElement("td",null,"Approved"):0===e.get("status")?l.a.createElement("td",null,"Rejected"):l.a.createElement("td",null,l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:()=>{this.setState({approvalMode:!0,userId:e.id,user:e.get("user").id,fromm:e.get("dari"),too:e.get("sampai"),userIndex:t,fullnames:e.get("fullname")})}},l.a.createElement("i",{className:"fa fa-check"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Approve"),l.a.createElement($.a,{id:"t2",color:"danger",className:"btn-circle",onClick:a=>{this.setState({rejectMode:!0,userId:e.id,user:e.get("user").id,fromm:e.get("dari"),too:e.get("sampai"),userIndex:t,fullnames:e.get("fullname")})}},l.a.createElement("i",{className:"fa fa-times"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t2"},"Reject")))))))))),l.a.createElement(xe,{show:i,loading:r,footer:!0,handleHide:()=>this.toggle("approvalMode"),title:"Approval Confirmation",body:"Approve cuti ".concat(m," ?"),handleSubmit:e=>this.handleApproval(e,!0)}),l.a.createElement(xe,{show:o,loading:r,handleHide:()=>this.toggle("rejectMode"),title:"Reject Confirmation",footer:!1,body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject cuti ".concat(m," ?")),l.a.createElement(d.a,{onSubmit:e=>this.handleApproval(e,!1)},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleApproval(e,!1)}),l.a.createElement(xe,{show:s,loading:r,footer:!0,handleHide:()=>this.toggle("approveAllMode"),title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve cuti ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(xe,{show:a,loading:r,footer:!1,handleHide:()=>this.toggle("rejectAllMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject cuti ".concat(this.state.checkId.length," data ?")),l.a.createElement(d.a,{onSubmit:e=>this.rejectChecked(e)},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectAllMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}var Qt=Ut;class Wt extends l.a.Component{constructor(e){super(e),this.getTotalIzin=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Izin"),t=new M.a.Query(e),a=new Date,s=new T.a(a);s.startOf("day");new T.a(s).add(1,"day"),t.include("user"),t.equalTo("statusIzin",1),t.greaterThanOrEqualTo("createdAt",s.toDate()),t.equalTo("status",3),t.descending("createdAt"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.notContainedIn("roles",["admin","Admin","Leader","leader"]),t.find().then(e=>{e.map(e=>e.select=!1),this.setState({izin:e,loading:!1})}).catch(({message:e})=>{this.setState({loading:!1}),alert(e),window.location.reload(!1)})},this.queryLateByLevel=(e,t,a="today",s="day",l=this.state.status)=>{const n=new M.a.Object.extend("Izin"),r=new M.a.Query(n);if(r.equalTo("statusIzin",1),4===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("day");const t=new T.a(e);t.add(1,"day"),r.greaterThanOrEqualTo("createdAt",e.toDate()),r.lessThan("createdAt",t.toDate())}if(5===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("week");const t=new T.a(e);t.add(1,"week"),r.greaterThanOrEqualTo("createdAt",e.toDate()),r.lessThan("createdAt",t.toDate())}if(6===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("month");const t=new T.a(e);t.add(1,"month"),r.greaterThanOrEqualTo("createdAt",e.toDate()),r.lessThan("createdAt",t.toDate())}if(3===parseInt(this.state.status)||3===l)if("today"!==a);else if("today"===a){const e=new Date,t=new T.a(e);t.startOf(s);const a=new T.a(t);a.add(1,s),r.greaterThanOrEqualTo("createdAt",t.toDate()),r.lessThan("createdAt",a.toDate())}1!==parseInt(this.state.status)&&0!==parseInt(this.state.status)||r.descending("updatedAt"),r.equalTo(e,{__type:"Pointer",className:"_User",objectId:D()}),r.notContainedIn("roles",t),r.equalTo("status",l),r.notContainedIn("roles",["admin","Admin","Leader","leader"]),r.include("user"),r.find().then(e=>{e.map(e=>e.select=!1),console.log(e),this.setState({izin:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getDataByLevel=(e="today",t=j(),a="day",s=this.state.status)=>{switch(t){case"leader":this.queryLateByLevel("leaderIdNew",["staff"],e,a,s);break;case"supervisor":this.queryLateByLevel("supervisorID",["staff","leader"],e,a,s);break;case"manager":this.queryLateByLevel("managerID",["staff","leader","supervisor"],e,a,s);break;case"head":this.queryLateByLevel("headID",["staff","leader","supervisor","manager"],e,a,s);break;case"gm":this.queryLateByLevel("headID",["staff","leader","supervisor","manager","head"],e,a,s)}},this.handleFilter=e=>{e.preventDefault(),this.setState({loading:!0}),this.getDataByLevel(this.state.startDate,j(),"fox",parseInt(this.state.status))},this.closeLoading=()=>{this.setState({loadingModal:!1})},this.handleApproval=(e,t)=>{e.preventDefault(),this.setState({loadingModal:!0});const a=M.a.Object.extend("Izin"),s=new M.a.Query(a),l=new M.a.Query(M.a.Installation);s.get(this.state.userId).then(e=>{e.set("status",t?1:0),t||e.set("alasanReject",this.state.reason),e.save().then(()=>{l.equalTo("deviceType","android"),M.a.Push.send({where:l,data:{alert:"Info Approval"}});let e=[...this.state.izin];e.splice(this.state.userIndex,1),this.setState({counter:this.state.counter+1,izin:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1,alerts:1,messageApprove:t?"approve":"reject"})}).catch(e=>{alert(e.message),this.closeLoading()})}).catch(e=>{alert(e.message),this.closeLoading()})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.handleAllCheck=e=>{let t=this.state.izin,a=[];t.map(t=>(t.select=e.target.checked,t.select?a.push(t.id):a=[],t)),this.setState({izin:t,checkId:a},()=>console.log(this.state.checkId))},this.handleChildCheck=e=>{let t=this.state.izin;const a=this.state.checkId;let s=e.target.value;t.map(t=>{if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)this.setState(e=>({checkId:[...this.state.checkId,s]}),()=>console.log(this.state.checkId));else{const e=a.indexOf(s);e>-1&&(a.splice(e,1),this.setState(e=>({checkId:a}),()=>console.log(this.state.checkId)))}}),this.setState({izin:t})},this.handleApproveAll=e=>{this.setState({loading:!0});const t=M.a.Object.extend("Izin");new M.a.Query(t).get(e).then(e=>{e.set("status",1),e.save().then(()=>{const e=[...this.state.izin];e.splice(this.state.userIndex,1),this.setState({izin:e,counter:this.state.counter+1,approvalMode:!1,loading:!1})})})},this.handleRejectAll=e=>{this.setState({loading:!0});const t=M.a.Object.extend("Izin");new M.a.Query(t).get(e).then(e=>{e.set("status",0),e.set("alasanReject",this.state.reason),e.save().then(()=>{const e=[...this.state.izin];e.splice(this.state.userIndex,1),this.setState({counter:this.state.counter+1,izin:e})})})},this.approveChecked=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=this.state.checkId;let a=0;t.map(e=>{const s=M.a.Object.extend("Izin");new M.a.Query(s).get(e).then(e=>{e.set("status",1),e.save().then(()=>{if(a+=1,a===t.length)return this.setState({messageApprove:"Approve "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)})})}),this.setState({loadingModal:!1})},this.rejectChecked=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=this.state.checkId;let a=0;t.map(e=>{const s=M.a.Object.extend("Izin");new M.a.Query(s).get(e).then(e=>{e.set("status",0),e.set("alasanReject",this.state.reason),e.save().then(()=>{if(a+=1,a===t.length)return this.setState({messageApprove:"Reject "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)})})})},this.state={izin:[],loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],approveAllMode:!1,rejectAllMode:!1,deleteCounter:0,startDate:"",lampiran:"",alerts:2,messageApprove:"",photoMode:!1,status:3}}componentDidMount(){this.getDataByLevel()}render(){const e=this.state,t=e.izin,a=e.loading,s=e.approvalMode,n=e.rejectMode,r=e.loadingModal,i=e.fullnames,o=e.counter,m=e.startDate,b=e.approveAllMode,f=e.rejectAllMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,{izin:o}),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-2"},"Request izin"),2===parseInt(this.state.alerts)?"":l.a.createElement(Yt,{show:!0,icon:"ni ni-like-2",alert:"success",message:"Berhasil ".concat(this.state.messageApprove)}),l.a.createElement(d.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",required:!0,onChange:e=>{this.setState({status:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Kategori"),[3,1,0].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",onChange:e=>{this.setState({statusWaktu:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Date Picker Here",required:!0,readOnly:!0},viewMode:6===parseInt(this.state.statusWaktu)?"months":"days",dateFormat:6===parseInt(this.state.statusWaktu)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,value:m,onChange:e=>{this.setState({startDate:e.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement($.a,{className:"my-4",color:"primary",type:"submit",disabled:a},a?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),0===t.length||0===this.state.checkId.length?"":l.a.createElement(P.a,{sm:{span:0},className:"float-none"},l.a.createElement($.a,{color:"primary",size:"sm",type:"submit",disable:a?"true":"false",className:"mr-2 m-1",onClick:()=>this.setState({approveAllMode:!0})},l.a.createElement("i",{className:"fa fa-check"})," ",a?"Fetching...":"Approve"),l.a.createElement($.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:a?"true":"false",onClick:()=>this.setState({rejectAllMode:!0})},l.a.createElement("i",{className:"fa fa-times"})," ",a?"Fetching...":"Reject"))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,0===parseInt(this.state.status)||1===parseInt(this.state.status)?l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck,disabled:"true"})):l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck})),l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Alasan"),l.a.createElement("th",{scope:"col"},"Tanggal Request"),l.a.createElement("th",{scope:"col"},"Dari"),l.a.createElement("th",{scope:"col"},"Sampai"),l.a.createElement("th",{scope:"col"},"Keterangan"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,3===e.get("status")?l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",value:e.id,checked:e.select,onChange:this.handleChildCheck})):l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",disabled:"true"})),l.a.createElement("td",null,e.get("user").attributes.nik),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,e.get("alasanIzin")),l.a.createElement("td",null,A(e.get("createdAt"),"DD/MM/YYYY")),l.a.createElement("td",null,void 0==e.get("dari")?"-":A(e.get("dari"),"DD/MM/YYYY")),l.a.createElement("td",null,void 0==e.get("sampai")?"-":A(e.get("sampai"),"DD/MM/YYYY")),l.a.createElement("td",null,e.get("descIzin")),1===e.get("status")?l.a.createElement("td",null,"Approved"):0===e.get("status")?l.a.createElement("td",null,"Rejected"):l.a.createElement("td",null,void 0==e.attributes.attachFile?"":l.a.createElement($.a,{id:"t13",color:"warning",className:"btn-circle",onClick:()=>{this.setState({photoMode:!0,lampiran:e.attributes.attachFile.url()})}},l.a.createElement("i",{className:"fa fa-eye"})),l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:()=>{this.setState({approvalMode:!0,userId:e.id,userIndex:t,fullnames:e.get("fullname")})}},l.a.createElement("i",{className:"fa fa-check"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Approve"),l.a.createElement($.a,{id:"t2",className:"btn-circle btn-danger",onClick:a=>{this.setState({rejectMode:!0,userId:e.id,userIndex:t,fullnames:e.get("fullname")})}},l.a.createElement("i",{className:"fa fa-times"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t2"},"Reject")))))))))),l.a.createElement(xe,{show:s,loading:r,footer:!0,handleHide:()=>this.toggle("approvalMode"),title:"Approval Confirmation",body:"Approve izin ".concat(i," ?"),handleSubmit:e=>this.handleApproval(e,!0)}),l.a.createElement(xe,{show:n,loading:r,footer:!1,handleHide:()=>this.toggle("rejectMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject izin ".concat(i," ?")),l.a.createElement(d.a,{onSubmit:e=>this.handleApproval(e,!1)},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleApproval(e,!1)}),l.a.createElement(xe,{show:b,loading:r,footer:!0,handleHide:()=>this.toggle("approveAllMode"),title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve izin ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(xe,{show:f,loading:r,footer:!1,handleHide:()=>this.toggle("rejectAllMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject izin ".concat(this.state.checkId.length," data ?")),l.a.createElement(d.a,{onSubmit:e=>this.rejectChecked(e)},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectAllMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}),l.a.createElement(xe,{show:this.state.photoMode,title:"Lampiran Dokter",handleHide:()=>{this.setState({photoMode:!1})},body:l.a.createElement("img",{width:"100%",height:300,src:this.state.lampiran})}))}}var _t=Wt;class Gt extends l.a.Component{constructor(e){super(e),this.queryEarlyLeavesByLevel=(e,t,a="today",s="day",l=this.state.status)=>{const n=new M.a.Object.extend("Absence"),r=new M.a.Query(n);if(4===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("day");const t=new T.a(e);t.add(1,"day"),r.exists("earlyTimes"),r.greaterThanOrEqualTo("earlyTimes",e.toDate()),r.lessThan("earlyTimes",t.toDate())}if(5===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("week");const t=new T.a(e);t.add(1,"week"),r.exists("earlyTimes"),r.greaterThanOrEqualTo("earlyTimes",e.toDate()),r.lessThan("earlyTimes",t.toDate())}if(6===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("month");const t=new T.a(e);t.add(1,"month"),r.exists("earlyTimes"),r.greaterThanOrEqualTo("earlyTimes",e.toDate()),r.lessThan("earlyTimes",t.toDate())}if(3===parseInt(this.state.status)||3===l)if("today"!==a);else if("today"===a){const e=new Date,t=new T.a(e);t.startOf(s);const a=new T.a(t);a.add(1,s),r.exists("earlyTimes"),r.greaterThanOrEqualTo("earlyTimes",t.toDate()),r.lessThan("earlyTimes",a.toDate())}1!==parseInt(this.state.status)&&0!==parseInt(this.state.status)||(r.descending("updatedAt"),r.exists("earlyTImes")),r.exists("earlyTimes"),r.equalTo(e,{__type:"Pointer",className:"_User",objectId:D()}),r.notContainedIn("roles",t),r.equalTo("approvalEarly",l),r.include("user"),r.find().then(e=>{e.map(e=>e.select=!1),console.log(e),this.setState({leave:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getDataByLevel=(e="today",t=j(),a="day",s=this.state.status)=>{switch(t){case"leader":this.queryEarlyLeavesByLevel("leaderIdNew",["staff"],e,a,s);break;case"supervisor":this.queryEarlyLeavesByLevel("supervisorID",["staff","leader"],e,a,s);break;case"manager":this.queryEarlyLeavesByLevel("managerID",["staff","leader","supervisor"],e,a,s);break;case"head":this.queryEarlyLeavesByLevel("headID",["staff","leader","supervisor","manager"],e,a,s);break;case"gm":this.queryEarlyLeavesByLevel("headID",["staff","leader","supervisor","manager","head"],e,a,s)}},this.getData=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Absence"),t=new M.a.Query(e),a=new Date,s=new T.a(a);s.startOf("day");const l=new T.a(s);l.add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.exists("earlyTimes"),t.descending("createdAt"),t.equalTo("approvalEarly",3),t.greaterThanOrEqualTo("createdAt",s.toDate()),t.lessThan("createdAt",l.toDate()),t.notContainedIn("roles",["admin","Admin","Leader","leader"]),t.find().then(e=>{e.map(e=>e.select=!1),console.log(e),this.setState({leave:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.handleFilter=e=>{e.preventDefault(),this.setState({loading:!0}),this.getDataByLevel(this.state.startDate,j(),"fox",parseInt(this.state.status))},this.closeLoading=()=>{this.setState({loadingModal:!1})},this.handleApproval=(e,t)=>{e.preventDefault(),this.setState({loadingModal:!0});const a=M.a.Object.extend("Absence");new M.a.Query(a).get(this.state.userId).then(e=>{e.set("approvalEarly",t?1:0),t||e.set("alasanRejectEarly",this.state.reason),e.save().then(()=>{let e=[...this.state.leave];e.splice(this.state.userIndex,1),this.setState({counter:this.state.counter+1,leave:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1,messageApprove:t?"approve":"reject",alerts:1})}).catch(e=>{alert(e.message),this.closeLoading()})}).catch(e=>{alert(e.message),this.closeLoading()})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.handleAllCheck=e=>{let t=this.state.leave,a=[];t.map(t=>(t.select=e.target.checked,t.select?a.push(t.id):a=[],t)),this.setState({leave:t,checkId:a},()=>console.log(this.state.checkId))},this.handleChildCheck=e=>{let t=this.state.leave;const a=this.state.checkId;let s=e.target.value;t.map(t=>{if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)this.setState(e=>({checkId:[...this.state.checkId,s]}),()=>console.log(this.state.checkId));else{const e=a.indexOf(s);e>-1&&(a.splice(e,1),this.setState(e=>({checkId:a}),()=>console.log(this.state.checkId)))}}),this.setState({leave:t})},this.handleApproveAll=e=>{this.setState({loading:!0});const t=M.a.Object.extend("Absence");new M.a.Query(t).get(e).then(e=>{e.set("approvalEarly",1),e.save().then(()=>{const e=[...this.state.leave];e.splice(this.state.userIndex,1),this.setState({leave:e,approvalMode:!1,loading:!1})})})},this.handleRejectAll=e=>{this.setState({loading:!0});const t=M.a.Object.extend("Absence");new M.a.Query(t).get(e).then(e=>{e.set("approvalEarly",0),e.save().then(()=>{const e=[...this.state.leave];e.splice(this.state.userIndex,1),this.setState({leave:e,rejectMode:!1,loading:!1})})})},this.approveChecked=e=>{this.setState({loadingModal:!0});const t=this.state.checkId;let a=0;t.map(e=>{const s=M.a.Object.extend("Absence");new M.a.Query(s).get(e).then(e=>{e.set("approvalEarly",1),e.save().then(()=>{if(a+=1,a===t.length)return this.setState({messageApprove:"Approve "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)})})}),this.setState({loadingModal:!1})},this.rejectChecked=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=this.state.checkId;let a=0;t.map(e=>{const s=M.a.Object.extend("Absence");new M.a.Query(s).get(e).then(e=>{e.set("approvalEarly",0),e.set("alasanRejectEarly",this.state.reason),e.save().then(()=>{if(a+=1,a===t.length)return this.setState({messageApprove:"Reject "+a+" Data",alerts:1,loadingModal:!1,closeLoading:!1,approveAllMode:!1}),window.location.reload(!1)})})})},this.state={leave:[],loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userIndex:0,userId:"",reason:"",checkId:[],approveAllMode:!1,rejectAllMode:!1,startDate:"",messageApprove:"",alerts:2,status:3}}componentDidMount(){this.getDataByLevel()}render(){const e=this.state,t=e.leave,a=e.loading,s=e.approvalMode,n=e.rejectMode,r=e.counter,i=e.loadingModal,o=e.fullnames,m=e.rejectAllMode,b=e.approveAllMode,f=e.startDate;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,{leaveCounter:r}),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Request pulang cepat"),2===parseInt(this.state.alerts)?"":l.a.createElement(Yt,{show:!0,icon:"ni ni-like-2",alert:"success",message:"Berhasil ".concat(this.state.messageApprove)}),l.a.createElement(d.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",required:!0,onChange:e=>{this.setState({status:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Kategori"),[3,1,0].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",onChange:e=>{this.setState({statusWaktu:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Date Picker Here",required:!0,readOnly:!0},viewMode:6===parseInt(this.state.statusWaktu)?"months":"days",dateFormat:6===parseInt(this.state.statusWaktu)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,value:f,onChange:e=>{this.setState({startDate:e.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement($.a,{className:"my-4",color:"primary",type:"submit",disabled:a},a?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),0===t.length||0===this.state.checkId.length?"":l.a.createElement(P.a,{sm:{span:0},className:"float-none"},l.a.createElement($.a,{color:"primary",size:"sm",type:"submit",disable:a?"true":"false",className:"mr-2 m-1",onClick:()=>this.setState({approveAllMode:!0})},l.a.createElement("i",{className:"fa fa-check"})," ",a?"Fetching...":"Approve"),l.a.createElement($.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:a?"true":"false",onClick:()=>this.setState({rejectAllMode:!0})},l.a.createElement("i",{className:"fa fa-times"})," ",a?"Fetching...":"Reject"))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,0===parseInt(this.state.status)||1===parseInt(this.state.status)?l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",disabled:"true"})):l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck})),l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Alasan"),l.a.createElement("th",{scope:"col"},"Approve"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:5,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:5,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,3===e.get("approvalEarly")?l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",value:e.id,checked:e.select,onChange:this.handleChildCheck})):l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",disabled:"true"})),l.a.createElement("td",null,e.get("user").attributes.nik),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,e.get("alasan")),1===e.get("approvalEarly")?l.a.createElement("td",null,"Approved"):0===e.get("approvalEarly")?l.a.createElement("td",null,"Rejected"):l.a.createElement("td",null,l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:()=>{this.setState({approvalMode:!0,userId:e.id,userIndex:t,fullnames:e.get("fullname")})}},l.a.createElement("i",{className:"fa fa-check"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Approve"),l.a.createElement($.a,{id:"t2",className:"btn-circle btn-danger",onClick:a=>{this.setState({rejectMode:!0,userId:e.id,userIndex:t,fullnames:e.get("fullname")})}},l.a.createElement("i",{className:"fa fa-times"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t2"},"Reject")))))))))),l.a.createElement(xe,{show:s,loading:i,footer:!0,handleHide:()=>this.toggle("approvalMode"),title:"Approval Confirmation",body:"Approve pulang cepat ".concat(o," ?"),handleSubmit:e=>this.handleApproval(e,!0)}),l.a.createElement(xe,{show:n,footer:!1,handleHide:()=>this.toggle("rejectMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject pulang cepat ".concat(o," ?")),l.a.createElement(d.a,{onSubmit:e=>this.handleApproval(e,!1)},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},i?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit")))}),l.a.createElement(xe,{show:b,loading:i,footer:!0,handleHide:()=>this.toggle("approveAllMode"),title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve Pulang Cepat ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(xe,{show:m,loading:i,footer:!1,handleHide:()=>this.toggle("rejectAllMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject Pulang Cepat ".concat(this.state.checkId.length," data ?")),l.a.createElement(d.a,{onSubmit:this.rejectChecked},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectAllMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},i?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}var Vt=Gt;class Zt extends l.a.Component{constructor(e){super(e),this.getData=()=>{this.setState({loading:!0}),this.setState({loading:!0});const e=M.a.Object.extend("Absence"),t=new M.a.Query(e),a=new Date,s=new T.a(a);s.startOf("day");const l=new T.a(s);l.add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.notContainedIn("roles",["admin","Admin","Leader","leader"]),t.equalTo("approvalOvertime",3),t.exists("lateTimes"),t.greaterThanOrEqualTo("createdAt",s.toDate()),t.lessThan("createdAt",l.toDate()),t.descending("createdAt"),t.find().then(e=>{e.map(e=>e.select=!1),console.log(e),this.setState({overtime:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.queryLateByLevel=(e,t,a="today",s="day",l=this.state.status)=>{const n=new M.a.Object.extend("Absence"),r=new M.a.Query(n);if(4===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("day");const t=new T.a(e);t.add(1,"day"),r.exists("overtimeIn"),r.greaterThanOrEqualTo("overtimeIn",e.toDate()),r.lessThan("overtimeIn",t.toDate())}if(5===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("week");const t=new T.a(e);t.add(1,"week"),r.exists("overtimeIn"),r.greaterThanOrEqualTo("overtimeIn",e.toDate()),r.lessThan("overtimeIn",t.toDate())}if(6===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("month");const t=new T.a(e);t.add(1,"month"),r.exists("overtimeIn"),r.greaterThanOrEqualTo("overtimeIn",e.toDate()),r.lessThan("overtimeIn",t.toDate())}if(3===parseInt(this.state.status)||3===l)if("today"!==a);else if("today"===a){const e=new Date,t=new T.a(e);t.startOf(s);const a=new T.a(t);a.add(1,s),r.exists("overtimeIn"),r.greaterThanOrEqualTo("overtimeIn",t.toDate()),r.lessThan("overtimeIn",a.toDate())}1!==parseInt(this.state.status)&&0!==parseInt(this.state.status)||(r.descending("updatedAt"),r.exists("overtimeIn")),r.exists("overtimeIn"),r.equalTo(e,{__type:"Pointer",className:"_User",objectId:D()}),r.notContainedIn("roles",t),r.equalTo("approvalOvertime",l),r.notContainedIn("roles",["admin","Admin","Leader","leader"]),r.include("user"),r.find().then(e=>{e.map(e=>e.select=!1),console.log(e),this.setState({overtime:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getDataByLevel=(e="today",t=j(),a="day",s=this.state.status)=>{switch(t){case"leader":this.queryLateByLevel("leaderIdNew",["staff"],e,a,s);break;case"supervisor":this.queryLateByLevel("supervisorID",["staff","leader"],e,a,s);break;case"manager":this.queryLateByLevel("managerID",["staff","leader","supervisor"],e,a,s);break;case"head":this.queryLateByLevel("headID",["staff","leader","supervisor","manager"],e,a,s);break;case"gm":this.queryLateByLevel("headID",["staff","leader","supervisor","manager","head"],e,a,s)}},this.handleFilter=e=>{e.preventDefault(),this.setState({loading:!0}),this.getDataByLevel(this.state.startDate,j(),"fox",parseInt(this.state.status))},this.closeLoading=()=>{this.setState({loadingModal:!1})},this.handleApproval=(e,t)=>{e.preventDefault(),this.setState({loadingModal:!0});const a=M.a.Object.extend("Absence");new M.a.Query(a).get(this.state.userId).then(e=>{e.set("approvalLate",t?1:0),t||e.set("alasanReject",this.state.reason),e.save().then(()=>{let e=[...this.state.overtime];e.splice(this.state.userIndex,1),this.setState({counter:this.state.counter+1,overtime:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1,messageApprove:t?"approve":"reject",alerts:1})}).catch(e=>{alert(e.message),this.closeLoading()})}).catch(e=>{alert(e.message),this.closeLoading()})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.handleAllCheck=e=>{let t=this.state.overtime,a=[];t.map(t=>(t.select=e.target.checked,t.select?a.push(t.id):a=[],t)),this.setState({overtime:t,checkId:a},()=>console.log(this.state.checkId))},this.handleChildCheck=e=>{let t=this.state.overtime;const a=this.state.checkId;let s=e.target.value;t.map(t=>{if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)this.setState(e=>({checkId:[...this.state.checkId,s]}),()=>console.log(this.state.checkId));else{const e=a.indexOf(s);e>-1&&(a.splice(e,1),this.setState(e=>({checkId:a}),()=>console.log(this.state.checkId)))}}),this.setState({overtime:t})},this.handleApproveAll=e=>{this.setState({loading:!0});const t=M.a.Object.extend("Absence");new M.a.Query(t).get(e).then(e=>{e.set("approvalLate",1),e.save().then(()=>{const e=[...this.state.overtime];e.splice(this.state.userIndex,1),this.setState({overtime:e,approvalMode:!1,loading:!1})})})},this.handleRejectAll=e=>{this.setState({loading:!0});const t=M.a.Object.extend("Absence");new M.a.Query(t).get(e).then(e=>{e.set("approvalLate",0),e.save().then(()=>{const e=[...this.state.overtime];e.splice(this.state.userIndex,1),this.setState({overtime:e,rejectMode:!1,loading:!1})})})},this.approveChecked=e=>{this.setState({loadingModal:!0});const t=this.state.checkId;let a=0;t.map(e=>{const s=M.a.Object.extend("Absence");new M.a.Query(s).get(e).then(e=>{e.set("approvalLate",1),e.save().then(()=>{if(a+=1,a===t.length)return this.setState({messageApprove:"Approve "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)})})}),this.setState({loadingModal:!1})},this.rejectChecked=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=this.state.checkId;let a=0;t.map(e=>{const s=M.a.Object.extend("Absence");new M.a.Query(s).get(e).then(e=>{e.set("approvalLate",0),e.save().then(()=>{if(a+=1,a===t.length)return this.setState({messageApprove:"Reject "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)})})})},this.state={overtime:[],loading:!1,approvalMode:!1,rejectMode:!1,userIndex:0,loadingModal:!1,userId:"",fullnames:"",reason:"",checkId:[],rejectAllMode:!1,approveAllMode:!1,startDate:"",messageApprove:"",alerts:2,status:3}}componentDidMount(){this.getData()}render(){const e=this.state,t=e.overtime,a=e.loading,s=e.approvalMode,n=e.rejectMode,r=e.loadingModal,i=e.fullnames,o=e.approveAllMode,m=e.rejectAllMode,b=e.startDate;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Request lembur"),2===parseInt(this.state.alerts)?"":l.a.createElement(Yt,{show:!0,icon:"ni ni-like-2",alert:"success",message:"Berhasil ".concat(this.state.messageApprove)}),l.a.createElement(d.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",required:!0,onChange:e=>{this.setState({status:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Kategori"),[3,1,0].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",onChange:e=>{this.setState({statusWaktu:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Date Picker Here",required:!0,readOnly:!0},viewMode:6===parseInt(this.state.statusWaktu)?"months":"days",dateFormat:6===parseInt(this.state.statusWaktu)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,value:b,onChange:e=>{this.setState({startDate:e.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement($.a,{className:"my-4",color:"primary",type:"submit",disabled:a},a?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),0===t.length||0===this.state.checkId.length?"":l.a.createElement(P.a,{sm:{span:0},className:"float-none"},l.a.createElement($.a,{color:"primary",size:"sm",type:"submit",disable:a?"true":"false",className:"mr-2 m-1",onClick:()=>this.setState({approveAllMode:!0})},l.a.createElement("i",{className:"fa fa-check"})," ",a?"Fetching...":"Approve"),l.a.createElement($.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:a?"true":"false",onClick:()=>this.setState({rejectAllMode:!0})},l.a.createElement("i",{className:"fa fa-times"})," ",a?"Fetching...":"Reject"))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck,disabled:1===parseInt(this.state.status)||0===parseInt(this.state.status)})),l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Alasan"),l.a.createElement("th",{scope:"col"},"Approve"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:5,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,3===e.get("approvalOvertime")?l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",value:e.id,checked:e.select,onChange:this.handleChildCheck})):l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",disabled:"true"})),l.a.createElement("td",null,e.get("user").attributes.nik),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,e.get("alasan")),1===e.get("approvalOvertime")?l.a.createElement("td",null,"Approved"):0===e.get("approvalOvertime")?l.a.createElement("td",null,"Rejected"):l.a.createElement("td",null,l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:()=>{this.setState({approvalMode:!0,userId:e.id,userIndex:t,fullnames:e.get("fullname")})}},l.a.createElement("i",{className:"fa fa-check"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Approve"),l.a.createElement($.a,{id:"t2",className:"btn-circle btn-danger",onClick:a=>{this.setState({rejectMode:!0,userId:e.id,userIndex:t,fullnames:e.get("fullname")})}},l.a.createElement("i",{className:"fa fa-times"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t2"},"Reject")))))))))),l.a.createElement(xe,{show:s,loading:r,footer:!0,handleHide:()=>this.toggle("approvalMode"),title:"Approval Confirmation",body:"Approve lembur ".concat(i," ?"),handleSubmit:e=>this.handleApproval(e,!0)}),l.a.createElement(xe,{show:n,loading:r,footer:!1,handleHide:()=>this.toggle("rejectMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject lembur ".concat(i," ?")),l.a.createElement(d.a,{onSubmit:e=>this.handleApproval(e,!1)},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleApproval(e,!1)}),l.a.createElement(xe,{show:o,loading:r,footer:!0,handleHide:()=>this.toggle("approveAllMode"),title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve lembur ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(xe,{show:m,loading:r,footer:!1,handleHide:()=>this.toggle("rejectAllMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject lembur ".concat(this.state.checkId.length," data ?")),l.a.createElement(d.a,{onSubmit:this.rejectChecked},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectAllMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}var Xt=Zt;class $t extends l.a.Component{constructor(e){super(e),this.getData=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Absence"),t=new M.a.Query(e),a=new Date,s=new T.a(a);s.startOf("day");const l=new T.a(s);l.add(1,"day"),t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.notContainedIn("roles",["admin","Admin","Leader","leader"]),t.equalTo("approvalLate",3),t.exists("lateTimes"),t.greaterThanOrEqualTo("createdAt",s.toDate()),t.lessThan("createdAt",l.toDate()),t.include("user"),t.descending("createdAt"),t.find().then(e=>{e.map(e=>e.select=!1),console.log(e),this.setState({late:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.closeLoading=()=>{this.setState({loadingModal:!1})},this.queryEarlyLeavesByLevel=(e,t,a="today",s="day",l=this.state.status)=>{const n=new M.a.Object.extend("Absence"),r=new M.a.Query(n);if(4===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("day");const t=new T.a(e);t.add(1,"day"),r.exists("lateTimes"),r.greaterThanOrEqualTo("lateTimes",e.toDate()),r.lessThan("lateTimes",t.toDate())}if(5===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("week");const t=new T.a(e);t.add(1,"week"),r.exists("lateTimes"),r.greaterThanOrEqualTo("lateTimes",e.toDate()),r.lessThan("lateTimes",t.toDate())}if(6===parseInt(this.state.statusWaktu)){new Date;const e=new T.a(this.state.startDate);e.startOf("month");const t=new T.a(e);t.add(1,"month"),r.exists("lateTimes"),r.greaterThanOrEqualTo("lateTimes",e.toDate()),r.lessThan("lateTimes",t.toDate())}if(3===parseInt(this.state.status)||3===l)if("today"!==a);else if("today"===a){const e=new Date,t=new T.a(e);t.startOf(s);const a=new T.a(t);a.add(1,s),r.exists("lateTimes"),r.greaterThanOrEqualTo("lateTimes",t.toDate()),r.lessThan("lateTimes",a.toDate())}1!==parseInt(this.state.status)&&0!==parseInt(this.state.status)||(r.descending("updatedAt"),r.exists("lateTimes")),r.exists("lateTimes"),r.equalTo(e,{__type:"Pointer",className:"_User",objectId:D()}),r.notContainedIn("roles",t),r.equalTo("approvalLate",l),r.notContainedIn("roles",["admin","Admin","Leader","leader"]),r.include("user"),r.find().then(e=>{e.map(e=>e.select=!1),console.log(e),this.setState({late:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getDataByLevel=(e="today",t=j(),a="day",s=this.state.status)=>{switch(t){case"leader":this.queryEarlyLeavesByLevel("leaderIdNew",["staff"],e,a,s);break;case"supervisor":this.queryEarlyLeavesByLevel("supervisorID",["staff","leader"],e,a,s);break;case"manager":this.queryEarlyLeavesByLevel("managerID",["staff","leader","supervisor"],e,a,s);break;case"head":this.queryEarlyLeavesByLevel("headID",["staff","leader","supervisor","manager"],e,a,s);break;case"gm":this.queryEarlyLeavesByLevel("headID",["staff","leader","supervisor","manager","head"],e,a,s)}},this.handleFilter=e=>{e.preventDefault(),this.setState({loading:!0}),this.getDataByLevel(this.state.startDate,j(),"fox",parseInt(this.state.status))},this.handleApproval=(e,t)=>{e.preventDefault(),this.setState({loadingModal:!0});const a=M.a.Object.extend("Absence");new M.a.Query(a).get(this.state.userId).then(e=>{e.set("approvalLate",t?1:0),t||e.set("alasanRejectTerlambat",this.state.reason),e.save().then(()=>{let e=[...this.state.late];e.splice(this.state.userIndex,1),this.setState({counter:this.state.counter+1,late:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1,messageApprove:t?"approve":"reject",alerts:1})}).catch(e=>{alert(e.message),this.closeLoading()})}).catch(e=>{alert(e.message),this.closeLoading()})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.handleAllCheck=e=>{let t=this.state.late,a=[];t.map(t=>(t.select=e.target.checked,t.select?a.push(t.id):a=[],t)),this.setState({late:t,checkId:a},()=>console.log(this.state.checkId))},this.handleChildCheck=e=>{let t=this.state.late;const a=this.state.checkId;let s=e.target.value;t.map(t=>{if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)this.setState(e=>({checkId:[...this.state.checkId,s]}),()=>console.log(this.state.checkId));else{const e=a.indexOf(s);e>-1&&(a.splice(e,1),this.setState(e=>({checkId:a}),()=>console.log(this.state.checkId)))}}),this.setState({late:t})},this.handleApproveAll=e=>{this.setState({loading:!0});const t=M.a.Object.extend("Late");new M.a.Query(t).get(e).then(e=>{e.set("approvalLate",1),e.save().then(()=>{const e=[...this.state.late];e.splice(this.state.userIndex,1),this.setState({late:e,approvalMode:!1,loading:!1})})})},this.handleRejectAll=e=>{this.setState({loading:!0});const t=M.a.Object.extend("Late");new M.a.Query(t).get(e).then(e=>{e.set("approvalLate",0),e.save().then(()=>{const e=[...this.state.late];e.splice(this.state.userIndex,1),this.setState({late:e,rejectMode:!1,loading:!1})})})},this.approveChecked=e=>{this.setState({loadingModal:!0});const t=this.state.checkId;let a=0;t.map(e=>{const s=M.a.Object.extend("Absence");new M.a.Query(s).get(e).then(e=>{e.set("approvalLate",1),e.save().then(()=>{if(a+=1,a===t.length)return this.setState({messageApprove:"Approve "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)})})}),this.setState({loadingModal:!1})},this.rejectChecked=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=this.state.checkId;let a=0;t.map(e=>{const s=M.a.Object.extend("Absence");new M.a.Query(s).get(e).then(e=>{e.set("approvalLate",0),e.set("alasanRejectTerlambat",this.state.reason),e.save().then(()=>{if(a+=1,a===t.length)return this.setState({messageApprove:"Reject "+a+" Data",alerts:1,loadingModal:!1,approveAllMode:!1}),window.location.reload(!1)})})})},this.state={late:[],loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userIndex:0,userId:"",reason:"",startDate:"",checkId:[],approveAllMode:!1,rejectAllMode:!1,messageApprove:"",alerts:2,status:3}}componentDidMount(){this.getDataByLevel()}render(){const e=this.state,t=e.late,a=e.loading,s=e.fullnames,n=e.loadingModal,r=e.counter,i=e.approvalMode,o=e.rejectMode,m=e.approveAllMode,b=e.rejectAllMode,f=e.startDate;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,{lateCounter:r}),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Request datang terlambat"),2===parseInt(this.state.alerts)?"":l.a.createElement(Yt,{show:!0,icon:"ni ni-like-2",alert:"success",message:"Berhasil ".concat(this.state.messageApprove)}),l.a.createElement(d.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",required:!0,onChange:e=>{console.log(e.target.value),this.setState({status:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Kategori"),[3,1,0].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",onChange:e=>{console.log(e.target.value),this.setState({statusWaktu:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Date Picker Here",required:!0,readOnly:!0},viewMode:6===parseInt(this.state.statusWaktu)?"months":"days",dateFormat:6===parseInt(this.state.statusWaktu)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,value:f,onChange:e=>{this.setState({startDate:e.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement($.a,{className:"my-4",color:"primary",type:"submit",disabled:a},a?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),0===t.length||0===this.state.checkId.length?"":l.a.createElement(P.a,{sm:{span:0},className:"float-none"},l.a.createElement($.a,{color:"primary",size:"sm",type:"submit",disable:a?"true":"false",className:"mr-2 m-1",onClick:()=>this.setState({approveAllMode:!0})},l.a.createElement("i",{className:"fa fa-check"})," ",a?"Fetching...":"Approve"),l.a.createElement($.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:a?"true":"false",onClick:()=>this.setState({rejectAllMode:!0})},l.a.createElement("i",{className:"fa fa-times"})," ",a?"Fetching...":"Reject"))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck,disabled:1===parseInt(this.state.status)||0===parseInt(this.state.status)})),l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Alasan"),l.a.createElement("th",{scope:"col"},"Approve"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",value:e.id,checked:e.select,onChange:this.handleChildCheck,disabled:3!==e.get("approvalLate")})),l.a.createElement("td",null,e.get("user").attributes.nik),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,e.get("alasan")),1===e.get("approvalLate")?l.a.createElement("td",null,"Approved"):0===e.get("approvalLate")?l.a.createElement("td",null,"Rejected"):l.a.createElement("td",null,l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:()=>{this.setState({approvalMode:!0,userId:e.id,userIndex:t,fullnames:e.get("fullname")})}},l.a.createElement("i",{className:"fa fa-check"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Approve"),l.a.createElement($.a,{id:"t2",className:"btn-circle btn-danger",onClick:a=>{this.setState({rejectMode:!0,userId:e.id,userIndex:t,fullnames:e.get("fullname")})}},l.a.createElement("i",{className:"fa fa-times"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t2"},"Reject")))))))))),l.a.createElement(xe,{show:i,loading:n,handleHide:()=>this.toggle("approvalMode"),footer:!0,title:"Approval Confirmation",body:"Approve terlambat ".concat(s," ?"),handleSubmit:e=>this.handleApproval(e,!0)}),l.a.createElement(xe,{show:o,loading:n,handleHide:()=>this.toggle("rejectMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject terlambat ".concat(s," ?")),l.a.createElement(d.a,{onSubmit:e=>this.handleApproval(e,!1)},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},n?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleApproval(e,!1)}),l.a.createElement(xe,{show:m,loading:n,footer:!0,handleHide:()=>this.toggle("approveAllMode"),title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve cuti ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(xe,{show:b,loading:n,footer:!1,handleHide:()=>this.toggle("rejectAllMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject cuti ".concat(this.state.checkId.length," data ?")),l.a.createElement(d.a,{onSubmit:e=>this.rejectChecked(e)},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectAllMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},n?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}var ea=$t;class ta extends l.a.Component{constructor(e){super(e),this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.handleSearchBy=e=>{e.preventDefault(),this.setState({loading:!0});const t=this.state,a=t.searchBy,s=t.searchValue;if("name"===a){const e=new M.a.User,t=new M.a.Query(e);return t.matches("fullname",s,"i"),t.equalTo("roles","staff"),void t.find().then(e=>{this.setState({staff:e,loading:!1})}).catch(e=>alert(e.message))}if("all"===a){const e=new M.a.User,t=new M.a.Query(e);return t.equalTo("roles","staff"),t.descending("createdAt"),void t.find().then(e=>{this.setState({staff:e,loading:!1})}).catch(e=>alert(e.message))}const l=new M.a.User,n=new M.a.Query(l);n.equalTo("nik",s.toUpperCase()),n.equalTo("roles","staff"),n.find().then(e=>{console.log(e),this.setState({staff:e,loading:!1})}).catch(e=>alert(e.message))},this.handleSubmit=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=this.state,a=t.userId,s=t.fotoWajah,l=(t.imei,t.shifting),n=(t.jamKerja,t.jumlahCuti),r=t.lembur,i=(t.email,t.posisi,t.tipe,t.level,M.a.Object.extend("ChangeRequest")),o=M.a.Object.extend("Shifting"),c=new i;c.set("userId",M.a.User.createWithoutData(a)),c.set("leaderId",M.a.User.createWithoutData(D())),""!==s&&c.set("fotoWajah",new M.a.File("foto_wajah.jpg",s)),""!==l&&c.set("shifting",o.createWithoutData(l)),""!==n&&c.set("jumlahCuti",parseInt(n)),""!==r&&c.set("lembur",r),c.save().then(e=>{this.setState({messageApprove:"Success melakukan request",alerts:1,requestMode:!1})}).catch(e=>{alert(e.message),this.setState({requestMode:!1})})},this.handleFace=e=>{this.setState({loadingReco:!0,statusReco:0,fotoWajah:e.target.files[0]});const t=new FormData;t.append("knax",e.target.files[0]),Oe.a.post("http://34.126.96.126:4000/api/face-check",t,{headers:{"Content-Type":"multipart/form-data"}}).then(({data:e})=>1===e.status?this.setState({statusReco:1,message:"\u2714\ufe0f ".concat(e.message),loadingReco:!1}):this.setState({statusReco:0,message:"\u2716\ufe0f ".concat(e.message),loadingReco:!1})).catch(e=>alert("Terjadi error..."))},this.state={staff:[],shift:[],loading:!1,requestMode:!1,rejectMode:!1,userIndex:0,loadingModal:!1,userId:"",fullnames:"",reason:"",checkId:[],loadingReco:!1,message:"",searchBy:"all",searchValue:"",statusReco:0,fotoWajah:"",jumlahCuti:"",shifting:"",jamKerja:"",lembur:"",email:"",posisi:"",tipe:"",level:"",messageApprove:"",alerts:2}}componentDidMount(){this.getData(),this.getShift()}getData(){this.setState({loading:!0});const e=new M.a.User,t=new M.a.Query(e);t.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),t.notContainedIn("roles",["admin","Admin","Leader","leader"]),t.include("shifting"),t.include("userId"),t.descending("createdAt"),t.find({useMasterKey:!0}).then(e=>{console.log(e),this.setState({staff:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}getShift(){this.setState({loading:!0});new M.a.User;const e=new M.a.Object.extend("Shifting"),t=new M.a.Query(e);t.equalTo("status",1),t.find().then(e=>{console.log(e),this.setState({shift:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}render(){const e=this.state,t=e.staff,a=e.shift,s=e.loading,n=e.loadingModal,r=e.loadingReco,i=e.requestMode,o=(e.rejectMode,e.message),m=e.statusReco;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Data staff"),2===parseInt(this.state.alerts)?"":l.a.createElement(Yt,{show:!0,icon:"ni ni-like-2",alert:"success",message:"".concat(this.state.messageApprove)}),l.a.createElement(d.a,{role:"form",onSubmit:this.handleSearchBy,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement("p",null,"Search By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",defaultValue:"all",onChange:e=>{this.setState({searchBy:e.target.value})}},["all","nik","name"].map(e=>l.a.createElement("option",{value:e},e)))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"text",className:"fa-pull-right",onChange:e=>{this.setState({searchValue:e.target.value})},placeholder:"Masukan ".concat(this.state.searchBy),disabled:"all"===this.state.searchBy,required:"all"!==this.state.searchBy})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement($.a,{className:"my-4",color:"primary",type:"submit",disabled:s},s?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),0===t.length||0===this.state.checkId.length?"":l.a.createElement(P.a,{sm:{span:0},className:"float-none"},l.a.createElement($.a,{color:"primary",size:"sm",type:"submit",disable:s?"true":"false",className:"mr-2 m-1",onClick:()=>this.setState({approveAllMode:!0})},l.a.createElement("i",{className:"fa fa-check"})," ",s?"Fetching...":"Approve"),l.a.createElement($.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:s?"true":"false",onClick:this.setState({rejectAllMode:!0})},l.a.createElement("i",{className:"fa fa-times"})," ",s?"Fetching...":"Reject"))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Shifting"),l.a.createElement("th",{scope:"col"},"Jumlah Cuti"),l.a.createElement("th",{scope:"col"},"Lembur"),l.a.createElement("th",{scope:"col"},"Aksi"))),l.a.createElement("tbody",null,s?l.a.createElement("td",{colSpan:7,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:7,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,e.get("nik")),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,void 0===e.get("shifting")?"-":e.get("shifting").attributes.tipeShift),l.a.createElement("td",null,e.get("jumlahCuti")),l.a.createElement("td",null,e.get("lembur")),l.a.createElement("td",null,l.a.createElement($.a,{id:"t1",color:"primary",className:"btn-circle",onClick:()=>{this.setState({requestMode:!0,userId:e.id,userIndex:t,fullnames:e.get("fullname")})}},l.a.createElement("i",{className:"fa fa-edit"})),l.a.createElement(He.a,{delay:0,placement:"top",target:"t1"},"Ubah data")))))))))),l.a.createElement(xe,{show:i,loading:n,footer:!1,handleHide:()=>this.toggle("requestMode"),title:"Change Request Form",body:l.a.createElement("div",null,l.a.createElement(d.a,{onSubmit:this.handleSubmit,className:"text-dark"},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Foto Wajah"),l.a.createElement(E.a,{id:"exampleFormControlInput1",type:"file",onChange:this.handleFace}),l.a.createElement(ze.a,{className:r?"text-muted":"",style:{color:"".concat(0==m?"red":"green")}},r?"Processing...":o)),l.a.createElement(u.a,{controlId:"formLokasi"},l.a.createElement(De.a,null,"Shift"),l.a.createElement(E.a,{type:"select",required:!0,onChange:e=>this.setState({shifting:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih Shift"),a.map((e,t)=>l.a.createElement("option",{value:e.id},e.get("tipeShift"))))),l.a.createElement(u.a,{controlId:"formCuti"},l.a.createElement(De.a,null,"Jumlah cuti"),l.a.createElement(E.a,{type:"number",placeholder:"Masukkan jumlah cuti",onChange:e=>this.setState({jumlahCuti:parseInt(e.target.value)})})),l.a.createElement(u.a,{controlId:"formLembut"},l.a.createElement(De.a,null,"Lembur"),l.a.createElement(E.a,{className:"text-dark",type:"select",onChange:e=>this.setState({lembur:e.target.value})},l.a.createElement("option",{selected:!0,disabled:!0,hidden:!0},"Pilih Lembur"),["Ya","Tidak"].map(e=>l.a.createElement("option",{value:e},e)))),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("requestMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},n?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}var aa=ta;class sa extends l.a.Component{constructor(e){super(e),this.handleSubmit=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=this.state,a=t.userId,s=t.fotoWajah,l=t.imei,n=t.lokasiKerja,r=t.jamKerja,i=t.jumlahCuti,o=t.lembur,c=new(M.a.Object.extend("ChangeRequest"));c.set("idUser",a),""!==s&&c.set("fotoWajah",new M.a.File("foto_wajah.jpg",s)),""!==l&&c.set("imei",l),""!==r&&c.set("jamKerja",r),""!==n&&c.set("lokasiKerja",n),""!==i&&c.set("jumlahCuti",parseInt(i)),""!==o&&c.set("lembur",o),c.save().then(e=>{alert("Succes melakukan request!"),this.setState({requestMode:!1})}).catch(e=>{alert(e.message),this.setState({requestMode:!1})})},this.handleFace=e=>{this.setState({loadingReco:!0,statusReco:0,fotoWajah:e.target.files[0]});const t=new FormData;t.append("knax",e.target.files[0]),Oe.a.post("http://35.247.147.177:4000/api/face-check",t,{headers:{"Content-Type":"multipart/form-data"}}).then(({data:e})=>1===e.status?this.setState({statusReco:1,message:"\u2714\ufe0f ".concat(e.message),loadingReco:!1}):this.setState({statusReco:0,message:"\u2716\ufe0f ".concat(e.message),loadingReco:!1})).catch(e=>alert("Terjadi error..."))},this.state={staff:[],loading:!1,requestMode:!1,userIndex:0,loadingModal:!1,userId:"",fullnames:"",reason:"",checkId:[],loadingReco:!1,message:"",statusReco:0,fotoWajah:"",jumlahCuti:"",lokasiKerja:"",jamKerja:"",lembur:""}}componentDidMount(){this.getData()}getData(){this.setState({loading:!0});const e=M.a.Object.extend("ChangeRequest"),t=new M.a.Query(e);t.include("userId"),t.equalTo("leaderId",{__type:"Pointer",className:"_User",objectId:D()}),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.find().then(e=>{console.log(e),this.setState({staff:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}render(){const e=this.state,t=e.staff,a=e.loading,s=e.loadingModal,n=e.loadingReco,r=e.requestMode,i=e.message,o=e.statusReco;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Change request status"),0===t.length||0===this.state.checkId.length?"":l.a.createElement(P.a,{sm:{span:0},className:"float-none"},l.a.createElement($.a,{color:"primary",size:"sm",type:"submit",disable:a?"true":"false",className:"mr-2 m-1",onClick:()=>this.setState({approveAllMode:!0})},l.a.createElement("i",{className:"fa fa-check"})," ",a?"Fetching...":"Approve"),l.a.createElement($.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:a?"true":"false",onClick:this.setState({rejectAllMode:!0})},l.a.createElement("i",{className:"fa fa-times"})," ",a?"Fetching...":"Reject"))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Status"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:3,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,void 0===e.get("userId")?"-":e.get("userId").attributes.nik),l.a.createElement("td",null,void 0===e.get("userId")?"-":e.get("userId").attributes.fullname),l.a.createElement("td",{style:{color:"".concat(3===e.attributes.statusApprove?"blue":"".concat(1===e.attributes.statusApprove?"green":"red"))}},l.a.createElement("strong",null,3===e.get("statusApprove")?"ON PROCESS":1===e.get("statusApprove")?"Approved".toUpperCase():"Rejected".toUpperCase())))))))))),l.a.createElement(xe,{show:r,loading:s,footer:!1,handleHide:()=>this.toggle("requestMode"),title:"Change Request Form",body:l.a.createElement("div",null,l.a.createElement(d.a,{onSubmit:this.handleSubmit,className:"text-dark"},l.a.createElement(u.a,null,l.a.createElement(De.a,null,"Foto Wajah"),l.a.createElement(E.a,{id:"exampleFormControlInput1",type:"file",onChange:this.handleFace}),l.a.createElement(ze.a,{className:n?"text-muted":"",style:{color:"".concat(0==o?"red":"green")}},n?"Processing...":i)),l.a.createElement(u.a,{controlId:"formImei"},l.a.createElement(De.a,null,"IMEI"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",type:"text",placeholder:"Masukkan imei hp",onChange:e=>this.setState({imei:e.target.value})})),l.a.createElement(u.a,{controlId:"formImei"},l.a.createElement(De.a,null,"Jam Kerja"),l.a.createElement(E.a,{autoCapitalize:"true",autoComplete:"false",type:"select",onChange:e=>this.setState({jamKerja:e.target.value})},["Jam tetap","Jam fleksibel","Jam bebas"].map(e=>l.a.createElement("option",{value:e},e)))),l.a.createElement(u.a,{controlId:"formLokasi"},l.a.createElement(De.a,null,"Lokasi kerja"),l.a.createElement(E.a,{type:"select",defaultValue:"all",required:!0,onChange:e=>this.setState({lokasiKerja:e.target.value})},["Tetap","Bebas (mobile)"].map(e=>l.a.createElement("option",{value:e},e)))),l.a.createElement(u.a,{controlId:"formCuti"},l.a.createElement(De.a,null,"Jumlah cuti"),l.a.createElement(E.a,{type:"number",placeholder:"Masukkan jumlah cuti",onChange:e=>this.setState({jumlahCuti:parseInt(e.target.value)})})),l.a.createElement(u.a,{controlId:"formLembut"},l.a.createElement(De.a,null,"Lembur"),l.a.createElement(E.a,{className:"text-dark",type:"select",defaultValue:"all",onChange:e=>this.setState({lembur:e.target.value})},["Ya","Tidak"].map(e=>l.a.createElement("option",{value:e},e)))),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},s?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}var la=sa;class na extends l.a.Component{constructor(e){super(e),this.handlePageChange=e=>{console.log("active page is ".concat(e)),this.setState({activePage:e})},this.getData=()=>{this.setState({loading:!0});const e=this.state,t=e.searchBy,a=(e.searchValue,this.props.match.params.id),s=M.a.Object.extend(x(t)),l=new M.a.Query(s);"Absen"===t&&(l.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),l.descending("absenMasuk"),l.equalTo("user",{__type:"Pointer",className:"_User",objectId:a}),l.include("user"),l.find().then(e=>{console.log("user",e),this.setState({history:e,loading:!1})}).catch(e=>{alert(e.message),console.log(e),this.setState({loading:!1})}))},this.handleFilter=e=>{e.preventDefault(),this.setState({loading:!0});const t=this.state,a=t.searchBy,s=(t.searchValue,this.props.match.params.id),l=M.a.Object.extend(x(a)),n=new M.a.Query(l);if("Absen"===a){if(4===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("day");const t=new T.a(e);t.add(1,"day"),n.greaterThanOrEqualTo("absenMasuk",e.toDate()),n.lessThan("absenMasuk",t.toDate())}if(5===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("week");const t=new T.a(e);t.add(1,"week"),n.greaterThanOrEqualTo("absenMasuk",e.toDate()),n.lessThan("absenMasuk",t.toDate())}if(6===parseInt(this.state.status)){void 0===this.state.startDate&&alert("wajib pilih tanggal");new Date;const e=new T.a(this.state.startDate);e.startOf("month");const t=new T.a(e);t.add(1,"month"),n.greaterThanOrEqualTo("absenMasuk",e.toDate()),n.lessThan("absenMasuk",t.toDate())}n.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),n.descending("absenMasuk"),n.equalTo("user",{__type:"Pointer",className:"_User",objectId:s}),n.include("user"),n.find().then(e=>{console.log("user",e),this.setState({history:e,loading:!1})}).catch(e=>{alert(e.message),console.log(e),this.setState({loading:!1})})}if("Cuti"===a){if(4===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("day");const t=new T.a(e);t.add(1,"day"),n.greaterThanOrEqualTo("createdAt",e.toDate()),n.lessThan("createdAt",t.toDate())}if(5===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("week");const t=new T.a(e);t.add(1,"week"),n.greaterThanOrEqualTo("createdAt",e.toDate()),n.lessThan("createdAt",t.toDate())}if(6===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("month");const t=new T.a(e);t.add(1,"month"),n.greaterThanOrEqualTo("createdAt",e.toDate()),n.lessThan("createdAt",t.toDate())}n.descending("createdAt"),n.equalTo("user",{__type:"Pointer",className:"_User",objectId:s}),n.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),n.equalTo("statusIzin",2),n.include("user"),n.find().then(e=>{console.log("wew",e),e.map(e=>e.select=!1),this.setState({history:e,loading:!1})}).catch(({message:e})=>{this.setState({loading:!1}),alert(e)})}if("Izin"===a){if(4===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("day");const t=new T.a(e);t.add(1,"day"),n.greaterThanOrEqualTo("createdAt",e.toDate()),n.lessThan("createdAt",t.toDate())}if(5===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("week");const t=new T.a(e);t.add(1,"week"),n.greaterThanOrEqualTo("createdAt",e.toDate()),n.lessThan("createdAt",t.toDate())}if(6===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("month");const t=new T.a(e);t.add(1,"month"),n.greaterThanOrEqualTo("createdAt",e.toDate()),n.lessThan("createdAt",t.toDate())}n.descending("createdAt"),n.include("user"),n.equalTo("statusIzin",1),n.equalTo("user",{__type:"Pointer",className:"_User",objectId:s}),n.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),n.find().then(e=>{e.map(e=>e.select=!1),this.setState({history:e,loading:!1})}).catch(({message:e})=>{this.setState({loading:!1}),console.log("err",e),alert(e)})}if("Terlambat"===a){if(4===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("day");const t=new T.a(e);t.add(1,"day"),n.greaterThanOrEqualTo("createdAt",e.toDate()),n.lessThan("createdAt",t.toDate())}if(5===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("week");const t=new T.a(e);t.add(1,"week"),n.greaterThanOrEqualTo("createdAt",e.toDate()),n.lessThan("createdAt",t.toDate())}if(6===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("month");const t=new T.a(e);t.add(1,"month"),n.greaterThanOrEqualTo("createdAt",e.toDate()),n.lessThan("createdAt",t.toDate())}n.include("user"),n.descending("time"),n.equalTo("user",{__type:"Pointer",className:"_User",objectId:s}),n.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),n.find().then(e=>{e.map(e=>e.select=!1),this.setState({history:e,loading:!1})}).catch(({message:e})=>{this.setState({loading:!1}),console.log("err",e),alert(e)})}if("Lembur"===a){if(4===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("day");const t=new T.a(e);t.add(1,"day"),n.greaterThanOrEqualTo("createdAt",e.toDate()),n.lessThan("createdAt",t.toDate())}if(5===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("week");const t=new T.a(e);t.add(1,"week"),n.greaterThanOrEqualTo("createdAt",e.toDate()),n.lessThan("createdAt",t.toDate())}if(6===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("month");const t=new T.a(e);t.add(1,"month"),n.greaterThanOrEqualTo("createdAt",e.toDate()),n.lessThan("createdAt",t.toDate())}n.include("user"),n.descending("time"),n.equalTo("user",{__type:"Pointer",className:"_User",objectId:s}),n.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),n.find().then(e=>{e.map(e=>e.select=!1),this.setState({history:e,loading:!1})}).catch(({message:e})=>{this.setState({loading:!1}),console.log("err",e),alert(e)})}if("Pulang Cepat"===a){if(4===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("day");const t=new T.a(e);t.add(1,"day"),n.greaterThanOrEqualTo("createdAt",e.toDate()),n.lessThan("createdAt",t.toDate())}if(5===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("week");const t=new T.a(e);t.add(1,"week"),n.greaterThanOrEqualTo("createdAt",e.toDate()),n.lessThan("createdAt",t.toDate())}if(6===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("month");const t=new T.a(e);t.add(1,"month"),n.greaterThanOrEqualTo("createdAt",e.toDate()),n.lessThan("createdAt",t.toDate())}n.include("user"),n.descending("time"),n.equalTo("user",{__type:"Pointer",className:"_User",objectId:s}),n.equalTo("leaderIdNew",{__type:"Pointer",className:"_User",objectId:D()}),n.find().then(e=>{e.map(e=>e.select=!1),this.setState({history:e,loading:!1})}).catch(({message:e})=>{this.setState({loading:!1}),console.log("err",e),alert(e)})}},this.closeLoading=()=>{this.setState({loadingModal:!1})},this.handleApproval=(e,t)=>{e.preventDefault(),this.setState({loadingModal:!0});const a=M.a.Object.extend("Overtime");new M.a.Query(a).get(this.state.userId).then(e=>{e.set("status",t?1:0),t||e.set("alasanReject",this.state.reason),e.save().then(()=>{let e=[...this.state.overtime];e.splice(this.state.userIndex,1),this.setState({counter:this.state.counter+1,overtime:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1}),alert("Berhasil ".concat(t?"approve":"reject"))}).catch(e=>{alert(e.message),this.closeLoading()})}).catch(e=>{alert(e.message),this.closeLoading()})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.handleAllCheck=e=>{let t=this.state.overtime,a=[];t.map(t=>(t.select=e.target.checked,t.select?a.push(t.id):a=[],t)),this.setState({overtime:t,checkId:a},()=>console.log(this.state.checkId))},this.handleChildCheck=e=>{let t=this.state.overtime;const a=this.state.checkId;let s=e.target.value;t.map(t=>{if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)this.setState(e=>({checkId:[...this.state.checkId,s]}),()=>console.log(this.state.checkId));else{const e=a.indexOf(s);e>-1&&(a.splice(e,1),this.setState(e=>({checkId:a}),()=>console.log(this.state.checkId)))}}),this.setState({overtime:t})},this.handleApproveAll=e=>{this.setState({loading:!0});const t=M.a.Object.extend("Overtime");new M.a.Query(t).get(e).then(e=>{e.set("status",1),e.save().then(()=>{const e=[...this.state.overtime];e.splice(this.state.userIndex,1),this.setState({overtime:e,approvalMode:!1,loading:!1})})})},this.handleRejectAll=e=>{this.setState({loading:!0});const t=M.a.Object.extend("Overtime");new M.a.Query(t).get(e).then(e=>{e.set("status",0),e.save().then(()=>{const e=[...this.state.overtime];e.splice(this.state.userIndex,1),this.setState({overtime:e,rejectMode:!1,loading:!1})})})},this.approveChecked=e=>{this.setState({loadingModal:!0});const t=this.state.checkId;let a=0;t.map(e=>{const s=M.a.Object.extend("Overtime");new M.a.Query(s).get(e).then(e=>{e.set("status",1),e.save().then(()=>{if(a+=1,a===t.length)return alert("Berhasil reject"),window.location.reload(!1)})})}),this.setState({loadingModal:!1})},this.rejectChecked=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=this.state.checkId;let a=0;t.map(e=>{const s=M.a.Object.extend("Overtime");new M.a.Query(s).get(e).then(e=>{e.set("status",1),e.save().then(()=>{if(a+=1,a===t.length)return alert("Berhasil reject"),window.location.reload(!1)})})})},this.state={history:[],loading:!1,approvalMode:!1,rejectMode:!1,userIndex:0,loadingModal:!1,userId:"",fullnames:"",reason:"",checkId:[],rejectAllMode:!1,approveAllMode:!1,searchValue:"",searchBy:"Absen",excelMode:!1,startDate:"",startDateExcelFrom:"",activePage:1,itemCountPerPage:10,pageRangeDisplayed:10}}componentDidMount(){this.getData()}render(){const e=this.state,t=e.history,a=e.loading,s=e.approvalMode,n=e.rejectMode,r=e.loadingModal,i=e.fullnames,o=e.approveAllMode,m=e.rejectAllMode,b=e.excelMode,f=this.state.activePage*this.state.itemCountPerPage,v=f-this.state.itemCountPerPage,y=this.state.history.slice(v,f);return console.log(y),l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"History ",this.state.searchBy),l.a.createElement(d.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",required:!0,onChange:e=>{this.setState({searchBy:e.target.value})}},["Absen","Izin","Cuti","Terlambat","Lembur","Pulang Cepat"].map(e=>l.a.createElement("option",{value:e},e)))))),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",onChange:e=>{this.setState({status:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-4 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Date Picker Here",required:!0,disabled:4!==parseInt(this.state.status)&&5!==parseInt(this.state.status)&&6!==parseInt(this.state.status)},viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,onChange:e=>{this.setState({startDate:e.toDate()})}})))),l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement($.a,{className:"my-4",color:"primary",type:"submit",disabled:a},a?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),l.a.createElement(P.a,{sm:{span:0},className:"float-none"})),l.a.createElement(ee.a,{className:"align-items-center table-flush",id:"ekspor",responsive:!0},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Absen"===this.state.searchBy?"Tanggal Masuk":"Tanggal"),"Absen"===this.state.searchBy?l.a.createElement("th",{scope:"col"},"Tanggal Keluar"):l.a.createElement("th",{hidden:!0}),l.a.createElement("th",{scope:"col"},"Status"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:5,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,e.get("user").attributes.nik),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"DD/MM/YYYY HH:mm:ss"):void 0!==e.get("absenMasuk")?A(e.get("absenMasuk"),"DD/MM/YYYY HH:mm:ss"):""),"Absen"===this.state.searchBy?l.a.createElement("td",null,void 0===e.get("absenKeluar")?"-":A(e.get("absenKeluar"),"DD/MM/YYYY HH:mm:ss")):l.a.createElement("td",{hidden:!0}),"Absen"===this.state.searchBy?l.a.createElement("td",{style:{color:"".concat(void 0===e.get("lateTimes")||void 0===e.get("earlyTimes")||void 0===e.get("overtimeOut")?"blue":"red")}},void 0!==e.get("lateTimes")?"Terlambat":void 0!==e.get("earlyTimes")?"Pulang Cepat":void 0!==e.get("overtimeOut")?"Lembur":"Tepat Waktu"):l.a.createElement("td",{style:{color:"".concat(0===e.get("status")?"red":"blue")}},3===e.get("status")?"Menunggu konfirmasi":0===e.get("status")?"Rejected":"Approved"))))))))),l.a.createElement(xe,{show:s,loading:r,footer:!0,handleHide:()=>this.toggle("approvalMode"),title:"Approval Confirmation",body:"Approve lembur ".concat(i," ?"),handleSubmit:e=>this.handleApproval(e,!0)}),l.a.createElement(xe,{show:n,loading:r,footer:!1,handleHide:()=>this.toggle("rejectMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject lembur ".concat(i," ?")),l.a.createElement(d.a,{onSubmit:e=>this.handleApproval(e,!1)},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleApproval(e,!1)}),l.a.createElement(xe,{show:o,loading:r,footer:!1,handleHide:()=>this.toggle("approveAllMode"),title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve lembur ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(xe,{show:m,loading:r,footer:!1,handleHide:()=>this.toggle("rejectAllMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject lembur ".concat(this.state.checkId.length," data ?")),l.a.createElement(d.a,{onSubmit:this.rejectChecked},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}),l.a.createElement(xe,{show:b,loading:r,footer:!1,handleHide:()=>this.setState({excelMode:!1}),title:"Export Excel",body:l.a.createElement(d.a,null,l.a.createElement("div",{className:"col-md-12 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",onChange:e=>{this.setState({status:e.target.value})},required:!0},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6,7].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-12 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Pilih Tanggal",required:!0,disabled:4!==parseInt(this.state.status)&&5!==parseInt(this.state.status)&&6!==parseInt(this.state.status)&&7!==parseInt(this.state.status)},viewMode:5===parseInt(this.state.status)?"days":6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,onChange:e=>{this.setState({startDateExcelFrom:e.toDate()})}})))),7===parseInt(this.state.status)?l.a.createElement("div",{className:"col-md-12 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Pilih Tanggal",required:!0,disabled:4!==parseInt(this.state.status)&&5!==parseInt(this.state.status)&&6!==parseInt(this.state.status)&&7!==parseInt(this.state.status)},viewMode:5===parseInt(this.state.status)?"days":6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",timeFormat:!1,onChange:e=>{this.setState({startDateExcelTo:e.toDate()})}})))):"",l.a.createElement(lt.a,{id:"eskport",className:"btn btn-primary",table:"data",filename:"Absensi",sheet:"Absensi",buttonText:"Export To .xls"}),l.a.createElement(zt,{table:"data",userId:this.props.match.params.id,startDateExcelFrom:this.state.startDate,status:this.state.status}))}))}}var ra=na;class ia extends l.a.Component{constructor(e){super(e),this.handleFilter=e=>{e.preventDefault(),this.setState({loading:!0,exportButton:!0});const t=M.a.Object.extend("Absence"),a=new M.a.Query(t),s=this.props.match.params.id;if(4===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("day");const t=new T.a(e);t.add(1,"day"),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:s}),a.descending("createdAt"),a.greaterThanOrEqualTo("createdAt",e.toDate()),a.lessThan("createdAt",t.toDate()),a.include("user"),a.find().then(e=>{console.log("user",e);let t=[],a=[],s=[],l=[],n=[],r=[],i=[],o=[];if(e.filter(e=>void 0!==e.get("earlyTimes")).map((e,s)=>{t.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)}),e.filter(e=>void 0!==e.get("lateTimes")).map((e,t)=>{s.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),l.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",s)}),e.filter(e=>void 0!==e.get("overtimeOut")).map((e,t)=>{n.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),r.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())}),e.map((e,t)=>{o.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),i.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())}),1===t.length){let e=t.reduce((e,t)=>e+t,0);const a=e%60,s=Math.floor(e/60);this.setState({sisaJam:s,minutesEarly:a}),console.log("reduce baru menit",a),console.log("reduce baru jam sisa",s)}else if(t.length>1){let e=t.reduce((e,t)=>e+t,0);const a=e%60,s=Math.floor(e/60);this.setState({sisaJam:s,minutesEarly:a})}else this.setState({minutesEarly:0,sisaJam:0});if(1===a.length){const e=a.reduce((e,t)=>e+t,0)+this.state.sisaJam;this.setState({jamEarly:e})}else if(a.length>1){const e=a.reduce((e,t)=>e+t,0)+this.state.sisaJam;this.setState({jamEarly:e})}else this.setState({jamEarly:0});if(console.log("late times ",l),1===s.length){let e=s.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamLate:a,minutesLate:t})}else if(s.length>1){let e=s.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamLate:a,minutesLate:t})}else this.setState({sisaJamLate:0,minutesLate:0});if(1===l.length){const e=l.reduce((e,t)=>e+t,0)+this.state.sisaJamLate;this.setState({hoursLate:e})}else if(l.length>1){const e=l.reduce((e,t)=>e+t,0)+this.state.sisaJamLate;this.setState({hoursLate:e})}else this.setState({hoursLate:0});if(1===n.length){let e=n.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamOvertime:a,minutesOvertime:t})}else if(n.length>1){let e=n.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamOvertime:a,minutesOvertime:t})}else this.setState({minutesOvertime:0,sisaJam:0});if(1===r.length){const e=r.reduce((e,t)=>e+t,0)+this.state.sisaJamOvertime;this.setState({jamOvertime:e})}else if(r.length>1){const e=r.reduce((e,t)=>e+t,0)+this.state.sisaJamOvertime;this.setState({jamOvertime:e})}else this.setState({jamOvertime:0});if(1===o.length){let e=o.reduce((e,t)=>parseInt(e)+parseInt(t),0);const t=Math.floor(e/60),a=e%60;this.setState({sisaJamTotalMinutes:t,minutesTotal:a})}else if(o.length>1){let e=o.reduce((e,t)=>parseInt(e)+parseInt(t),0);const t=Math.floor(e/60),a=e%60;this.setState({sisaJamTotalMinutes:t,minutesTotal:a})}else this.setState({minutesTotal:0,sisaJamTotalMinutes:0});if(1===i.length){const e=i.reduce((e,t)=>e+t,0)+this.state.sisaJamTotalMinutes;this.setState({jamTotal:e})}else if(i.length>1){const e=i.reduce((e,t)=>e+t,0)+this.state.sisaJamTotalMinutes;this.setState({jamTotal:e})}else this.setState({jamTotal:0});this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}else if(5===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("week");const t=new T.a(e);t.add(1,"week"),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:s}),a.descending("createdAt"),a.greaterThanOrEqualTo("createdAt",e.toDate()),a.lessThan("createdAt",t.toDate()),a.include("user"),a.find().then(e=>{console.log("user",e);let t=[],a=[],s=[],l=[],n=[],r=[],i=[],o=[];if(e.filter(e=>void 0!==e.get("earlyTimes")).map((e,s)=>{t.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)}),e.filter(e=>void 0!==e.get("lateTimes")).map((e,t)=>{s.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),l.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",s)}),e.filter(e=>void 0!==e.get("overtimeOut")).map((e,t)=>{n.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),r.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())}),e.map((e,t)=>{o.push(T.a.duration(void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):void 0!==e.get("absenMasuk")?A(e.get("absenMasuk"),"HH:mm"):"00:00","HH:mm")).minutes()),i.push(T.a.duration(void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())}),1===t.length){let e=t.reduce((e,t)=>e+t,0);const a=e%60,s=Math.floor(e/60);this.setState({sisaJam:s,minutesEarly:a}),console.log("reduce baru menit",a),console.log("reduce baru jam sisa",s)}else if(t.length>1){let e=t.reduce((e,t)=>e+t,0);const a=e%60,s=Math.floor(e/60);this.setState({sisaJam:s,minutesEarly:a})}else this.setState({minutesEarly:0,sisaJam:0});if(1===a.length){const e=a.reduce((e,t)=>e+t,0)+this.state.sisaJam;this.setState({jamEarly:e})}else if(a.length>1){const e=a.reduce((e,t)=>e+t,0)+this.state.sisaJam;this.setState({jamEarly:e})}else this.setState({jamEarly:0});if(console.log("late times ",l),1===s.length){let e=s.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamLate:a,minutesLate:t})}else if(s.length>1){let e=s.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamLate:a,minutesLate:t})}else this.setState({sisaJamLate:0,minutesLate:0});if(1===l.length){const e=l.reduce((e,t)=>e+t,0)+this.state.sisaJamLate;this.setState({hoursLate:e})}else if(l.length>1){const e=l.reduce((e,t)=>e+t,0)+this.state.sisaJamLate;this.setState({hoursLate:e})}else this.setState({hoursLate:0});if(1===n.length){let e=n.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamOvertime:a,minutesOvertime:t})}else if(n.length>1){let e=n.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamOvertime:a,minutesOvertime:t})}else this.setState({minutesOvertime:"0",sisaJam:0});if(1===r.length){const e=r.reduce((e,t)=>e+t,0)+this.state.sisaJamOvertime;this.setState({jamOvertime:e})}else if(r.length>1){const e=r.reduce((e,t)=>e+t,0)+this.state.sisaJamOvertime;this.setState({jamOvertime:e})}else this.setState({jamOvertime:"0"});if(1===o.length){let e=o.reduce((e,t)=>parseInt(e)+parseInt(t),0);const t=Math.floor(e/60),a=e%60;this.setState({sisaJamTotalMinutes:t,minutesTotal:a})}else if(o.length>1){let e=o.reduce((e,t)=>parseInt(e)+parseInt(t),0);const t=Math.floor(e/60),a=e%60;this.setState({sisaJamTotalMinutes:t,minutesTotal:a})}else this.setState({minutesTotal:0,sisaJamTotalMinutes:0});if(1===i.length){const e=i.reduce((e,t)=>e+t,0)+this.state.sisaJamTotalMinutes;this.setState({jamTotal:e})}else if(i.length>1){const e=i.reduce((e,t)=>e+t,0)+this.state.sisaJamTotalMinutes;this.setState({jamTotal:e})}else this.setState({jamTotal:0});this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}else if(6===parseInt(this.state.status)){new Date;const e=new T.a(this.state.startDate);e.startOf("month");const t=new T.a(e);t.add(1,"month"),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:s}),a.descending("createdAt"),a.greaterThanOrEqualTo("createdAt",e.toDate()),a.lessThan("createdAt",t.toDate()),a.include("user"),a.find().then(e=>{console.log("user",e);let t=[],a=[],s=[],l=[],n=[],r=[],i=[],o=[];if(e.filter(e=>void 0!==e.get("earlyTimes")).map((e,s)=>{t.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)}),e.filter(e=>void 0!==e.get("lateTimes")).map((e,t)=>{s.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),l.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",s)}),e.filter(e=>void 0!==e.get("overtimeOut")).map((e,t)=>{n.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),r.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())}),e.map((e,t)=>{o.push(T.a.duration(void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):void 0!==e.get("absenMasuk")?A(e.get("absenMasuk"),"HH:mm"):"00:00","HH:mm")).minutes()),i.push(T.a.duration(void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())}),1===t.length){let e=t.reduce((e,t)=>e+t,0);const a=e%60,s=Math.floor(e/60);this.setState({sisaJam:s,minutesEarly:a}),console.log("reduce baru menit",a),console.log("reduce baru jam sisa",s)}else if(t.length>1){let e=t.reduce((e,t)=>e+t,0);const a=e%60,s=Math.floor(e/60);this.setState({sisaJam:s,minutesEarly:a})}else this.setState({minutesEarly:0,sisaJam:0});if(1===a.length){const e=a.reduce((e,t)=>e+t,0)+this.state.sisaJam;this.setState({jamEarly:e})}else if(a.length>1){const e=a.reduce((e,t)=>e+t,0)+this.state.sisaJam;this.setState({jamEarly:e})}else this.setState({jamEarly:0});if(console.log("late times ",l),1===s.length){let e=s.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamLate:a,minutesLate:t})}else if(s.length>1){let e=s.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamLate:a,minutesLate:t})}else this.setState({sisaJamLate:0,minutesLate:0});if(1===l.length){const e=l.reduce((e,t)=>e+t,0)+this.state.sisaJamLate;this.setState({hoursLate:e})}else if(l.length>1){const e=l.reduce((e,t)=>e+t,0)+this.state.sisaJamLate;this.setState({hoursLate:e})}else this.setState({hoursLate:0});if(1===n.length){let e=n.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamOvertime:a,minutesOvertime:t})}else if(n.length>1){let e=n.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamOvertime:a,minutesOvertime:t})}else this.setState({minutesOvertime:0,sisaJam:0});if(1===r.length){const e=r.reduce((e,t)=>e+t,0)+this.state.sisaJamOvertime;this.setState({jamOvertime:e})}else if(r.length>1){const e=r.reduce((e,t)=>e+t,0)+this.state.sisaJamOvertime;this.setState({jamOvertime:e})}else this.setState({jamOvertime:0});if(1===o.length){let e=o.reduce((e,t)=>parseInt(e)+parseInt(t),0);const t=Math.floor(e/60),a=e%60;this.setState({sisaJamTotalMinutes:t,minutesTotal:a})}else if(o.length>1){let e=o.reduce((e,t)=>parseInt(e)+parseInt(t),0);const t=Math.floor(e/60),a=e%60;this.setState({sisaJamTotalMinutes:t,minutesTotal:a})}else this.setState({minutesTotal:0,sisaJamTotalMinutes:0});if(1===i.length){const e=i.reduce((e,t)=>e+t,0)+this.state.sisaJamTotalMinutes;this.setState({jamTotal:e})}else if(i.length>1){const e=i.reduce((e,t)=>e+t,0)+this.state.sisaJamTotalMinutes;this.setState({jamTotal:e})}else this.setState({jamTotal:0});this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}else if(7===parseInt(this.state.status)){console.log("endDate",this.state.endDate),console.log("startDate",this.state.startDate);new Date;const e=new T.a(this.state.startDate);e.startOf("days");const t=new T.a(this.state.endDate);t.add(1,"days"),a.equalTo("user",{__type:"Pointer",className:"_User",objectId:s}),a.ascending("createdAt"),a.greaterThanOrEqualTo("createdAt",e.toDate()),a.lessThan("createdAt",t.toDate()),a.include("user"),a.find().then(e=>{console.log("user",e);let t=[],a=[],s=[],l=[],n=[],r=[],i=[],o=[];if(e.filter(e=>void 0!==e.get("earlyTimes")).map((e,s)=>{t.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)}),e.filter(e=>void 0!==e.get("lateTimes")).map((e,t)=>{s.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),l.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",s)}),e.filter(e=>void 0!==e.get("overtimeOut")).map((e,t)=>{n.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),r.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())}),e.map((e,t)=>{o.push(T.a.duration(void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):void 0!==e.get("absenMasuk")?A(e.get("absenMasuk"),"HH:mm"):"00:00","HH:mm")).minutes()),i.push(T.a.duration(void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())}),1===t.length){let e=t.reduce((e,t)=>e+t,0);const a=e%60,s=Math.floor(e/60);this.setState({sisaJam:s,minutesEarly:a}),console.log("reduce baru menit",a),console.log("reduce baru jam sisa",s)}else if(t.length>1){let e=t.reduce((e,t)=>e+t,0);const a=e%60,s=Math.floor(e/60);this.setState({sisaJam:s,minutesEarly:a})}else this.setState({minutesEarly:0,sisaJam:0});if(1===a.length){const e=a.reduce((e,t)=>e+t,0)+this.state.sisaJam;this.setState({jamEarly:e})}else if(a.length>1){const e=a.reduce((e,t)=>e+t,0)+this.state.sisaJam;this.setState({jamEarly:e})}else this.setState({jamEarly:0});if(console.log("late times ",l),1===s.length){let e=s.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamLate:a,minutesLate:t})}else if(s.length>1){let e=s.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamLate:a,minutesLate:t})}else this.setState({sisaJamLate:0,minutesLate:0});if(1===l.length){const e=l.reduce((e,t)=>e+t,0)+this.state.sisaJamLate;this.setState({hoursLate:e})}else if(l.length>1){const e=l.reduce((e,t)=>e+t,0)+this.state.sisaJamLate;this.setState({hoursLate:e})}else this.setState({hoursLate:0});if(1===n.length){let e=n.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamOvertime:a,minutesOvertime:t})}else if(n.length>1){let e=n.reduce((e,t)=>e+t,0);const t=e%60,a=Math.floor(e/60);this.setState({sisaJamOvertime:a,minutesOvertime:t})}else this.setState({minutesOvertime:0,sisaJam:0});if(1===r.length){const e=r.reduce((e,t)=>e+t,0)+this.state.sisaJamOvertime;this.setState({jamOvertime:e})}else if(r.length>1){const e=r.reduce((e,t)=>e+t,0)+this.state.sisaJamOvertime;this.setState({jamOvertime:e})}else this.setState({jamOvertime:0});if(1===o.length){let e=o.reduce((e,t)=>parseInt(e)+parseInt(t),0);const t=Math.floor(e/60),a=e%60;this.setState({sisaJamTotalMinutes:t,minutesTotal:a})}else if(o.length>1){let e=o.reduce((e,t)=>parseInt(e)+parseInt(t),0);const t=Math.floor(e/60),a=e%60;this.setState({sisaJamTotalMinutes:t,minutesTotal:a})}else this.setState({minutesTotal:0,sisaJamTotalMinutes:0});if(1===i.length){const e=i.reduce((e,t)=>e+t,0)+this.state.sisaJamTotalMinutes;this.setState({jamTotal:e})}else if(i.length>1){const e=i.reduce((e,t)=>e+t,0)+this.state.sisaJamTotalMinutes;this.setState({jamTotal:e})}else this.setState({jamTotal:0});this.setState({absence:e,loading:!1})}).catch(e=>{alert(e.message),this.setState({loading:!1})})}},this.subtractHourLate=(e,t,a)=>{let s;return"Late"===a&&t>e&&(s=t-e),"Overtime"===a&&t>e&&(s=t-e),"EarlyLeave"===a&&t<e&&(s=e-t),s},this.getDaftarAbsen=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Absence"),t=(new(M.a.Object.extend("Leader")),new M.a.Query(e)),a=this.props.match.params.id,s="Data tidak ditemukan",l=new Date,n=new T.a(l);n.startOf("day");new T.a(n).add(1,"day"),t.equalTo("user",{__type:"Pointer",className:"_User",objectId:a}),t.descending("createdAt"),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("user"),t.find().then(e=>{console.log("user",e);let t=[],a=[],l=[],n=[],r=[],i=[],o=[],c=[];e.filter(e=>void 0!==e.get("earlyTimes")).map((e,s)=>{t.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)}),e.filter(e=>void 0!==e.get("lateTimes")).map((e,t)=>{l.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),n.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",l)}),e.filter(e=>void 0!==e.get("overtimeOut")).map((e,t)=>{r.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),i.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())}),e.map((e,t)=>{c.push(T.a.duration(void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):void 0!==e.get("absenMasuk")?A(e.get("absenMasuk"),"HH:mm"):"00:00","HH:mm")).minutes()),o.push(T.a.duration(void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())}),1===t.length?t.reduce((e,t)=>{console.log(e),console.log(t),console.log("minutes",(parseInt(e)+parseInt(t))%60),console.log("sisaJam",Math.floor((parseInt(e)+parseInt(t))/60)),this.setState({sisaJam:Math.floor((parseInt(e)+parseInt(t))/60),minutesEarly:(parseInt(e)+parseInt(t))%60})},0):t.length>1?(t.reduce((e,t)=>{console.log(e),console.log(t),console.log("minutes",parseFloat(e)+parseFloat(t)),console.log("sisaJam",Math.floor((parseInt(e)+parseInt(t))/60)),this.setState({sisaJam:Math.floor((parseInt(e)+parseInt(t))/60),minutesEarly:(parseInt(e)+parseInt(t))%60})}),console.log("minutes early",this.state.minutesEarly),console.log("sisa jam early",this.state.sisaJam)):this.setState({minutesEarly:0,sisaJam:0}),1===a.length?a.filter(e=>""!==e).reduce((e,t)=>{console.log("hours",parseInt(e)+parseInt(t)+this.state.sisaJam),this.setState({jamEarly:parseInt(e)+parseInt(t)+this.state.sisaJam})},0):a.length>1?(a.filter(e=>""!==e).reduce((e,t)=>{console.log("hours sisa",parseInt(e)+parseInt(t)+this.state.sisaJam),this.setState({jamEarly:parseInt(e)+parseInt(t)+this.state.sisaJam})}),console.log("test jam",this.state.sisaJam)):this.setState({jamEarly:0}),console.log("late times ",n),1===l.length?l.reduce((e,t)=>{this.setState({sisaJamLate:Math.floor((parseInt(e)+parseInt(t))/60),minutesLate:(parseInt(e)+parseInt(t))%60}),console.log("sisa Jam Late",this.state.sisaJamLate),console.log("menit Late",this.state.minutesLate)},0):l.length>1?(console.log("nilai",l),l.reduce((e,t)=>{this.setState({sisaJamLate:Math.floor((parseInt(e)+parseInt(t))/60),minutesLate:(parseInt(e)+parseInt(t))%60}),console.log("sisa Jam Late",this.state.sisaJamLate),console.log("menit Late",this.state.coba)})):this.setState({sisaJamLate:0,minutesLate:0}),1===n.length?n.reduce((e,t)=>{this.setState({hoursLate:parseInt(e)+parseInt(t)+this.state.sisaJamLate}),console.log("jamLate",this.state.hoursLate)},0):n.length>1?n.reduce((e,t)=>{this.setState({hoursLate:parseInt(e)+parseInt(t)+this.state.sisaJamLate}),console.log("jamLate",this.state.hoursLate),console.log("sisaJamLate",parseInt(this.state.sisaJamLate))}):this.setState({hoursLate:0}),console.log(r),1===r.length?r.reduce((e,t)=>{this.setState({sisaJamOvertime:Math.floor((parseInt(e)+parseInt(t))/60),minutesOvertime:(parseInt(e)+parseInt(t))%60},()=>console.log(this.state.minutesOvertime))},0):r.length>1?r.reduce((e,t)=>{this.setState({sisaJamOvertime:Math.floor((parseInt(e)+parseInt(t))/60),minutesOvertime:(parseInt(e)+parseInt(t))%60},()=>console.log(this.state.minutesOvertime))}):this.setState({minutesOvertime:0,sisaJam:0}),1===i.length?i.reduce((e,t)=>{this.setState({jamOvertime:parseInt(e)+parseInt(t)+this.state.sisaJamOvertime})},0):i.length>1?i.reduce((e,t)=>{this.setState({jamOvertime:parseInt(e)+parseInt(t)+this.state.sisaJamOvertime})}):this.setState({jamOvertime:0}),1===c.length?(c.reduce((e,t)=>{this.setState({sisaJamTotalMinutes:Math.floor((parseInt(e)+parseInt(t))/60),minutesTotal:(parseFloat(e)+parseFloat(t))%60})},0),console.log("total minutes",c),console.log("total minutes2",this.state.minutesTotal)):c.length>1?c.reduce((e,t)=>{this.setState({sisaJamTotalMinutes:Math.floor((parseInt(e)+parseInt(t))/60),minutesTotal:(parseFloat(e)+parseFloat(t))%60})}):this.setState({minutesTotal:0,sisaJamTotalMinutes:0}),1===o.length?o.reduce((e,t)=>{this.setState({jamTotal:parseInt(e)+parseInt(t)+this.state.sisaJamTotalMinutes})},0):o.length>1?o.reduce((e,t)=>{this.setState({jamTotal:parseInt(e)+parseInt(t)+this.state.sisaJamTotalMinutes})}):this.setState({jamTotal:0}),this.setState({absence:e,loading:!1,employeeName:be.a.isEmpty(e)?s:e[0].get("fullname"),employeeID:be.a.isEmpty(e)?s:e[0].get("user").attributes.nik,employeeTitle:be.a.isEmpty(e)?s:e[0].get("user").attributes.level,employeeDepartment:be.a.isEmpty(e)?s:e[0].get("user").attributes.posisi})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.getSum=(e,t)=>e+Math.round(t),this.getTotalHours=(e,t,a)=>{let s,l=[];return e.map((e,n)=>{"lateTimes"===a?s="hours"===t?void 0===e.get("lateTimes")?0:T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours():void 0===e.get("lateTimes")?0:T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes():"earlyTimes"===a?s="hours"===t?void 0===e.get("earlyTimes")?0:T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours():void 0===e.get("earlyTimes")?0:T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes():"overtimeOut"===a?s="hours"===t?void 0===e.get("absenKeluar")?0:void 0!==e.get("overtimeOut")?T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours():0:void 0===e.get("absenKeluar")?0:void 0!==e.get("overtimeOut")?T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes():0:"totalHours"===a&&("hours"===t?T.a.duration(void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"HH:mm"):0,"HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours():T.a.duration(void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"HH:mm"):0,"HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),l.push(s)}),l},this.state={absence:[],loading:!1,startDate:"",endDate:"",employeeName:"",employeeID:"",totalLateInHours:[],sisaJam:0}}componentDidMount(){this.getDaftarAbsen()}shouldComponentUpdate(e,t){return console.log(t),t.absence.length>0}render(){const e=this.state,t=e.absence,a=e.loading,s=e.startDate,n=e.endDate;return l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,null),l.a.createElement(c.a,{className:"mt--8",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-0"},"Reporting"),l.a.createElement(d.a,{role:"form",onSubmit:this.handleFilter,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",required:!0,onChange:e=>{this.setState({status:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6,7].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"".concat(7===parseInt(this.state.status)?"Set start date":"Set tanggal"),required:""===this.state.startDate,readOnly:""!==this.state.startDate},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:s,onChange:e=>{this.setState({startDate:e.toDate()})}})))),7===parseInt(this.state.status)?l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Set end date",required:""===this.state.endDate,readOnly:""!==this.state.endDate},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:n,onChange:e=>{this.setState({endDate:e.toDate()})}})))):"",l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement($.a,{className:"my-4",color:"primary",type:"submit",disabled:a},a?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),this.state.exportButton&!this.state.loading?l.a.createElement(lt.a,{id:"eskport",className:"btn btn-primary",table:"ekspor",multipleTables:[{tableId:"ekspor",fileName:this.state.employeeName}],filename:this.state.employeeName,sheet:"Absensi",buttonText:" Ekspor Excel"}):""),l.a.createElement(ee.a,{className:"align-items-center table-flush aaa",id:"ekspor",responsive:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Fingerprint ID"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeID))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Name"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeName))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Title"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeTitle))),l.a.createElement("thead",{className:"border-0 mb-2"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Department Title"),l.a.createElement("th",{scope:"col",className:"mb-2",style:{border:"none"}},this.state.employeeDepartment))),l.a.createElement("thead",{className:"thead-light",style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",rowSpan:"2"},"Day"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Date"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Working Hour"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty On"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Dutty Off"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Late In"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Early Derparture"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Over Time"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Total Hour"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Notes")),l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"))),l.a.createElement("tbody",{style:{textAlign:"center"}},a?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:4,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))):t.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:14,style:{textAlign:"center"}},"No data found...")):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,A(e.get("absenMasuk"),"ddd")),l.a.createElement("td",null,A(e.get("createdAt"),"DD/MM/YYYY")),l.a.createElement("td",null,"".concat(e.get("user").attributes.jamMasuk<10?"0":"").concat(e.get("user").attributes.jamMasuk,":00")+" - "+"".concat(e.get("user").attributes.jamKeluar,":00")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"k"):void 0!==e.get("absenMasuk")?A(e.get("absenMasuk"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"m"):void 0!==e.get("absenMasuk")?A(e.get("absenMasuk"),"m"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"k"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"m"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"m"):""),l.a.createElement("td",{className:"lateInHours"},void 0===e.get("lateTimes")?"":T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),l.a.createElement("td",null,void 0===e.get("lateTimes")?"":T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("earlyTimes")?"":T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",{className:"earlyminutes"},void 0===e.get("earlyTimes")?"":T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("absenKeluar")?"":void 0!==e.get("overtimeOut")?T.a.duration(A(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours():""),l.a.createElement("td",null,void 0===e.get("absenKeluar")?"":void 0!==e.get("overtimeOut")?T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes():""),l.a.createElement("td",null,T.a.duration(void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"HH:mm"):"","HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):void 0!==e.get("absenMasuk")?A(e.get("absenMasuk"),"HH:mm"):"","HH:mm")).hours()),l.a.createElement("td",null,T.a.duration(void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"HH:mm"):"","HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0!==e.get("overtimeIn")?"Working Overtime":void 0!==e.get("lateTimes")?"Late":void 0!==e.get("earlyTimes")?"Early Depature":"Working Hour"))),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"7"},"Total"),l.a.createElement("td",null,this.state.hoursLate),l.a.createElement("td",null,this.state.minutesLate),l.a.createElement("td",null,this.state.jamEarly),l.a.createElement("td",null,this.state.minutesEarly),l.a.createElement("td",null,this.state.jamOvertime),l.a.createElement("td",null,this.state.minutesOvertime),l.a.createElement("td",null,this.state.jamTotal),l.a.createElement("td",null,this.state.minutesTotal),l.a.createElement("td",null)))))))))}}const oa=l.a.memo(ia);class ca extends l.a.Component{constructor(e){super(e),this.getData=(e=1)=>{this.setState({loadingFilter:!0});const t=this.state,a=t.searchBy,s=t.searchValue,l=this.state,n=l.resPerPage,r=(l.page,new M.a.User),i=new M.a.Query(r);switch(i.notContainedIn("roles",["admin","leader","Admin","Leader"]),i.skip(n*e-n),i.limit(n),i.withCount(),a){case"all":i.find({useMasterKey:!0}).then(e=>{e.results.map(e=>e.select=!1),this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"name":i.matches("fullname",s,"i"),i.find({useMasterKey:!0}).then(e=>{e.results.map(e=>e.select=!1),this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"nik":i.equalTo("nik",s),i.find({useMasterKey:!0}).then(e=>{e.results.map(e=>e.select=!1),this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"divisi":i.matches("posisi",s,"i"),i.find({useMasterKey:!0}).then(e=>{e.results.map(e=>e.select=!1),this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")});break;case"leader":const e=new M.a.User,t=new M.a.Query(e);t.matches("fullname",s,"i"),i.matchesQuery("leaderIdNew",t),i.find({useMasterKey:!0}).then(e=>{e.results.map(e=>e.select=!1),this.setState({daftarStaff:e.results,totalData:e.count,loadingFilter:!1})}).catch(e=>{this.setState({loadingFilter:!1}),alert("cek koneksi anda")})}},this.closeLoading=()=>{this.setState({loadingModal:!1})},this.handleApproval=(e,t)=>{e.preventDefault(),this.setState({loadingModal:!0});const a=M.a.Object.extend("Izin");new M.a.Query(a).get(this.state.userId).then(e=>{e.set("status",t?1:0),t||e.set("alasanReject",this.state.reason),e.save().then(()=>{let e=[...this.state.izin];e.splice(this.state.userIndex,1),this.setState({counter:this.state.counter+1,izin:e,[t?"approvalMode":"rejectMode"]:!1,loadingModal:!1}),alert("Berhasil ".concat(t?"approve":"reject"))}).catch(e=>{alert(e.message),this.closeLoading()})}).catch(e=>{alert(e.message),this.closeLoading()})},this.toggle=e=>{this.setState({[e]:!this.state[e]})},this.handleAllCheck=e=>{let t=this.state.daftarStaff,a=[],s=[];t.map((t,l)=>(t.select=e.target.checked,t.select?(a.push(t.id),s.push({fileName:t.get("fullname"),tableId:"ekspor".concat(l)})):(a=[],s=[]),t)),this.setState({daftarStaff:t,checkId:a,fileData:s},()=>console.log(this.state.checkId))},this.handleChildCheck=e=>{let t=this.state.daftarStaff;const a=this.state,s=a.checkId,l=a.fileData;let n=e.target.value;t.map((t,a)=>{if(console.log("bandingkan",t.id===e.target.value),t.id===e.target.value)if(console.log("sama"),t.select=e.target.checked,t.select)this.setState(e=>({checkId:[...this.state.checkId,n],fileData:[...this.state.fileData,{fileName:t.get("fullname"),tableId:"ekspor".concat(a)}]}),()=>{console.log(this.state.checkId),console.log(this.state.fileData)});else{const e=s.indexOf(n),a=l.map(e=>e.fileName).indexOf(t.get("fullname"));(e>-1||a>-1)&&(s.splice(e,1),l.splice(a,1),this.setState(e=>({checkId:s,fileData:l}),()=>{console.log(this.state.checkId),console.log(this.state.fileData)}))}}),this.setState({daftarStaff:t})},this.handleApproveAll=e=>{this.setState({loading:!0});const t=M.a.Object.extend("Izin");new M.a.Query(t).get(e).then(e=>{e.set("status",1),e.save().then(()=>{const e=[...this.state.izin];e.splice(this.state.userIndex,1),this.setState({izin:e,counter:this.state.counter+1,approvalMode:!1,loading:!1})})})},this.handleRejectAll=e=>{this.setState({loading:!0});const t=M.a.Object.extend("Izin");new M.a.Query(t).get(e).then(e=>{e.set("status",0),e.set("alasanReject",this.state.reason),e.save().then(()=>{const e=[...this.state.izin];e.splice(this.state.userIndex,1),this.setState({counter:this.state.counter+1,izin:e})})})},this.approveChecked=e=>{this.setState({loadingModal:!0});const t=this.state.checkId;let a=0;t.map(e=>{const s=M.a.Object.extend("Izin");new M.a.Query(s).get(e).then(e=>{e.set("status",1),e.save().then(()=>{if(a+=1,a===t.length)return alert("Berhasil reject"),window.location.reload(!1)})})}),this.setState({loadingModal:!1})},this.getDaftarAbsen=()=>{this.setState({loading:!0});const e=M.a.Object.extend("Absence"),t=(new(M.a.Object.extend("Leader")),new M.a.Query(e)),a=this.props.match.params.id,s="Data tidak ditemukan",l=new Date,n=new T.a(l);n.startOf("day");new T.a(n).add(1,"day"),t.equalTo("user",{__type:"Pointer",className:"_User",objectId:a}),t.descending("createdAt"),t.notContainedIn("roles",["admin","Admin","leader","Leader"]),t.include("user"),t.find().then(e=>{console.log("user",e);let t=[],a=[],l=[],n=[],r=[],i=[],o=[],c=[];e.filter(e=>void 0!==e.get("earlyTimes")).map((e,s)=>{t.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)}),e.filter(e=>void 0!==e.get("lateTimes")).map((e,t)=>{l.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),n.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",l)}),e.filter(e=>void 0!==e.get("overtimeOut")).map((e,t)=>{r.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),i.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())}),e.map((e,t)=>{c.push(T.a.duration(void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"HH:mm"):void 0!==e.get("overtimeOut")?A(e.get("overtimeOut"),"HH:mm"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"HH:mm"):"00:00","HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):void 0!==e.get("absenMasuk")?A(e.get("absenMasuk"),"HH:mm"):"00:00","HH:mm")).minutes()),o.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"HH:mm"):A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())}),1===t.length?t.reduce((e,t)=>{console.log(!e),console.log("minutes",(parseInt(e)+parseInt(t))%60),console.log("sisaJam",Math.floor((parseInt(e)+parseInt(t))/60)),this.setState({sisaJam:Math.floor((parseInt(e)+parseInt(t))/60),minutesEarly:(parseInt(e)+parseInt(t))%60})},0):t.length>1?t.reduce((e,t)=>{console.log(!e),console.log("minutes",(parseInt(e)+parseInt(t))%60),console.log("sisaJam",Math.floor((parseInt(e)+parseInt(t))/60)),this.setState({sisaJam:Math.floor((parseInt(e)+parseInt(t))/60),minutesEarly:(parseInt(e)+parseInt(t))%60})}):this.setState({minutesEarly:0,sisaJam:0}),1===a.length?a.filter(e=>""!==e).reduce((e,t)=>{console.log("hours",parseInt(e)+parseInt(t)+this.state.sisaJam),this.setState({jamEarly:parseInt(e)+parseInt(t)+this.state.sisaJam})},0):a.length>1?a.filter(e=>""!==e).reduce((e,t)=>{console.log("hours",parseInt(e)+parseInt(t)+this.state.sisaJam),this.setState({jamEarly:parseInt(e)+parseInt(t)+this.state.sisaJam})}):this.setState({jamEarly:0}),console.log("late times ",n),1===l.length?l.reduce((e,t)=>{this.setState({sisaJamLate:Math.floor((parseInt(e)+parseInt(t))/60),minutesLate:(parseInt(e)+parseInt(t))%60}),console.log("sisa Jam Late",this.state.sisaJamLate),console.log("menit Late",this.state.minutesLate)},0):l.length>1?l.reduce((e,t)=>{this.setState({sisaJamLate:Math.floor((parseInt(e)+parseInt(t))/60),minutesLate:(parseInt(e)+parseInt(t))%60}),console.log("sisa Jam Late",this.state.sisaJamLate),console.log("menit Late",this.state.minutesLate)}):this.setState({sisaJamLate:0,minutesLate:0}),1===n.length?n.reduce((e,t)=>{this.setState({hoursLate:parseInt(e)+parseInt(t)+this.state.sisaJamLate}),console.log("jamLate",this.state.hoursLate)},0):n.length>1?n.reduce((e,t)=>{this.setState({hoursLate:parseInt(e)+parseInt(t)+this.state.sisaJamLate}),console.log("jamLate",this.state.hoursLate)}):this.setState({hoursLate:0}),console.log(r),1===r.length?r.reduce((e,t)=>{this.setState({sisaJamOvertime:Math.floor((parseInt(e)+parseInt(t))/60),minutesOvertime:(parseInt(e)+parseInt(t))%60},()=>console.log(this.state.minutesOvertime))},0):r.length>1?r.reduce((e,t)=>{this.setState({sisaJamOvertime:Math.floor((parseInt(e)+parseInt(t))/60),minutesOvertime:(parseInt(e)+parseInt(t))%60},()=>console.log(this.state.minutesOvertime))}):this.setState({minutesOvertime:0,sisaJam:0}),1===i.length?i.reduce((e,t)=>{this.setState({jamOvertime:parseInt(e)+parseInt(t)+this.state.sisaJamOvertime})},0):i.length>1?i.reduce((e,t)=>{this.setState({jamOvertime:parseInt(e)+parseInt(t)+this.state.sisaJamOvertime})}):this.setState({jamOvertime:0}),c.length>0?(c.reduce((e,t)=>{this.setState({sisaJamTotalMinutes:Math.floor((parseInt(e)+parseInt(t))/60),minutesTotal:(parseInt(e)+parseInt(t))%60})}),console.log("total minutes",c),console.log("total minutes2",typeof this.state.minutesTotal)):this.setState({minutesTotal:0,sisaJamTotalMinutes:0}),o.length>0?o.reduce((e,t)=>{this.setState({jamTotal:parseInt(e)+parseInt(t)+this.state.sisaJamTotalMinutes})}):this.setState({jamTotal:0}),this.setState({absence:e,loading:!1,employeeName:be.a.isEmpty(e)?s:e[0].get("fullname"),employeeID:be.a.isEmpty(e)?s:e[0].get("user").attributes.nik,employeeTitle:be.a.isEmpty(e)?s:e[0].get("user").attributes.level,employeeDepartment:be.a.isEmpty(e)?s:e[0].get("user").attributes.posisi})}).catch(e=>{alert(e.message),this.setState({loading:!1})})},this.queryAbsen=(e,t,a,s)=>{const l=M.a.Object.extend("Absence"),n=new M.a.Query(l),r=(new Date,this.state.checkId),i="DATA TIDAK DITEMUKAN";let o,c;a?(o=new T.a(this.state.startDate),c=new T.a(this.state.endDate).add(8,"hours")):(o=new T.a(this.state.startDate),o.startOf(e),c=new T.a(o),c.add(1,e)),n.equalTo("user",{__type:"Pointer",className:"_User",objectId:t}),n.ascending("absenMasuk"),n.greaterThanOrEqualTo("absenMasuk",o.toDate()),n.lessThan("absenMasuk",c.toDate()),n.include("user"),n.find().then(e=>{console.log("user",e);let t=[],a=[],l=[],n=[],o=[],c=[],m=[],d=[];e.filter(e=>void 0!==e.get("earlyTimes")).map((e,s)=>{t.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),a.push(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),console.log("early departure",t)}),e.filter(e=>void 0!==e.get("lateTimes")).map((e,t)=>{l.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),n.push(T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),console.log("value late",l)}),e.filter(e=>void 0!==e.get("overtimeOut")).map((e,t)=>{o.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes()),c.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours())}),e.map((e,t)=>{d.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),m.push(T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours())}),console.log("total menit",d),console.log("total jam",m),console.log(l),console.log(n),console.log(o),console.log(c);let u=a.reduce((e,t)=>e+t,0);console.log("total overtime",u);let h=m.reduce((e,t)=>e+t),g=d.reduce((e,t)=>parseInt(e)+parseInt(t));if(console.log(h+Math.floor(g/60)),console.log(g%60),1===t.length){let e=t.reduce((e,t)=>e+t,0);const a=[...this.state.sisaJam];a.splice(s,0,Math.floor(e/60));const l=[...this.state.minutesEarly];l.splice(s,0,e%60),this.setState({sisaJam:a,minutesEarly:l})}else if(t.length>1){let e=t.reduce((e,t)=>e+t,0);const a=[...this.state.sisaJam];a.splice(s,0,Math.floor(e/60));const l=[...this.state.minutesEarly];l.splice(s,0,e%60),this.setState({sisaJam:a,minutesEarly:l})}else this.setState({minutesEarly:0,sisaJam:0});if(1===a.length){let e=a.reduce((e,t)=>e+t,0),t=[...this.state.jamEarly];t.splice(s,0,e+this.state.sisaJam[s]),this.setState({jamEarly:t})}else if(a.length>1){let e=a.reduce((e,t)=>e+t,0);const t=[...this.state.jamEarly];t.splice(s,0,e+this.state.sisaJam[s]),this.setState({jamEarly:t})}else this.setState({jamEarly:0});if(console.log("late times ",n),1===l.length){let e=l.reduce((e,t)=>e+t,0);const t=[...this.state.sisaJamLate];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesLate];a.splice(s,0,e%60),this.setState({sisaJamLate:t,minutesLate:a})}else if(l.length>1){let e=l.reduce((e,t)=>e+t,0);const t=[...this.state.sisaJamLate];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesLate];a.splice(s,0,e%60),this.setState({sisaJamLate:t,minutesLate:a})}else this.setState({sisaJamLate:0,minutesLate:0});if(1===n.length){let e=n.reduce((e,t)=>e+t,0);const t=[...this.state.hoursLate];t.splice(s,0,e+this.state.sisaJamLate[s]),this.setState({hoursLate:t})}else if(n.length>1){let e=n.reduce((e,t)=>e+t,0);const t=[...this.state.hoursLate];t.splice(s,0,e+this.state.sisaJamLate[s]),this.setState({hoursLate:t})}else this.setState({hoursLate:0});if(console.log(o),1===o.length){let e=o.reduce((e,t)=>e+t,0);const t=[...this.state.sisaJamOvertime];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesOvertime];a.splice(s,0,e%60),this.setState({sisaJamOvertime:t,minutesOvertime:a},()=>console.log(this.state.minutesOvertime))}else if(o.length>1){let e=o.reduce((e,t)=>e+t,0);const t=[...this.state.sisaJamOvertime];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesOvertime];a.splice(s,0,e%60),this.setState({sisaJamOvertime:t,minutesOvertime:a},()=>console.log(this.state.minutesOvertime))}else 0===c.length&&this.setState({minutesOvertime:0,sisaJam:0});if(1===c.length){let e=c.reduce((e,t)=>e+t,0);const t=[...this.state.jamOvertime];t.splice(s,0,e+this.state.sisaJamOvertime[s]),this.setState({jamOvertime:t})}else if(c.length>1){let e=c.reduce((e,t)=>e+t,0);const t=[...this.state.jamOvertime];t.splice(s,0,e+this.state.sisaJamOvertime[s]),this.setState({jamOvertime:t})}else this.setState({jamOvertime:0});if(1===d.length){m.reduce((e,t)=>e+t,0);let e=d.reduce((e,t)=>parseInt(e)+parseInt(t),0);const t=[...this.state.sisaJamTotalMinutes];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesTotal];a.splice(s,0,e%60),this.setState({sisaJamTotalMinutes:t,minutesTotal:a},()=>{console.log("sisa jam",this.state.sisaJamTotalMinutes),console.log("menit total",this.state.minutesTotal)}),console.log("total minutes",d),console.log("total minutes2",this.state.minutesTotal)}if(d.length>1){let e=d.reduce((e,t)=>parseInt(e)+parseInt(t),0);const t=[...this.state.sisaJamTotalMinutes];t.splice(s,0,Math.floor(e/60));const a=[...this.state.minutesTotal];a.splice(s,0,e%60),this.setState({sisaJamTotalMinutes:t,minutesTotal:a},()=>{console.log("sisa jam",this.state.sisaJamTotalMinutes),console.log("menit total",this.state.minutesTotal)})}else this.setState({minutesTotal:0,sisaJamTotalMinutes:0});if(1===m.length){console.log(m);let e=m.reduce((e,t)=>e+t,0);const t=[...this.state.jamTotal];t.splice(s,0,e+this.state.sisaJamTotalMinutes[s]),this.setState({jamTotal:t})}if(m.length>1){console.log(m);let e=m.reduce((e,t)=>e+t,0);const t=[...this.state.jamTotal];t.splice(s,0,e+this.state.sisaJamTotalMinutes[s]),this.setState({jamTotal:t})}else this.setState({jamTotal:0});let p=[...this.state.absence];p.splice(s,0,e);let E=[...this.state.tableData];E.splice(s,0,{fileName:be.a.isEmpty(e[0])?this.state.fileData[s].fileName:e[0].get("fullname"),tableId:"ekspor".concat(s)}),this.setState({absence:p,tableData:E,employeeName:be.a.isEmpty(e)?this.state.employeeName.concat(i):this.state.employeeName.concat(e[0].get("fullname")),employeeID:be.a.isEmpty(e)?this.state.employeeID.concat(i):this.state.employeeID.concat(e[0].get("user").attributes.nik),employeeTitle:be.a.isEmpty(e)?this.state.employeeTitle.concat(i):this.state.employeeTitle.concat(e[0].get("user").attributes.level),employeeDepartment:be.a.isEmpty(e)?this.state.employeeDepartment.concat(i):this.state.employeeDepartment.concat(e[0].get("user").attributes.posisi)}),(s+=1)===r.length&&this.setState({loading:!1})}).catch(e=>{console.log(e.message),this.setState({loading:!1})})},this.getDataAbsen=e=>{e.preventDefault(),this.setState({loading:!0}),this.setState({absence:[],tableData:[],sisaJam:[],sisaJamLate:[],sisaJamOvertime:[],sisaJamTotalMinutes:[],minutesEarly:[],minutesTotal:[],jamEarly:[],minutesLate:[],hoursLate:[],minutesOvertime:[],jamOvertime:[],jamTotal:[]});const t=this.state.checkId;4===parseInt(this.state.status)?t.map(e=>{this.queryAbsen("day",e,!1,0)}):5===parseInt(this.state.status)?t.map(e=>{this.queryAbsen("week",e,!1,0)}):6===parseInt(this.state.status)?t.map(e=>{this.queryAbsen("month",e,!1,0)}):7===parseInt(this.state.status)&&t.map(e=>{this.queryAbsen("range",e,!0,0)})},this.subtractHourLate=(e,t,a)=>{let s;return"Late"===a&&t>e&&(s=t-e),"Overtime"===a&&t>e&&(s=t-e),"EarlyLeave"===a&&t<e&&(s=e-t),s},this.rejectChecked=e=>{e.preventDefault(),this.setState({loadingModal:!0});const t=this.state.checkId;let a=0;t.map(e=>{const s=M.a.Object.extend("Izin");new M.a.Query(s).get(e).then(e=>{e.set("status",1),e.set("alasanReject",this.state.reason),e.save().then(()=>{if(a+=1,a===t.length)return alert("Berhasil reject"),window.location.reload(!1)})})})},this.state={daftarStaff:[],absence:[],tableData:[],fileData:[],excelMode:!1,loading:!1,approvalMode:!1,rejectMode:!1,counter:0,loadingModal:!1,fullnames:"",userId:"",userIndex:0,reason:"",checkId:[],approveAllMode:!1,rejectAllMode:!1,deleteCounter:0,searchBy:"all",searchValue:"",resPerPage:20,page:1,totalData:0,startDate:"",endDate:"",employeeName:[],employeeID:[],employeeDepartment:[],employeeTitle:[],sisaJam:[],sisaJamLate:[],sisaJamOvertime:[],sisaJamTotalMinutes:[],minutesEarly:[],minutesTotal:[],jamEarly:[],minutesLate:[],hoursLate:[],minutesOvertime:[],jamOvertime:[],jamTotal:[]}}componentDidMount(){this.getData()}render(){const e=this.state,t=e.daftarStaff,a=e.loading,s=e.approvalMode,n=e.rejectMode,r=e.loadingModal,i=e.fullnames,o=e.counter,m=e.approveAllMode,b=e.rejectAllMode;return l.a.createElement(l.a.Fragment,null,l.a.createElement(oe,{izin:o}),l.a.createElement(c.a,{className:"mt--7",fluid:!0},l.a.createElement(q.a,null,l.a.createElement("div",{className:"col"},l.a.createElement(Z.a,{className:"shadow"},l.a.createElement(X.a,{className:"border-0"},l.a.createElement("h3",{className:"mb-2"},"Export data karyawan"),0===t.length||0===this.state.checkId.length?"":l.a.createElement(P.a,{sm:{span:0},className:"float-none"},l.a.createElement($.a,{color:"primary",type:"submit",size:"sm",className:"m-1",disable:a?"true":"false",onClick:()=>this.setState({excelMode:!0})},l.a.createElement("i",{className:"ni ni-single-copy-04"})," Export to excel"))),l.a.createElement(ee.a,{className:"align-items-center table-flush",responsive:!0,id:"ekspor"},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("input",{type:"checkbox",onChange:this.handleAllCheck})),l.a.createElement("th",{scope:"col"},"NIK"),l.a.createElement("th",{scope:"col"},"Nama"),l.a.createElement("th",{scope:"col"},"Level"),l.a.createElement("th",{scope:"col"},"Divisi"))),l.a.createElement("tbody",null,a?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},l.a.createElement(te.a,{as:"span",cuti:!0,animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ",l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})):t.length<1?l.a.createElement("td",{colSpan:6,style:{textAlign:"center"}},"No data found..."):t.map((e,t)=>l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("input",{type:"checkbox",value:e.id,checked:e.select,onChange:this.handleChildCheck})),l.a.createElement("td",null,e.get("nik")),l.a.createElement("td",null,e.get("fullname")),l.a.createElement("td",null,e.get("level")),l.a.createElement("td",null,e.get("posisi"))))))),l.a.createElement(Z.a,null,this.state.absence.map((e,t)=>l.a.createElement(ee.a,{responsive:!0,className:"mt-4",id:"ekspor".concat(t),hidden:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Fingerprint ID"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeID[t]))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Name"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeName[t]))),l.a.createElement("thead",{className:"border-0"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Employee Title"),l.a.createElement("th",{scope:"col",style:{border:"none"}},this.state.employeeTitle[t]))),l.a.createElement("thead",{className:"border-0 mb-2"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",style:{border:"none"}},"Department Title"),l.a.createElement("th",{scope:"col",className:"mb-2",style:{border:"none"}},this.state.employeeDepartment[t]))),l.a.createElement("thead",{className:"thead-light",style:{textAlign:"center"}},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col",rowSpan:"2"},"Day"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Date"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Working Hour"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Duty On"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Duty Off"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Late In"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Early Departure"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Over Time"),l.a.createElement("th",{scope:"col",colSpan:"2"},"Total Hour"),l.a.createElement("th",{scope:"col",rowSpan:"2"},"Notes")),l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"),l.a.createElement("th",{scope:"col"},"Hours"),l.a.createElement("th",{scope:"col"},"Minutes"))),l.a.createElement("tbody",null,e.length<1?l.a.createElement("tr",null,l.a.createElement("td",{colSpan:14,style:{textAlign:"center"}},"Data absen tidak ditemukan")):e.map(e=>l.a.createElement("tr",null,l.a.createElement("td",null,A(e.get("absenMasuk"),"ddd")),l.a.createElement("td",null,A(e.get("createdAt"),"DD/MM/YYYY")),l.a.createElement("td",null,"".concat(e.get("user").attributes.jamMasuk<10?"0":"").concat(e.get("user").attributes.jamMasuk,":00")+" - "+"".concat(e.get("user").attributes.jamKeluar,":00")),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"k"):void 0!==e.get("absenMasuk")?A(e.get("absenMasuk"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("lateTimes")?"red":""}},void 0!==e.get("lateTimes")?A(e.get("lateTimes"),"m"):void 0!==e.get("absenMasuk")?A(e.get("absenMasuk"),"m"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"k"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"k"):""),l.a.createElement("td",{style:{color:void 0!==e.get("earlyTimes")?"red":""}},void 0!==e.get("earlyTimes")?A(e.get("earlyTimes"),"m"):void 0!==e.get("absenKeluar")?A(e.get("absenKeluar"),"m"):""),l.a.createElement("td",{className:"lateInHours"},void 0===e.get("lateTimes")?"":T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).hours()),l.a.createElement("td",null,void 0===e.get("lateTimes")?"":T.a.duration(A(e.get("lateTimes"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamMasuk,":00"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("earlyTimes")?"":T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",{className:"earlyminutes"},void 0===e.get("earlyTimes")?"":T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm").subtract(T.a.duration(A(e.get("earlyTimes"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0===e.get("absenKeluar")?"":void 0!==e.get("overtimeOut")?T.a.duration(A(e.get("overtimeOut"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).hours():""),l.a.createElement("td",null,void 0===e.get("absenKeluar")?"":void 0!==e.get("overtimeOut")?T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration("".concat(e.get("user").attributes.jamKeluar,":00"),"HH:mm")).minutes():""),l.a.createElement("td",null,void 0===e.get("absenKeluar")?0:T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).hours()),l.a.createElement("td",null,T.a.duration(A(e.get("absenKeluar"),"HH:mm"),"HH:mm").subtract(T.a.duration(A(e.get("absenMasuk"),"HH:mm"),"HH:mm")).minutes()),l.a.createElement("td",null,void 0!==e.get("overtimeIn")?"Working Overtime":"Working Hour"))),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"7"},"Total"),l.a.createElement("td",null,this.state.hoursLate[t]),l.a.createElement("td",null,this.state.minutesLate[t]),l.a.createElement("td",null,this.state.jamEarly[t]),l.a.createElement("td",null,this.state.minutesEarly[t]),l.a.createElement("td",null,this.state.jamOvertime[t]),l.a.createElement("td",null,this.state.minutesOvertime[t]),l.a.createElement("td",null,this.state.jamTotal[t]),l.a.createElement("td",null,this.state.minutesTotal[t]),l.a.createElement("td",null))))))))),l.a.createElement(xe,{size:"lg",show:this.state.excelMode,loading:r,footer:!0,disabled:this.state.tableData.length<1,handleHide:()=>{this.toggle("excelMode"),this.setState({tableData:[]})},title:"Export ".concat(this.state.checkId.length," data to excel"),body:l.a.createElement("div",null,l.a.createElement(d.a,{role:"form",onSubmit:this.getDataAbsen,className:"mt-3"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1 col-sm-12"},l.a.createElement("p",null,"Filter By")),l.a.createElement("div",{className:"col-md-2 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(E.a,{type:"select",className:"fa-pull-right",required:!0,onChange:e=>{this.setState({status:e.target.value})}},l.a.createElement("option",{value:""},"Pilih Waktu"),[4,5,6,7].map(e=>l.a.createElement("option",{value:e},L(e))))))),l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"".concat(7===parseInt(this.state.status)?"Set start date":"Set tanggal"),required:""===this.state.startDate,readOnly:""!==this.state.startDate},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:this.state.startDate,onChange:e=>{this.setState({startDate:e.toDate()})}})))),7===parseInt(this.state.status)?l.a.createElement("div",{className:"col-md-3 col-sm-12"},l.a.createElement(u.a,null,l.a.createElement(h.a,{className:"input-group-alternative"},l.a.createElement(g.a,{addonType:"prepend"},l.a.createElement(p.a,null,l.a.createElement("i",{className:"ni ni-calendar-grid-58"}))),l.a.createElement(yt.a,{inputProps:{placeholder:"Set end date",required:""===this.state.endDate,readOnly:""!==this.state.endDate},timeFormat:!1,viewMode:6===parseInt(this.state.status)?"months":"days",dateFormat:6===parseInt(this.state.status)?"MM/YYYY":"MM/DD/YYYY",value:this.state.endDate,onChange:e=>{this.setState({endDate:e.toDate()})}})))):"",l.a.createElement("div",{className:"text-center mt--4"},l.a.createElement($.a,{className:"my-4",color:"primary",type:"submit",disabled:a},a?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Loading"):"Search")))),l.a.createElement(q.a,null,this.state.tableData.length>0?l.a.createElement(lt.a,{id:"test-table-xls-button",className:"btn btn-primary ml-2",table:"ekspor1",multipleTables:this.state.tableData,filename:"tablexls",sheet:"tablexls",buttonText:"Data siap di export"}):"")),handleSubmit:e=>this.handleApproval(e,!0)}),l.a.createElement(xe,{show:s,loading:r,footer:!0,handleHide:()=>this.toggle("approvalMode"),title:"Approval Confirmation",body:"Approve izin ".concat(i," ?"),handleSubmit:e=>this.handleApproval(e,!0)}),l.a.createElement(xe,{show:n,loading:r,footer:!1,handleHide:()=>this.toggle("rejectMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject izin ".concat(i," ?")),l.a.createElement(d.a,{onSubmit:e=>this.handleApproval(e,!1)},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:e=>this.handleApproval(e,!1)}),l.a.createElement(xe,{show:m,loading:r,footer:!0,handleHide:()=>this.toggle("approveAllMode"),title:"Approve Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Approve izin ".concat(this.state.checkId.length," data ?"))),handleSubmit:this.approveChecked}),l.a.createElement(xe,{show:b,loading:r,footer:!1,handleHide:()=>this.toggle("rejectAllMode"),title:"Reject Confirmation",body:l.a.createElement("div",null,l.a.createElement("h3",{className:"mb-4"},"Reject izin ".concat(this.state.checkId.length," data ?")),l.a.createElement(d.a,{onSubmit:e=>this.rejectChecked(e)},l.a.createElement(u.a,null,l.a.createElement(E.a,{id:"exampleFormControlInput1",placeholder:"Masukkan alasan",type:"textarea",required:!0,onChange:e=>this.setState({reason:e.target.value})})),l.a.createElement($.a,{color:"secondary","data-dismiss":"modal",type:"button",onClick:()=>this.toggle("rejectAllMode")},"Close"),l.a.createElement($.a,{color:"primary",type:"submit"},r?l.a.createElement("div",null,l.a.createElement(te.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","Submitting..."):"Submit"))),handleSubmit:this.rejectChecked}))}}var ma=[{path:"/index",name:"Dashboard",icon:"ni ni-tv-2 text-primary",component:Kt,layout:"/leader"},{path:"/maps/:id",name:"Tracking",icon:"ni ni-pin-3 text-red",component:Ct,layout:"/leader",invisible:!0},{path:"/exportexcelid/:id",name:"exportexcelid",icon:"ni ni-pin-3 text-red",component:oa,layout:"/leader",invisible:!0},{path:"/staff",name:"Staff",icon:"ni ni-single-02 text-yellow",component:Pt,layout:"/leader"},{path:"/data-absen",name:"Absen",icon:"ni ni-bullet-list-67 text-red",component:Rt,layout:"/leader"},{path:"/request-cuti",name:"Request Cuti",icon:"ni ni-key-25 text-info",component:Qt,layout:"/leader"},{path:"/request-izin",name:"Request Izin",icon:"ni ni-spaceship text-warning",component:_t,layout:"/leader"},{path:"/request-pulang",name:"Request Pulang",icon:"ni ni-watch-time text-primary",component:Vt,layout:"/leader"},{path:"/request-lembur",name:"Request Lembur",icon:"ni ni-time-alarm text-yellow",component:Xt,layout:"/leader"},{path:"/request-terlambat",name:"Request Terlambat",icon:"ni ni-user-run text-danger",component:ea,layout:"/leader"},{path:"/change-request",name:"Change Request",icon:"ni ni-archive-2 text-info",component:aa,layout:"/leader"},{path:"/status-request",name:"Status Request",icon:"ni ni-archive-2 text-danger",component:la,layout:"/leader"},{path:"/export-data",name:"Export Data",icon:"ni ni-single-copy-04 text-primary",component:ca,layout:"/leader"},{path:"/view-history/:id",name:"History",icon:"ni ni-user-run text-primary",component:ra,layout:"/leader",invisible:!0},{path:"/login",name:"Login",icon:"ni ni-circle-08 text-pink",component:je,layout:"/auth",invisible:!0}];class da extends l.a.Component{constructor(e){super(e),this.getRoutes=e=>"admin"===this.state.roles||"leader"===this.state.roles?e.map((e,t)=>"/admin"===e.layout||"/leader"===e.layout?l.a.createElement(o.b,{path:e.layout+e.path,component:e.component,key:t}):void 0):void 0,this.getBrandText=e=>{if("admin"===this.state.roles){for(let e=0;e<jt.length;e++)if(-1!==this.props.location.pathname.indexOf(jt[e].layout+jt[e].path))return jt[e].name;return jt[1].name}if("leader"===this.state.roles){for(let e=0;e<ma.length;e++)if(-1!==this.props.location.pathname.indexOf(ma[e].layout+ma[e].path))return ma[e].name;return ma[1].name}},this.state={loading:!1,roles:""}}componentWillMount(){this.setState({roles:window.localStorage.getItem("roles")})}componentDidMount(){this.setState({roles:window.localStorage.getItem("roles")})}componentDidUpdate(e){document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,this.refs.mainContent.scrollTop=0}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Q,Object.assign({},this.props,{routes:"admin"===this.state.roles?jt:"leader"===this.state.roles?ma:"",logo:{innerLink:"".concat(this.state.roles,"/index"),imgSrc:a(550),imgAlt:"..."}})),l.a.createElement("div",{className:"main-content",ref:"mainContent"},l.a.createElement(K,Object.assign({},this.props,{brandText:this.getBrandText(this.props.location.pathname)})),l.a.createElement(o.d,null,this.getRoutes("admin"===this.state.roles?jt:ma),l.a.createElement(o.a,{from:"*",to:"/".concat(this.state.roles,"/index")})),l.a.createElement(c.a,{fluid:!0},l.a.createElement(R,null))))}}var ua=da;a(1279);l.a.Component;class ha extends l.a.Component{render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("footer",{className:"py-4 mt-2"},l.a.createElement(c.a,null,l.a.createElement(q.a,{className:"align-items-center justify-content-xl-between"},l.a.createElement(P.a,{xl:"6"},l.a.createElement("div",{className:"copyright text-center text-xl-left text-muted"},"\xa9 2018"," ",l.a.createElement("a",{className:"font-weight-bold ml-1",href:"https://www.creative-tim.com?ref=adr-auth-footer",target:"_blank"},"Creative Tim"))),l.a.createElement(P.a,{xl:"6"},l.a.createElement(b.a,{className:"nav-footer justify-content-center justify-content-xl-end"},l.a.createElement(F.a,null,l.a.createElement(z.a,{href:"https://www.creative-tim.com?ref=adr-auth-footer",target:"_blank"},"Creative Tim")),l.a.createElement(F.a,null,l.a.createElement(z.a,{href:"https://www.creative-tim.com/presentation?ref=adr-auth-footer",target:"_blank"},"About Us")),l.a.createElement(F.a,null,l.a.createElement(z.a,{href:"http://blog.creative-tim.com?ref=adr-auth-footer",target:"_blank"},"Blog")),l.a.createElement(F.a,null,l.a.createElement(z.a,{href:"https://github.com/creativetimofficial/argon-dashboard/blob/master/LICENSE.md?ref=adr-auth-footer",target:"_blank"},"MIT License"))))))))}}var ga=ha;class pa extends l.a.Component{constructor(...e){super(...e),this.getRoutes=e=>e.map((e,t)=>"/auth"===e.layout?l.a.createElement(o.b,{path:e.layout+e.path,component:e.component,key:t}):null)}componentDidMount(){document.body.classList.add("bg-default")}componentWillUnmount(){document.body.classList.remove("bg-default")}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"main-content"},l.a.createElement("div",{className:"header bg-gradient-info py-5 py-lg-5 mb-2"},l.a.createElement(c.a,null,l.a.createElement("div",{className:"header-body text-center mb-7"},l.a.createElement(q.a,{className:"justify-content-center"},l.a.createElement(P.a,{lg:"5",md:"6"},l.a.createElement("h1",{className:"text-white"},"DIKA ATTEND"),l.a.createElement("p",{className:"text-lead text-white"},"Selamat datang, silahkan login terlebih dahulu"))))),l.a.createElement("div",{className:"separator separator-bottom separator-skew zindex-100"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 2560 100",x:"0",y:"0"},l.a.createElement("polygon",{className:"fill-default",points:"2560 0 2560 100 0 100"})))),l.a.createElement(c.a,{className:"mt--8"},l.a.createElement(q.a,{className:"justify-content-center"},l.a.createElement(o.d,null,this.getRoutes(jt),l.a.createElement(o.a,{from:"*",to:"/auth/login"}))))),l.a.createElement(ga,null))}}var Ea=pa,ba=a(167);M.a.initialize(ba.APPLICATION_ID,ba.JAVASCRIPT_KEY,ba.MASTER_KEY),M.a.serverURL=ba.SERVER_URL,M.a.masterKey=ba.MASTER_KEY,r.a.render(l.a.createElement(i.a,null,l.a.createElement(o.d,null,l.a.createElement(o.b,{path:"/".concat(window.localStorage.getItem("roles")),render:e=>N()?l.a.createElement(ua,e):l.a.createElement(o.a,{to:"/auth"})}),l.a.createElement(o.b,{path:"/auth",render:e=>N()?l.a.createElement(o.a,{to:"/".concat(window.localStorage.getItem("roles"),"/index")}):l.a.createElement(Ea,e)}),null===localStorage.getItem("roles")?l.a.createElement(o.a,{from:"/",to:"/auth/login"}):l.a.createElement(o.a,{from:"/",to:"/".concat(localStorage.getItem("roles"),"/index")}))),document.getElementById("root"))},164:function(e,t,a){var s={"./blue-dot.png":1140,"./green-dot.png":1141,"./pink-dot.png":1142,"./purple-dot.png":1143,"./red-dot.png":1144,"./yellow-dot.png":1145};function l(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=n,e.exports=l,l.id=164},167:function(e,t){e.exports={APPLICATION_ID:"BWfDydXimKhzP1b7LAINxCxBlJEyPohGt2dlVYhD",JAVASCRIPT_KEY:"mYo1Zb2X3uEaichdFhxNCIqvZl7dGwKmaLUZXwtU",MASTER_KEY:"TBpInmYBYXVXmpMsorBKL6Sy9g1c4VvfSOQ0LZlR",SERVER_URL:"https://parseapi.back4app.com/"}},550:function(e,t,a){e.exports=a.p+"static/media/argon-react.f38ddea9.png"},563:function(e,t,a){e.exports=a(1246)},568:function(e,t,a){},570:function(e,t,a){},571:function(e,t,a){},77:function(e,t,a){const s=a(60);s.elements.Rectangle.prototype.draw=function(){var e,t,a,s,l,n,r,i=this._chart.ctx,o=this._view,c=o.borderWidth;if(o.horizontal?(e=o.base,t=o.x,a=o.y-o.height/2,s=o.y+o.height/2,l=t>e?1:-1,n=1,r=o.borderSkipped||"left"):(e=o.x-o.width/2,t=o.x+o.width/2,a=o.y,l=1,n=(s=o.base)>a?1:-1,r=o.borderSkipped||"bottom"),c){var m=Math.min(Math.abs(e-t),Math.abs(a-s)),d=(c=c>m?m:c)/2,u=e+("left"!==r?d*l:0),h=t+("right"!==r?-d*l:0),g=a+("top"!==r?d*n:0),p=s+("bottom"!==r?-d*n:0);u!==h&&(a=g,s=p),g!==p&&(e=u,t=h)}i.beginPath(),i.fillStyle=o.backgroundColor,i.strokeStyle=o.borderColor,i.lineWidth=c;var E=[[e,s],[e,a],[t,a],[t,s]],b=["bottom","left","top","right"].indexOf(r,0);function f(e){return E[(b+e)%4]}-1===b&&(b=0);var v=f(0);i.moveTo(v[0],v[1]);for(var y=1;y<4;y++){v=f(y);let e=y+1;4===e&&(e=0);let t=E[2][0]-E[1][0],a=E[0][1]-E[1][1],s=E[1][0],l=E[1][1];var S;(S=6)>a/2&&(S=a/2),S>t/2&&(S=t/2),i.moveTo(s+S,l),i.lineTo(s+t-S,l),i.quadraticCurveTo(s+t,l,s+t,l+S),i.lineTo(s+t,l+a-S),i.quadraticCurveTo(s+t,l+a,s+t-S,l+a),i.lineTo(s+S,l+a),i.quadraticCurveTo(s,l+a,s,l+a-S),i.lineTo(s,l+S),i.quadraticCurveTo(s,l,s+S,l)}i.fill(),c&&i.stroke()};var l="Open Sans",n={100:"#f6f9fc",200:"#e9ecef",300:"#dee2e6",400:"#ced4da",500:"#adb5bd",600:"#8898aa",700:"#525f7f",800:"#32325d",900:"#212529"},r={default:"#172b4d",primary:"#5e72e4",secondary:"#f4f5f7",info:"#11cdef",success:"#2dce89",danger:"#f5365c",warning:"#fb6340"},i="#FFFFFF",o="transparent";function c(){for(var e,t=["January","February","March","April","May","June","July","August","September","October","November","December"],a=new Date,s=[],l=6;l>0;l-=1)e=t[new Date(a.getFullYear(),a.getMonth()-l,1).getMonth()+1],s.push(e.substring(0,3));return s}let m={options:{scales:{yAxes:[{gridLines:{color:n[900],zeroLineColor:n[900]},ticks:{callback:function(e){if(!(e%10))return e+"%"}}}]},tooltips:{callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].label||"",s=e.yLabel,l="";return t.datasets.length>1&&(l+=a),l+=s+"%"}}}},data1:e=>({labels:c(),datasets:[{label:"Performance",data:[0,20,10,30,15,100]}]}),data2:e=>({labels:c(),datasets:[{label:"Performance",data:[0,20,5,25,10,30,15,40,40]}]})},d={options:{scales:{yAxes:[{ticks:{callback:function(e){if(!(e%10))return e}}}]},tooltips:{callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].label||"",s=e.yLabel,l="";return t.datasets.length>1&&(l+=a),l+=s}}}},data:{labels:c(),datasets:[{label:"Sales",data:[25,20,30,22,17,29],maxBarThickness:10}]}};e.exports={chartOptions:function(){var e={defaults:{global:{responsive:!0,maintainAspectRatio:!1,defaultColor:n[600],defaultFontColor:n[600],defaultFontFamily:l,defaultFontSize:13,layout:{padding:0},legend:{display:!1,position:"bottom",labels:{usePointStyle:!0,padding:16}},elements:{point:{radius:0,backgroundColor:r.primary},line:{tension:.4,borderWidth:4,borderColor:r.primary,backgroundColor:o,borderCapStyle:"rounded"},rectangle:{backgroundColor:r.warning},arc:{backgroundColor:r.primary,borderColor:i,borderWidth:4}},tooltips:{enabled:!0,mode:"index",intersect:!1}},doughnut:{cutoutPercentage:83,legendCallback:function(e){var t=e.data,a="";return t.labels.forEach((function(e,s){var l=t.datasets[0].backgroundColor[s];a+='<span class="chart-legend-item">',a+='<i class="chart-legend-indicator" style="background-color: '+l+'"></i>',a+=e,a+="</span>"})),a}}}};return s.scaleService.updateScaleDefaults("linear",{gridLines:{borderDash:[2],borderDashOffset:[2],color:n[300],drawBorder:!1,drawTicks:!1,lineWidth:0,zeroLineWidth:0,zeroLineColor:n[300],zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2]},ticks:{beginAtZero:!0,padding:10,callback:function(e){if(!(e%10))return e}}}),s.scaleService.updateScaleDefaults("category",{gridLines:{drawBorder:!1,drawOnChartArea:!1,drawTicks:!1},ticks:{padding:20}}),e},parseOptions:function e(t,a){for(var s in a)"object"!==typeof a[s]?t[s]=a[s]:e(t[s],a[s])},chartExample1:m,chartExample2:d}},797:function(e,t){},799:function(e,t){},809:function(e,t){},811:function(e,t){},838:function(e,t){},840:function(e,t){},841:function(e,t){},846:function(e,t){},848:function(e,t){},855:function(e,t){},857:function(e,t){},875:function(e,t){},878:function(e,t){},894:function(e,t){},897:function(e,t){}},[[563,1,2]]]);
//# sourceMappingURL=main.f5339103.chunk.js.map